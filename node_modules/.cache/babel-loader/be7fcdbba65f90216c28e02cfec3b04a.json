{"remainingRequest":"C:\\WebProjects\\Web-csp\\web-csp\\node_modules\\thread-loader\\dist\\cjs.js!C:\\WebProjects\\Web-csp\\web-csp\\node_modules\\babel-loader\\lib\\index.js!C:\\WebProjects\\Web-csp\\web-csp\\src\\store\\index.js","dependencies":[{"path":"C:\\WebProjects\\Web-csp\\web-csp\\src\\store\\index.js","mtime":1601337882858},{"path":"C:\\WebProjects\\Web-csp\\web-csp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1598308836458},{"path":"C:\\WebProjects\\Web-csp\\web-csp\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1598308878902},{"path":"C:\\WebProjects\\Web-csp\\web-csp\\node_modules\\babel-loader\\lib\\index.js","mtime":1598308833927}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudmFsdWVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1dlYlByb2plY3RzL1dlYi1jc3Avd2ViLWNzcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IFZ1ZXggZnJvbSAndnVleCc7CmltcG9ydCBmaXJlYmFzZSwgeyBhdXRoIH0gZnJvbSAnZmlyZWJhc2UnOwppbXBvcnQgeyBkYXRhIH0gZnJvbSAnanF1ZXJ5JzsKVnVlLnVzZShWdWV4KTsKZXhwb3J0IGRlZmF1bHQgbmV3IFZ1ZXguU3RvcmUoewogIHN0YXRlOiB7CiAgICBzZWNUaXRsZTogJ0Rhc2hib2FyZCcsCiAgICBzdWNjZXNzVXBsb2FkOiBudWxsLAogICAgY2FyZ2FyREI6IGZhbHNlLAogICAgY3JlYXJEQlZhbHM6IGZhbHNlLAogICAgZXJyb3JVcGxvYWQ6IG51bGwsCiAgICBkZWxldGluZ1ZhbDogbnVsbCwKICAgIGxvYWRFZGl0OiBmYWxzZSwKICAgIGRlbGV0aW5nSW5kZXg6ICcnLAogICAgYWN0VXNlcjogbnVsbCwKICAgIGRiV2ViOiBbXSwKICAgIGRwUmVzcG9uc2l2ZTogZmFsc2UsCiAgICBoZWFkZXJWaWV3OiAwLAogICAgZm9ybXRpcG86IDAsCiAgICB1c2VyOiB7CiAgICAgIGFjdGl2bzogJycsCiAgICAgIGFwZWxsaWRvOiAnJywKICAgICAgYXV0b3JpOiAnJywKICAgICAgY2FyZ286ICcnLAogICAgICBjb3JyZW86ICcnLAogICAgICBjb3JyZW9WZXJpOiAnJywKICAgICAgZm90b1VybDogJycsCiAgICAgIGlkOiAnJywKICAgICAgbm9tYnJlOiAnJywKICAgICAgdGVsZWZvbm86ICcnLAogICAgICBhY2Npb246ICcnCiAgICB9LAogICAgcmVmVXNlcjoge30sCiAgICBjcmVhdGVDb250ZW50OiB7CiAgICAgIGZvcm1VcGxvYWQ6IHsKICAgICAgICB0aXR1bG86ICcnLAogICAgICAgIGluZm86ICcnLAogICAgICAgIHByZXY6ICcnLAogICAgICAgIGZlY2hhOiAnJywKICAgICAgICBpZDogJycsCiAgICAgICAgc2VjY2lvbjogJ1NlbGVjY2lvbmUgdW5hIG9wY2nDs24nLAogICAgICAgIGltYWdlczogW10sCiAgICAgICAgdGlwbzogZmFsc2UKICAgICAgfQogICAgfSwKICAgIGVkaXRDb250ZW50OiB7CiAgICAgIGZvcm1VcGxvYWQ6IHsKICAgICAgICB0aXR1bG86ICcnLAogICAgICAgIGluZm86ICcnLAogICAgICAgIHByZXY6ICcnLAogICAgICAgIGZlY2hhOiAnJywKICAgICAgICBpZDogJycsCiAgICAgICAgc2VjY2lvbjogJycsCiAgICAgICAgaW1hZ2VzOiBbXSwKICAgICAgICB0aXBvOiBmYWxzZSwKICAgICAgICB1cGxvYWRJbWFnZXM6IGZhbHNlLAogICAgICAgIHVwbG9hZERhdGFCYXNlOiBmYWxzZQogICAgICB9CiAgICB9LAogICAgdXNlcnM6IHsKICAgICAgdXNlclJlZmVyOiBmYWxzZSwKICAgICAgY3JlYXRlVXNlcjogewogICAgICAgIGZvcm1VcGxvYWQ6IHsKICAgICAgICAgIGFjdGl2bzogJycsCiAgICAgICAgICBhcGVsbGlkbzogJycsCiAgICAgICAgICBjYXJnbzogJycsCiAgICAgICAgICBjb3JyZW86ICcnLAogICAgICAgICAgY29ycmVvVmVyaTogJycsCiAgICAgICAgICBmb3RvVXJsOiAnJywKICAgICAgICAgIGlkOiAnJywKICAgICAgICAgIG5vbWJyZTogJycsCiAgICAgICAgICB0ZWxlZm9ubzogJycsCiAgICAgICAgICBjcmVhdGU6IGZhbHNlLAogICAgICAgICAgcGFzczogJycKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBkZWxldGVDb250ZW50OiB7CiAgICAgIGZvcm1VcGxvYWQ6IHsKICAgICAgICBpZDogJycsCiAgICAgICAgdGlwbzogZmFsc2UKICAgICAgfQogICAgfSwKICAgIGRiSW1nOiBbXQogIH0sCiAgbXV0YXRpb25zOiB7CiAgICBkYXRhV2ViOiBmdW5jdGlvbiBkYXRhV2ViKHN0YXRlLCBiYXNlRGF0b3MpIHsKICAgICAgc3RhdGUuZGJXZWIgPSBiYXNlRGF0b3NbMF07CgogICAgICBpZiAoYmFzZURhdG9zWzFdICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBiYXNlRGF0b3NbMV0gPSB0cnVlOwogICAgICB9CiAgICB9LAogICAgY2hhbmdlU2VjVGl0bGU6IGZ1bmN0aW9uIGNoYW5nZVNlY1RpdGxlKHN0YXRlLCB2YWx1ZSkgewogICAgICBzdGF0ZS5zZWNUaXRsZSA9IHZhbHVlOwogICAgfSwKICAgIHNldFVzZXI6IGZ1bmN0aW9uIHNldFVzZXIoc3RhdGUsIHVzZXIpIHsKICAgICAgc3RhdGUudXNlcnMudXNlclJlZmVyID0gZmFsc2U7CiAgICAgIHN0YXRlLnVzZXIgPSB7CiAgICAgICAgYWN0aXZvOiB1c2VyLmFjdGl2bywKICAgICAgICBhcGVsbGlkbzogdXNlci5hcGVsbGlkbywKICAgICAgICBhdXRvcmk6IHVzZXIuYXV0b3JpLAogICAgICAgIGNhcmdvOiB1c2VyLmNhcmdvLAogICAgICAgIGNvcnJlbzogdXNlci5jb3JyZW8sCiAgICAgICAgY29ycmVvVmVyaTogdXNlci5jb3JyZW9WZXJpLAogICAgICAgIGZvdG9Vcmw6IHVzZXIuZm90b1VybCwKICAgICAgICBpZDogdXNlci5pZCwKICAgICAgICBub21icmU6IHVzZXIubm9tYnJlLAogICAgICAgIHRlbGVmb25vOiB1c2VyLnRlbGVmb25vLAogICAgICAgIGFjY2lvbjogdXNlci5hY2Npb24KICAgICAgfTsKICAgICAgc3RhdGUucmVmVXNlciA9IHsKICAgICAgICBhY3Rpdm86IHVzZXIuYWN0aXZvLAogICAgICAgIGFwZWxsaWRvOiB1c2VyLmFwZWxsaWRvLAogICAgICAgIGF1dG9yaTogdXNlci5hdXRvcmksCiAgICAgICAgY2FyZ286IHVzZXIuY2FyZ28sCiAgICAgICAgY29ycmVvOiB1c2VyLmNvcnJlbywKICAgICAgICBjb3JyZW9WZXJpOiB1c2VyLmNvcnJlb1ZlcmksCiAgICAgICAgZm90b1VybDogdXNlci5mb3RvVXJsLAogICAgICAgIGlkOiB1c2VyLmlkLAogICAgICAgIG5vbWJyZTogdXNlci5ub21icmUsCiAgICAgICAgdGVsZWZvbm86IHVzZXIudGVsZWZvbm8sCiAgICAgICAgYWNjaW9uOiB1c2VyLmFjY2lvbgogICAgICB9OwogICAgfSwKICAgIGRiVXNlclZhbDogZnVuY3Rpb24gZGJVc2VyVmFsKHN0YXRlLCB2YWx1ZSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIHZhbHVlc1JlZiA9IHsKICAgICAgICB1c2VyX2FjdGl2bzogdHJ1ZSwKICAgICAgICB1c2VyX2FwZWxsaWRvOiB2YWx1ZS5hcGVsbGlkbywKICAgICAgICB1c2VyX2F1dG9yaTogdmFsdWUuYXV0b3JpLAogICAgICAgIHVzZXJfY2FyZ286IHZhbHVlLmNhcmdvLAogICAgICAgIHVzZXJfY29ycmVvOiB2YWx1ZS5jb3JyZW8sCiAgICAgICAgdXNlcl9jb3JyZW9WZXJpOiB2YWx1ZS5jb3JyZW9WZXJpLAogICAgICAgIHVzZXJfZm90b1VybDogIiIuY29uY2F0KHZhbHVlLmZvdG9VcmwpLAogICAgICAgIHVzZXJfaWQ6IHZhbHVlLmlkLAogICAgICAgIHVzZXJfbm9tYnJlOiB2YWx1ZS5ub21icmUsCiAgICAgICAgdXNlcl90ZWxlZm9ubzogIiIuY29uY2F0KHZhbHVlLnRlbGVmb25vKSwKICAgICAgICB1c2VyX2FjY2lvbjogIiIuY29uY2F0KHZhbHVlLmFjY2lvbikKICAgICAgfTsKICAgICAgdmFyIGRiUmVmID0gZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoJ1VzdWFyaW9zJyk7CiAgICAgIGRiUmVmLmNoaWxkKHZhbHVlc1JlZi51c2VyX2lkKS5zZXQodmFsdWVzUmVmKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpcy5jb21taXQoJ3NldFVzZXInLCBPYmplY3QudmFsdWVzKHZhbHVlc1JlZikpOwogICAgICB9KTsKICAgIH0sCiAgICBjcmVhdGVVc2VyOiBmdW5jdGlvbiBjcmVhdGVVc2VyKHN0YXRlLCB2YWx1ZSkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHN0YXRlLnVzZXJzLnVzZXJSZWZlciA9IHRydWU7CiAgICAgIHZhciBjb25maWcgPSB7CiAgICAgICAgYXBpS2V5OiAiQUl6YVN5Q3BzTlZ0c0FDQ2VTLWFtTnByR1VoMHZHT0UtU0Q5eTVRIiwKICAgICAgICBhdXRoRG9tYWluOiAid2ViLWRhdGFiYXNlLTY2ODQyLmZpcmViYXNlYXBwLmNvbSIsCiAgICAgICAgZGF0YWJhc2VVUkw6ICJodHRwczovL3dlYi1kYXRhYmFzZS02Njg0Mi5maXJlYmFzZWlvLmNvbSIKICAgICAgfTsKICAgICAgdmFyIHNlY29uZGFyeUFwcCA9IGZpcmViYXNlLmluaXRpYWxpemVBcHAoY29uZmlnLCAiU2Vjb25kYXJ5Iik7CiAgICAgIHNlY29uZGFyeUFwcC5hdXRoKCkuY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkKHN0YXRlLnVzZXJzLmNyZWF0ZVVzZXIuZm9ybVVwbG9hZC5jb3JyZW8sIHN0YXRlLnVzZXJzLmNyZWF0ZVVzZXIuZm9ybVVwbG9hZC5wYXNzKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7CiAgICAgICAgdmFyIHZhbHVlc1JlZiA9IHsKICAgICAgICAgIGNvcnJlbzogdXNlci51c2VyLmVtYWlsLAogICAgICAgICAgY29ycmVvVmVyaTogdXNlci51c2VyLmVtYWlsVmVyaWZpZWQsCiAgICAgICAgICBub21icmU6IHVzZXIudXNlci5kaXNwbGF5TmFtZSwKICAgICAgICAgIGFwZWxsaWRvOiAnJywKICAgICAgICAgIGF1dG9yaTogJycsCiAgICAgICAgICBmb3RvVXJsOiAnJywKICAgICAgICAgIHRlbGVmb25vOiAnJywKICAgICAgICAgIGNhcmdvOiAnJywKICAgICAgICAgIGlkOiB1c2VyLnVzZXIudWlkLAogICAgICAgICAgYWN0aXZvOiAnJywKICAgICAgICAgIGFjY2lvbjogJycKICAgICAgICB9OwogICAgICAgIHNlY29uZGFyeUFwcC5hdXRoKCkuc2lnbk91dCgpOwogICAgICAgIHNlY29uZGFyeUFwcC5kZWxldGUoKTsKICAgICAgICB2YXIgc3VjY2VzcyA9IHsKICAgICAgICAgIDA6ICdzdWNjZXNzVXBsb2FkJywKICAgICAgICAgIDE6ICdTZSBoYSBjcmVhZG8gZXhpdG9zYW1lbnRlJwogICAgICAgIH07CgogICAgICAgIF90aGlzMi5jb21taXQoJ3N1Y2Nlc3NBZHZpc2UnLCBzdWNjZXNzKTsKCiAgICAgICAgdmFyIHZhbHVlc0RiID0gewogICAgICAgICAgdXNlcl9jb3JyZW86IHVzZXIudXNlci5lbWFpbCwKICAgICAgICAgIHVzZXJfY29ycmVvVmVyaTogdXNlci51c2VyLmVtYWlsVmVyaWZpZWQsCiAgICAgICAgICB1c2VyX25vbWJyZTogdXNlci51c2VyLmRpc3BsYXlOYW1lLAogICAgICAgICAgdXNlcl9hcGVsbGlkbzogJycsCiAgICAgICAgICB1c2VyX2F1dG9yaTogJycsCiAgICAgICAgICB1c2VyX2ZvdG9Vcmw6ICcnLAogICAgICAgICAgdXNlcl90ZWxlZm9ubzogJycsCiAgICAgICAgICB1c2VyX2NhcmdvOiAnJywKICAgICAgICAgIHVzZXJfaWQ6IHVzZXIudXNlci51aWQsCiAgICAgICAgICB1c2VyX2FjdGl2bzogJycsCiAgICAgICAgICB1c2VyX2FjY2lvbjogJycKICAgICAgICB9OwoKICAgICAgICBfdGhpczIuY29tbWl0KCdkYlVzZXJWYWwnLCB2YWx1ZXNSZWYpOwoKICAgICAgICBzdGF0ZS5kYldlYi5Vc3Vhcmlvc1siIi5jb25jYXQodmFsdWVzRGIuaWQpXSA9IHZhbHVlc0RiOwogICAgICAgIGNvbnNvbGUubG9nKE9iamVjdC52YWx1ZXMoc3RhdGUuZGJXZWIuVXN1YXJpb3MpKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIHN0YXRlLnVzZXJzLnVzZXJSZWZlciA9IGZhbHNlOwogICAgICAgIHNlY29uZGFyeUFwcC5kZWxldGUoKTsKCiAgICAgICAgaWYgKGVyci5tZXNzYWdlID09PSAnVGhlIGVtYWlsIGFkZHJlc3MgaXMgYWxyZWFkeSBpbiB1c2UgYnkgYW5vdGhlciBhY2NvdW50LicpIHsKICAgICAgICAgIHZhciBzdWNjZXNzID0gewogICAgICAgICAgICAwOiAnZXJyb3JVcGxvYWQnLAogICAgICAgICAgICAxOiAnRWwgY29ycmVvIHlhIGVzdMOhIGVuIHVzbycKICAgICAgICAgIH07CgogICAgICAgICAgX3RoaXMyLmNvbW1pdCgnc3VjY2Vzc0FkdmlzZScsIHN1Y2Nlc3MpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgdXBkYXRlVXNlcjogZnVuY3Rpb24gdXBkYXRlVXNlcihzdGF0ZSwgdmFsdWUpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICBpZiAodmFsdWUudGlwbyA9PT0gJzEnKSB7CiAgICAgICAgdmFyIHZhbHVlc1JlZiA9IHsKICAgICAgICAgIHVzZXJfaWQ6IHZhbHVlLmlkLAogICAgICAgICAgdXNlcl9jb3JyZW86IHZhbHVlLmNvcnJlbywKICAgICAgICAgIHVzZXJfY29ycmVvVmVyaTogdmFsdWUuY29ycmVvVmVyaSwKICAgICAgICAgIHVzZXJfYWNjaW9uOiB2YWx1ZS5hY2Npb24sCiAgICAgICAgICB1c2VyX3RlbGVmb25vOiB2YWx1ZS50ZWxlZm9ubywKICAgICAgICAgIHVzZXJfbm9tYnJlOiB2YWx1ZS5ub21icmUsCiAgICAgICAgICB1c2VyX2FwZWxsaWRvOiB2YWx1ZS5hcGVsbGlkbywKICAgICAgICAgIHVzZXJfYWN0aXZvOiB2YWx1ZS5hY3Rpdm8sCiAgICAgICAgICB1c2VyX2ZvdG9Vcmw6IHZhbHVlLmZvdG9VcmwsCiAgICAgICAgICB1c2VyX2F1dG9yaTogdmFsdWUuYXV0b3JpLAogICAgICAgICAgdXNlcl9jYXJnbzogdmFsdWUuY2FyZ28KICAgICAgICB9OwogICAgICAgIHZhciBkYlJlZiA9IGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKCdVc3VhcmlvcycpOwogICAgICAgIGRiUmVmLmNoaWxkKHZhbHVlc1JlZi51c2VyX2lkKS5zZXQodmFsdWVzUmVmKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIC8vIEFxdWkgZGVibyBwb25lciBwYXJhIHF1aXRhciBlbCBjYXJnYWRvcgogICAgICAgICAgX3RoaXMzLmNvbW1pdCgnc2V0VXNlcicsIHZhbHVlKTsKCiAgICAgICAgICBzdGF0ZS5hY3RVc2VyID0gbnVsbDsKICAgICAgICAgIHZhciBzdWNjZXNzID0gewogICAgICAgICAgICAwOiAnc3VjY2Vzc1VwbG9hZCcsCiAgICAgICAgICAgIDE6ICdTZSBoYSBhY3R1YWxpemFkbyBleGl0b3NhbWVudGUnCiAgICAgICAgICB9OwoKICAgICAgICAgIF90aGlzMy5jb21taXQoJ3N1Y2Nlc3NBZHZpc2UnLCBzdWNjZXNzKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgdXNlciA9IGZpcmViYXNlLmF1dGgoKS5jdXJyZW50VXNlcjsKCiAgICAgICAgaWYgKHVzZXIpIHsKICAgICAgICAgIC8vIEFxdWkgZGVibyBwb25lciBlbCBhY3RpdmFkb3IgcGFyYSBlbCBjYXJnYWRvcgogICAgICAgICAgdXNlci51cGRhdGVQcm9maWxlKHsKICAgICAgICAgICAgZGlzcGxheU5hbWU6IHZhbHVlLm5vbWJyZSwKICAgICAgICAgICAgZW1haWw6IHZhbHVlLmNvcnJlbywKICAgICAgICAgICAgcGhvbmVOdW1iZXI6IHZhbHVlLnRlbGVmb25vCiAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHZhbHVlc1JlZiA9IHsKICAgICAgICAgICAgICB1c2VyX2NvcnJlbzogdmFsdWUuY29ycmVvLAogICAgICAgICAgICAgIHVzZXJfY29ycmVvVmVyaTogdmFsdWUuY29ycmVvVmVyaSwKICAgICAgICAgICAgICB1c2VyX25vbWJyZTogdmFsdWUubm9tYnJlLAogICAgICAgICAgICAgIHVzZXJfYXBlbGxpZG86IHZhbHVlLmFwZWxsaWRvLAogICAgICAgICAgICAgIHVzZXJfYXV0b3JpOiB2YWx1ZS5hdXRvcmksCiAgICAgICAgICAgICAgdXNlcl9mb3RvVXJsOiB2YWx1ZS5mb3RvVXJsLAogICAgICAgICAgICAgIHVzZXJfdGVsZWZvbm86IHZhbHVlLnRlbGVmb25vLAogICAgICAgICAgICAgIHVzZXJfY2FyZ286IHZhbHVlLmNhcmdvLAogICAgICAgICAgICAgIHVzZXJfaWQ6IHZhbHVlLmlkLAogICAgICAgICAgICAgIHVzZXJfYWN0aXZvOiB2YWx1ZS5hY3Rpdm8sCiAgICAgICAgICAgICAgdXNlcl9hY2Npb246IHZhbHVlLmFjY2lvbgogICAgICAgICAgICB9OwogICAgICAgICAgICB2YXIgZGJSZWYgPSBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZignVXN1YXJpb3MnKTsKICAgICAgICAgICAgZGJSZWYuY2hpbGQodmFsdWUuaWQpLnNldCh2YWx1ZXNSZWYpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIC8vIEFxdWkgZGVibyBwb25lciBwYXJhIHF1aXRhciBlbCBjYXJnYWRvcgogICAgICAgICAgICAgIF90aGlzMy5jb21taXQoJ3NldFVzZXInLCB2YWx1ZSk7CgogICAgICAgICAgICAgIHN0YXRlLmFjdFVzZXIgPSBudWxsOwogICAgICAgICAgICAgIHZhciBzdWNjZXNzID0gewogICAgICAgICAgICAgICAgMDogJ3N1Y2Nlc3NVcGxvYWQnLAogICAgICAgICAgICAgICAgMTogJ1NlIGhhIGFjdHVhbGl6YWRvIGV4aXRvc2FtZW50ZScKICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICBfdGhpczMuY29tbWl0KCdzdWNjZXNzQWR2aXNlJywgc3VjY2Vzcyk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgaXNVc2VyRGlmZjogZnVuY3Rpb24gaXNVc2VyRGlmZihzdGF0ZSwgdmFsdWUpIHsKICAgICAgaWYgKHZhbHVlLnRpcG8gPT09ICcwJykgewogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgT2JqZWN0LnZhbHVlcyhzdGF0ZS51c2VyKS5sZW5ndGg7IGkrKykgewogICAgICAgICAgaWYgKE9iamVjdC52YWx1ZXMoc3RhdGUudXNlcilbaV0gIT09IE9iamVjdC52YWx1ZXMoc3RhdGUucmVmVXNlcilbaV0pIHsKICAgICAgICAgICAgc3RhdGUuYWN0VXNlciA9IHRydWU7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbW1pdCgndXBkYXRlVXNlcicsIHN0YXRlLnVzZXIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBzdGF0ZS5hY3RVc2VyID0gdHJ1ZTsKICAgICAgICB0aGlzLmNvbW1pdCgndXBkYXRlVXNlcicsIHZhbHVlKTsKICAgICAgfQogICAgfSwKICAgIGRlbGV0ZUl0ZW06IGZ1bmN0aW9uIGRlbGV0ZUl0ZW0oc3RhdGUsIHZhbHVlKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgc3RhdGUuZGVsZXRpbmdWYWwgPSB0cnVlOwogICAgICBzdGF0ZS5kZWxldGluZ0luZGV4ID0gdmFsdWUuaW5kZXg7CgogICAgICBpZiAodmFsdWUuc3RvcmFnZSA9PT0gZmFsc2UpIHsKICAgICAgICBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZigiIi5jb25jYXQodmFsdWUucmVmLCAiLyIpLmNvbmNhdCh2YWx1ZS5pZERiKSkucmVtb3ZlKCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICBzdGF0ZS5kZWxldGluZ1ZhbCA9IGZhbHNlOwogICAgICAgICAgc3RhdGUuZGVsZXRpbmdJbmRleCA9ICcnOwogICAgICAgICAgdmFyIHN1Y2Nlc3MgPSB7CiAgICAgICAgICAgIDA6ICdzdWNjZXNzVXBsb2FkJywKICAgICAgICAgICAgMTogJ1NlIGhhIGVsaW1pbmFkbyBleGl0b3NhbWVudGUnCiAgICAgICAgICB9OwoKICAgICAgICAgIF90aGlzNC5jb21taXQoJ3N1Y2Nlc3NBZHZpc2UnLCBzdWNjZXNzKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmICh2YWx1ZS5zdG9yYWdlID09PSB0cnVlKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHZhciBzdG9yYWdlUmVmID0gZmlyZWJhc2Uuc3RvcmFnZSgpLnJlZigiL2ltYWdlbmVzLyIuY29uY2F0KHZhbHVlLnJlZiwgIi8iKS5jb25jYXQodmFsdWUuaWRTdCkpOwogICAgICAgICAgc3RvcmFnZVJlZi5saXN0QWxsKCkudGhlbihmdW5jdGlvbiAocHJvbSkgewogICAgICAgICAgICBjb25zb2xlLmxvZyhwcm9tKTsKCiAgICAgICAgICAgIGlmIChwcm9tLml0ZW1zLmxlbmd0aCAhPT0gMCkgewogICAgICAgICAgICAgIHByb20uaXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgICAgICAgc3RvcmFnZVJlZi5jaGlsZChlbGVtZW50Lm5hbWUpLmRlbGV0ZSgpLnRoZW4oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgICAgICBpZiAoZXJyICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKCIiLmNvbmNhdCh2YWx1ZS5yZWYsICIvIikuY29uY2F0KHZhbHVlLmlkRGIpKS5yZW1vdmUoKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLmRlbGV0aW5nVmFsID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5kZWxldGluZ0luZGV4ID0gJyc7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgc3VjY2VzcyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgMDogJ3N1Y2Nlc3NVcGxvYWQnLAogICAgICAgICAgICAgICAgICAgICAgICAxOiAnU2UgaGEgZWxpbWluYWRvIGV4aXRvc2FtZW50ZScKICAgICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgICAgX3RoaXM0LmNvbW1pdCgnc3VjY2Vzc0FkdmlzZScsIHN1Y2Nlc3MpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZigiIi5jb25jYXQodmFsdWUucmVmLCAiLyIpLmNvbmNhdCh2YWx1ZS5pZERiKSkucmVtb3ZlKCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBzdGF0ZS5kZWxldGluZ1ZhbCA9IGZhbHNlOwogICAgICAgICAgICAgICAgc3RhdGUuZGVsZXRpbmdJbmRleCA9ICcnOwogICAgICAgICAgICAgICAgdmFyIHN1Y2Nlc3MgPSB7CiAgICAgICAgICAgICAgICAgIDA6ICdzdWNjZXNzVXBsb2FkJywKICAgICAgICAgICAgICAgICAgMTogJ1NlIGhhIGVsaW1pbmFkbyBleGl0b3NhbWVudGUnCiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIF90aGlzNC5jb21taXQoJ3N1Y2Nlc3NBZHZpc2UnLCBzdWNjZXNzKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGRlbGV0ZWRFbDogZnVuY3Rpb24gZGVsZXRlZEVsKHN0YXRlLCB2YWx1ZSkgewogICAgICBpZiAodmFsdWVbMF0gPT09IDApIHsKICAgICAgICBzdGF0ZS5kZWxldGluZ1ZhbCA9IHZhbHVlWzFdOwogICAgICB9CgogICAgICBpZiAodmFsdWVbMF0gPT09IDEpIHsKICAgICAgICBzdGF0ZS5kZWxldGluZ0luZGV4ID0gdmFsdWVbMV07CiAgICAgIH0KICAgIH0sCiAgICByZXNldENvbnRlbnRWYWx1ZXM6IGZ1bmN0aW9uIHJlc2V0Q29udGVudFZhbHVlcyhzdGF0ZSwgdmFsKSB7CiAgICAgIGlmICh2YWwgPT09IDApIHsKICAgICAgICBzdGF0ZS5jcmVhdGVDb250ZW50LmZvcm1VcGxvYWQudGl0dWxvID0gJyc7CiAgICAgICAgc3RhdGUuY3JlYXRlQ29udGVudC5mb3JtVXBsb2FkLmluZm8gPSAnJzsKICAgICAgICBzdGF0ZS5jcmVhdGVDb250ZW50LmZvcm1VcGxvYWQucHJldiA9ICcnOwogICAgICAgIHN0YXRlLmNyZWF0ZUNvbnRlbnQuZm9ybVVwbG9hZC5pbWFnZXMgPSBbXTsKICAgICAgICBzdGF0ZS5jcmVhdGVDb250ZW50LmZvcm1VcGxvYWQuZmVjaGEgPSAnJzsKICAgICAgICBzdGF0ZS5jcmVhdGVDb250ZW50LmZvcm1VcGxvYWQuaWQgPSAnJzsKICAgICAgICBzdGF0ZS5jcmVhdGVDb250ZW50LmZvcm1VcGxvYWQuc2VjY2lvbiA9ICdTZWxlY2Npb25lIHVuYSBvcGNpw7NuJzsKICAgICAgfSBlbHNlIGlmICh2YWwgPT09IDEpIHsKICAgICAgICBzdGF0ZS5lZGl0Q29udGVudC5mb3JtVXBsb2FkLnRpdHVsbyA9ICcnOwogICAgICAgIHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQuaW5mbyA9ICcnOwogICAgICAgIHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQucHJldiA9ICcnOwogICAgICAgIHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQuaW1hZ2VzID0gW107CiAgICAgICAgc3RhdGUuZWRpdENvbnRlbnQuZm9ybVVwbG9hZC5mZWNoYSA9ICcnOwogICAgICAgIHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQuaWQgPSAnJzsKICAgICAgICBzdGF0ZS5lZGl0Q29udGVudC5mb3JtVXBsb2FkLnNlY2Npb24gPSAnVG9kYXMgbGFzIHNlY2Npb25lcyc7CiAgICAgIH0gZWxzZSBpZiAodmFsID09PSAzKSB7CiAgICAgICAgc3RhdGUudXNlcnMgPSB7CiAgICAgICAgICB1c2VyUmVmZXI6IGZhbHNlLAogICAgICAgICAgY3JlYXRlVXNlcjogewogICAgICAgICAgICBmb3JtVXBsb2FkOiB7CiAgICAgICAgICAgICAgYWN0aXZvOiAnJywKICAgICAgICAgICAgICBhcGVsbGlkbzogJycsCiAgICAgICAgICAgICAgY2FyZ286ICcnLAogICAgICAgICAgICAgIGNvcnJlbzogJycsCiAgICAgICAgICAgICAgY29ycmVvVmVyaTogJycsCiAgICAgICAgICAgICAgZm90b1VybDogJycsCiAgICAgICAgICAgICAgaWQ6ICcnLAogICAgICAgICAgICAgIG5vbWJyZTogJycsCiAgICAgICAgICAgICAgdGVsZWZvbm86ICcnLAogICAgICAgICAgICAgIGNyZWF0ZTogZmFsc2UsCiAgICAgICAgICAgICAgcGFzczogJycKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0KICAgIH0sCiAgICBzdWNjZXNzQWR2aXNlOiBmdW5jdGlvbiBzdWNjZXNzQWR2aXNlKHN0YXRlLCBkYXRhKSB7CiAgICAgIHN0YXRlWyIiLmNvbmNhdChkYXRhWzBdKV0gPSBkYXRhWzFdOwogICAgfSwKICAgIGhhbmRsZVVwbG9hZDogZnVuY3Rpb24gaGFuZGxlVXBsb2FkKHN0YXRlLCBmaWxlcykgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIHZhciBzdG9yYWdlUmVmID0gW107CiAgICAgIHZhciBwZXJjZW50YWdlID0gW107CiAgICAgIHZhciBvcmRlciA9IFtdOwogICAgICB2YXIgdGFzayA9IHt9OwogICAgICB2YXIgaSA9IDA7CiAgICAgIHZhciBqID0gMDsKICAgICAgdmFyIG0gPSAwOwogICAgICB2YXIgbiA9IDA7CgogICAgICBpZiAoc3RhdGUuY3JlYXRlQ29udGVudC5mb3JtVXBsb2FkLnRpcG8gPT09IHRydWUpIHsKICAgICAgICBmaWxlcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICBzdG9yYWdlUmVmID0gZmlyZWJhc2Uuc3RvcmFnZSgpLnJlZigiL2ltYWdlbmVzL25vdGljaWFzLyIuY29uY2F0KHN0YXRlLmNyZWF0ZUNvbnRlbnQuZm9ybVVwbG9hZC5pZCwgIi9mb3RvIikuY29uY2F0KGVsZW1lbnQuaWQpKTsKICAgICAgICAgIHRhc2tbaV0gPSBzdG9yYWdlUmVmLnB1dChlbGVtZW50KTsKICAgICAgICAgIGkrKzsKICAgICAgICB9KTsKCiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGZpbGVzLmxlbmd0aDsgX2krKykgewogICAgICAgICAgdGFza1tfaV0ub24oJ3N0YXRlX2NoYW5nZWQnLCBmdW5jdGlvbiAoc25hcHNob3QpIHsKICAgICAgICAgICAgcGVyY2VudGFnZVtzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkXSA9IHNuYXBzaG90LmJ5dGVzVHJhbnNmZXJyZWQgLyBzbmFwc2hvdC50b3RhbEJ5dGVzICogMTAwOwogICAgICAgICAgICBzdGF0ZS5jcmVhdGVDb250ZW50LmZvcm1VcGxvYWQuaW1hZ2VzW3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdLnVwbG9hZFBlcmNlbnRhZ2UgPSBwZXJjZW50YWdlW3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdOwogICAgICAgICAgICBtKys7CgogICAgICAgICAgICBpZiAoc3RhdGUuY3JlYXRlQ29udGVudC5mb3JtVXBsb2FkLmltYWdlc1tzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkXS51cGxvYWRQZXJjZW50YWdlID09PSAxMDAgJiYgb3JkZXIubGVuZ3RoIDwgZmlsZXMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgb3JkZXIucHVzaChzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLm1lc3NhZ2UpOwogICAgICAgICAgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgZGF0YVJlZiA9IHsKICAgICAgICAgICAgICBub3RpX3RpdHVsbzogc3RhdGUuY3JlYXRlQ29udGVudC5mb3JtVXBsb2FkLnRpdHVsbywKICAgICAgICAgICAgICBub3RpX2luZm86IHN0YXRlLmNyZWF0ZUNvbnRlbnQuZm9ybVVwbG9hZC5pbmZvLAogICAgICAgICAgICAgIG5vdGlfZmVjaGE6IHN0YXRlLmNyZWF0ZUNvbnRlbnQuZm9ybVVwbG9hZC5mZWNoYSwKICAgICAgICAgICAgICBub3RpX2lkOiBzdGF0ZS5jcmVhdGVDb250ZW50LmZvcm1VcGxvYWQuaWQsCiAgICAgICAgICAgICAgbm90aV9wcmV2OiBzdGF0ZS5jcmVhdGVDb250ZW50LmZvcm1VcGxvYWQucHJldiwKICAgICAgICAgICAgICBub3RpX3B1YmxpY2FyOiB0cnVlLAogICAgICAgICAgICAgIG5vdGlfc2VjY2lvbjogc3RhdGUuY3JlYXRlQ29udGVudC5mb3JtVXBsb2FkLnNlY2Npb24sCiAgICAgICAgICAgICAgbm90aV9pbWFnZW5lczogW10KICAgICAgICAgICAgfTsKICAgICAgICAgICAgdmFyIHN0b3JhZ2VSZWYgPSBmaXJlYmFzZS5zdG9yYWdlKCkucmVmKCIvaW1hZ2VuZXMvbm90aWNpYXMvIi5jb25jYXQoc3RhdGUuY3JlYXRlQ29udGVudC5mb3JtVXBsb2FkLmlkLCAiL2ZvdG8iKS5jb25jYXQob3JkZXJbal0pKTsKICAgICAgICAgICAgc3RvcmFnZVJlZi5nZXREb3dubG9hZFVSTCgpLnRoZW4oZnVuY3Rpb24gKHVybCkgewogICAgICAgICAgICAgIHZhciB2YWwgPSBvcmRlcltuXTsKICAgICAgICAgICAgICBzdGF0ZS5jcmVhdGVDb250ZW50LmZvcm1VcGxvYWQuaW1hZ2VzW3ZhbF0udXJsID0gdXJsOwogICAgICAgICAgICAgIHN0YXRlLmNyZWF0ZUNvbnRlbnQuZm9ybVVwbG9hZC5pbWFnZXNbdmFsXS5uYW1lID0gImZvdG8iLmNvbmNhdCh2YWwpOwogICAgICAgICAgICAgIG4rKzsKCiAgICAgICAgICAgICAgaWYgKG4gPj0gc3RhdGUuY3JlYXRlQ29udGVudC5mb3JtVXBsb2FkLmltYWdlcy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIG4gPSAwOwogICAgICAgICAgICAgICAgc3RhdGUuY3JlYXRlQ29udGVudC5mb3JtVXBsb2FkLmltYWdlcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICAgICAgICAgIGRhdGFSZWYubm90aV9pbWFnZW5lcy5wdXNoKHt9KTsKICAgICAgICAgICAgICAgICAgZGF0YVJlZi5ub3RpX2ltYWdlbmVzW25dLm5vbWJyZSA9IHN0YXRlLmNyZWF0ZUNvbnRlbnQuZm9ybVVwbG9hZC5pbWFnZXNbbl0ubmFtZTsKICAgICAgICAgICAgICAgICAgZGF0YVJlZi5ub3RpX2ltYWdlbmVzW25dLnVybCA9IHN0YXRlLmNyZWF0ZUNvbnRlbnQuZm9ybVVwbG9hZC5pbWFnZXNbbl0udXJsOwogICAgICAgICAgICAgICAgICBuKys7CgogICAgICAgICAgICAgICAgICBpZiAobiA+PSBzdGF0ZS5jcmVhdGVDb250ZW50LmZvcm1VcGxvYWQuaW1hZ2VzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIHZhciBkYlJlZiA9IGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKCdOb3RpY2lhcycpOwogICAgICAgICAgICAgICAgICAgIGRiUmVmLmNoaWxkKHN0YXRlLmNyZWF0ZUNvbnRlbnQuZm9ybVVwbG9hZC5pZCkuc2V0KGRhdGFSZWYpOwogICAgICAgICAgICAgICAgICAgIHN0YXRlLmNyZWF0ZUNvbnRlbnQuZm9ybVVwbG9hZC50aXBvID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgdmFyIHN1Y2Nlc3MgPSB7CiAgICAgICAgICAgICAgICAgICAgICAwOiAnc3VjY2Vzc1VwbG9hZCcsCiAgICAgICAgICAgICAgICAgICAgICAxOiAnU2UgaGEgY3JlYWRvIGV4aXRvc2FtZW50ZScKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICBfdGhpczUuY29tbWl0KCdzdWNjZXNzQWR2aXNlJywgc3VjY2Vzcyk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGorKzsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChzdGF0ZS5lZGl0Q29udGVudC5mb3JtVXBsb2FkLnRpcG8gPT09IHRydWUpIHsKICAgICAgICBpZiAoc3RhdGUuZWRpdENvbnRlbnQuZm9ybVVwbG9hZC51cGxvYWRJbWFnZXMgPT09IHRydWUpIHsKICAgICAgICAgIGZpbGVzLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgICAgc3RvcmFnZVJlZiA9IGZpcmViYXNlLnN0b3JhZ2UoKS5yZWYoIi9pbWFnZW5lcy9ub3RpY2lhcy8iLmNvbmNhdChzdGF0ZS5lZGl0Q29udGVudC5mb3JtVXBsb2FkLmlkLCAiL2ZvdG8iKS5jb25jYXQoZWxlbWVudC5pZCkpOwogICAgICAgICAgICB0YXNrW2ldID0gc3RvcmFnZVJlZi5wdXQoZWxlbWVudCk7CiAgICAgICAgICAgIGkrKzsKICAgICAgICAgIH0pOwoKICAgICAgICAgIGZvciAodmFyIF9pMiA9IDA7IF9pMiA8IGZpbGVzLmxlbmd0aDsgX2kyKyspIHsKICAgICAgICAgICAgdGFza1tfaTJdLm9uKCdzdGF0ZV9jaGFuZ2VkJywgZnVuY3Rpb24gKHNuYXBzaG90KSB7CiAgICAgICAgICAgICAgcGVyY2VudGFnZVtzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkXSA9IHNuYXBzaG90LmJ5dGVzVHJhbnNmZXJyZWQgLyBzbmFwc2hvdC50b3RhbEJ5dGVzICogMTAwOwogICAgICAgICAgICAgIHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQuaW1hZ2VzW3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdLnVwbG9hZFBlcmNlbnRhZ2UgPSBwZXJjZW50YWdlW3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdOwogICAgICAgICAgICAgIDsKICAgICAgICAgICAgICBtKys7CgogICAgICAgICAgICAgIGlmIChzdGF0ZS5lZGl0Q29udGVudC5mb3JtVXBsb2FkLmltYWdlc1tzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkXS51cGxvYWRQZXJjZW50YWdlID09PSAxMDAgJiYgb3JkZXIubGVuZ3RoIDwgZmlsZXMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICBvcmRlci5wdXNoKHNuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWQpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IubWVzc2FnZSk7CiAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICB2YXIgZGF0YVJlZiA9IHsKICAgICAgICAgICAgICAgIG5vdGlfdGl0dWxvOiBzdGF0ZS5lZGl0Q29udGVudC5mb3JtVXBsb2FkLnRpdHVsbywKICAgICAgICAgICAgICAgIG5vdGlfaW5mbzogc3RhdGUuZWRpdENvbnRlbnQuZm9ybVVwbG9hZC5pbmZvLAogICAgICAgICAgICAgICAgbm90aV9mZWNoYTogc3RhdGUuZWRpdENvbnRlbnQuZm9ybVVwbG9hZC5mZWNoYSwKICAgICAgICAgICAgICAgIG5vdGlfaWQ6IHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQuaWQsCiAgICAgICAgICAgICAgICBub3RpX3ByZXY6IHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQucHJldiwKICAgICAgICAgICAgICAgIG5vdGlfcHVibGljYXI6IHRydWUsCiAgICAgICAgICAgICAgICBub3RpX3NlY2Npb246IHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQuc2VjY2lvbiwKICAgICAgICAgICAgICAgIG5vdGlfaW1hZ2VuZXM6IFtdCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICB2YXIgc3RvcmFnZVJlZiA9IGZpcmViYXNlLnN0b3JhZ2UoKS5yZWYoIi9pbWFnZW5lcy9ub3RpY2lhcy8iLmNvbmNhdChzdGF0ZS5lZGl0Q29udGVudC5mb3JtVXBsb2FkLmlkLCAiL2ZvdG8iKS5jb25jYXQob3JkZXJbal0pKTsKICAgICAgICAgICAgICBzdG9yYWdlUmVmLmdldERvd25sb2FkVVJMKCkudGhlbihmdW5jdGlvbiAodXJsKSB7CiAgICAgICAgICAgICAgICB2YXIgdmFsID0gb3JkZXJbbl07CiAgICAgICAgICAgICAgICBzdGF0ZS5lZGl0Q29udGVudC5mb3JtVXBsb2FkLmltYWdlc1t2YWxdLnVybCA9IHVybDsKICAgICAgICAgICAgICAgIHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQuaW1hZ2VzW3ZhbF0ubmFtZSA9ICJmb3RvIi5jb25jYXQodmFsKTsKICAgICAgICAgICAgICAgIG4rKzsKCiAgICAgICAgICAgICAgICBpZiAobiA+PSBzdGF0ZS5lZGl0Q29udGVudC5mb3JtVXBsb2FkLmltYWdlcy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgbiA9IDA7CiAgICAgICAgICAgICAgICAgIHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQuaW1hZ2VzLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgICAgICAgICAgICBkYXRhUmVmLm5vdGlfaW1hZ2VuZXMucHVzaCh7fSk7CiAgICAgICAgICAgICAgICAgICAgZGF0YVJlZi5ub3RpX2ltYWdlbmVzW25dLm5vbWJyZSA9IHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQuaW1hZ2VzW25dLm5hbWU7CiAgICAgICAgICAgICAgICAgICAgZGF0YVJlZi5ub3RpX2ltYWdlbmVzW25dLnVybCA9IHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQuaW1hZ2VzW25dLnVybDsKICAgICAgICAgICAgICAgICAgICBuKys7CgogICAgICAgICAgICAgICAgICAgIGlmIChuID49IHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQuaW1hZ2VzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgdmFyIGRiUmVmID0gZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoJ05vdGljaWFzJyk7CiAgICAgICAgICAgICAgICAgICAgICBkYlJlZi5jaGlsZChzdGF0ZS5lZGl0Q29udGVudC5mb3JtVXBsb2FkLmlkKS5zZXQoZGF0YVJlZik7CiAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5lZGl0Q29udGVudC5mb3JtVXBsb2FkLnRpcG8gPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgIHZhciBzdWNjZXNzID0gewogICAgICAgICAgICAgICAgICAgICAgICAwOiAnc3VjY2Vzc1VwbG9hZCcsCiAgICAgICAgICAgICAgICAgICAgICAgIDE6ICdTZSBoYSBhY3R1YWxpemFkbyBleGl0b3NhbWVudGUnCiAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICAgIF90aGlzNS5jb21taXQoJ3N1Y2Nlc3NBZHZpc2UnLCBzdWNjZXNzKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGorKzsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciBkYXRhUmVmID0gewogICAgICAgICAgICBub3RpX3RpdHVsbzogc3RhdGUuZWRpdENvbnRlbnQuZm9ybVVwbG9hZC50aXR1bG8sCiAgICAgICAgICAgIG5vdGlfaW5mbzogc3RhdGUuZWRpdENvbnRlbnQuZm9ybVVwbG9hZC5pbmZvLAogICAgICAgICAgICBub3RpX2ZlY2hhOiBzdGF0ZS5lZGl0Q29udGVudC5mb3JtVXBsb2FkLmZlY2hhLAogICAgICAgICAgICBub3RpX2lkOiBzdGF0ZS5lZGl0Q29udGVudC5mb3JtVXBsb2FkLmlkLAogICAgICAgICAgICBub3RpX3ByZXY6IHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQucHJldiwKICAgICAgICAgICAgbm90aV9wdWJsaWNhcjogdHJ1ZSwKICAgICAgICAgICAgbm90aV9zZWNjaW9uOiBzdGF0ZS5lZGl0Q29udGVudC5mb3JtVXBsb2FkLnNlY2Npb24sCiAgICAgICAgICAgIG5vdGlfaW1hZ2VuZXM6IHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQuaW1hZ2VzCiAgICAgICAgICB9OwogICAgICAgICAgdmFyIGRiUmVmID0gZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoJ05vdGljaWFzJyk7CiAgICAgICAgICBkYlJlZi5jaGlsZChzdGF0ZS5lZGl0Q29udGVudC5mb3JtVXBsb2FkLmlkKS5zZXQoZGF0YVJlZik7CiAgICAgICAgICBzdGF0ZS5lZGl0Q29udGVudC5mb3JtVXBsb2FkLnRpcG8gPSBmYWxzZTsKICAgICAgICAgIHZhciBzdWNjZXNzID0gewogICAgICAgICAgICAwOiAnc3VjY2Vzc1VwbG9hZCcsCiAgICAgICAgICAgIDE6ICdTZSBoYSBhY3R1YWxpemFkbyBleGl0b3NhbWVudGUnCiAgICAgICAgICB9OwogICAgICAgICAgdGhpcy5jb21taXQoJ3N1Y2Nlc3NBZHZpc2UnLCBzdWNjZXNzKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoc3RhdGUuZGVsZXRlQ29udGVudC5mb3JtVXBsb2FkLnRpcG8gPT09IHRydWUpIHsKICAgICAgICB0cnkgewogICAgICAgICAgdmFyIF9zdG9yYWdlUmVmID0gZmlyZWJhc2Uuc3RvcmFnZSgpLnJlZigiL2ltYWdlbmVzL25vdGljaWFzLyIuY29uY2F0KHN0YXRlLmRlbGV0ZUNvbnRlbnQuZm9ybVVwbG9hZC5pZCkpOwoKICAgICAgICAgIF9zdG9yYWdlUmVmLmxpc3RBbGwoKS50aGVuKGZ1bmN0aW9uIChwcm9tKSB7CiAgICAgICAgICAgIHByb20uaXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgICAgIF9zdG9yYWdlUmVmLmNoaWxkKGVsZW1lbnQubmFtZSkuZGVsZXRlKCkudGhlbihmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgICBpZiAoZXJyICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKCJOb3RpY2lhcy8iLmNvbmNhdChzdGF0ZS5kZWxldGVDb250ZW50LmZvcm1VcGxvYWQuaWQpKS5yZW1vdmUoKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBzdGF0ZS5kZWxldGluZ1ZhbCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIHN0YXRlLmRlbGV0ZUNvbnRlbnQuZm9ybVVwbG9hZC50aXBvID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgdmFyIHN1Y2Nlc3MgPSB7CiAgICAgICAgICAgICAgICAgICAgICAwOiAnc3VjY2Vzc1VwbG9hZCcsCiAgICAgICAgICAgICAgICAgICAgICAxOiAnU2UgaGEgZWxpbWluYWRvIGV4aXRvc2FtZW50ZScKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICBfdGhpczUuY29tbWl0KCdzdWNjZXNzQWR2aXNlJywgc3VjY2Vzcyk7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBmaWxlc1VwbG9hZDogZnVuY3Rpb24gZmlsZXNVcGxvYWQoc3RhdGUsIGRhdGEpIHsKICAgICAgc3RhdGUuZm9ybXRpcG8gPSBkYXRhWzJdOwoKICAgICAgaWYgKHN0YXRlLmZvcm10aXBvID09PSAwKSB7CiAgICAgICAgdmFyIGQgPSBuZXcgRGF0ZSgpOwogICAgICAgIHZhciBtaWxpU2VjID0gRGF0ZS5wYXJzZShkKTsKICAgICAgICB2YXIgZFN0cmluZyA9IGQudG9TdHJpbmcoKTsKICAgICAgICB2YXIgc3BsaXR0ZWREYXRlID0gZFN0cmluZy5zcGxpdCgnICcpOwogICAgICAgIHZhciBqb2luZWREYXRlID0gW107CgogICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgNTsgaSsrKSB7CiAgICAgICAgICBqb2luZWREYXRlLnB1c2goc3BsaXR0ZWREYXRlW2ldKTsKICAgICAgICB9CgogICAgICAgIHZhciBqb2luZWQgPSBqb2luZWREYXRlLmpvaW4oJ3wnKTsKICAgICAgICBzdGF0ZS5jcmVhdGVDb250ZW50LmZvcm1VcGxvYWQudGlwbyA9IHRydWU7CiAgICAgICAgc3RhdGUuY3JlYXRlQ29udGVudC5mb3JtVXBsb2FkLmZlY2hhID0gam9pbmVkOwogICAgICAgIHN0YXRlLmNyZWF0ZUNvbnRlbnQuZm9ybVVwbG9hZC5pbWFnZXMgPSBkYXRhWzBdOwogICAgICAgIHN0YXRlLmNyZWF0ZUNvbnRlbnQuZm9ybVVwbG9hZC5pZCA9IG1pbGlTZWM7CiAgICAgICAgdGhpcy5jb21taXQoJ2hhbmRsZVVwbG9hZCcsIGRhdGFbMV0pOwogICAgICB9IGVsc2UgaWYgKHN0YXRlLmZvcm10aXBvID09PSAxKSB7CiAgICAgICAgc3RhdGUuZWRpdENvbnRlbnQuZm9ybVVwbG9hZC50aXBvID0gdHJ1ZTsKICAgICAgICBzdGF0ZS5lZGl0Q29udGVudC5mb3JtVXBsb2FkLmZlY2hhID0gZGF0YVswXS5mZWNoYTsKICAgICAgICBzdGF0ZS5lZGl0Q29udGVudC5mb3JtVXBsb2FkLmltYWdlcyA9IGRhdGFbMF0uaW1hZ2VuZXM7CiAgICAgICAgc3RhdGUuZWRpdENvbnRlbnQuZm9ybVVwbG9hZC5pZCA9IGRhdGFbMF0uaWQ7CiAgICAgICAgc3RhdGUuZWRpdENvbnRlbnQuZm9ybVVwbG9hZC50aXR1bG8gPSBkYXRhWzBdLnRpdHVsbzsKICAgICAgICBzdGF0ZS5lZGl0Q29udGVudC5mb3JtVXBsb2FkLmluZm8gPSBkYXRhWzBdLmluZm87CiAgICAgICAgc3RhdGUuZWRpdENvbnRlbnQuZm9ybVVwbG9hZC5wcmV2ID0gZGF0YVswXS5wcmV2OwogICAgICAgIHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQuc2VjY2lvbiA9IGRhdGFbMF0uc2VjY2lvbjsKICAgICAgICBzdGF0ZS5lZGl0Q29udGVudC5mb3JtVXBsb2FkLnVwbG9hZEltYWdlcyA9IGRhdGFbM107CiAgICAgICAgc3RhdGUuZWRpdENvbnRlbnQuZm9ybVVwbG9hZC51cGxvYWREYXRhQmFzZSA9IGRhdGFbNF07CiAgICAgICAgdGhpcy5jb21taXQoJ2hhbmRsZVVwbG9hZCcsIGRhdGFbMV0pOwogICAgICB9IGVsc2UgaWYgKHN0YXRlLmZvcm10aXBvID09PSAyKSB7CiAgICAgICAgc3RhdGUuZGVsZXRlQ29udGVudC5mb3JtVXBsb2FkLmlkID0gZGF0YVswXTsKICAgICAgICBzdGF0ZS5kZWxldGVDb250ZW50LmZvcm1VcGxvYWQudGlwbyA9IHRydWU7CiAgICAgICAgc3RhdGUuZGVsZXRpbmdWYWwgPSB0cnVlOwogICAgICAgIHN0YXRlLmRlbGV0aW5nSW5kZXggPSBkYXRhWzNdOwogICAgICAgIHRoaXMuY29tbWl0KCdoYW5kbGVVcGxvYWQnLCBkYXRhWzFdKTsKICAgICAgfQogICAgfSwKICAgIGNyZWFyREI6IGZ1bmN0aW9uIGNyZWFyREIoc3RhdGUsIGRhdGEpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICBzdGF0ZS5jcmVhckRCVmFscyA9IHRydWU7CgogICAgICBpZiAoZGF0YS50YXJnZXQgPT09ICdKdW50YXMnKSB7CiAgICAgICAgaWYgKE9iamVjdC52YWx1ZXMoZGF0YS5hcmNoaXZvcykubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgICBmb3IgKHZhciBfaTMgPSAwOyBfaTMgPCBPYmplY3QudmFsdWVzKGRhdGEuanVudGEuaW50ZWdyYW50ZXMpLmxlbmd0aDsgX2kzKyspIHsKICAgICAgICAgICAgc3RhdGUuZGJJbWdbX2kzXSA9IFtdOwogICAgICAgICAgICBzdGF0ZS5kYkltZ1tfaTNdID0gT2JqZWN0LnZhbHVlcyhkYXRhLmp1bnRhLmludGVncmFudGVzKVtfaTNdLmltYWdlOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgdmFyIHN0b3JhZ2VSZWYgPSBbXTsKICAgICAgICB2YXIgcGVyY2VudGFnZSA9IFtdOwogICAgICAgIHZhciBvcmRlciA9IFtdOwogICAgICAgIHZhciB0YXNrID0ge307CiAgICAgICAgdmFyIGkgPSAwOwogICAgICAgIHZhciBqID0gMDsKICAgICAgICB2YXIgbiA9IDA7CiAgICAgICAgT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICBzdG9yYWdlUmVmID0gZmlyZWJhc2Uuc3RvcmFnZSgpLnJlZigiL2ltYWdlbmVzLyIuY29uY2F0KGRhdGEudGFyZ2V0LCAiLyIpLmNvbmNhdChkYXRhLmp1bnRhLmluaWNpbywgIi8iKS5jb25jYXQoZGF0YS5qdW50YS5pbnRlZ3JhbnRlc1siIi5jb25jYXQoZWxlbWVudC5pZCldLmNhcmdvLnNwbGl0KCcgJykuam9pbignXycpKSk7CiAgICAgICAgICB0YXNrWyIiLmNvbmNhdChlbGVtZW50LmlkKV0gPSBzdG9yYWdlUmVmLnB1dChlbGVtZW50KTsKICAgICAgICB9KTsKCiAgICAgICAgaWYgKE9iamVjdC52YWx1ZXModGFzaykubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgICBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgICAgdGFza1siIi5jb25jYXQoZWxlbWVudC5pZCldLm9uKCdzdGF0ZV9jaGFuZ2VkJywgZnVuY3Rpb24gKHNuYXBzaG90KSB7CiAgICAgICAgICAgICAgcGVyY2VudGFnZVtzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkXSA9IHNuYXBzaG90LmJ5dGVzVHJhbnNmZXJyZWQgLyBzbmFwc2hvdC50b3RhbEJ5dGVzICogMTAwOwogICAgICAgICAgICAgIHN0YXRlLmRiSW1nW3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdLnVwbG9hZFBlcmNlbnRhZ2UgPSBwZXJjZW50YWdlW3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdOwoKICAgICAgICAgICAgICBpZiAoc3RhdGUuZGJJbWdbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF0udXBsb2FkUGVyY2VudGFnZSA9PT0gMTAwICYmIG9yZGVyLmxlbmd0aCA8IE9iamVjdC52YWx1ZXMoZGF0YS5hcmNoaXZvcykubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICBvcmRlci5wdXNoKHNuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWQpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IubWVzc2FnZSk7CiAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICB2YXIgZGF0YVJlZiA9IFtdOwogICAgICAgICAgICAgIGRhdGFSZWYuanVudF9wZXJpb2RvID0gIiIuY29uY2F0KGRhdGEuanVudGEuaW5pY2lvLCAiLSIpLmNvbmNhdChkYXRhLmp1bnRhLmZpbik7CiAgICAgICAgICAgICAgZGF0YVJlZi5qdW50X2lkID0gIiIuY29uY2F0KGRhdGEuanVudGEuaW5pY2lvKTsKICAgICAgICAgICAgICBkYXRhUmVmLmp1bnRfYWN0aXZhID0gZGF0YS5qdW50YS5qdW50YV9hY3R1YWw7CiAgICAgICAgICAgICAgZGF0YVJlZi5qdW50X2ludGVncmFudGVzID0gW107CgogICAgICAgICAgICAgIGZvciAodmFyIF9pNCA9IDA7IF9pNCA8IE9iamVjdC52YWx1ZXMoZGF0YS5qdW50YS5pbnRlZ3JhbnRlcykubGVuZ3RoOyBfaTQrKykgewogICAgICAgICAgICAgICAgZGF0YVJlZi5qdW50X2ludGVncmFudGVzW19pNF0gPSBbXTsKICAgICAgICAgICAgICAgIGRhdGFSZWYuanVudF9pbnRlZ3JhbnRlc1tfaTRdLmp1aW5fY2FyZ28gPSBPYmplY3QudmFsdWVzKGRhdGEuanVudGEuaW50ZWdyYW50ZXMpW19pNF0uY2FyZ287CiAgICAgICAgICAgICAgICBkYXRhUmVmLmp1bnRfaW50ZWdyYW50ZXNbX2k0XS5qdWluX25vbWJyZSA9IE9iamVjdC52YWx1ZXMoZGF0YS5qdW50YS5pbnRlZ3JhbnRlcylbX2k0XS5ub21icmU7CiAgICAgICAgICAgICAgICBkYXRhUmVmLmp1bnRfaW50ZWdyYW50ZXNbX2k0XS5qdWluX2FwZWxsaWRvID0gT2JqZWN0LnZhbHVlcyhkYXRhLmp1bnRhLmludGVncmFudGVzKVtfaTRdLmFwZWxsaWRvOwogICAgICAgICAgICAgICAgZGF0YVJlZi5qdW50X2ludGVncmFudGVzW19pNF0uanVpbl9jb3JyZW8gPSBPYmplY3QudmFsdWVzKGRhdGEuanVudGEuaW50ZWdyYW50ZXMpW19pNF0uY29ycmVvOwogICAgICAgICAgICAgICAgZGF0YVJlZi5qdW50X2ludGVncmFudGVzW19pNF0uanVpbl9mb3RvID0gW107CiAgICAgICAgICAgICAgICBkYXRhUmVmLmp1bnRfaW50ZWdyYW50ZXNbX2k0XS5qdWluX2FjdGl2byA9IE9iamVjdC52YWx1ZXMoZGF0YS5qdW50YS5pbnRlZ3JhbnRlcylbX2k0XS5hY3Rpdm87CiAgICAgICAgICAgICAgICBkYXRhUmVmLmp1bnRfaW50ZWdyYW50ZXNbX2k0XS5qdWluX2NyZWFyID0gT2JqZWN0LnZhbHVlcyhkYXRhLmp1bnRhLmludGVncmFudGVzKVtfaTRdLmNyZWFyOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgdmFyIHN0b3JhZ2VSZWYgPSBmaXJlYmFzZS5zdG9yYWdlKCkucmVmKCIvaW1hZ2VuZXMvIi5jb25jYXQoZGF0YS50YXJnZXQsICIvIikuY29uY2F0KGRhdGEuanVudGEuaW5pY2lvLCAiLyIpLmNvbmNhdChkYXRhLmp1bnRhLmludGVncmFudGVzWyIiLmNvbmNhdChvcmRlcltqXSldLmNhcmdvLnNwbGl0KCcgJykuam9pbignXycpKSk7CiAgICAgICAgICAgICAgc3RvcmFnZVJlZi5nZXREb3dubG9hZFVSTCgpLnRoZW4oZnVuY3Rpb24gKHVybCkgewogICAgICAgICAgICAgICAgdmFyIHZhbCA9IG9yZGVyW25dOwogICAgICAgICAgICAgICAgc3RhdGUuZGJJbWdbdmFsXS51cmwgPSB1cmw7CiAgICAgICAgICAgICAgICBzdGF0ZS5kYkltZ1t2YWxdLm5vbWJyZSA9ICIiLmNvbmNhdChkYXRhLmp1bnRhLmludGVncmFudGVzWyIiLmNvbmNhdChvcmRlcltuXSldLmNhcmdvLnNwbGl0KCcgJykuam9pbignXycpKTsKICAgICAgICAgICAgICAgIG4rKzsKCiAgICAgICAgICAgICAgICBpZiAobiA+PSBvcmRlci5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgaSA9IDA7CiAgICAgICAgICAgICAgICAgIE9iamVjdC52YWx1ZXMoZGF0YVJlZi5qdW50X2ludGVncmFudGVzKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLmRiSW1nW2ldLm5vbWJyZSAhPT0gdW5kZWZpbmVkICYmIHN0YXRlLmRiSW1nW2ldLnVybCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50Lmp1aW5fZm90by5ub21icmUgPSBzdGF0ZS5kYkltZ1tpXS5ub21icmU7CiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50Lmp1aW5fZm90by51cmwgPSBzdGF0ZS5kYkltZ1tpXS51cmw7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuanVpbl9mb3RvID0gIiI7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpKys7CgogICAgICAgICAgICAgICAgICAgIGlmIChuID49IE9iamVjdC52YWx1ZXMoZGF0YS5hcmNoaXZvcykubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgZGJSZWYgPSBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZigiIi5jb25jYXQoZGF0YS50YXJnZXQpKTsKICAgICAgICAgICAgICAgICAgICAgIGRiUmVmLmNoaWxkKCIiLmNvbmNhdChkYXRhLmp1bnRhLmluaWNpbykpLnNldChkYXRhUmVmKTsKICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLmNyZWFyREJWYWxzID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgc3VjY2VzcyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgMDogJ3N1Y2Nlc3NVcGxvYWQnLAogICAgICAgICAgICAgICAgICAgICAgICAxOiAnU2UgaGEgY3JlYWRvIGV4aXRvc2FtZW50ZScKICAgICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgICAgX3RoaXM2LmNvbW1pdCgnc3VjY2Vzc0FkdmlzZScsIHN1Y2Nlc3MpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgaisrOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YXIgZGF0YVJlZiA9IFtdOwogICAgICAgICAgZGF0YVJlZi5qdW50X3BlcmlvZG8gPSAiIi5jb25jYXQoZGF0YS5qdW50YS5pbmljaW8sICItIikuY29uY2F0KGRhdGEuanVudGEuZmluKTsKICAgICAgICAgIGRhdGFSZWYuanVudF9pZCA9ICIiLmNvbmNhdChkYXRhLmp1bnRhLmluaWNpbyk7CiAgICAgICAgICBkYXRhUmVmLmp1bnRfYWN0aXZhID0gZGF0YS5qdW50YS5qdW50YV9hY3R1YWw7CiAgICAgICAgICBkYXRhUmVmLmp1bnRfaW50ZWdyYW50ZXMgPSBbXTsKCiAgICAgICAgICBmb3IgKHZhciBfaTUgPSAwOyBfaTUgPCBPYmplY3QudmFsdWVzKGRhdGEuanVudGEuaW50ZWdyYW50ZXMpLmxlbmd0aDsgX2k1KyspIHsKICAgICAgICAgICAgZGF0YVJlZi5qdW50X2ludGVncmFudGVzW19pNV0gPSBbXTsKICAgICAgICAgICAgZGF0YVJlZi5qdW50X2ludGVncmFudGVzW19pNV0uanVpbl9jYXJnbyA9IE9iamVjdC52YWx1ZXMoZGF0YS5qdW50YS5pbnRlZ3JhbnRlcylbX2k1XS5jYXJnbzsKICAgICAgICAgICAgZGF0YVJlZi5qdW50X2ludGVncmFudGVzW19pNV0uanVpbl9ub21icmUgPSBPYmplY3QudmFsdWVzKGRhdGEuanVudGEuaW50ZWdyYW50ZXMpW19pNV0ubm9tYnJlOwogICAgICAgICAgICBkYXRhUmVmLmp1bnRfaW50ZWdyYW50ZXNbX2k1XS5qdWluX2FwZWxsaWRvID0gT2JqZWN0LnZhbHVlcyhkYXRhLmp1bnRhLmludGVncmFudGVzKVtfaTVdLmFwZWxsaWRvOwogICAgICAgICAgICBkYXRhUmVmLmp1bnRfaW50ZWdyYW50ZXNbX2k1XS5qdWluX2NvcnJlbyA9IE9iamVjdC52YWx1ZXMoZGF0YS5qdW50YS5pbnRlZ3JhbnRlcylbX2k1XS5jb3JyZW87CiAgICAgICAgICAgIGRhdGFSZWYuanVudF9pbnRlZ3JhbnRlc1tfaTVdLmp1aW5fZm90byA9IE9iamVjdC52YWx1ZXMoZGF0YS5qdW50YS5pbnRlZ3JhbnRlcylbX2k1XS5pbWFnZTsKICAgICAgICAgICAgZGF0YVJlZi5qdW50X2ludGVncmFudGVzW19pNV0uanVpbl9hY3Rpdm8gPSBPYmplY3QudmFsdWVzKGRhdGEuanVudGEuaW50ZWdyYW50ZXMpW19pNV0uYWN0aXZvOwogICAgICAgICAgICBkYXRhUmVmLmp1bnRfaW50ZWdyYW50ZXNbX2k1XS5qdWluX2NyZWFyID0gT2JqZWN0LnZhbHVlcyhkYXRhLmp1bnRhLmludGVncmFudGVzKVtfaTVdLmNyZWFyOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBkYlJlZiA9IGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKCIiLmNvbmNhdChkYXRhLnRhcmdldCkpOwogICAgICAgICAgZGJSZWYuY2hpbGQoIiIuY29uY2F0KGRhdGEuanVudGEuaW5pY2lvKSkuc2V0KGRhdGFSZWYpOwogICAgICAgICAgc3RhdGUuY3JlYXJEQlZhbHMgPSBmYWxzZTsKICAgICAgICAgIHZhciBzdWNjZXNzID0gewogICAgICAgICAgICAwOiAnc3VjY2Vzc1VwbG9hZCcsCiAgICAgICAgICAgIDE6ICdTZSBoYSBjcmVhZG8gZXhpdG9zYW1lbnRlJwogICAgICAgICAgfTsKICAgICAgICAgIHRoaXMuY29tbWl0KCdzdWNjZXNzQWR2aXNlJywgc3VjY2Vzcyk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKGRhdGEudGFyZ2V0ID09PSAnU2VydmljaW9zJykgewogICAgICAgIGlmIChPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmxlbmd0aCAhPT0gMCkgewogICAgICAgICAgc3RhdGUuZGJJbWcgPSBbXTsKICAgICAgICAgIHN0YXRlLmRiSW1nWzBdID0gZGF0YS5zZXJ2aWNpby5pbWFnZTsKICAgICAgICB9CgogICAgICAgIHZhciBfc3RvcmFnZVJlZjIgPSBbXTsKICAgICAgICB2YXIgX3BlcmNlbnRhZ2UgPSBbXTsKICAgICAgICB2YXIgX29yZGVyID0gW107CiAgICAgICAgdmFyIF90YXNrID0ge307CiAgICAgICAgdmFyIF9uID0gMDsKICAgICAgICBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgIF9zdG9yYWdlUmVmMiA9IGZpcmViYXNlLnN0b3JhZ2UoKS5yZWYoIi9pbWFnZW5lcy8iLmNvbmNhdChkYXRhLnRhcmdldCwgIi8iKS5jb25jYXQoZGF0YS5zZXJ2aWNpby5ub21icmUuc3BsaXQoJyAnKS5qb2luKCdfJykpKTsKICAgICAgICAgIF90YXNrWyIiLmNvbmNhdChlbGVtZW50LmlkKV0gPSBfc3RvcmFnZVJlZjIucHV0KGVsZW1lbnQpOwogICAgICAgIH0pOwoKICAgICAgICBpZiAoT2JqZWN0LnZhbHVlcyhfdGFzaykubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgICBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgICAgX3Rhc2tbIiIuY29uY2F0KGVsZW1lbnQuaWQpXS5vbignc3RhdGVfY2hhbmdlZCcsIGZ1bmN0aW9uIChzbmFwc2hvdCkgewogICAgICAgICAgICAgIF9wZXJjZW50YWdlW3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdID0gc25hcHNob3QuYnl0ZXNUcmFuc2ZlcnJlZCAvIHNuYXBzaG90LnRvdGFsQnl0ZXMgKiAxMDA7CiAgICAgICAgICAgICAgc3RhdGUuZGJJbWdbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF0udXBsb2FkUGVyY2VudGFnZSA9IF9wZXJjZW50YWdlW3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdOwoKICAgICAgICAgICAgICBpZiAoc3RhdGUuZGJJbWdbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF0udXBsb2FkUGVyY2VudGFnZSA9PT0gMTAwICYmIF9vcmRlci5sZW5ndGggPCBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgX29yZGVyLnB1c2goc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5tZXNzYWdlKTsKICAgICAgICAgICAgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHZhciBkYXRhUmVmID0gewogICAgICAgICAgICAgICAgc2Vydl9hY3Rpdm86IGRhdGEuc2VydmljaW8uYWN0aXZvLAogICAgICAgICAgICAgICAgc2Vydl9jaWVycmU6IGRhdGEuc2VydmljaW8uZmluLAogICAgICAgICAgICAgICAgc2Vydl9jb250YWN0bzogZGF0YS5zZXJ2aWNpby5jb250YWN0bywKICAgICAgICAgICAgICAgIHNlcnZfZGVzY3JpcGNpb246IGRhdGEuc2VydmljaW8uZGVzY3JpcGNpb24sCiAgICAgICAgICAgICAgICBzZXJ2X2lkOiBkYXRhLnNlcnZpY2lvLmlkLAogICAgICAgICAgICAgICAgc2Vydl9pbmljaW86IGRhdGEuc2VydmljaW8uaW5pY2lvLAogICAgICAgICAgICAgICAgc2Vydl9ub21icmU6IGRhdGEuc2VydmljaW8ubm9tYnJlLAogICAgICAgICAgICAgICAgc2Vydl9mb3RvOiBbXQogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgdmFyIHN0b3JhZ2VSZWYgPSBmaXJlYmFzZS5zdG9yYWdlKCkucmVmKCIvaW1hZ2VuZXMvIi5jb25jYXQoZGF0YS50YXJnZXQsICIvIikuY29uY2F0KGRhdGEuc2VydmljaW8ubm9tYnJlLnNwbGl0KCcgJykuam9pbignXycpKSk7CiAgICAgICAgICAgICAgc3RvcmFnZVJlZi5nZXREb3dubG9hZFVSTCgpLnRoZW4oZnVuY3Rpb24gKHVybCkgewogICAgICAgICAgICAgICAgdmFyIHZhbCA9IF9vcmRlcltfbl07CiAgICAgICAgICAgICAgICBzdGF0ZS5kYkltZ1t2YWxdLnVybCA9IHVybDsKICAgICAgICAgICAgICAgIHN0YXRlLmRiSW1nW3ZhbF0ubm9tYnJlID0gIiIuY29uY2F0KGRhdGEuc2VydmljaW8ubm9tYnJlLnNwbGl0KCcgJykuam9pbignXycpKTsKICAgICAgICAgICAgICAgIF9uKys7CgogICAgICAgICAgICAgICAgaWYgKF9uID49IF9vcmRlci5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgZGF0YVJlZi5zZXJ2X2ZvdG8ubm9tYnJlID0gc3RhdGUuZGJJbWdbMF0ubm9tYnJlOwogICAgICAgICAgICAgICAgICBkYXRhUmVmLnNlcnZfZm90by51cmwgPSBzdGF0ZS5kYkltZ1swXS51cmw7CgogICAgICAgICAgICAgICAgICBpZiAoX24gPj0gT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgX2RiUmVmID0gZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoIiIuY29uY2F0KGRhdGEudGFyZ2V0KSk7CgogICAgICAgICAgICAgICAgICAgIF9kYlJlZi5jaGlsZCgiIi5jb25jYXQoZGF0YS5zZXJ2aWNpby5pZCkpLnNldChkYXRhUmVmKTsKCiAgICAgICAgICAgICAgICAgICAgc3RhdGUuY3JlYXJEQlZhbHMgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB2YXIgX3N1Y2Nlc3MgPSB7CiAgICAgICAgICAgICAgICAgICAgICAwOiAnc3VjY2Vzc1VwbG9hZCcsCiAgICAgICAgICAgICAgICAgICAgICAxOiAnU2UgaGEgY3JlYWRvIGV4aXRvc2FtZW50ZScKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICBfdGhpczYuY29tbWl0KCdzdWNjZXNzQWR2aXNlJywgX3N1Y2Nlc3MpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciBfZGF0YVJlZiA9IHsKICAgICAgICAgICAgc2Vydl9hY3Rpdm86IGRhdGEuc2VydmljaW8uYWN0aXZvLAogICAgICAgICAgICBzZXJ2X2NpZXJyZTogZGF0YS5zZXJ2aWNpby5maW4sCiAgICAgICAgICAgIHNlcnZfY29udGFjdG86IGRhdGEuc2VydmljaW8uY29udGFjdG8sCiAgICAgICAgICAgIHNlcnZfZGVzY3JpcGNpb246IGRhdGEuc2VydmljaW8uZGVzY3JpcGNpb24sCiAgICAgICAgICAgIHNlcnZfaWQ6IGRhdGEuc2VydmljaW8uaWQsCiAgICAgICAgICAgIHNlcnZfaW5pY2lvOiBkYXRhLnNlcnZpY2lvLmluaWNpbywKICAgICAgICAgICAgc2Vydl9ub21icmU6IGRhdGEuc2VydmljaW8ubm9tYnJlLAogICAgICAgICAgICBzZXJ2X2ZvdG86IGRhdGEuc2VydmljaW8uaW1hZ2UKICAgICAgICAgIH07CiAgICAgICAgICBfbisrOwoKICAgICAgICAgIGlmIChfbiA+PSBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmxlbmd0aCkgewogICAgICAgICAgICB2YXIgX2RiUmVmMiA9IGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKCIiLmNvbmNhdChkYXRhLnRhcmdldCkpOwoKICAgICAgICAgICAgX2RiUmVmMi5jaGlsZCgiIi5jb25jYXQoZGF0YS5zZXJ2aWNpby5pZCkpLnNldChfZGF0YVJlZik7CgogICAgICAgICAgICBzdGF0ZS5jcmVhckRCVmFscyA9IGZhbHNlOwogICAgICAgICAgICB2YXIgX3N1Y2Nlc3MyID0gewogICAgICAgICAgICAgIDA6ICdzdWNjZXNzVXBsb2FkJywKICAgICAgICAgICAgICAxOiAnU2UgaGEgY3JlYWRvIGV4aXRvc2FtZW50ZScKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdGhpcy5jb21taXQoJ3N1Y2Nlc3NBZHZpc2UnLCBfc3VjY2VzczIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChkYXRhLnRhcmdldCA9PT0gJ0dlcmVuY2lhJykgewogICAgICAgIGlmIChPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmxlbmd0aCAhPT0gMCkgewogICAgICAgICAgc3RhdGUuZGJJbWcgPSBbXTsKICAgICAgICAgIHN0YXRlLmRiSW1nWzBdID0gZGF0YS5pbnRlZ3JhbnRlLmltYWdlOwogICAgICAgIH0KCiAgICAgICAgdmFyIF9zdG9yYWdlUmVmMyA9IFtdOwogICAgICAgIHZhciBfcGVyY2VudGFnZTIgPSBbXTsKICAgICAgICB2YXIgX29yZGVyMiA9IFtdOwogICAgICAgIHZhciBfdGFzazIgPSB7fTsKICAgICAgICB2YXIgX24yID0gMDsKICAgICAgICBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgIF9zdG9yYWdlUmVmMyA9IGZpcmViYXNlLnN0b3JhZ2UoKS5yZWYoIi9pbWFnZW5lcy8iLmNvbmNhdChkYXRhLnRhcmdldCwgIi8iKS5jb25jYXQoZGF0YS5pbnRlZ3JhbnRlLmNhcmdvLnNwbGl0KCcgJykuam9pbignXycpKSk7CiAgICAgICAgICBfdGFzazJbIiIuY29uY2F0KGVsZW1lbnQuaWQpXSA9IF9zdG9yYWdlUmVmMy5wdXQoZWxlbWVudCk7CiAgICAgICAgfSk7CgogICAgICAgIGlmIChPYmplY3QudmFsdWVzKF90YXNrMikubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgICBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgICAgX3Rhc2syWyIiLmNvbmNhdChlbGVtZW50LmlkKV0ub24oJ3N0YXRlX2NoYW5nZWQnLCBmdW5jdGlvbiAoc25hcHNob3QpIHsKICAgICAgICAgICAgICBfcGVyY2VudGFnZTJbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF0gPSBzbmFwc2hvdC5ieXRlc1RyYW5zZmVycmVkIC8gc25hcHNob3QudG90YWxCeXRlcyAqIDEwMDsKICAgICAgICAgICAgICBzdGF0ZS5kYkltZ1tzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkXS51cGxvYWRQZXJjZW50YWdlID0gX3BlcmNlbnRhZ2UyW3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdOwoKICAgICAgICAgICAgICBpZiAoc3RhdGUuZGJJbWdbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF0udXBsb2FkUGVyY2VudGFnZSA9PT0gMTAwICYmIF9vcmRlcjIubGVuZ3RoIDwgT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIF9vcmRlcjIucHVzaChzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLm1lc3NhZ2UpOwogICAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgdmFyIGRhdGFSZWYgPSB7CiAgICAgICAgICAgICAgICBncl9jb3JyZW86IGRhdGEuaW50ZWdyYW50ZS5jb3JyZW8sCiAgICAgICAgICAgICAgICBncl9ub21icmU6IGRhdGEuaW50ZWdyYW50ZS5ub21icmUsCiAgICAgICAgICAgICAgICBncl9jYXJnbzogZGF0YS5pbnRlZ3JhbnRlLmNhcmdvLAogICAgICAgICAgICAgICAgZ3JfaWQ6IGRhdGEuaW50ZWdyYW50ZS5pZCwKICAgICAgICAgICAgICAgIGdyX2ZvdG86IFtdCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICB2YXIgc3RvcmFnZVJlZiA9IGZpcmViYXNlLnN0b3JhZ2UoKS5yZWYoIi9pbWFnZW5lcy8iLmNvbmNhdChkYXRhLnRhcmdldCwgIi8iKS5jb25jYXQoZGF0YS5pbnRlZ3JhbnRlLmNhcmdvLnNwbGl0KCcgJykuam9pbignXycpKSk7CiAgICAgICAgICAgICAgc3RvcmFnZVJlZi5nZXREb3dubG9hZFVSTCgpLnRoZW4oZnVuY3Rpb24gKHVybCkgewogICAgICAgICAgICAgICAgdmFyIHZhbCA9IF9vcmRlcjJbX24yXTsKICAgICAgICAgICAgICAgIHN0YXRlLmRiSW1nW3ZhbF0udXJsID0gdXJsOwogICAgICAgICAgICAgICAgc3RhdGUuZGJJbWdbdmFsXS5ub21icmUgPSAiIi5jb25jYXQoZGF0YS5pbnRlZ3JhbnRlLmNhcmdvLnNwbGl0KCcgJykuam9pbignXycpKTsKICAgICAgICAgICAgICAgIF9uMisrOwoKICAgICAgICAgICAgICAgIGlmIChfbjIgPj0gX29yZGVyMi5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgZGF0YVJlZi5ncl9mb3RvLm5vbWJyZSA9IHN0YXRlLmRiSW1nWzBdLm5vbWJyZTsKICAgICAgICAgICAgICAgICAgZGF0YVJlZi5ncl9mb3RvLnVybCA9IHN0YXRlLmRiSW1nWzBdLnVybDsKCiAgICAgICAgICAgICAgICAgIGlmIChfbjIgPj0gT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgX2RiUmVmMyA9IGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKCIiLmNvbmNhdChkYXRhLnRhcmdldCkpOwoKICAgICAgICAgICAgICAgICAgICBfZGJSZWYzLmNoaWxkKCIiLmNvbmNhdChkYXRhLmludGVncmFudGUuaWQpKS5zZXQoZGF0YVJlZik7CgogICAgICAgICAgICAgICAgICAgIHN0YXRlLmNyZWFyREJWYWxzID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgdmFyIF9zdWNjZXNzMyA9IHsKICAgICAgICAgICAgICAgICAgICAgIDA6ICdzdWNjZXNzVXBsb2FkJywKICAgICAgICAgICAgICAgICAgICAgIDE6ICdTZSBoYSBjcmVhZG8gZXhpdG9zYW1lbnRlJwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIF90aGlzNi5jb21taXQoJ3N1Y2Nlc3NBZHZpc2UnLCBfc3VjY2VzczMpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciBfZGF0YVJlZjIgPSB7CiAgICAgICAgICAgIGdyX2NvcnJlbzogZGF0YS5pbnRlZ3JhbnRlLmNvcnJlbywKICAgICAgICAgICAgZ3Jfbm9tYnJlOiBkYXRhLmludGVncmFudGUubm9tYnJlLAogICAgICAgICAgICBncl9jYXJnbzogZGF0YS5pbnRlZ3JhbnRlLmNhcmdvLAogICAgICAgICAgICBncl9pZDogZGF0YS5pbnRlZ3JhbnRlLmlkLAogICAgICAgICAgICBncl9mb3RvOiBkYXRhLmludGVncmFudGUuaW1hZ2UKICAgICAgICAgIH07CiAgICAgICAgICBfbjIrKzsKCiAgICAgICAgICBpZiAoX24yID49IE9iamVjdC52YWx1ZXMoZGF0YS5hcmNoaXZvcykubGVuZ3RoKSB7CiAgICAgICAgICAgIHZhciBfZGJSZWY0ID0gZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoIiIuY29uY2F0KGRhdGEudGFyZ2V0KSk7CgogICAgICAgICAgICBfZGJSZWY0LmNoaWxkKCIiLmNvbmNhdChkYXRhLmludGVncmFudGUuaWQpKS5zZXQoX2RhdGFSZWYyKTsKCiAgICAgICAgICAgIHN0YXRlLmNyZWFyREJWYWxzID0gZmFsc2U7CiAgICAgICAgICAgIHZhciBfc3VjY2VzczQgPSB7CiAgICAgICAgICAgICAgMDogJ3N1Y2Nlc3NVcGxvYWQnLAogICAgICAgICAgICAgIDE6ICdTZSBoYSBjcmVhZG8gZXhpdG9zYW1lbnRlJwogICAgICAgICAgICB9OwogICAgICAgICAgICB0aGlzLmNvbW1pdCgnc3VjY2Vzc0FkdmlzZScsIF9zdWNjZXNzNCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgZGVsZXRlREI6IGZ1bmN0aW9uIGRlbGV0ZURCKHN0YXRlLCBkYXRhKSB7fSwKICAgIHJlc2V0REJWYWx1ZXM6IGZ1bmN0aW9uIHJlc2V0REJWYWx1ZXMoc3RhdGUsIHZhbHVlKSB7CiAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgc3RhdGUuc3VjY2Vzc1VwbG9hZCA9IG51bGw7CiAgICAgICAgc3RhdGUuZGVsZXRpbmdWYWwgPSBudWxsOwogICAgICAgIHN0YXRlLmRiSW1nID0gW107CiAgICAgIH0gZWxzZSBpZiAoc3RhdGUuZGJJbWdbIiIuY29uY2F0KHZhbHVlKV0gIT09IHVuZGVmaW5lZCkgewogICAgICAgIHN0YXRlLmRiSW1nWyIiLmNvbmNhdCh2YWx1ZSldID0gW107CiAgICAgIH0KICAgIH0sCiAgICBmYWxzZUNhcmdhckRCOiBmdW5jdGlvbiBmYWxzZUNhcmdhckRCKHN0YXRlKSB7CiAgICAgIHN0YXRlLmNhcmdhckRCID0gZmFsc2U7CiAgICB9CiAgfSwKICBhY3Rpb25zOiB7CiAgICBnZXREYXRhOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZ2V0RGF0YSA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShfcmVmLCB2YWwpIHsKICAgICAgICB2YXIgY29tbWl0LCB0cnlBZ2FpbiwgX2RhdGEsIGRiV2ViLCB2YWx1ZTsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgICAgICAgICAgICAgICB0cnlBZ2FpbiA9IHRydWU7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIGlmICghdHJ5QWdhaW4pIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIwOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMzsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgcmV0dXJuIGZldGNoKCJodHRwczovL3dlYi1kYXRhYmFzZS02Njg0Mi5maXJlYmFzZWlvLmNvbS8uanNvbiIpOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICBfZGF0YSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gOTsKICAgICAgICAgICAgICAgIHJldHVybiBfZGF0YS5qc29uKCk7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgIGRiV2ViID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIHZhbHVlID0gewogICAgICAgICAgICAgICAgICAwOiBkYldlYiwKICAgICAgICAgICAgICAgICAgMTogdmFsCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdHJ5QWdhaW4gPSBmYWxzZTsKICAgICAgICAgICAgICAgIGNvbW1pdCgnZGF0YVdlYicsIHZhbHVlKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxODsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE1OwogICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgzKTsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge30sIDIwMDApOwoKICAgICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMywgMTVdXSk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGdldERhdGEoX3gsIF94MikgewogICAgICAgIHJldHVybiBfZ2V0RGF0YS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gZ2V0RGF0YTsKICAgIH0oKQogIH0sCiAgbW9kdWxlczoge30sCiAgZ2V0dGVyczogewogICAgdXNlclVwZGF0ZTogZnVuY3Rpb24gdXNlclVwZGF0ZShzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUudXNlcjsKICAgIH0KICB9Cn0pOw=="},{"version":3,"sources":["C:/WebProjects/Web-csp/web-csp/src/store/index.js"],"names":["Vue","Vuex","firebase","auth","data","use","Store","state","secTitle","successUpload","cargarDB","crearDBVals","errorUpload","deletingVal","loadEdit","deletingIndex","actUser","dbWeb","dpResponsive","headerView","formtipo","user","activo","apellido","autori","cargo","correo","correoVeri","fotoUrl","id","nombre","telefono","accion","refUser","createContent","formUpload","titulo","info","prev","fecha","seccion","images","tipo","editContent","uploadImages","uploadDataBase","users","userRefer","createUser","create","pass","deleteContent","dbImg","mutations","dataWeb","baseDatos","undefined","changeSecTitle","value","setUser","dbUserVal","valuesRef","user_activo","user_apellido","user_autori","user_cargo","user_correo","user_correoVeri","user_fotoUrl","user_id","user_nombre","user_telefono","user_accion","dbRef","database","ref","child","set","then","commit","Object","values","config","apiKey","authDomain","databaseURL","secondaryApp","initializeApp","createUserWithEmailAndPassword","email","emailVerified","displayName","uid","signOut","delete","success","valuesDb","Usuarios","console","log","catch","err","message","updateUser","currentUser","updateProfile","phoneNumber","isUserDiff","i","length","deleteItem","index","storage","idDb","remove","storageRef","idSt","listAll","prom","items","forEach","element","name","deletedEl","resetContentValues","val","successAdvise","handleUpload","files","percentage","order","task","j","m","n","put","on","snapshot","blob_","data_","bytesTransferred","totalBytes","uploadPercentage","push","error","dataRef","noti_titulo","noti_info","noti_fecha","noti_id","noti_prev","noti_publicar","noti_seccion","noti_imagenes","getDownloadURL","url","filesUpload","d","Date","miliSec","parse","dString","toString","splittedDate","split","joinedDate","joined","join","imagenes","crearDB","target","archivos","junta","integrantes","image","inicio","junt_periodo","fin","junt_id","junt_activa","junta_actual","junt_integrantes","juin_cargo","juin_nombre","juin_apellido","juin_correo","juin_foto","juin_activo","juin_crear","crear","servicio","serv_activo","serv_cierre","serv_contacto","contacto","serv_descripcion","descripcion","serv_id","serv_inicio","serv_nombre","serv_foto","integrante","gr_correo","gr_nombre","gr_cargo","gr_id","gr_foto","deleteDB","resetDBValues","falseCargarDB","actions","getData","tryAgain","fetch","json","setTimeout","modules","getters","userUpdate"],"mappings":"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","sourcesContent":["import Vue from 'vue'\r\nimport Vuex from 'vuex'\r\nimport firebase, { auth } from 'firebase'\r\nimport { data } from 'jquery'\r\n\r\nVue.use(Vuex)\r\n\r\nexport default new Vuex.Store({\r\n  state: {\r\n    secTitle: 'Dashboard',\r\n    successUpload: null,\r\n    cargarDB: false,\r\n    crearDBVals: false,\r\n    errorUpload: null,\r\n    deletingVal: null,\r\n    loadEdit: false,\r\n    deletingIndex: '',\r\n    actUser: null,\r\n    dbWeb:[],\r\n    dpResponsive: false,\r\n    headerView: 0,\r\n    formtipo: 0,\r\n    user: {\r\n      activo: '',\r\n      apellido: '',\r\n      autori: '',\r\n      cargo: '',\r\n      correo: '',\r\n      correoVeri: '',\r\n      fotoUrl: '',\r\n      id: '',\r\n      nombre: '',\r\n      telefono: '',\r\n      accion: '',\r\n    },\r\n    refUser: {},\r\n    createContent:{\r\n      formUpload: {\r\n        titulo: '',\r\n        info: '',\r\n        prev: '',\r\n        fecha: '',\r\n        id: '',\r\n        seccion: 'Seleccione una opcin',\r\n        images: [],\r\n        tipo: false,\r\n      },\r\n    },\r\n    editContent:{\r\n      formUpload: {\r\n        titulo: '',\r\n        info: '',\r\n        prev: '',\r\n        fecha: '',\r\n        id: '',\r\n        seccion: '',\r\n        images: [],\r\n        tipo: false,\r\n        uploadImages: false,\r\n        uploadDataBase: false,\r\n      },\r\n    },\r\n    users:{\r\n      userRefer: false,\r\n      createUser:{\r\n        formUpload: {\r\n          activo: '',\r\n          apellido: '',\r\n          cargo: '',\r\n          correo: '',\r\n          correoVeri: '',\r\n          fotoUrl: '',\r\n          id: '',\r\n          nombre: '',\r\n          telefono: '',\r\n          create: false,\r\n          pass: '',\r\n        },\r\n      },\r\n    },\r\n    deleteContent:{\r\n      formUpload: {\r\n        id: '',\r\n        tipo: false,\r\n      },\r\n    },\r\n    dbImg: [],\r\n  },\r\n  mutations: {\r\n    dataWeb(state, baseDatos){\r\n      state.dbWeb = baseDatos[0]\r\n      if(baseDatos[1] !== undefined){\r\n        baseDatos[1] = true;\r\n      }\r\n    },\r\n    changeSecTitle(state, value){\r\n      state.secTitle = value\r\n    },\r\n    setUser(state, user){\r\n      state.users.userRefer = false;\r\n      \r\n      state.user = {\r\n        activo: user.activo,\r\n        apellido: user.apellido,\r\n        autori: user.autori,\r\n        cargo: user.cargo,\r\n        correo: user.correo,\r\n        correoVeri: user.correoVeri,\r\n        fotoUrl: user.fotoUrl,\r\n        id: user.id,\r\n        nombre: user.nombre,\r\n        telefono: user.telefono,\r\n        accion: user.accion,\r\n      }\r\n\r\n      state.refUser = {\r\n        activo: user.activo,\r\n        apellido: user.apellido,\r\n        autori: user.autori,\r\n        cargo: user.cargo,\r\n        correo: user.correo,\r\n        correoVeri: user.correoVeri,\r\n        fotoUrl: user.fotoUrl,\r\n        id: user.id,\r\n        nombre: user.nombre,\r\n        telefono: user.telefono,\r\n        accion: user.accion,\r\n      }\r\n    },\r\n    dbUserVal(state, value){\r\n      const valuesRef = {\r\n        user_activo: true,\r\n        user_apellido: value.apellido,\r\n        user_autori: value.autori,\r\n        user_cargo: value.cargo,\r\n        user_correo: value.correo,\r\n        user_correoVeri: value.correoVeri,\r\n        user_fotoUrl: `${value.fotoUrl}`,\r\n        user_id: value.id,\r\n        user_nombre: value.nombre,\r\n        user_telefono: `${value.telefono}`,\r\n        user_accion: `${value.accion}`,\r\n      }\r\n      const dbRef = firebase.database().ref('Usuarios');\r\n      dbRef.child(valuesRef.user_id).set(valuesRef).then(()=>{\r\n        this.commit('setUser', Object.values(valuesRef));\r\n      })\r\n    },\r\n    createUser(state, value){\r\n      state.users.userRefer = true;\r\n      const config = {\r\n        apiKey: \"AIzaSyCpsNVtsACCeS-amNprGUh0vGOE-SD9y5Q\",\r\n        authDomain: \"web-database-66842.firebaseapp.com\",\r\n        databaseURL: \"https://web-database-66842.firebaseio.com\",\r\n      }\r\n      const secondaryApp = firebase.initializeApp(config, \"Secondary\");\r\n      \r\n      secondaryApp.auth().createUserWithEmailAndPassword(state.users.createUser.formUpload.correo, state.users.createUser.formUpload.pass).then(user => {\r\n          const valuesRef = {\r\n            correo: user.user.email,\r\n            correoVeri: user.user.emailVerified,\r\n            nombre: user.user.displayName,\r\n            apellido: '',\r\n            autori: '',\r\n            fotoUrl: '',\r\n            telefono: '',\r\n            cargo: '',\r\n            id: user.user.uid,\r\n            activo: '',\r\n            accion: '',\r\n          }\r\n          secondaryApp.auth().signOut();\r\n          secondaryApp.delete()\r\n          const success = {\r\n            0: 'successUpload',\r\n            1: 'Se ha creado exitosamente'\r\n          };\r\n          this.commit('successAdvise', success);\r\n          const valuesDb = {\r\n            user_correo: user.user.email,\r\n            user_correoVeri: user.user.emailVerified,\r\n            user_nombre: user.user.displayName,\r\n            user_apellido: '',\r\n            user_autori: '',\r\n            user_fotoUrl: '',\r\n            user_telefono: '',\r\n            user_cargo: '',\r\n            user_id: user.user.uid,\r\n            user_activo: '',\r\n            user_accion: '',\r\n          }\r\n          this.commit('dbUserVal', valuesRef);\r\n          state.dbWeb.Usuarios[`${valuesDb.id}`] = valuesDb;\r\n          console.log(Object.values(state.dbWeb.Usuarios));\r\n        }).catch(err => {\r\n          state.users.userRefer = false;\r\n          secondaryApp.delete();\r\n          if(err.message === 'The email address is already in use by another account.'){\r\n            const success = {\r\n              0: 'errorUpload',\r\n              1: 'El correo ya est en uso'\r\n            };\r\n            this.commit('successAdvise', success);\r\n          }\r\n        })\r\n    },\r\n    updateUser(state, value){\r\n      if(value.tipo === '1'){\r\n        const valuesRef = {\r\n          user_id: value.id,\r\n          user_correo: value.correo,\r\n          user_correoVeri: value.correoVeri,\r\n          user_accion: value.accion,\r\n          user_telefono: value.telefono,\r\n          user_nombre: value.nombre,\r\n          user_apellido: value.apellido,\r\n          user_activo: value.activo,\r\n          user_fotoUrl: value.fotoUrl,\r\n          user_autori: value.autori,\r\n          user_cargo: value.cargo,\r\n        }\r\n\r\n        const dbRef = firebase.database().ref('Usuarios');\r\n        dbRef.child(valuesRef.user_id).set(valuesRef).then(()=>{\r\n          // Aqui debo poner para quitar el cargador\r\n          this.commit('setUser', value);\r\n          state.actUser = null;\r\n          const success = {\r\n            0: 'successUpload',\r\n            1: 'Se ha actualizado exitosamente'\r\n          };\r\n          this.commit('successAdvise', success);\r\n        })\r\n      }else{\r\n        const user = firebase.auth().currentUser;\r\n        if(user){\r\n          // Aqui debo poner el activador para el cargador\r\n          \r\n          user.updateProfile({\r\n            displayName: value.nombre,\r\n            email: value.correo,\r\n            phoneNumber: value.telefono,\r\n          }).then(() =>{\r\n            const valuesRef = {\r\n              user_correo: value.correo,\r\n              user_correoVeri: value.correoVeri,\r\n              user_nombre: value.nombre,\r\n              user_apellido: value.apellido,\r\n              user_autori: value.autori,\r\n              user_fotoUrl: value.fotoUrl,\r\n              user_telefono: value.telefono,\r\n              user_cargo: value.cargo,\r\n              user_id: value.id,\r\n              user_activo: value.activo,\r\n              user_accion: value.accion,\r\n            }\r\n            const dbRef = firebase.database().ref('Usuarios');\r\n            dbRef.child(value.id).set(valuesRef).then(()=>{\r\n              // Aqui debo poner para quitar el cargador\r\n              this.commit('setUser', value);\r\n              state.actUser = null;\r\n              const success = {\r\n                0: 'successUpload',\r\n                1: 'Se ha actualizado exitosamente'\r\n              };\r\n              this.commit('successAdvise', success);\r\n            })\r\n          })\r\n        }\r\n      }\r\n    },\r\n    isUserDiff(state, value){\r\n      if(value.tipo === '0'){\r\n        for(let i = 0; i < Object.values(state.user).length; i++){\r\n          if(Object.values(state.user)[i] !== Object.values(state.refUser)[i]){\r\n            state.actUser = true;\r\n            return this.commit('updateUser', state.user);\r\n          }\r\n        }\r\n      }else{\r\n        state.actUser = true;\r\n        this.commit('updateUser', value);\r\n      }\r\n    },\r\n    deleteItem(state, value){\r\n      state.deletingVal = true;\r\n      state.deletingIndex = value.index;\r\n\r\n      if(value.storage === false){\r\n        firebase.database().ref(`${value.ref}/${value.idDb}`).remove().then(()=>{\r\n          state.deletingVal = false;\r\n          state.deletingIndex = '';\r\n          const success = {\r\n            0: 'successUpload',\r\n            1: 'Se ha eliminado exitosamente'\r\n          }\r\n          this.commit('successAdvise', success)\r\n          }\r\n        )\r\n      }else if(value.storage === true){\r\n        try{\r\n          let storageRef = firebase.storage().ref(`/imagenes/${value.ref}/${value.idSt}`)\r\n          storageRef.listAll().then(prom => {\r\n            console.log(prom);\r\n            if(prom.items.length !== 0){\r\n              prom.items.forEach(element => {\r\n                storageRef.child(element.name).delete().then( err => {\r\n                  if(err !== undefined){\r\n                    console.log(err)\r\n                  }else{\r\n                    firebase.database().ref(`${value.ref}/${value.idDb}`).remove().then(()=>{\r\n                      state.deletingVal = false;\r\n                      state.deletingIndex = '';\r\n                      const success = {\r\n                        0: 'successUpload',\r\n                        1: 'Se ha eliminado exitosamente'\r\n                      }\r\n                      this.commit('successAdvise', success)\r\n                      }\r\n                    )\r\n                  }\r\n                })\r\n              });\r\n            }else{\r\n              firebase.database().ref(`${value.ref}/${value.idDb}`).remove().then(()=>{\r\n                state.deletingVal = false;\r\n                state.deletingIndex = '';\r\n                const success = {\r\n                  0: 'successUpload',\r\n                  1: 'Se ha eliminado exitosamente'\r\n                }\r\n                this.commit('successAdvise', success)\r\n                }\r\n              )\r\n            }\r\n          })\r\n        }catch(err){console.log(err)}\r\n      }\r\n\r\n    },\r\n    deletedEl(state, value){\r\n      if(value[0] === 0){\r\n        state.deletingVal = value[1];\r\n      }\r\n      if(value[0] === 1){\r\n        state.deletingIndex = value[1];\r\n      }\r\n    },\r\n    resetContentValues(state, val){\r\n      if(val === 0){\r\n        state.createContent.formUpload.titulo = '';\r\n        state.createContent.formUpload.info = '';\r\n        state.createContent.formUpload.prev = '';\r\n        state.createContent.formUpload.images = [];\r\n        state.createContent.formUpload.fecha = '';\r\n        state.createContent.formUpload.id = '';\r\n        state.createContent.formUpload.seccion = 'Seleccione una opcin';\r\n      }else if(val === 1){\r\n        state.editContent.formUpload.titulo = '';\r\n        state.editContent.formUpload.info = '';\r\n        state.editContent.formUpload.prev = '';\r\n        state.editContent.formUpload.images = [];\r\n        state.editContent.formUpload.fecha = '';\r\n        state.editContent.formUpload.id = '';\r\n        state.editContent.formUpload.seccion = 'Todas las secciones';\r\n      }else if(val === 3){\r\n        state.users = {\r\n          userRefer: false,\r\n          createUser:{\r\n            formUpload: {\r\n              activo: '',\r\n              apellido: '',\r\n              cargo: '',\r\n              correo: '',\r\n              correoVeri: '',\r\n              fotoUrl: '',\r\n              id: '',\r\n              nombre: '',\r\n              telefono: '',\r\n              create: false,\r\n              pass: '',\r\n            },\r\n          },\r\n        };\r\n      }\r\n    },\r\n    successAdvise(state, data){\r\n      state[`${data[0]}`] = data[1];\r\n    },\r\n    handleUpload(state, files){\r\n\r\n      let storageRef = [];\r\n      let percentage = [];\r\n      let order = [];\r\n      let task = {};\r\n      let i = 0;\r\n      let j = 0;\r\n      let m = 0;\r\n      let n = 0;\r\n\r\n      if(state.createContent.formUpload.tipo === true){\r\n        files.forEach(element => {\r\n          storageRef= firebase.storage().ref(`/imagenes/noticias/${state.createContent.formUpload.id}/foto${element.id}`);\r\n          task[i] = storageRef.put(element);\r\n          i++;\r\n        })\r\n  \r\n        for(let i = 0; i < files.length; i++){\r\n          task[i].on('state_changed', snapshot => {\r\n            percentage[snapshot.task.blob_.data_.id] = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n            state.createContent.formUpload.images[snapshot.task.blob_.data_.id].uploadPercentage = percentage[snapshot.task.blob_.data_.id];\r\n            m ++;\r\n            if(state.createContent.formUpload.images[snapshot.task.blob_.data_.id].uploadPercentage === 100 && order.length < files.length){\r\n              order.push(snapshot.task.blob_.data_.id)\r\n            }\r\n          }, error => {\r\n            console.log(error.message);\r\n          }, () =>{\r\n            let dataRef = {\r\n              noti_titulo: state.createContent.formUpload.titulo,\r\n              noti_info: state.createContent.formUpload.info,\r\n              noti_fecha: state.createContent.formUpload.fecha,\r\n              noti_id: state.createContent.formUpload.id,\r\n              noti_prev: state.createContent.formUpload.prev,\r\n              noti_publicar: true,\r\n              noti_seccion: state.createContent.formUpload.seccion,\r\n              noti_imagenes: [],\r\n            }\r\n            let storageRef = firebase.storage().ref(`/imagenes/noticias/${state.createContent.formUpload.id}/foto${order[j]}`);\r\n            storageRef.getDownloadURL().then(url => {\r\n              let val = order[n];\r\n              state.createContent.formUpload.images[val].url = url;\r\n              state.createContent.formUpload.images[val].name = `foto${val}`;\r\n              n ++;\r\n              if(n >= state.createContent.formUpload.images.length){\r\n                n = 0;\r\n                state.createContent.formUpload.images.forEach(element => {\r\n                  dataRef.noti_imagenes.push({});\r\n                  dataRef.noti_imagenes[n].nombre = state.createContent.formUpload.images[n].name;\r\n                  dataRef.noti_imagenes[n].url = state.createContent.formUpload.images[n].url;\r\n                  n ++;\r\n                  if(n >= state.createContent.formUpload.images.length){\r\n                    const dbRef = firebase.database().ref('Noticias');\r\n                    dbRef.child(state.createContent.formUpload.id).set(dataRef);\r\n                    state.createContent.formUpload.tipo = false;\r\n                    const success = {\r\n                      0: 'successUpload',\r\n                      1: 'Se ha creado exitosamente'\r\n                    }\r\n                    this.commit('successAdvise', success)\r\n                  }\r\n                })\r\n              }\r\n            })\r\n            j ++;\r\n          })\r\n        }\r\n      }else if(state.editContent.formUpload.tipo === true){\r\n\r\n        if(state.editContent.formUpload.uploadImages === true){\r\n          files.forEach(element => {\r\n            storageRef= firebase.storage().ref(`/imagenes/noticias/${state.editContent.formUpload.id}/foto${element.id}`);\r\n            task[i] = storageRef.put(element);\r\n            i++;\r\n          })\r\n\r\n          for(let i = 0; i < files.length; i++){\r\n            task[i].on('state_changed', snapshot => {\r\n              percentage[snapshot.task.blob_.data_.id] = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n              state.editContent.formUpload.images[snapshot.task.blob_.data_.id].uploadPercentage = percentage[snapshot.task.blob_.data_.id];;\r\n              m ++;\r\n              if(state.editContent.formUpload.images[snapshot.task.blob_.data_.id].uploadPercentage === 100 && order.length < files.length){\r\n                order.push(snapshot.task.blob_.data_.id)\r\n              }\r\n            }, error => {\r\n              console.log(error.message);\r\n            }, () =>{\r\n              let dataRef = {\r\n                noti_titulo: state.editContent.formUpload.titulo,\r\n                noti_info: state.editContent.formUpload.info,\r\n                noti_fecha: state.editContent.formUpload.fecha,\r\n                noti_id: state.editContent.formUpload.id,\r\n                noti_prev: state.editContent.formUpload.prev,\r\n                noti_publicar: true,\r\n                noti_seccion: state.editContent.formUpload.seccion,\r\n                noti_imagenes: [],\r\n              }\r\n              let storageRef = firebase.storage().ref(`/imagenes/noticias/${state.editContent.formUpload.id}/foto${order[j]}`);\r\n              storageRef.getDownloadURL().then(url => {\r\n                let val = order[n];\r\n                state.editContent.formUpload.images[val].url = url;\r\n                state.editContent.formUpload.images[val].name = `foto${val}`;\r\n                n ++;\r\n                if(n >= state.editContent.formUpload.images.length){\r\n                  n = 0;\r\n                  state.editContent.formUpload.images.forEach(element => {\r\n                    dataRef.noti_imagenes.push({});\r\n                    dataRef.noti_imagenes[n].nombre = state.editContent.formUpload.images[n].name;\r\n                    dataRef.noti_imagenes[n].url = state.editContent.formUpload.images[n].url;\r\n                    n ++;\r\n                    if(n >= state.editContent.formUpload.images.length){\r\n                      const dbRef = firebase.database().ref('Noticias');\r\n                      dbRef.child(state.editContent.formUpload.id).set(dataRef);\r\n                      state.editContent.formUpload.tipo = false;\r\n                      const success = {\r\n                        0: 'successUpload',\r\n                        1: 'Se ha actualizado exitosamente'\r\n                      }\r\n                      this.commit('successAdvise', success)\r\n                    }\r\n                  })\r\n                }\r\n              })\r\n              j ++;\r\n            })\r\n          }\r\n        }else{\r\n          let dataRef = {\r\n            noti_titulo: state.editContent.formUpload.titulo,\r\n            noti_info: state.editContent.formUpload.info,\r\n            noti_fecha: state.editContent.formUpload.fecha,\r\n            noti_id: state.editContent.formUpload.id,\r\n            noti_prev: state.editContent.formUpload.prev,\r\n            noti_publicar: true,\r\n            noti_seccion: state.editContent.formUpload.seccion,\r\n            noti_imagenes: state.editContent.formUpload.images,\r\n          }\r\n          const dbRef = firebase.database().ref('Noticias');\r\n          dbRef.child(state.editContent.formUpload.id).set(dataRef);\r\n          state.editContent.formUpload.tipo = false;\r\n          const success = {\r\n            0: 'successUpload',\r\n            1: 'Se ha actualizado exitosamente'\r\n          }\r\n          this.commit('successAdvise', success)\r\n        }\r\n      }else if(state.deleteContent.formUpload.tipo === true){\r\n        try{\r\n          let storageRef = firebase.storage().ref(`/imagenes/noticias/${state.deleteContent.formUpload.id}`)\r\n          storageRef.listAll().then(prom => {\r\n            prom.items.forEach(element => {\r\n              storageRef.child(element.name).delete().then( err => {\r\n                if(err !== undefined){\r\n                  console.log(err)\r\n                }else{\r\n                  firebase.database().ref(`Noticias/${state.deleteContent.formUpload.id}`).remove().then(()=>{\r\n                      state.deletingVal = false;\r\n                      state.deleteContent.formUpload.tipo = false;\r\n                      const success = {\r\n                        0: 'successUpload',\r\n                        1: 'Se ha eliminado exitosamente'\r\n                      }\r\n                      this.commit('successAdvise', success)\r\n                    }\r\n                  )\r\n                }\r\n              })\r\n            });\r\n          })\r\n        }catch(err){console.log(err)}\r\n      }\r\n    },\r\n    filesUpload(state, data){\r\n\r\n      state.formtipo = data[2]\r\n\r\n      if(state.formtipo === 0){\r\n        let d = new Date();\r\n        const miliSec = Date.parse(d);\r\n        let dString = d.toString();\r\n        const splittedDate = dString.split(' ');\r\n        const joinedDate = [];\r\n        for(let i = 1; i < 5; i++){\r\n          joinedDate.push(splittedDate[i]);\r\n        }\r\n        const joined = joinedDate.join('|');\r\n        \r\n        state.createContent.formUpload.tipo = true\r\n        state.createContent.formUpload.fecha = joined;\r\n        state.createContent.formUpload.images = data[0];\r\n        state.createContent.formUpload.id = miliSec;\r\n  \r\n        this.commit('handleUpload', data[1])\r\n      }else if(state.formtipo === 1){\r\n        state.editContent.formUpload.tipo = true;\r\n        state.editContent.formUpload.fecha = data[0].fecha;\r\n        state.editContent.formUpload.images = data[0].imagenes;\r\n        state.editContent.formUpload.id = data[0].id;\r\n        state.editContent.formUpload.titulo = data[0].titulo;\r\n        state.editContent.formUpload.info = data[0].info;\r\n        state.editContent.formUpload.prev = data[0].prev;\r\n        state.editContent.formUpload.seccion = data[0].seccion;\r\n        state.editContent.formUpload.uploadImages = data[3];\r\n        state.editContent.formUpload.uploadDataBase = data[4];\r\n  \r\n        this.commit('handleUpload', data[1])\r\n      }else if(state.formtipo === 2){\r\n        state.deleteContent.formUpload.id = data[0];\r\n        state.deleteContent.formUpload.tipo = true;\r\n        state.deletingVal = true;\r\n        state.deletingIndex = data[3];\r\n\r\n        this.commit('handleUpload', data[1])\r\n      }\r\n      \r\n    },\r\n    crearDB(state, data){\r\n      state.crearDBVals = true;\r\n      if(data.target === 'Juntas'){\r\n        \r\n        if(Object.values(data.archivos).length !== 0){\r\n          for(let i = 0; i < Object.values(data.junta.integrantes).length; i++){\r\n            state.dbImg[i] = [];\r\n            state.dbImg[i] = Object.values(data.junta.integrantes)[i].image;\r\n          }\r\n        }\r\n\r\n        let storageRef = [];\r\n        let percentage = [];\r\n        let order = [];\r\n        let task = {};\r\n        let i = 0;\r\n        let j = 0;\r\n        let n = 0;\r\n\r\n        Object.values(data.archivos).forEach(element => {\r\n          storageRef= firebase.storage().ref(`/imagenes/${data.target}/${data.junta.inicio}/${data.junta.integrantes[`${element.id}`].cargo.split(' ').join('_')}`);\r\n          task[`${element.id}`] = storageRef.put(element);\r\n        })\r\n        \r\n        if(Object.values(task).length !== 0){\r\n          Object.values(data.archivos).forEach(element => {\r\n            task[`${element.id}`].on('state_changed', snapshot => {\r\n              percentage[snapshot.task.blob_.data_.id] = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n              state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage = percentage[snapshot.task.blob_.data_.id];\r\n              if(state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage === 100 && order.length < Object.values(data.archivos).length){\r\n                order.push(snapshot.task.blob_.data_.id)\r\n              }\r\n            }, error => {\r\n              console.log(error.message);\r\n            }, () =>{\r\n  \r\n              let dataRef = [];\r\n              dataRef.junt_periodo = `${data.junta.inicio}-${data.junta.fin}`;\r\n              dataRef.junt_id = `${data.junta.inicio}`;\r\n              dataRef.junt_activa = data.junta.junta_actual;\r\n              dataRef.junt_integrantes = [];\r\n  \r\n              for(let i = 0; i < Object.values(data.junta.integrantes).length; i++){\r\n                dataRef.junt_integrantes[i] = [];\r\n                dataRef.junt_integrantes[i].juin_cargo = Object.values(data.junta.integrantes)[i].cargo\r\n                dataRef.junt_integrantes[i].juin_nombre = Object.values(data.junta.integrantes)[i].nombre\r\n                dataRef.junt_integrantes[i].juin_apellido = Object.values(data.junta.integrantes)[i].apellido\r\n                dataRef.junt_integrantes[i].juin_correo = Object.values(data.junta.integrantes)[i].correo\r\n                dataRef.junt_integrantes[i].juin_foto = []\r\n                dataRef.junt_integrantes[i].juin_activo = Object.values(data.junta.integrantes)[i].activo\r\n                dataRef.junt_integrantes[i].juin_crear = Object.values(data.junta.integrantes)[i].crear\r\n              }\r\n  \r\n              let storageRef= firebase.storage().ref(`/imagenes/${data.target}/${data.junta.inicio}/${data.junta.integrantes[`${order[j]}`].cargo.split(' ').join('_')}`);\r\n              \r\n              storageRef.getDownloadURL().then(url => {\r\n                let val = order[n];\r\n                state.dbImg[val].url = url;\r\n                state.dbImg[val].nombre = `${data.junta.integrantes[`${order[n]}`].cargo.split(' ').join('_')}`;\r\n                n ++;\r\n                if(n >= order.length){\r\n                  i = 0;\r\n                  Object.values(dataRef.junt_integrantes).forEach(element => {\r\n                    if(state.dbImg[i].nombre !== undefined && state.dbImg[i].url !== undefined){\r\n                      element.juin_foto.nombre = state.dbImg[i].nombre;\r\n                      element.juin_foto.url = state.dbImg[i].url;\r\n                    }else{\r\n                      element.juin_foto = \"\";\r\n                    }\r\n                    i ++;\r\n                    if(n >= Object.values(data.archivos).length){\r\n                      const dbRef = firebase.database().ref(`${data.target}`);\r\n                      dbRef.child(`${data.junta.inicio}`).set(dataRef);\r\n                      state.crearDBVals = false;\r\n                      const success = {\r\n                        0: 'successUpload',\r\n                        1: 'Se ha creado exitosamente'\r\n                      }\r\n                      this.commit('successAdvise', success)\r\n                    }\r\n                  })\r\n                }\r\n              })\r\n              j ++;\r\n            })\r\n          })\r\n        }else{\r\n          let dataRef = [];\r\n          dataRef.junt_periodo = `${data.junta.inicio}-${data.junta.fin}`;\r\n          dataRef.junt_id = `${data.junta.inicio}`;\r\n          dataRef.junt_activa = data.junta.junta_actual;\r\n          dataRef.junt_integrantes = [];\r\n\r\n          for(let i = 0; i < Object.values(data.junta.integrantes).length; i++){\r\n            dataRef.junt_integrantes[i] = [];\r\n            dataRef.junt_integrantes[i].juin_cargo = Object.values(data.junta.integrantes)[i].cargo\r\n            dataRef.junt_integrantes[i].juin_nombre = Object.values(data.junta.integrantes)[i].nombre\r\n            dataRef.junt_integrantes[i].juin_apellido = Object.values(data.junta.integrantes)[i].apellido\r\n            dataRef.junt_integrantes[i].juin_correo = Object.values(data.junta.integrantes)[i].correo\r\n            dataRef.junt_integrantes[i].juin_foto = Object.values(data.junta.integrantes)[i].image\r\n            dataRef.junt_integrantes[i].juin_activo = Object.values(data.junta.integrantes)[i].activo\r\n            dataRef.junt_integrantes[i].juin_crear = Object.values(data.junta.integrantes)[i].crear\r\n          }\r\n\r\n          const dbRef = firebase.database().ref(`${data.target}`);\r\n          dbRef.child(`${data.junta.inicio}`).set(dataRef);\r\n          state.crearDBVals = false;\r\n          const success = {\r\n            0: 'successUpload',\r\n            1: 'Se ha creado exitosamente'\r\n          }\r\n          this.commit('successAdvise', success)\r\n        }\r\n      }else if(data.target === 'Servicios'){\r\n\r\n        if(Object.values(data.archivos).length !== 0){\r\n          state.dbImg = [];\r\n          state.dbImg[0] = data.servicio.image;\r\n        }\r\n\r\n        let storageRef = [];\r\n        let percentage = [];\r\n        let order = [];\r\n        let task = {};\r\n        let n = 0;\r\n\r\n        Object.values(data.archivos).forEach(element => {\r\n          storageRef= firebase.storage().ref(`/imagenes/${data.target}/${data.servicio.nombre.split(' ').join('_')}`);\r\n          task[`${element.id}`] = storageRef.put(element);\r\n        })\r\n        \r\n        if(Object.values(task).length !== 0){\r\n          Object.values(data.archivos).forEach(element => {\r\n            task[`${element.id}`].on('state_changed', snapshot => {\r\n              percentage[snapshot.task.blob_.data_.id] = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n              state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage = percentage[snapshot.task.blob_.data_.id];\r\n              if(state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage === 100 && order.length < Object.values(data.archivos).length){\r\n                order.push(snapshot.task.blob_.data_.id)\r\n              }\r\n            }, error => {\r\n              console.log(error.message);\r\n            }, () =>{\r\n\r\n              let dataRef = {\r\n                serv_activo: data.servicio.activo,\r\n                serv_cierre: data.servicio.fin,\r\n                serv_contacto: data.servicio.contacto,\r\n                serv_descripcion: data.servicio.descripcion,\r\n                serv_id: data.servicio.id,\r\n                serv_inicio: data.servicio.inicio,\r\n                serv_nombre: data.servicio.nombre,\r\n                serv_foto: [],\r\n              }\r\n\r\n              let storageRef= firebase.storage().ref(`/imagenes/${data.target}/${data.servicio.nombre.split(' ').join('_')}`);\r\n              \r\n              storageRef.getDownloadURL().then(url => {\r\n                let val = order[n];\r\n                state.dbImg[val].url = url;\r\n                state.dbImg[val].nombre = `${data.servicio.nombre.split(' ').join('_')}`;\r\n                n ++;\r\n                if(n >= order.length){\r\n                  dataRef.serv_foto.nombre = state.dbImg[0].nombre;\r\n                  dataRef.serv_foto.url = state.dbImg[0].url;\r\n                  if(n >= Object.values(data.archivos).length){\r\n                    const dbRef = firebase.database().ref(`${data.target}`);\r\n                    dbRef.child(`${data.servicio.id}`).set(dataRef);\r\n                    state.crearDBVals = false;\r\n                    const success = {\r\n                      0: 'successUpload',\r\n                      1: 'Se ha creado exitosamente'\r\n                    }\r\n                    this.commit('successAdvise', success)\r\n                  }\r\n                }\r\n              })\r\n            })\r\n          })\r\n        }else{\r\n          let dataRef = {\r\n            serv_activo: data.servicio.activo,\r\n            serv_cierre: data.servicio.fin,\r\n            serv_contacto: data.servicio.contacto,\r\n            serv_descripcion: data.servicio.descripcion,\r\n            serv_id: data.servicio.id,\r\n            serv_inicio: data.servicio.inicio,\r\n            serv_nombre: data.servicio.nombre,\r\n            serv_foto: data.servicio.image,\r\n          }\r\n\r\n          n++;\r\n          if(n >= Object.values(data.archivos).length){\r\n            const dbRef = firebase.database().ref(`${data.target}`);\r\n            dbRef.child(`${data.servicio.id}`).set(dataRef);\r\n            state.crearDBVals = false;\r\n            const success = {\r\n              0: 'successUpload',\r\n              1: 'Se ha creado exitosamente'\r\n            }\r\n            this.commit('successAdvise', success)\r\n          }\r\n        }\r\n      }else if(data.target === 'Gerencia'){\r\n\r\n        if(Object.values(data.archivos).length !== 0){\r\n          state.dbImg = [];\r\n          state.dbImg[0] = data.integrante.image;\r\n        }\r\n\r\n        let storageRef = [];\r\n        let percentage = [];\r\n        let order = [];\r\n        let task = {};\r\n        let n = 0;\r\n\r\n        Object.values(data.archivos).forEach(element => {\r\n          storageRef= firebase.storage().ref(`/imagenes/${data.target}/${data.integrante.cargo.split(' ').join('_')}`);\r\n          task[`${element.id}`] = storageRef.put(element);\r\n        })\r\n        \r\n        if(Object.values(task).length !== 0){\r\n          Object.values(data.archivos).forEach(element => {\r\n            task[`${element.id}`].on('state_changed', snapshot => {\r\n              percentage[snapshot.task.blob_.data_.id] = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n              state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage = percentage[snapshot.task.blob_.data_.id];\r\n              if(state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage === 100 && order.length < Object.values(data.archivos).length){\r\n                order.push(snapshot.task.blob_.data_.id)\r\n              }\r\n            }, error => {\r\n              console.log(error.message);\r\n            }, () =>{\r\n\r\n              let dataRef = {\r\n                gr_correo: data.integrante.correo,\r\n                gr_nombre: data.integrante.nombre,\r\n                gr_cargo: data.integrante.cargo,\r\n                gr_id: data.integrante.id,\r\n                gr_foto: [],\r\n              }\r\n\r\n              let storageRef= firebase.storage().ref(`/imagenes/${data.target}/${data.integrante.cargo.split(' ').join('_')}`);\r\n              \r\n              storageRef.getDownloadURL().then(url => {\r\n                let val = order[n];\r\n                state.dbImg[val].url = url;\r\n                state.dbImg[val].nombre = `${data.integrante.cargo.split(' ').join('_')}`;\r\n                n ++;\r\n                if(n >= order.length){\r\n                  dataRef.gr_foto.nombre = state.dbImg[0].nombre;\r\n                  dataRef.gr_foto.url = state.dbImg[0].url;\r\n                  if(n >= Object.values(data.archivos).length){\r\n                    const dbRef = firebase.database().ref(`${data.target}`);\r\n                    dbRef.child(`${data.integrante.id}`).set(dataRef);\r\n                    state.crearDBVals = false;\r\n                    const success = {\r\n                      0: 'successUpload',\r\n                      1: 'Se ha creado exitosamente'\r\n                    }\r\n                    this.commit('successAdvise', success)\r\n                  }\r\n                }\r\n              })\r\n            })\r\n          })\r\n        }else{\r\n          let dataRef = {\r\n            gr_correo: data.integrante.correo,\r\n            gr_nombre: data.integrante.nombre,\r\n            gr_cargo: data.integrante.cargo,\r\n            gr_id: data.integrante.id,\r\n            gr_foto: data.integrante.image,\r\n          }\r\n\r\n          n++;\r\n          if(n >= Object.values(data.archivos).length){\r\n            const dbRef = firebase.database().ref(`${data.target}`);\r\n            dbRef.child(`${data.integrante.id}`).set(dataRef);\r\n            state.crearDBVals = false;\r\n            const success = {\r\n              0: 'successUpload',\r\n              1: 'Se ha creado exitosamente'\r\n            }\r\n            this.commit('successAdvise', success)\r\n          }\r\n        }\r\n      }\r\n    },\r\n    deleteDB(state, data){\r\n      \r\n    },\r\n    resetDBValues(state, value){\r\n      if(value === undefined){\r\n        state.successUpload = null;\r\n        state.deletingVal = null;\r\n        state.dbImg = [];\r\n      }else if(state.dbImg[`${value}`] !== undefined){\r\n        state.dbImg[`${value}`] = [];\r\n      }\r\n    },\r\n    falseCargarDB(state){\r\n      state.cargarDB = false;\r\n    },\r\n  },\r\n  actions: {\r\n    getData: async function({commit}, val){\r\n      let tryAgain = true;\r\n      while(tryAgain){\r\n        try{\r\n          const data = await fetch(\"https://web-database-66842.firebaseio.com/.json\");\r\n          const dbWeb = await data.json();\r\n          const value = {\r\n            0: dbWeb,\r\n            1: val,\r\n          }\r\n          tryAgain = false;\r\n          commit('dataWeb', value)\r\n        }catch(err){\r\n          setTimeout(() => {\r\n          }, 2000);\r\n        }\r\n      }\r\n    },\r\n  },\r\n  modules: {\r\n  },\r\n  getters: {\r\n    userUpdate: state => {\r\n      return state.user;\r\n    },\r\n  }\r\n})\r\n"]}]}
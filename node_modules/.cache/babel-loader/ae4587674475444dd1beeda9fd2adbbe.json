{"remainingRequest":"C:\\WebProjects\\Web-csp\\web-csp\\web-csp-files-laptop\\node_modules\\thread-loader\\dist\\cjs.js!C:\\WebProjects\\Web-csp\\web-csp\\web-csp-files-laptop\\node_modules\\babel-loader\\lib\\index.js!C:\\WebProjects\\Web-csp\\web-csp\\web-csp-files-laptop\\src\\store\\index.js","dependencies":[{"path":"C:\\WebProjects\\Web-csp\\web-csp\\web-csp-files-laptop\\src\\store\\index.js","mtime":1601598321361},{"path":"C:\\WebProjects\\Web-csp\\web-csp\\web-csp-files-laptop\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1600692212778},{"path":"C:\\WebProjects\\Web-csp\\web-csp\\web-csp-files-laptop\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1600692263582},{"path":"C:\\WebProjects\\Web-csp\\web-csp\\web-csp-files-laptop\\node_modules\\babel-loader\\lib\\index.js","mtime":1600692210221}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudmFsdWVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1dlYlByb2plY3RzL1dlYi1jc3Avd2ViLWNzcC93ZWItY3NwLWZpbGVzLWxhcHRvcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IFZ1ZXggZnJvbSAndnVleCc7CmltcG9ydCBmaXJlYmFzZSwgeyBhdXRoIH0gZnJvbSAnZmlyZWJhc2UnOwppbXBvcnQgeyBkYXRhIH0gZnJvbSAnanF1ZXJ5JzsKVnVlLnVzZShWdWV4KTsKZXhwb3J0IGRlZmF1bHQgbmV3IFZ1ZXguU3RvcmUoewogIHN0YXRlOiB7CiAgICBzZWNUaXRsZTogJ0Rhc2hib2FyZCcsCiAgICBzdWNjZXNzVXBsb2FkOiBudWxsLAogICAgY2FyZ2FyREI6IGZhbHNlLAogICAgY3JlYXJEQlZhbHM6IGZhbHNlLAogICAgZXJyb3JVcGxvYWQ6IG51bGwsCiAgICBkZWxldGluZ1ZhbDogbnVsbCwKICAgIGxvYWRFZGl0OiBmYWxzZSwKICAgIGRlbGV0aW5nSW5kZXg6ICcnLAogICAgYWN0VXNlcjogbnVsbCwKICAgIGRiV2ViOiBbXSwKICAgIGRwUmVzcG9uc2l2ZTogZmFsc2UsCiAgICBoZWFkZXJWaWV3OiAwLAogICAgZm9ybXRpcG86IDAsCiAgICB1c2VyOiB7CiAgICAgIGFjdGl2bzogJycsCiAgICAgIGFwZWxsaWRvOiAnJywKICAgICAgYXV0b3JpOiAnJywKICAgICAgY2FyZ286ICcnLAogICAgICBjb3JyZW86ICcnLAogICAgICBjb3JyZW9WZXJpOiAnJywKICAgICAgZm90b1VybDogJycsCiAgICAgIGlkOiAnJywKICAgICAgbm9tYnJlOiAnJywKICAgICAgdGVsZWZvbm86ICcnLAogICAgICBhY2Npb246ICcnCiAgICB9LAogICAgcmVmVXNlcjoge30sCiAgICBjcmVhdGVDb250ZW50OiB7CiAgICAgIGZvcm1VcGxvYWQ6IHsKICAgICAgICB0aXR1bG86ICcnLAogICAgICAgIGluZm86ICcnLAogICAgICAgIHByZXY6ICcnLAogICAgICAgIGZlY2hhOiAnJywKICAgICAgICBpZDogJycsCiAgICAgICAgc2VjY2lvbjogJ1NlbGVjY2lvbmUgdW5hIG9wY2nDs24nLAogICAgICAgIGltYWdlczogW10sCiAgICAgICAgdGlwbzogZmFsc2UKICAgICAgfQogICAgfSwKICAgIGVkaXRDb250ZW50OiB7CiAgICAgIGZvcm1VcGxvYWQ6IHsKICAgICAgICB0aXR1bG86ICcnLAogICAgICAgIGluZm86ICcnLAogICAgICAgIHByZXY6ICcnLAogICAgICAgIGZlY2hhOiAnJywKICAgICAgICBpZDogJycsCiAgICAgICAgc2VjY2lvbjogJycsCiAgICAgICAgaW1hZ2VzOiBbXSwKICAgICAgICB0aXBvOiBmYWxzZSwKICAgICAgICB1cGxvYWRJbWFnZXM6IGZhbHNlLAogICAgICAgIHVwbG9hZERhdGFCYXNlOiBmYWxzZQogICAgICB9CiAgICB9LAogICAgdXNlcnM6IHsKICAgICAgdXNlclJlZmVyOiBmYWxzZSwKICAgICAgY3JlYXRlVXNlcjogewogICAgICAgIGZvcm1VcGxvYWQ6IHsKICAgICAgICAgIGFjdGl2bzogJycsCiAgICAgICAgICBhcGVsbGlkbzogJycsCiAgICAgICAgICBjYXJnbzogJycsCiAgICAgICAgICBjb3JyZW86ICcnLAogICAgICAgICAgY29ycmVvVmVyaTogJycsCiAgICAgICAgICBmb3RvVXJsOiAnJywKICAgICAgICAgIGlkOiAnJywKICAgICAgICAgIG5vbWJyZTogJycsCiAgICAgICAgICB0ZWxlZm9ubzogJycsCiAgICAgICAgICBjcmVhdGU6IGZhbHNlLAogICAgICAgICAgcGFzczogJycKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBkZWxldGVDb250ZW50OiB7CiAgICAgIGZvcm1VcGxvYWQ6IHsKICAgICAgICBpZDogJycsCiAgICAgICAgdGlwbzogZmFsc2UKICAgICAgfQogICAgfSwKICAgIGRiSW1nOiBbXSwKICAgIGRiRmlsZXM6IFtdCiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIGRhdGFXZWI6IGZ1bmN0aW9uIGRhdGFXZWIoc3RhdGUsIGJhc2VEYXRvcykgewogICAgICBzdGF0ZS5kYldlYiA9IGJhc2VEYXRvc1swXTsKCiAgICAgIGlmIChiYXNlRGF0b3NbMV0gIT09IHVuZGVmaW5lZCkgewogICAgICAgIGJhc2VEYXRvc1sxXSA9IHRydWU7CiAgICAgIH0KICAgIH0sCiAgICBjaGFuZ2VTZWNUaXRsZTogZnVuY3Rpb24gY2hhbmdlU2VjVGl0bGUoc3RhdGUsIHZhbHVlKSB7CiAgICAgIHN0YXRlLnNlY1RpdGxlID0gdmFsdWU7CiAgICB9LAogICAgc2V0VXNlcjogZnVuY3Rpb24gc2V0VXNlcihzdGF0ZSwgdXNlcikgewogICAgICBzdGF0ZS51c2Vycy51c2VyUmVmZXIgPSBmYWxzZTsKICAgICAgc3RhdGUudXNlciA9IHsKICAgICAgICBhY3Rpdm86IHVzZXIuYWN0aXZvLAogICAgICAgIGFwZWxsaWRvOiB1c2VyLmFwZWxsaWRvLAogICAgICAgIGF1dG9yaTogdXNlci5hdXRvcmksCiAgICAgICAgY2FyZ286IHVzZXIuY2FyZ28sCiAgICAgICAgY29ycmVvOiB1c2VyLmNvcnJlbywKICAgICAgICBjb3JyZW9WZXJpOiB1c2VyLmNvcnJlb1ZlcmksCiAgICAgICAgZm90b1VybDogdXNlci5mb3RvVXJsLAogICAgICAgIGlkOiB1c2VyLmlkLAogICAgICAgIG5vbWJyZTogdXNlci5ub21icmUsCiAgICAgICAgdGVsZWZvbm86IHVzZXIudGVsZWZvbm8sCiAgICAgICAgYWNjaW9uOiB1c2VyLmFjY2lvbgogICAgICB9OwogICAgICBzdGF0ZS5yZWZVc2VyID0gewogICAgICAgIGFjdGl2bzogdXNlci5hY3Rpdm8sCiAgICAgICAgYXBlbGxpZG86IHVzZXIuYXBlbGxpZG8sCiAgICAgICAgYXV0b3JpOiB1c2VyLmF1dG9yaSwKICAgICAgICBjYXJnbzogdXNlci5jYXJnbywKICAgICAgICBjb3JyZW86IHVzZXIuY29ycmVvLAogICAgICAgIGNvcnJlb1Zlcmk6IHVzZXIuY29ycmVvVmVyaSwKICAgICAgICBmb3RvVXJsOiB1c2VyLmZvdG9VcmwsCiAgICAgICAgaWQ6IHVzZXIuaWQsCiAgICAgICAgbm9tYnJlOiB1c2VyLm5vbWJyZSwKICAgICAgICB0ZWxlZm9ubzogdXNlci50ZWxlZm9ubywKICAgICAgICBhY2Npb246IHVzZXIuYWNjaW9uCiAgICAgIH07CiAgICB9LAogICAgZGJVc2VyVmFsOiBmdW5jdGlvbiBkYlVzZXJWYWwoc3RhdGUsIHZhbHVlKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgdmFsdWVzUmVmID0gewogICAgICAgIHVzZXJfYWN0aXZvOiB0cnVlLAogICAgICAgIHVzZXJfYXBlbGxpZG86IHZhbHVlLmFwZWxsaWRvLAogICAgICAgIHVzZXJfYXV0b3JpOiB2YWx1ZS5hdXRvcmksCiAgICAgICAgdXNlcl9jYXJnbzogdmFsdWUuY2FyZ28sCiAgICAgICAgdXNlcl9jb3JyZW86IHZhbHVlLmNvcnJlbywKICAgICAgICB1c2VyX2NvcnJlb1Zlcmk6IHZhbHVlLmNvcnJlb1ZlcmksCiAgICAgICAgdXNlcl9mb3RvVXJsOiAiIi5jb25jYXQodmFsdWUuZm90b1VybCksCiAgICAgICAgdXNlcl9pZDogdmFsdWUuaWQsCiAgICAgICAgdXNlcl9ub21icmU6IHZhbHVlLm5vbWJyZSwKICAgICAgICB1c2VyX3RlbGVmb25vOiAiIi5jb25jYXQodmFsdWUudGVsZWZvbm8pLAogICAgICAgIHVzZXJfYWNjaW9uOiAiIi5jb25jYXQodmFsdWUuYWNjaW9uKQogICAgICB9OwogICAgICB2YXIgZGJSZWYgPSBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZignVXN1YXJpb3MnKTsKICAgICAgZGJSZWYuY2hpbGQodmFsdWVzUmVmLnVzZXJfaWQpLnNldCh2YWx1ZXNSZWYpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzLmNvbW1pdCgnc2V0VXNlcicsIE9iamVjdC52YWx1ZXModmFsdWVzUmVmKSk7CiAgICAgIH0pOwogICAgfSwKICAgIGNyZWF0ZVVzZXI6IGZ1bmN0aW9uIGNyZWF0ZVVzZXIoc3RhdGUsIHZhbHVlKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgc3RhdGUudXNlcnMudXNlclJlZmVyID0gdHJ1ZTsKICAgICAgdmFyIGNvbmZpZyA9IHsKICAgICAgICBhcGlLZXk6ICJBSXphU3lDcHNOVnRzQUNDZVMtYW1OcHJHVWgwdkdPRS1TRDl5NVEiLAogICAgICAgIGF1dGhEb21haW46ICJ3ZWItZGF0YWJhc2UtNjY4NDIuZmlyZWJhc2VhcHAuY29tIiwKICAgICAgICBkYXRhYmFzZVVSTDogImh0dHBzOi8vd2ViLWRhdGFiYXNlLTY2ODQyLmZpcmViYXNlaW8uY29tIgogICAgICB9OwogICAgICB2YXIgc2Vjb25kYXJ5QXBwID0gZmlyZWJhc2UuaW5pdGlhbGl6ZUFwcChjb25maWcsICJTZWNvbmRhcnkiKTsKICAgICAgc2Vjb25kYXJ5QXBwLmF1dGgoKS5jcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQoc3RhdGUudXNlcnMuY3JlYXRlVXNlci5mb3JtVXBsb2FkLmNvcnJlbywgc3RhdGUudXNlcnMuY3JlYXRlVXNlci5mb3JtVXBsb2FkLnBhc3MpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHsKICAgICAgICB2YXIgdmFsdWVzUmVmID0gewogICAgICAgICAgY29ycmVvOiB1c2VyLnVzZXIuZW1haWwsCiAgICAgICAgICBjb3JyZW9WZXJpOiB1c2VyLnVzZXIuZW1haWxWZXJpZmllZCwKICAgICAgICAgIG5vbWJyZTogdXNlci51c2VyLmRpc3BsYXlOYW1lLAogICAgICAgICAgYXBlbGxpZG86ICcnLAogICAgICAgICAgYXV0b3JpOiAnJywKICAgICAgICAgIGZvdG9Vcmw6ICcnLAogICAgICAgICAgdGVsZWZvbm86ICcnLAogICAgICAgICAgY2FyZ286ICcnLAogICAgICAgICAgaWQ6IHVzZXIudXNlci51aWQsCiAgICAgICAgICBhY3Rpdm86ICcnLAogICAgICAgICAgYWNjaW9uOiAnJwogICAgICAgIH07CiAgICAgICAgc2Vjb25kYXJ5QXBwLmF1dGgoKS5zaWduT3V0KCk7CiAgICAgICAgc2Vjb25kYXJ5QXBwLmRlbGV0ZSgpOwogICAgICAgIHZhciBzdWNjZXNzID0gewogICAgICAgICAgMDogJ3N1Y2Nlc3NVcGxvYWQnLAogICAgICAgICAgMTogJ1NlIGhhIGNyZWFkbyBleGl0b3NhbWVudGUnCiAgICAgICAgfTsKCiAgICAgICAgX3RoaXMyLmNvbW1pdCgnc3VjY2Vzc0FkdmlzZScsIHN1Y2Nlc3MpOwoKICAgICAgICB2YXIgdmFsdWVzRGIgPSB7CiAgICAgICAgICB1c2VyX2NvcnJlbzogdXNlci51c2VyLmVtYWlsLAogICAgICAgICAgdXNlcl9jb3JyZW9WZXJpOiB1c2VyLnVzZXIuZW1haWxWZXJpZmllZCwKICAgICAgICAgIHVzZXJfbm9tYnJlOiB1c2VyLnVzZXIuZGlzcGxheU5hbWUsCiAgICAgICAgICB1c2VyX2FwZWxsaWRvOiAnJywKICAgICAgICAgIHVzZXJfYXV0b3JpOiAnJywKICAgICAgICAgIHVzZXJfZm90b1VybDogJycsCiAgICAgICAgICB1c2VyX3RlbGVmb25vOiAnJywKICAgICAgICAgIHVzZXJfY2FyZ286ICcnLAogICAgICAgICAgdXNlcl9pZDogdXNlci51c2VyLnVpZCwKICAgICAgICAgIHVzZXJfYWN0aXZvOiAnJywKICAgICAgICAgIHVzZXJfYWNjaW9uOiAnJwogICAgICAgIH07CgogICAgICAgIF90aGlzMi5jb21taXQoJ2RiVXNlclZhbCcsIHZhbHVlc1JlZik7CgogICAgICAgIHN0YXRlLmRiV2ViLlVzdWFyaW9zWyIiLmNvbmNhdCh2YWx1ZXNEYi5pZCldID0gdmFsdWVzRGI7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBzdGF0ZS51c2Vycy51c2VyUmVmZXIgPSBmYWxzZTsKICAgICAgICBzZWNvbmRhcnlBcHAuZGVsZXRlKCk7CgogICAgICAgIGlmIChlcnIubWVzc2FnZSA9PT0gJ1RoZSBlbWFpbCBhZGRyZXNzIGlzIGFscmVhZHkgaW4gdXNlIGJ5IGFub3RoZXIgYWNjb3VudC4nKSB7CiAgICAgICAgICB2YXIgc3VjY2VzcyA9IHsKICAgICAgICAgICAgMDogJ2Vycm9yVXBsb2FkJywKICAgICAgICAgICAgMTogJ0VsIGNvcnJlbyB5YSBlc3TDoSBlbiB1c28nCiAgICAgICAgICB9OwoKICAgICAgICAgIF90aGlzMi5jb21taXQoJ3N1Y2Nlc3NBZHZpc2UnLCBzdWNjZXNzKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHVwZGF0ZVVzZXI6IGZ1bmN0aW9uIHVwZGF0ZVVzZXIoc3RhdGUsIHZhbHVlKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgaWYgKHZhbHVlLnRpcG8gPT09ICcxJykgewogICAgICAgIHZhciB2YWx1ZXNSZWYgPSB7CiAgICAgICAgICB1c2VyX2lkOiB2YWx1ZS5pZCwKICAgICAgICAgIHVzZXJfY29ycmVvOiB2YWx1ZS5jb3JyZW8sCiAgICAgICAgICB1c2VyX2NvcnJlb1Zlcmk6IHZhbHVlLmNvcnJlb1ZlcmksCiAgICAgICAgICB1c2VyX2FjY2lvbjogdmFsdWUuYWNjaW9uLAogICAgICAgICAgdXNlcl90ZWxlZm9ubzogdmFsdWUudGVsZWZvbm8sCiAgICAgICAgICB1c2VyX25vbWJyZTogdmFsdWUubm9tYnJlLAogICAgICAgICAgdXNlcl9hcGVsbGlkbzogdmFsdWUuYXBlbGxpZG8sCiAgICAgICAgICB1c2VyX2FjdGl2bzogdmFsdWUuYWN0aXZvLAogICAgICAgICAgdXNlcl9mb3RvVXJsOiB2YWx1ZS5mb3RvVXJsLAogICAgICAgICAgdXNlcl9hdXRvcmk6IHZhbHVlLmF1dG9yaSwKICAgICAgICAgIHVzZXJfY2FyZ286IHZhbHVlLmNhcmdvCiAgICAgICAgfTsKICAgICAgICB2YXIgZGJSZWYgPSBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZignVXN1YXJpb3MnKTsKICAgICAgICBkYlJlZi5jaGlsZCh2YWx1ZXNSZWYudXNlcl9pZCkuc2V0KHZhbHVlc1JlZikudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAvLyBBcXVpIGRlYm8gcG9uZXIgcGFyYSBxdWl0YXIgZWwgY2FyZ2Fkb3IKICAgICAgICAgIF90aGlzMy5jb21taXQoJ3NldFVzZXInLCB2YWx1ZSk7CgogICAgICAgICAgc3RhdGUuYWN0VXNlciA9IG51bGw7CiAgICAgICAgICB2YXIgc3VjY2VzcyA9IHsKICAgICAgICAgICAgMDogJ3N1Y2Nlc3NVcGxvYWQnLAogICAgICAgICAgICAxOiAnU2UgaGEgYWN0dWFsaXphZG8gZXhpdG9zYW1lbnRlJwogICAgICAgICAgfTsKCiAgICAgICAgICBfdGhpczMuY29tbWl0KCdzdWNjZXNzQWR2aXNlJywgc3VjY2Vzcyk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIHVzZXIgPSBmaXJlYmFzZS5hdXRoKCkuY3VycmVudFVzZXI7CgogICAgICAgIGlmICh1c2VyKSB7CiAgICAgICAgICAvLyBBcXVpIGRlYm8gcG9uZXIgZWwgYWN0aXZhZG9yIHBhcmEgZWwgY2FyZ2Fkb3IKICAgICAgICAgIHVzZXIudXBkYXRlUHJvZmlsZSh7CiAgICAgICAgICAgIGRpc3BsYXlOYW1lOiB2YWx1ZS5ub21icmUsCiAgICAgICAgICAgIGVtYWlsOiB2YWx1ZS5jb3JyZW8sCiAgICAgICAgICAgIHBob25lTnVtYmVyOiB2YWx1ZS50ZWxlZm9ubwogICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciB2YWx1ZXNSZWYgPSB7CiAgICAgICAgICAgICAgdXNlcl9jb3JyZW86IHZhbHVlLmNvcnJlbywKICAgICAgICAgICAgICB1c2VyX2NvcnJlb1Zlcmk6IHZhbHVlLmNvcnJlb1ZlcmksCiAgICAgICAgICAgICAgdXNlcl9ub21icmU6IHZhbHVlLm5vbWJyZSwKICAgICAgICAgICAgICB1c2VyX2FwZWxsaWRvOiB2YWx1ZS5hcGVsbGlkbywKICAgICAgICAgICAgICB1c2VyX2F1dG9yaTogdmFsdWUuYXV0b3JpLAogICAgICAgICAgICAgIHVzZXJfZm90b1VybDogdmFsdWUuZm90b1VybCwKICAgICAgICAgICAgICB1c2VyX3RlbGVmb25vOiB2YWx1ZS50ZWxlZm9ubywKICAgICAgICAgICAgICB1c2VyX2NhcmdvOiB2YWx1ZS5jYXJnbywKICAgICAgICAgICAgICB1c2VyX2lkOiB2YWx1ZS5pZCwKICAgICAgICAgICAgICB1c2VyX2FjdGl2bzogdmFsdWUuYWN0aXZvLAogICAgICAgICAgICAgIHVzZXJfYWNjaW9uOiB2YWx1ZS5hY2Npb24KICAgICAgICAgICAgfTsKICAgICAgICAgICAgdmFyIGRiUmVmID0gZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoJ1VzdWFyaW9zJyk7CiAgICAgICAgICAgIGRiUmVmLmNoaWxkKHZhbHVlLmlkKS5zZXQodmFsdWVzUmVmKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAvLyBBcXVpIGRlYm8gcG9uZXIgcGFyYSBxdWl0YXIgZWwgY2FyZ2Fkb3IKICAgICAgICAgICAgICBfdGhpczMuY29tbWl0KCdzZXRVc2VyJywgdmFsdWUpOwoKICAgICAgICAgICAgICBzdGF0ZS5hY3RVc2VyID0gbnVsbDsKICAgICAgICAgICAgICB2YXIgc3VjY2VzcyA9IHsKICAgICAgICAgICAgICAgIDA6ICdzdWNjZXNzVXBsb2FkJywKICAgICAgICAgICAgICAgIDE6ICdTZSBoYSBhY3R1YWxpemFkbyBleGl0b3NhbWVudGUnCiAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgX3RoaXMzLmNvbW1pdCgnc3VjY2Vzc0FkdmlzZScsIHN1Y2Nlc3MpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGlzVXNlckRpZmY6IGZ1bmN0aW9uIGlzVXNlckRpZmYoc3RhdGUsIHZhbHVlKSB7CiAgICAgIGlmICh2YWx1ZS50aXBvID09PSAnMCcpIHsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IE9iamVjdC52YWx1ZXMoc3RhdGUudXNlcikubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGlmIChPYmplY3QudmFsdWVzKHN0YXRlLnVzZXIpW2ldICE9PSBPYmplY3QudmFsdWVzKHN0YXRlLnJlZlVzZXIpW2ldKSB7CiAgICAgICAgICAgIHN0YXRlLmFjdFVzZXIgPSB0cnVlOwogICAgICAgICAgICByZXR1cm4gdGhpcy5jb21taXQoJ3VwZGF0ZVVzZXInLCBzdGF0ZS51c2VyKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc3RhdGUuYWN0VXNlciA9IHRydWU7CiAgICAgICAgdGhpcy5jb21taXQoJ3VwZGF0ZVVzZXInLCB2YWx1ZSk7CiAgICAgIH0KICAgIH0sCiAgICBkZWxldGVJdGVtOiBmdW5jdGlvbiBkZWxldGVJdGVtKHN0YXRlLCB2YWx1ZSkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHN0YXRlLmRlbGV0aW5nVmFsID0gdHJ1ZTsKICAgICAgc3RhdGUuZGVsZXRpbmdJbmRleCA9IHZhbHVlLmluZGV4OwoKICAgICAgaWYgKHZhbHVlLnN0b3JhZ2UgPT09IGZhbHNlKSB7CiAgICAgICAgZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoIiIuY29uY2F0KHZhbHVlLnJlZiwgIi8iKS5jb25jYXQodmFsdWUuaWREYikpLnJlbW92ZSgpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgc3RhdGUuZGVsZXRpbmdWYWwgPSBmYWxzZTsKICAgICAgICAgIHN0YXRlLmRlbGV0aW5nSW5kZXggPSAnJzsKICAgICAgICAgIHZhciBzdWNjZXNzID0gewogICAgICAgICAgICAwOiAnc3VjY2Vzc1VwbG9hZCcsCiAgICAgICAgICAgIDE6ICdTZSBoYSBlbGltaW5hZG8gZXhpdG9zYW1lbnRlJwogICAgICAgICAgfTsKCiAgICAgICAgICBfdGhpczQuY29tbWl0KCdzdWNjZXNzQWR2aXNlJywgc3VjY2Vzcyk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAodmFsdWUuc3RvcmFnZSA9PT0gdHJ1ZSkgewogICAgICAgIHRyeSB7CiAgICAgICAgICB2YXIgc3RvcmFnZVJlZiA9IGZpcmViYXNlLnN0b3JhZ2UoKS5yZWYoIi8iLmNvbmNhdCh2YWx1ZS5yZWYsICIvIikuY29uY2F0KHZhbHVlLmlkU3QpKTsKICAgICAgICAgIHN0b3JhZ2VSZWYubGlzdEFsbCgpLnRoZW4oZnVuY3Rpb24gKHByb20pIHsKICAgICAgICAgICAgaWYgKHByb20uaXRlbXMubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgICAgICAgcHJvbS5pdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICAgICAgICBzdG9yYWdlUmVmLmNoaWxkKGVsZW1lbnQubmFtZSkuZGVsZXRlKCkudGhlbihmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgICAgIGlmIChlcnIgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoIiIuY29uY2F0KHZhbHVlLnJlZiwgIi8iKS5jb25jYXQodmFsdWUuaWREYikpLnJlbW92ZSgpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgc3RhdGUuZGVsZXRpbmdWYWwgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLmRlbGV0aW5nSW5kZXggPSAnJzsKICAgICAgICAgICAgICAgICAgICAgIHZhciBzdWNjZXNzID0gewogICAgICAgICAgICAgICAgICAgICAgICAwOiAnc3VjY2Vzc1VwbG9hZCcsCiAgICAgICAgICAgICAgICAgICAgICAgIDE6ICdTZSBoYSBlbGltaW5hZG8gZXhpdG9zYW1lbnRlJwogICAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgICBfdGhpczQuY29tbWl0KCdzdWNjZXNzQWR2aXNlJywgc3VjY2Vzcyk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKCIiLmNvbmNhdCh2YWx1ZS5yZWYsICIvIikuY29uY2F0KHZhbHVlLmlkRGIpKS5yZW1vdmUoKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHN0YXRlLmRlbGV0aW5nVmFsID0gZmFsc2U7CiAgICAgICAgICAgICAgICBzdGF0ZS5kZWxldGluZ0luZGV4ID0gJyc7CiAgICAgICAgICAgICAgICB2YXIgc3VjY2VzcyA9IHsKICAgICAgICAgICAgICAgICAgMDogJ3N1Y2Nlc3NVcGxvYWQnLAogICAgICAgICAgICAgICAgICAxOiAnU2UgaGEgZWxpbWluYWRvIGV4aXRvc2FtZW50ZScKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgX3RoaXM0LmNvbW1pdCgnc3VjY2Vzc0FkdmlzZScsIHN1Y2Nlc3MpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgZGVsZXRlZEVsOiBmdW5jdGlvbiBkZWxldGVkRWwoc3RhdGUsIHZhbHVlKSB7CiAgICAgIGlmICh2YWx1ZVswXSA9PT0gMCkgewogICAgICAgIHN0YXRlLmRlbGV0aW5nVmFsID0gdmFsdWVbMV07CiAgICAgIH0KCiAgICAgIGlmICh2YWx1ZVswXSA9PT0gMSkgewogICAgICAgIHN0YXRlLmRlbGV0aW5nSW5kZXggPSB2YWx1ZVsxXTsKICAgICAgfQogICAgfSwKICAgIHJlc2V0Q29udGVudFZhbHVlczogZnVuY3Rpb24gcmVzZXRDb250ZW50VmFsdWVzKHN0YXRlLCB2YWwpIHsKICAgICAgaWYgKHZhbCA9PT0gMCkgewogICAgICAgIHN0YXRlLmNyZWF0ZUNvbnRlbnQuZm9ybVVwbG9hZC50aXR1bG8gPSAnJzsKICAgICAgICBzdGF0ZS5jcmVhdGVDb250ZW50LmZvcm1VcGxvYWQuaW5mbyA9ICcnOwogICAgICAgIHN0YXRlLmNyZWF0ZUNvbnRlbnQuZm9ybVVwbG9hZC5wcmV2ID0gJyc7CiAgICAgICAgc3RhdGUuY3JlYXRlQ29udGVudC5mb3JtVXBsb2FkLmltYWdlcyA9IFtdOwogICAgICAgIHN0YXRlLmNyZWF0ZUNvbnRlbnQuZm9ybVVwbG9hZC5mZWNoYSA9ICcnOwogICAgICAgIHN0YXRlLmNyZWF0ZUNvbnRlbnQuZm9ybVVwbG9hZC5pZCA9ICcnOwogICAgICAgIHN0YXRlLmNyZWF0ZUNvbnRlbnQuZm9ybVVwbG9hZC5zZWNjaW9uID0gJ1NlbGVjY2lvbmUgdW5hIG9wY2nDs24nOwogICAgICB9IGVsc2UgaWYgKHZhbCA9PT0gMSkgewogICAgICAgIHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQudGl0dWxvID0gJyc7CiAgICAgICAgc3RhdGUuZWRpdENvbnRlbnQuZm9ybVVwbG9hZC5pbmZvID0gJyc7CiAgICAgICAgc3RhdGUuZWRpdENvbnRlbnQuZm9ybVVwbG9hZC5wcmV2ID0gJyc7CiAgICAgICAgc3RhdGUuZWRpdENvbnRlbnQuZm9ybVVwbG9hZC5pbWFnZXMgPSBbXTsKICAgICAgICBzdGF0ZS5lZGl0Q29udGVudC5mb3JtVXBsb2FkLmZlY2hhID0gJyc7CiAgICAgICAgc3RhdGUuZWRpdENvbnRlbnQuZm9ybVVwbG9hZC5pZCA9ICcnOwogICAgICAgIHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQuc2VjY2lvbiA9ICdUb2RhcyBsYXMgc2VjY2lvbmVzJzsKICAgICAgfSBlbHNlIGlmICh2YWwgPT09IDMpIHsKICAgICAgICBzdGF0ZS51c2VycyA9IHsKICAgICAgICAgIHVzZXJSZWZlcjogZmFsc2UsCiAgICAgICAgICBjcmVhdGVVc2VyOiB7CiAgICAgICAgICAgIGZvcm1VcGxvYWQ6IHsKICAgICAgICAgICAgICBhY3Rpdm86ICcnLAogICAgICAgICAgICAgIGFwZWxsaWRvOiAnJywKICAgICAgICAgICAgICBjYXJnbzogJycsCiAgICAgICAgICAgICAgY29ycmVvOiAnJywKICAgICAgICAgICAgICBjb3JyZW9WZXJpOiAnJywKICAgICAgICAgICAgICBmb3RvVXJsOiAnJywKICAgICAgICAgICAgICBpZDogJycsCiAgICAgICAgICAgICAgbm9tYnJlOiAnJywKICAgICAgICAgICAgICB0ZWxlZm9ubzogJycsCiAgICAgICAgICAgICAgY3JlYXRlOiBmYWxzZSwKICAgICAgICAgICAgICBwYXNzOiAnJwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfQogICAgfSwKICAgIHN1Y2Nlc3NBZHZpc2U6IGZ1bmN0aW9uIHN1Y2Nlc3NBZHZpc2Uoc3RhdGUsIGRhdGEpIHsKICAgICAgc3RhdGVbIiIuY29uY2F0KGRhdGFbMF0pXSA9IGRhdGFbMV07CiAgICB9LAogICAgaGFuZGxlVXBsb2FkOiBmdW5jdGlvbiBoYW5kbGVVcGxvYWQoc3RhdGUsIGZpbGVzKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgdmFyIHN0b3JhZ2VSZWYgPSBbXTsKICAgICAgdmFyIHBlcmNlbnRhZ2UgPSBbXTsKICAgICAgdmFyIG9yZGVyID0gW107CiAgICAgIHZhciB0YXNrID0ge307CiAgICAgIHZhciBpID0gMDsKICAgICAgdmFyIGogPSAwOwogICAgICB2YXIgbSA9IDA7CiAgICAgIHZhciBuID0gMDsKCiAgICAgIGlmIChzdGF0ZS5jcmVhdGVDb250ZW50LmZvcm1VcGxvYWQudGlwbyA9PT0gdHJ1ZSkgewogICAgICAgIGZpbGVzLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgIHN0b3JhZ2VSZWYgPSBmaXJlYmFzZS5zdG9yYWdlKCkucmVmKCIvaW1hZ2VuZXMvbm90aWNpYXMvIi5jb25jYXQoc3RhdGUuY3JlYXRlQ29udGVudC5mb3JtVXBsb2FkLmlkLCAiL2ZvdG8iKS5jb25jYXQoZWxlbWVudC5pZCkpOwogICAgICAgICAgdGFza1tpXSA9IHN0b3JhZ2VSZWYucHV0KGVsZW1lbnQpOwogICAgICAgICAgaSsrOwogICAgICAgIH0pOwoKICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgZmlsZXMubGVuZ3RoOyBfaSsrKSB7CiAgICAgICAgICB0YXNrW19pXS5vbignc3RhdGVfY2hhbmdlZCcsIGZ1bmN0aW9uIChzbmFwc2hvdCkgewogICAgICAgICAgICBwZXJjZW50YWdlW3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdID0gc25hcHNob3QuYnl0ZXNUcmFuc2ZlcnJlZCAvIHNuYXBzaG90LnRvdGFsQnl0ZXMgKiAxMDA7CiAgICAgICAgICAgIHN0YXRlLmNyZWF0ZUNvbnRlbnQuZm9ybVVwbG9hZC5pbWFnZXNbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF0udXBsb2FkUGVyY2VudGFnZSA9IHBlcmNlbnRhZ2Vbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF07CiAgICAgICAgICAgIG0rKzsKCiAgICAgICAgICAgIGlmIChzdGF0ZS5jcmVhdGVDb250ZW50LmZvcm1VcGxvYWQuaW1hZ2VzW3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdLnVwbG9hZFBlcmNlbnRhZ2UgPT09IDEwMCAmJiBvcmRlci5sZW5ndGggPCBmaWxlcy5sZW5ndGgpIHsKICAgICAgICAgICAgICBvcmRlci5wdXNoKHNuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IubWVzc2FnZSk7CiAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBkYXRhUmVmID0gewogICAgICAgICAgICAgIG5vdGlfdGl0dWxvOiBzdGF0ZS5jcmVhdGVDb250ZW50LmZvcm1VcGxvYWQudGl0dWxvLAogICAgICAgICAgICAgIG5vdGlfaW5mbzogc3RhdGUuY3JlYXRlQ29udGVudC5mb3JtVXBsb2FkLmluZm8sCiAgICAgICAgICAgICAgbm90aV9mZWNoYTogc3RhdGUuY3JlYXRlQ29udGVudC5mb3JtVXBsb2FkLmZlY2hhLAogICAgICAgICAgICAgIG5vdGlfaWQ6IHN0YXRlLmNyZWF0ZUNvbnRlbnQuZm9ybVVwbG9hZC5pZCwKICAgICAgICAgICAgICBub3RpX3ByZXY6IHN0YXRlLmNyZWF0ZUNvbnRlbnQuZm9ybVVwbG9hZC5wcmV2LAogICAgICAgICAgICAgIG5vdGlfcHVibGljYXI6IHRydWUsCiAgICAgICAgICAgICAgbm90aV9zZWNjaW9uOiBzdGF0ZS5jcmVhdGVDb250ZW50LmZvcm1VcGxvYWQuc2VjY2lvbiwKICAgICAgICAgICAgICBub3RpX2ltYWdlbmVzOiBbXQogICAgICAgICAgICB9OwogICAgICAgICAgICB2YXIgc3RvcmFnZVJlZiA9IGZpcmViYXNlLnN0b3JhZ2UoKS5yZWYoIi9pbWFnZW5lcy9ub3RpY2lhcy8iLmNvbmNhdChzdGF0ZS5jcmVhdGVDb250ZW50LmZvcm1VcGxvYWQuaWQsICIvZm90byIpLmNvbmNhdChvcmRlcltqXSkpOwogICAgICAgICAgICBzdG9yYWdlUmVmLmdldERvd25sb2FkVVJMKCkudGhlbihmdW5jdGlvbiAodXJsKSB7CiAgICAgICAgICAgICAgdmFyIHZhbCA9IG9yZGVyW25dOwogICAgICAgICAgICAgIHN0YXRlLmNyZWF0ZUNvbnRlbnQuZm9ybVVwbG9hZC5pbWFnZXNbdmFsXS51cmwgPSB1cmw7CiAgICAgICAgICAgICAgc3RhdGUuY3JlYXRlQ29udGVudC5mb3JtVXBsb2FkLmltYWdlc1t2YWxdLm5hbWUgPSAiZm90byIuY29uY2F0KHZhbCk7CiAgICAgICAgICAgICAgbisrOwoKICAgICAgICAgICAgICBpZiAobiA+PSBzdGF0ZS5jcmVhdGVDb250ZW50LmZvcm1VcGxvYWQuaW1hZ2VzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgbiA9IDA7CiAgICAgICAgICAgICAgICBzdGF0ZS5jcmVhdGVDb250ZW50LmZvcm1VcGxvYWQuaW1hZ2VzLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgICAgICAgICAgZGF0YVJlZi5ub3RpX2ltYWdlbmVzLnB1c2goe30pOwogICAgICAgICAgICAgICAgICBkYXRhUmVmLm5vdGlfaW1hZ2VuZXNbbl0ubm9tYnJlID0gc3RhdGUuY3JlYXRlQ29udGVudC5mb3JtVXBsb2FkLmltYWdlc1tuXS5uYW1lOwogICAgICAgICAgICAgICAgICBkYXRhUmVmLm5vdGlfaW1hZ2VuZXNbbl0udXJsID0gc3RhdGUuY3JlYXRlQ29udGVudC5mb3JtVXBsb2FkLmltYWdlc1tuXS51cmw7CiAgICAgICAgICAgICAgICAgIG4rKzsKCiAgICAgICAgICAgICAgICAgIGlmIChuID49IHN0YXRlLmNyZWF0ZUNvbnRlbnQuZm9ybVVwbG9hZC5pbWFnZXMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGRiUmVmID0gZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoJ05vdGljaWFzJyk7CiAgICAgICAgICAgICAgICAgICAgZGJSZWYuY2hpbGQoc3RhdGUuY3JlYXRlQ29udGVudC5mb3JtVXBsb2FkLmlkKS5zZXQoZGF0YVJlZik7CiAgICAgICAgICAgICAgICAgICAgc3RhdGUuY3JlYXRlQ29udGVudC5mb3JtVXBsb2FkLnRpcG8gPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB2YXIgc3VjY2VzcyA9IHsKICAgICAgICAgICAgICAgICAgICAgIDA6ICdzdWNjZXNzVXBsb2FkJywKICAgICAgICAgICAgICAgICAgICAgIDE6ICdTZSBoYSBjcmVhZG8gZXhpdG9zYW1lbnRlJwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIF90aGlzNS5jb21taXQoJ3N1Y2Nlc3NBZHZpc2UnLCBzdWNjZXNzKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaisrOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQudGlwbyA9PT0gdHJ1ZSkgewogICAgICAgIGlmIChzdGF0ZS5lZGl0Q29udGVudC5mb3JtVXBsb2FkLnVwbG9hZEltYWdlcyA9PT0gdHJ1ZSkgewogICAgICAgICAgZmlsZXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgICBzdG9yYWdlUmVmID0gZmlyZWJhc2Uuc3RvcmFnZSgpLnJlZigiL2ltYWdlbmVzL25vdGljaWFzLyIuY29uY2F0KHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQuaWQsICIvZm90byIpLmNvbmNhdChlbGVtZW50LmlkKSk7CiAgICAgICAgICAgIHRhc2tbaV0gPSBzdG9yYWdlUmVmLnB1dChlbGVtZW50KTsKICAgICAgICAgICAgaSsrOwogICAgICAgICAgfSk7CgogICAgICAgICAgZm9yICh2YXIgX2kyID0gMDsgX2kyIDwgZmlsZXMubGVuZ3RoOyBfaTIrKykgewogICAgICAgICAgICB0YXNrW19pMl0ub24oJ3N0YXRlX2NoYW5nZWQnLCBmdW5jdGlvbiAoc25hcHNob3QpIHsKICAgICAgICAgICAgICBwZXJjZW50YWdlW3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdID0gc25hcHNob3QuYnl0ZXNUcmFuc2ZlcnJlZCAvIHNuYXBzaG90LnRvdGFsQnl0ZXMgKiAxMDA7CiAgICAgICAgICAgICAgc3RhdGUuZWRpdENvbnRlbnQuZm9ybVVwbG9hZC5pbWFnZXNbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF0udXBsb2FkUGVyY2VudGFnZSA9IHBlcmNlbnRhZ2Vbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF07CiAgICAgICAgICAgICAgOwogICAgICAgICAgICAgIG0rKzsKCiAgICAgICAgICAgICAgaWYgKHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQuaW1hZ2VzW3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdLnVwbG9hZFBlcmNlbnRhZ2UgPT09IDEwMCAmJiBvcmRlci5sZW5ndGggPCBmaWxlcy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIG9yZGVyLnB1c2goc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5tZXNzYWdlKTsKICAgICAgICAgICAgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHZhciBkYXRhUmVmID0gewogICAgICAgICAgICAgICAgbm90aV90aXR1bG86IHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQudGl0dWxvLAogICAgICAgICAgICAgICAgbm90aV9pbmZvOiBzdGF0ZS5lZGl0Q29udGVudC5mb3JtVXBsb2FkLmluZm8sCiAgICAgICAgICAgICAgICBub3RpX2ZlY2hhOiBzdGF0ZS5lZGl0Q29udGVudC5mb3JtVXBsb2FkLmZlY2hhLAogICAgICAgICAgICAgICAgbm90aV9pZDogc3RhdGUuZWRpdENvbnRlbnQuZm9ybVVwbG9hZC5pZCwKICAgICAgICAgICAgICAgIG5vdGlfcHJldjogc3RhdGUuZWRpdENvbnRlbnQuZm9ybVVwbG9hZC5wcmV2LAogICAgICAgICAgICAgICAgbm90aV9wdWJsaWNhcjogdHJ1ZSwKICAgICAgICAgICAgICAgIG5vdGlfc2VjY2lvbjogc3RhdGUuZWRpdENvbnRlbnQuZm9ybVVwbG9hZC5zZWNjaW9uLAogICAgICAgICAgICAgICAgbm90aV9pbWFnZW5lczogW10KICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIHZhciBzdG9yYWdlUmVmID0gZmlyZWJhc2Uuc3RvcmFnZSgpLnJlZigiL2ltYWdlbmVzL25vdGljaWFzLyIuY29uY2F0KHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQuaWQsICIvZm90byIpLmNvbmNhdChvcmRlcltqXSkpOwogICAgICAgICAgICAgIHN0b3JhZ2VSZWYuZ2V0RG93bmxvYWRVUkwoKS50aGVuKGZ1bmN0aW9uICh1cmwpIHsKICAgICAgICAgICAgICAgIHZhciB2YWwgPSBvcmRlcltuXTsKICAgICAgICAgICAgICAgIHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQuaW1hZ2VzW3ZhbF0udXJsID0gdXJsOwogICAgICAgICAgICAgICAgc3RhdGUuZWRpdENvbnRlbnQuZm9ybVVwbG9hZC5pbWFnZXNbdmFsXS5uYW1lID0gImZvdG8iLmNvbmNhdCh2YWwpOwogICAgICAgICAgICAgICAgbisrOwoKICAgICAgICAgICAgICAgIGlmIChuID49IHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQuaW1hZ2VzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICBuID0gMDsKICAgICAgICAgICAgICAgICAgc3RhdGUuZWRpdENvbnRlbnQuZm9ybVVwbG9hZC5pbWFnZXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgICAgICAgICAgIGRhdGFSZWYubm90aV9pbWFnZW5lcy5wdXNoKHt9KTsKICAgICAgICAgICAgICAgICAgICBkYXRhUmVmLm5vdGlfaW1hZ2VuZXNbbl0ubm9tYnJlID0gc3RhdGUuZWRpdENvbnRlbnQuZm9ybVVwbG9hZC5pbWFnZXNbbl0ubmFtZTsKICAgICAgICAgICAgICAgICAgICBkYXRhUmVmLm5vdGlfaW1hZ2VuZXNbbl0udXJsID0gc3RhdGUuZWRpdENvbnRlbnQuZm9ybVVwbG9hZC5pbWFnZXNbbl0udXJsOwogICAgICAgICAgICAgICAgICAgIG4rKzsKCiAgICAgICAgICAgICAgICAgICAgaWYgKG4gPj0gc3RhdGUuZWRpdENvbnRlbnQuZm9ybVVwbG9hZC5pbWFnZXMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgZGJSZWYgPSBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZignTm90aWNpYXMnKTsKICAgICAgICAgICAgICAgICAgICAgIGRiUmVmLmNoaWxkKHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQuaWQpLnNldChkYXRhUmVmKTsKICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQudGlwbyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgdmFyIHN1Y2Nlc3MgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIDA6ICdzdWNjZXNzVXBsb2FkJywKICAgICAgICAgICAgICAgICAgICAgICAgMTogJ1NlIGhhIGFjdHVhbGl6YWRvIGV4aXRvc2FtZW50ZScKICAgICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgICAgX3RoaXM1LmNvbW1pdCgnc3VjY2Vzc0FkdmlzZScsIHN1Y2Nlc3MpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgaisrOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFyIGRhdGFSZWYgPSB7CiAgICAgICAgICAgIG5vdGlfdGl0dWxvOiBzdGF0ZS5lZGl0Q29udGVudC5mb3JtVXBsb2FkLnRpdHVsbywKICAgICAgICAgICAgbm90aV9pbmZvOiBzdGF0ZS5lZGl0Q29udGVudC5mb3JtVXBsb2FkLmluZm8sCiAgICAgICAgICAgIG5vdGlfZmVjaGE6IHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQuZmVjaGEsCiAgICAgICAgICAgIG5vdGlfaWQ6IHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQuaWQsCiAgICAgICAgICAgIG5vdGlfcHJldjogc3RhdGUuZWRpdENvbnRlbnQuZm9ybVVwbG9hZC5wcmV2LAogICAgICAgICAgICBub3RpX3B1YmxpY2FyOiB0cnVlLAogICAgICAgICAgICBub3RpX3NlY2Npb246IHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQuc2VjY2lvbiwKICAgICAgICAgICAgbm90aV9pbWFnZW5lczogc3RhdGUuZWRpdENvbnRlbnQuZm9ybVVwbG9hZC5pbWFnZXMKICAgICAgICAgIH07CiAgICAgICAgICB2YXIgZGJSZWYgPSBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZignTm90aWNpYXMnKTsKICAgICAgICAgIGRiUmVmLmNoaWxkKHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQuaWQpLnNldChkYXRhUmVmKTsKICAgICAgICAgIHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQudGlwbyA9IGZhbHNlOwogICAgICAgICAgdmFyIHN1Y2Nlc3MgPSB7CiAgICAgICAgICAgIDA6ICdzdWNjZXNzVXBsb2FkJywKICAgICAgICAgICAgMTogJ1NlIGhhIGFjdHVhbGl6YWRvIGV4aXRvc2FtZW50ZScKICAgICAgICAgIH07CiAgICAgICAgICB0aGlzLmNvbW1pdCgnc3VjY2Vzc0FkdmlzZScsIHN1Y2Nlc3MpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChzdGF0ZS5kZWxldGVDb250ZW50LmZvcm1VcGxvYWQudGlwbyA9PT0gdHJ1ZSkgewogICAgICAgIHRyeSB7CiAgICAgICAgICB2YXIgX3N0b3JhZ2VSZWYgPSBmaXJlYmFzZS5zdG9yYWdlKCkucmVmKCIvaW1hZ2VuZXMvbm90aWNpYXMvIi5jb25jYXQoc3RhdGUuZGVsZXRlQ29udGVudC5mb3JtVXBsb2FkLmlkKSk7CgogICAgICAgICAgX3N0b3JhZ2VSZWYubGlzdEFsbCgpLnRoZW4oZnVuY3Rpb24gKHByb20pIHsKICAgICAgICAgICAgcHJvbS5pdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICAgICAgX3N0b3JhZ2VSZWYuY2hpbGQoZWxlbWVudC5uYW1lKS5kZWxldGUoKS50aGVuKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICAgIGlmIChlcnIgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoIk5vdGljaWFzLyIuY29uY2F0KHN0YXRlLmRlbGV0ZUNvbnRlbnQuZm9ybVVwbG9hZC5pZCkpLnJlbW92ZSgpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHN0YXRlLmRlbGV0aW5nVmFsID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgc3RhdGUuZGVsZXRlQ29udGVudC5mb3JtVXBsb2FkLnRpcG8gPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB2YXIgc3VjY2VzcyA9IHsKICAgICAgICAgICAgICAgICAgICAgIDA6ICdzdWNjZXNzVXBsb2FkJywKICAgICAgICAgICAgICAgICAgICAgIDE6ICdTZSBoYSBlbGltaW5hZG8gZXhpdG9zYW1lbnRlJwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIF90aGlzNS5jb21taXQoJ3N1Y2Nlc3NBZHZpc2UnLCBzdWNjZXNzKTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGZpbGVzVXBsb2FkOiBmdW5jdGlvbiBmaWxlc1VwbG9hZChzdGF0ZSwgZGF0YSkgewogICAgICBzdGF0ZS5mb3JtdGlwbyA9IGRhdGFbMl07CgogICAgICBpZiAoc3RhdGUuZm9ybXRpcG8gPT09IDApIHsKICAgICAgICB2YXIgZCA9IG5ldyBEYXRlKCk7CiAgICAgICAgdmFyIG1pbGlTZWMgPSBEYXRlLnBhcnNlKGQpOwogICAgICAgIHZhciBkU3RyaW5nID0gZC50b1N0cmluZygpOwogICAgICAgIHZhciBzcGxpdHRlZERhdGUgPSBkU3RyaW5nLnNwbGl0KCcgJyk7CiAgICAgICAgdmFyIGpvaW5lZERhdGUgPSBbXTsKCiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCA1OyBpKyspIHsKICAgICAgICAgIGpvaW5lZERhdGUucHVzaChzcGxpdHRlZERhdGVbaV0pOwogICAgICAgIH0KCiAgICAgICAgdmFyIGpvaW5lZCA9IGpvaW5lZERhdGUuam9pbignfCcpOwogICAgICAgIHN0YXRlLmNyZWF0ZUNvbnRlbnQuZm9ybVVwbG9hZC50aXBvID0gdHJ1ZTsKICAgICAgICBzdGF0ZS5jcmVhdGVDb250ZW50LmZvcm1VcGxvYWQuZmVjaGEgPSBqb2luZWQ7CiAgICAgICAgc3RhdGUuY3JlYXRlQ29udGVudC5mb3JtVXBsb2FkLmltYWdlcyA9IGRhdGFbMF07CiAgICAgICAgc3RhdGUuY3JlYXRlQ29udGVudC5mb3JtVXBsb2FkLmlkID0gbWlsaVNlYzsKICAgICAgICB0aGlzLmNvbW1pdCgnaGFuZGxlVXBsb2FkJywgZGF0YVsxXSk7CiAgICAgIH0gZWxzZSBpZiAoc3RhdGUuZm9ybXRpcG8gPT09IDEpIHsKICAgICAgICBzdGF0ZS5lZGl0Q29udGVudC5mb3JtVXBsb2FkLnRpcG8gPSB0cnVlOwogICAgICAgIHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQuZmVjaGEgPSBkYXRhWzBdLmZlY2hhOwogICAgICAgIHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQuaW1hZ2VzID0gZGF0YVswXS5pbWFnZW5lczsKICAgICAgICBzdGF0ZS5lZGl0Q29udGVudC5mb3JtVXBsb2FkLmlkID0gZGF0YVswXS5pZDsKICAgICAgICBzdGF0ZS5lZGl0Q29udGVudC5mb3JtVXBsb2FkLnRpdHVsbyA9IGRhdGFbMF0udGl0dWxvOwogICAgICAgIHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQuaW5mbyA9IGRhdGFbMF0uaW5mbzsKICAgICAgICBzdGF0ZS5lZGl0Q29udGVudC5mb3JtVXBsb2FkLnByZXYgPSBkYXRhWzBdLnByZXY7CiAgICAgICAgc3RhdGUuZWRpdENvbnRlbnQuZm9ybVVwbG9hZC5zZWNjaW9uID0gZGF0YVswXS5zZWNjaW9uOwogICAgICAgIHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQudXBsb2FkSW1hZ2VzID0gZGF0YVszXTsKICAgICAgICBzdGF0ZS5lZGl0Q29udGVudC5mb3JtVXBsb2FkLnVwbG9hZERhdGFCYXNlID0gZGF0YVs0XTsKICAgICAgICB0aGlzLmNvbW1pdCgnaGFuZGxlVXBsb2FkJywgZGF0YVsxXSk7CiAgICAgIH0gZWxzZSBpZiAoc3RhdGUuZm9ybXRpcG8gPT09IDIpIHsKICAgICAgICBzdGF0ZS5kZWxldGVDb250ZW50LmZvcm1VcGxvYWQuaWQgPSBkYXRhWzBdOwogICAgICAgIHN0YXRlLmRlbGV0ZUNvbnRlbnQuZm9ybVVwbG9hZC50aXBvID0gdHJ1ZTsKICAgICAgICBzdGF0ZS5kZWxldGluZ1ZhbCA9IHRydWU7CiAgICAgICAgc3RhdGUuZGVsZXRpbmdJbmRleCA9IGRhdGFbM107CiAgICAgICAgdGhpcy5jb21taXQoJ2hhbmRsZVVwbG9hZCcsIGRhdGFbMV0pOwogICAgICB9CiAgICB9LAogICAgY3JlYXJEQjogZnVuY3Rpb24gY3JlYXJEQihzdGF0ZSwgZGF0YSkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIHN0YXRlLmNyZWFyREJWYWxzID0gdHJ1ZTsKCiAgICAgIGlmIChkYXRhLnRhcmdldCA9PT0gJ0p1bnRhcycpIHsKICAgICAgICBpZiAoT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5sZW5ndGggIT09IDApIHsKICAgICAgICAgIGZvciAodmFyIF9pMyA9IDA7IF9pMyA8IE9iamVjdC52YWx1ZXMoZGF0YS5qdW50YS5pbnRlZ3JhbnRlcykubGVuZ3RoOyBfaTMrKykgewogICAgICAgICAgICBzdGF0ZS5kYkltZ1tfaTNdID0gW107CiAgICAgICAgICAgIHN0YXRlLmRiSW1nW19pM10gPSBPYmplY3QudmFsdWVzKGRhdGEuanVudGEuaW50ZWdyYW50ZXMpW19pM10uaW1hZ2U7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB2YXIgc3RvcmFnZVJlZiA9IFtdOwogICAgICAgIHZhciBwZXJjZW50YWdlID0gW107CiAgICAgICAgdmFyIG9yZGVyID0gW107CiAgICAgICAgdmFyIHRhc2sgPSB7fTsKICAgICAgICB2YXIgaSA9IDA7CiAgICAgICAgdmFyIGogPSAwOwogICAgICAgIHZhciBuID0gMDsKICAgICAgICB2YXIgZGJSZWYgPSBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZigiIi5jb25jYXQoZGF0YS50YXJnZXQpKTsKICAgICAgICB2YXIgcHVzaGRiUmVmID0gZGJSZWYucHVzaCgpOwogICAgICAgIHZhciBkYXRhUmVmID0gewogICAgICAgICAganVudF9pZDogcHVzaGRiUmVmLmtleQogICAgICAgIH07CiAgICAgICAgT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICBzdG9yYWdlUmVmID0gZmlyZWJhc2Uuc3RvcmFnZSgpLnJlZigiLyIuY29uY2F0KGRhdGEudGFyZ2V0LCAiLyIpLmNvbmNhdChkYXRhUmVmLmp1bnRfaWQsICIvIikuY29uY2F0KGRhdGEuanVudGEuaW50ZWdyYW50ZXNbIiIuY29uY2F0KGVsZW1lbnQuaWQpXS5jYXJnby5zcGxpdCgnICcpLmpvaW4oJ18nKSkpOwogICAgICAgICAgdGFza1siIi5jb25jYXQoZWxlbWVudC5pZCldID0gc3RvcmFnZVJlZi5wdXQoZWxlbWVudCk7CiAgICAgICAgfSk7CgogICAgICAgIGlmIChPYmplY3QudmFsdWVzKHRhc2spLmxlbmd0aCAhPT0gMCkgewogICAgICAgICAgT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICAgIHRhc2tbIiIuY29uY2F0KGVsZW1lbnQuaWQpXS5vbignc3RhdGVfY2hhbmdlZCcsIGZ1bmN0aW9uIChzbmFwc2hvdCkgewogICAgICAgICAgICAgIHBlcmNlbnRhZ2Vbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF0gPSBzbmFwc2hvdC5ieXRlc1RyYW5zZmVycmVkIC8gc25hcHNob3QudG90YWxCeXRlcyAqIDEwMDsKICAgICAgICAgICAgICBzdGF0ZS5kYkltZ1tzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkXS51cGxvYWRQZXJjZW50YWdlID0gcGVyY2VudGFnZVtzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkXTsKCiAgICAgICAgICAgICAgaWYgKHN0YXRlLmRiSW1nW3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdLnVwbG9hZFBlcmNlbnRhZ2UgPT09IDEwMCAmJiBvcmRlci5sZW5ndGggPCBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgb3JkZXIucHVzaChzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLm1lc3NhZ2UpOwogICAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgZGF0YVJlZi5qdW50X3BlcmlvZG8gPSAiIi5jb25jYXQoZGF0YS5qdW50YS5pbmljaW8sICItIikuY29uY2F0KGRhdGEuanVudGEuZmluKTsKICAgICAgICAgICAgICBkYXRhUmVmLmp1bnRfYWN0aXZhID0gZGF0YS5qdW50YS5qdW50YV9hY3R1YWw7CiAgICAgICAgICAgICAgZGF0YVJlZi5qdW50X2ludGVncmFudGVzID0gW107CgogICAgICAgICAgICAgIGZvciAodmFyIF9pNCA9IDA7IF9pNCA8IE9iamVjdC52YWx1ZXMoZGF0YS5qdW50YS5pbnRlZ3JhbnRlcykubGVuZ3RoOyBfaTQrKykgewogICAgICAgICAgICAgICAgZGF0YVJlZi5qdW50X2ludGVncmFudGVzW19pNF0gPSBbXTsKICAgICAgICAgICAgICAgIGRhdGFSZWYuanVudF9pbnRlZ3JhbnRlc1tfaTRdLmp1aW5fY2FyZ28gPSBPYmplY3QudmFsdWVzKGRhdGEuanVudGEuaW50ZWdyYW50ZXMpW19pNF0uY2FyZ287CiAgICAgICAgICAgICAgICBkYXRhUmVmLmp1bnRfaW50ZWdyYW50ZXNbX2k0XS5qdWluX25vbWJyZSA9IE9iamVjdC52YWx1ZXMoZGF0YS5qdW50YS5pbnRlZ3JhbnRlcylbX2k0XS5ub21icmU7CiAgICAgICAgICAgICAgICBkYXRhUmVmLmp1bnRfaW50ZWdyYW50ZXNbX2k0XS5qdWluX2FwZWxsaWRvID0gT2JqZWN0LnZhbHVlcyhkYXRhLmp1bnRhLmludGVncmFudGVzKVtfaTRdLmFwZWxsaWRvOwogICAgICAgICAgICAgICAgZGF0YVJlZi5qdW50X2ludGVncmFudGVzW19pNF0uanVpbl9jb3JyZW8gPSBPYmplY3QudmFsdWVzKGRhdGEuanVudGEuaW50ZWdyYW50ZXMpW19pNF0uY29ycmVvOwogICAgICAgICAgICAgICAgZGF0YVJlZi5qdW50X2ludGVncmFudGVzW19pNF0uanVpbl9mb3RvID0gW107CiAgICAgICAgICAgICAgICBkYXRhUmVmLmp1bnRfaW50ZWdyYW50ZXNbX2k0XS5qdWluX2FjdGl2byA9IE9iamVjdC52YWx1ZXMoZGF0YS5qdW50YS5pbnRlZ3JhbnRlcylbX2k0XS5hY3Rpdm87CiAgICAgICAgICAgICAgICBkYXRhUmVmLmp1bnRfaW50ZWdyYW50ZXNbX2k0XS5qdWluX2NyZWFyID0gT2JqZWN0LnZhbHVlcyhkYXRhLmp1bnRhLmludGVncmFudGVzKVtfaTRdLmNyZWFyOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgdmFyIHN0b3JhZ2VSZWYgPSBmaXJlYmFzZS5zdG9yYWdlKCkucmVmKCIvIi5jb25jYXQoZGF0YS50YXJnZXQsICIvIikuY29uY2F0KGRhdGFSZWYuanVudF9pZCwgIi8iKS5jb25jYXQoZGF0YS5qdW50YS5pbnRlZ3JhbnRlc1siIi5jb25jYXQob3JkZXJbal0pXS5jYXJnby5zcGxpdCgnICcpLmpvaW4oJ18nKSkpOwogICAgICAgICAgICAgIHN0b3JhZ2VSZWYuZ2V0RG93bmxvYWRVUkwoKS50aGVuKGZ1bmN0aW9uICh1cmwpIHsKICAgICAgICAgICAgICAgIHZhciB2YWwgPSBvcmRlcltuXTsKICAgICAgICAgICAgICAgIHN0YXRlLmRiSW1nW3ZhbF0udXJsID0gdXJsOwogICAgICAgICAgICAgICAgc3RhdGUuZGJJbWdbdmFsXS5ub21icmUgPSAiIi5jb25jYXQoZGF0YS5qdW50YS5pbnRlZ3JhbnRlc1siIi5jb25jYXQob3JkZXJbbl0pXS5jYXJnby5zcGxpdCgnICcpLmpvaW4oJ18nKSk7CiAgICAgICAgICAgICAgICBuKys7CgogICAgICAgICAgICAgICAgaWYgKG4gPj0gb3JkZXIubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgIGkgPSAwOwogICAgICAgICAgICAgICAgICBPYmplY3QudmFsdWVzKGRhdGFSZWYuanVudF9pbnRlZ3JhbnRlcykuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5kYkltZ1tpXS5ub21icmUgIT09IHVuZGVmaW5lZCAmJiBzdGF0ZS5kYkltZ1tpXS51cmwgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5qdWluX2ZvdG8ubm9tYnJlID0gc3RhdGUuZGJJbWdbaV0ubm9tYnJlOwogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5qdWluX2ZvdG8udXJsID0gc3RhdGUuZGJJbWdbaV0udXJsOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50Lmp1aW5fZm90byA9ICIiOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaSsrOwoKICAgICAgICAgICAgICAgICAgICBpZiAobiA+PSBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgcHVzaGRiUmVmLnNldChkYXRhUmVmKTsKICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLmNyZWFyREJWYWxzID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgc3VjY2VzcyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgMDogJ3N1Y2Nlc3NVcGxvYWQnLAogICAgICAgICAgICAgICAgICAgICAgICAxOiAnU2UgaGEgY3JlYWRvIGV4aXRvc2FtZW50ZScKICAgICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgICAgX3RoaXM2LmNvbW1pdCgnc3VjY2Vzc0FkdmlzZScsIHN1Y2Nlc3MpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgaisrOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBkYXRhUmVmLmp1bnRfcGVyaW9kbyA9ICIiLmNvbmNhdChkYXRhLmp1bnRhLmluaWNpbywgIi0iKS5jb25jYXQoZGF0YS5qdW50YS5maW4pOwogICAgICAgICAgZGF0YVJlZi5qdW50X2FjdGl2YSA9IGRhdGEuanVudGEuanVudGFfYWN0dWFsOwogICAgICAgICAgZGF0YVJlZi5qdW50X2ludGVncmFudGVzID0gW107CgogICAgICAgICAgZm9yICh2YXIgX2k1ID0gMDsgX2k1IDwgT2JqZWN0LnZhbHVlcyhkYXRhLmp1bnRhLmludGVncmFudGVzKS5sZW5ndGg7IF9pNSsrKSB7CiAgICAgICAgICAgIGRhdGFSZWYuanVudF9pbnRlZ3JhbnRlc1tfaTVdID0gW107CiAgICAgICAgICAgIGRhdGFSZWYuanVudF9pbnRlZ3JhbnRlc1tfaTVdLmp1aW5fY2FyZ28gPSBPYmplY3QudmFsdWVzKGRhdGEuanVudGEuaW50ZWdyYW50ZXMpW19pNV0uY2FyZ287CiAgICAgICAgICAgIGRhdGFSZWYuanVudF9pbnRlZ3JhbnRlc1tfaTVdLmp1aW5fbm9tYnJlID0gT2JqZWN0LnZhbHVlcyhkYXRhLmp1bnRhLmludGVncmFudGVzKVtfaTVdLm5vbWJyZTsKICAgICAgICAgICAgZGF0YVJlZi5qdW50X2ludGVncmFudGVzW19pNV0uanVpbl9hcGVsbGlkbyA9IE9iamVjdC52YWx1ZXMoZGF0YS5qdW50YS5pbnRlZ3JhbnRlcylbX2k1XS5hcGVsbGlkbzsKICAgICAgICAgICAgZGF0YVJlZi5qdW50X2ludGVncmFudGVzW19pNV0uanVpbl9jb3JyZW8gPSBPYmplY3QudmFsdWVzKGRhdGEuanVudGEuaW50ZWdyYW50ZXMpW19pNV0uY29ycmVvOwogICAgICAgICAgICBkYXRhUmVmLmp1bnRfaW50ZWdyYW50ZXNbX2k1XS5qdWluX2ZvdG8gPSBPYmplY3QudmFsdWVzKGRhdGEuanVudGEuaW50ZWdyYW50ZXMpW19pNV0uaW1hZ2U7CiAgICAgICAgICAgIGRhdGFSZWYuanVudF9pbnRlZ3JhbnRlc1tfaTVdLmp1aW5fYWN0aXZvID0gT2JqZWN0LnZhbHVlcyhkYXRhLmp1bnRhLmludGVncmFudGVzKVtfaTVdLmFjdGl2bzsKICAgICAgICAgICAgZGF0YVJlZi5qdW50X2ludGVncmFudGVzW19pNV0uanVpbl9jcmVhciA9IE9iamVjdC52YWx1ZXMoZGF0YS5qdW50YS5pbnRlZ3JhbnRlcylbX2k1XS5jcmVhcjsKICAgICAgICAgIH0KCiAgICAgICAgICBwdXNoZGJSZWYuc2V0KGRhdGFSZWYpLnNldChkYXRhUmVmKTsKICAgICAgICAgIHN0YXRlLmNyZWFyREJWYWxzID0gZmFsc2U7CiAgICAgICAgICB2YXIgc3VjY2VzcyA9IHsKICAgICAgICAgICAgMDogJ3N1Y2Nlc3NVcGxvYWQnLAogICAgICAgICAgICAxOiAnU2UgaGEgY3JlYWRvIGV4aXRvc2FtZW50ZScKICAgICAgICAgIH07CiAgICAgICAgICB0aGlzLmNvbW1pdCgnc3VjY2Vzc0FkdmlzZScsIHN1Y2Nlc3MpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChkYXRhLnRhcmdldCA9PT0gJ1NlcnZpY2lvcycpIHsKICAgICAgICBpZiAoT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5sZW5ndGggIT09IDApIHsKICAgICAgICAgIHN0YXRlLmRiSW1nID0gW107CiAgICAgICAgICBzdGF0ZS5kYkltZ1swXSA9IGRhdGEuc2VydmljaW8uaW1hZ2U7CiAgICAgICAgfQoKICAgICAgICB2YXIgX3N0b3JhZ2VSZWYyID0gW107CiAgICAgICAgdmFyIF9wZXJjZW50YWdlID0gW107CiAgICAgICAgdmFyIF9vcmRlciA9IFtdOwogICAgICAgIHZhciBfdGFzayA9IHt9OwogICAgICAgIHZhciBfbiA9IDA7CgogICAgICAgIHZhciBfZGJSZWYgPSBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZigiIi5jb25jYXQoZGF0YS50YXJnZXQpKTsKCiAgICAgICAgdmFyIF9wdXNoZGJSZWYgPSBfZGJSZWYucHVzaCgpOwoKICAgICAgICB2YXIgX2RhdGFSZWYgPSB7CiAgICAgICAgICBzZXJ2X2lkOiBfcHVzaGRiUmVmLmtleQogICAgICAgIH07CiAgICAgICAgT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICBfc3RvcmFnZVJlZjIgPSBmaXJlYmFzZS5zdG9yYWdlKCkucmVmKCIvIi5jb25jYXQoZGF0YS50YXJnZXQsICIvIikuY29uY2F0KF9kYXRhUmVmLnNlcnZfaWQsICIvIikuY29uY2F0KGRhdGEuc2VydmljaW8ubm9tYnJlLnNwbGl0KCcgJykuam9pbignXycpKSk7CiAgICAgICAgICBfdGFza1siIi5jb25jYXQoZWxlbWVudC5pZCldID0gX3N0b3JhZ2VSZWYyLnB1dChlbGVtZW50KTsKICAgICAgICB9KTsKCiAgICAgICAgaWYgKE9iamVjdC52YWx1ZXMoX3Rhc2spLmxlbmd0aCAhPT0gMCkgewogICAgICAgICAgT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICAgIF90YXNrWyIiLmNvbmNhdChlbGVtZW50LmlkKV0ub24oJ3N0YXRlX2NoYW5nZWQnLCBmdW5jdGlvbiAoc25hcHNob3QpIHsKICAgICAgICAgICAgICBfcGVyY2VudGFnZVtzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkXSA9IHNuYXBzaG90LmJ5dGVzVHJhbnNmZXJyZWQgLyBzbmFwc2hvdC50b3RhbEJ5dGVzICogMTAwOwogICAgICAgICAgICAgIHN0YXRlLmRiSW1nW3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdLnVwbG9hZFBlcmNlbnRhZ2UgPSBfcGVyY2VudGFnZVtzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkXTsKCiAgICAgICAgICAgICAgaWYgKHN0YXRlLmRiSW1nW3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdLnVwbG9hZFBlcmNlbnRhZ2UgPT09IDEwMCAmJiBfb3JkZXIubGVuZ3RoIDwgT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIF9vcmRlci5wdXNoKHNuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWQpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IubWVzc2FnZSk7CiAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICBfZGF0YVJlZiA9IHsKICAgICAgICAgICAgICAgIHNlcnZfYWN0aXZvOiBkYXRhLnNlcnZpY2lvLmFjdGl2bywKICAgICAgICAgICAgICAgIHNlcnZfY2llcnJlOiBkYXRhLnNlcnZpY2lvLmZpbiwKICAgICAgICAgICAgICAgIHNlcnZfY29udGFjdG86IGRhdGEuc2VydmljaW8uY29udGFjdG8sCiAgICAgICAgICAgICAgICBzZXJ2X2Rlc2NyaXBjaW9uOiBkYXRhLnNlcnZpY2lvLmRlc2NyaXBjaW9uLAogICAgICAgICAgICAgICAgc2Vydl9pZDogX3B1c2hkYlJlZi5rZXksCiAgICAgICAgICAgICAgICBzZXJ2X2luaWNpbzogZGF0YS5zZXJ2aWNpby5pbmljaW8sCiAgICAgICAgICAgICAgICBzZXJ2X25vbWJyZTogZGF0YS5zZXJ2aWNpby5ub21icmUsCiAgICAgICAgICAgICAgICBzZXJ2X2ZvdG86IFtdCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICB2YXIgc3RvcmFnZVJlZiA9IGZpcmViYXNlLnN0b3JhZ2UoKS5yZWYoIi8iLmNvbmNhdChkYXRhLnRhcmdldCwgIi8iKS5jb25jYXQoX2RhdGFSZWYuc2Vydl9pZCwgIi8iKS5jb25jYXQoZGF0YS5zZXJ2aWNpby5ub21icmUuc3BsaXQoJyAnKS5qb2luKCdfJykpKTsKICAgICAgICAgICAgICBzdG9yYWdlUmVmLmdldERvd25sb2FkVVJMKCkudGhlbihmdW5jdGlvbiAodXJsKSB7CiAgICAgICAgICAgICAgICB2YXIgdmFsID0gX29yZGVyW19uXTsKICAgICAgICAgICAgICAgIHN0YXRlLmRiSW1nW3ZhbF0udXJsID0gdXJsOwogICAgICAgICAgICAgICAgc3RhdGUuZGJJbWdbdmFsXS5ub21icmUgPSAiIi5jb25jYXQoZGF0YS5zZXJ2aWNpby5ub21icmUuc3BsaXQoJyAnKS5qb2luKCdfJykpOwogICAgICAgICAgICAgICAgX24rKzsKCiAgICAgICAgICAgICAgICBpZiAoX24gPj0gX29yZGVyLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICBfZGF0YVJlZi5zZXJ2X2ZvdG8ubm9tYnJlID0gc3RhdGUuZGJJbWdbMF0ubm9tYnJlOwogICAgICAgICAgICAgICAgICBfZGF0YVJlZi5zZXJ2X2ZvdG8udXJsID0gc3RhdGUuZGJJbWdbMF0udXJsOwoKICAgICAgICAgICAgICAgICAgaWYgKF9uID49IE9iamVjdC52YWx1ZXMoZGF0YS5hcmNoaXZvcykubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgX3B1c2hkYlJlZi5zZXQoX2RhdGFSZWYpOwoKICAgICAgICAgICAgICAgICAgICBzdGF0ZS5jcmVhckRCVmFscyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIHZhciBfc3VjY2VzcyA9IHsKICAgICAgICAgICAgICAgICAgICAgIDA6ICdzdWNjZXNzVXBsb2FkJywKICAgICAgICAgICAgICAgICAgICAgIDE6ICdTZSBoYSBjcmVhZG8gZXhpdG9zYW1lbnRlJwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIF90aGlzNi5jb21taXQoJ3N1Y2Nlc3NBZHZpc2UnLCBfc3VjY2Vzcyk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX2RhdGFSZWYgPSB7CiAgICAgICAgICAgIHNlcnZfYWN0aXZvOiBkYXRhLnNlcnZpY2lvLmFjdGl2bywKICAgICAgICAgICAgc2Vydl9jaWVycmU6IGRhdGEuc2VydmljaW8uZmluLAogICAgICAgICAgICBzZXJ2X2NvbnRhY3RvOiBkYXRhLnNlcnZpY2lvLmNvbnRhY3RvLAogICAgICAgICAgICBzZXJ2X2Rlc2NyaXBjaW9uOiBkYXRhLnNlcnZpY2lvLmRlc2NyaXBjaW9uLAogICAgICAgICAgICBzZXJ2X2lkOiBfcHVzaGRiUmVmLmtleSwKICAgICAgICAgICAgc2Vydl9pbmljaW86IGRhdGEuc2VydmljaW8uaW5pY2lvLAogICAgICAgICAgICBzZXJ2X25vbWJyZTogZGF0YS5zZXJ2aWNpby5ub21icmUsCiAgICAgICAgICAgIHNlcnZfZm90bzogZGF0YS5zZXJ2aWNpby5pbWFnZQogICAgICAgICAgfTsKICAgICAgICAgIF9uKys7CgogICAgICAgICAgaWYgKF9uID49IE9iamVjdC52YWx1ZXMoZGF0YS5hcmNoaXZvcykubGVuZ3RoKSB7CiAgICAgICAgICAgIF9wdXNoZGJSZWYuc2V0KF9kYXRhUmVmKTsKCiAgICAgICAgICAgIHN0YXRlLmNyZWFyREJWYWxzID0gZmFsc2U7CiAgICAgICAgICAgIHZhciBfc3VjY2VzczIgPSB7CiAgICAgICAgICAgICAgMDogJ3N1Y2Nlc3NVcGxvYWQnLAogICAgICAgICAgICAgIDE6ICdTZSBoYSBjcmVhZG8gZXhpdG9zYW1lbnRlJwogICAgICAgICAgICB9OwogICAgICAgICAgICB0aGlzLmNvbW1pdCgnc3VjY2Vzc0FkdmlzZScsIF9zdWNjZXNzMik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKGRhdGEudGFyZ2V0ID09PSAnR2VyZW5jaWEnKSB7CiAgICAgICAgaWYgKE9iamVjdC52YWx1ZXMoZGF0YS5hcmNoaXZvcykubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgICBzdGF0ZS5kYkltZyA9IFtdOwogICAgICAgICAgc3RhdGUuZGJJbWdbMF0gPSBkYXRhLmludGVncmFudGUuaW1hZ2U7CiAgICAgICAgfQoKICAgICAgICB2YXIgX3N0b3JhZ2VSZWYzID0gW107CiAgICAgICAgdmFyIF9wZXJjZW50YWdlMiA9IFtdOwogICAgICAgIHZhciBfb3JkZXIyID0gW107CiAgICAgICAgdmFyIF90YXNrMiA9IHt9OwogICAgICAgIHZhciBfbjIgPSAwOwoKICAgICAgICB2YXIgX2RiUmVmMiA9IGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKCIiLmNvbmNhdChkYXRhLnRhcmdldCkpOwoKICAgICAgICB2YXIgX3B1c2hkYlJlZjIgPSBfZGJSZWYyLnB1c2goKTsKCiAgICAgICAgdmFyIF9kYXRhUmVmMiA9IHsKICAgICAgICAgIGdyX2lkOiBfcHVzaGRiUmVmMi5rZXkKICAgICAgICB9OwogICAgICAgIE9iamVjdC52YWx1ZXMoZGF0YS5hcmNoaXZvcykuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgX3N0b3JhZ2VSZWYzID0gZmlyZWJhc2Uuc3RvcmFnZSgpLnJlZigiLyIuY29uY2F0KGRhdGEudGFyZ2V0LCAiLyIpLmNvbmNhdChfZGF0YVJlZjIuZ3JfaWQsICIvIikuY29uY2F0KGRhdGEuaW50ZWdyYW50ZS5jYXJnby5zcGxpdCgnICcpLmpvaW4oJ18nKSkpOwogICAgICAgICAgX3Rhc2syWyIiLmNvbmNhdChlbGVtZW50LmlkKV0gPSBfc3RvcmFnZVJlZjMucHV0KGVsZW1lbnQpOwogICAgICAgIH0pOwoKICAgICAgICBpZiAoT2JqZWN0LnZhbHVlcyhfdGFzazIpLmxlbmd0aCAhPT0gMCkgewogICAgICAgICAgT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICAgIF90YXNrMlsiIi5jb25jYXQoZWxlbWVudC5pZCldLm9uKCdzdGF0ZV9jaGFuZ2VkJywgZnVuY3Rpb24gKHNuYXBzaG90KSB7CiAgICAgICAgICAgICAgX3BlcmNlbnRhZ2UyW3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdID0gc25hcHNob3QuYnl0ZXNUcmFuc2ZlcnJlZCAvIHNuYXBzaG90LnRvdGFsQnl0ZXMgKiAxMDA7CiAgICAgICAgICAgICAgc3RhdGUuZGJJbWdbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF0udXBsb2FkUGVyY2VudGFnZSA9IF9wZXJjZW50YWdlMltzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkXTsKCiAgICAgICAgICAgICAgaWYgKHN0YXRlLmRiSW1nW3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdLnVwbG9hZFBlcmNlbnRhZ2UgPT09IDEwMCAmJiBfb3JkZXIyLmxlbmd0aCA8IE9iamVjdC52YWx1ZXMoZGF0YS5hcmNoaXZvcykubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICBfb3JkZXIyLnB1c2goc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5tZXNzYWdlKTsKICAgICAgICAgICAgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIF9kYXRhUmVmMiA9IHsKICAgICAgICAgICAgICAgIGdyX2NvcnJlbzogZGF0YS5pbnRlZ3JhbnRlLmNvcnJlbywKICAgICAgICAgICAgICAgIGdyX25vbWJyZTogZGF0YS5pbnRlZ3JhbnRlLm5vbWJyZSwKICAgICAgICAgICAgICAgIGdyX2NhcmdvOiBkYXRhLmludGVncmFudGUuY2FyZ28sCiAgICAgICAgICAgICAgICBncl9pZDogX3B1c2hkYlJlZjIua2V5LAogICAgICAgICAgICAgICAgZ3JfZm90bzogW10KICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIHZhciBzdG9yYWdlUmVmID0gZmlyZWJhc2Uuc3RvcmFnZSgpLnJlZigiLyIuY29uY2F0KGRhdGEudGFyZ2V0LCAiLyIpLmNvbmNhdChfZGF0YVJlZjIuZ3JfaWQsICIvIikuY29uY2F0KGRhdGEuaW50ZWdyYW50ZS5jYXJnby5zcGxpdCgnICcpLmpvaW4oJ18nKSkpOwogICAgICAgICAgICAgIHN0b3JhZ2VSZWYuZ2V0RG93bmxvYWRVUkwoKS50aGVuKGZ1bmN0aW9uICh1cmwpIHsKICAgICAgICAgICAgICAgIHZhciB2YWwgPSBfb3JkZXIyW19uMl07CiAgICAgICAgICAgICAgICBzdGF0ZS5kYkltZ1t2YWxdLnVybCA9IHVybDsKICAgICAgICAgICAgICAgIHN0YXRlLmRiSW1nW3ZhbF0ubm9tYnJlID0gIiIuY29uY2F0KGRhdGEuaW50ZWdyYW50ZS5jYXJnby5zcGxpdCgnICcpLmpvaW4oJ18nKSk7CiAgICAgICAgICAgICAgICBfbjIrKzsKCiAgICAgICAgICAgICAgICBpZiAoX24yID49IF9vcmRlcjIubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgIF9kYXRhUmVmMi5ncl9mb3RvLm5vbWJyZSA9IHN0YXRlLmRiSW1nWzBdLm5vbWJyZTsKICAgICAgICAgICAgICAgICAgX2RhdGFSZWYyLmdyX2ZvdG8udXJsID0gc3RhdGUuZGJJbWdbMF0udXJsOwoKICAgICAgICAgICAgICAgICAgaWYgKF9uMiA+PSBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIF9wdXNoZGJSZWYyLnNldChfZGF0YVJlZjIpOwoKICAgICAgICAgICAgICAgICAgICBzdGF0ZS5jcmVhckRCVmFscyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIHZhciBfc3VjY2VzczMgPSB7CiAgICAgICAgICAgICAgICAgICAgICAwOiAnc3VjY2Vzc1VwbG9hZCcsCiAgICAgICAgICAgICAgICAgICAgICAxOiAnU2UgaGEgY3JlYWRvIGV4aXRvc2FtZW50ZScKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICBfdGhpczYuY29tbWl0KCdzdWNjZXNzQWR2aXNlJywgX3N1Y2Nlc3MzKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfZGF0YVJlZjIgPSB7CiAgICAgICAgICAgIGdyX2NvcnJlbzogZGF0YS5pbnRlZ3JhbnRlLmNvcnJlbywKICAgICAgICAgICAgZ3Jfbm9tYnJlOiBkYXRhLmludGVncmFudGUubm9tYnJlLAogICAgICAgICAgICBncl9jYXJnbzogZGF0YS5pbnRlZ3JhbnRlLmNhcmdvLAogICAgICAgICAgICBncl9pZDogX3B1c2hkYlJlZjIua2V5LAogICAgICAgICAgICBncl9mb3RvOiBkYXRhLmludGVncmFudGUuaW1hZ2UKICAgICAgICAgIH07CiAgICAgICAgICBfbjIrKzsKCiAgICAgICAgICBpZiAoX24yID49IE9iamVjdC52YWx1ZXMoZGF0YS5hcmNoaXZvcykubGVuZ3RoKSB7CiAgICAgICAgICAgIF9wdXNoZGJSZWYyLnNldChfZGF0YVJlZjIpOwoKICAgICAgICAgICAgc3RhdGUuY3JlYXJEQlZhbHMgPSBmYWxzZTsKICAgICAgICAgICAgdmFyIF9zdWNjZXNzNCA9IHsKICAgICAgICAgICAgICAwOiAnc3VjY2Vzc1VwbG9hZCcsCiAgICAgICAgICAgICAgMTogJ1NlIGhhIGNyZWFkbyBleGl0b3NhbWVudGUnCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHRoaXMuY29tbWl0KCdzdWNjZXNzQWR2aXNlJywgX3N1Y2Nlc3M0KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoZGF0YS50YXJnZXQgPT09ICdQcm9mZXNvcmVzJykgewogICAgICAgIHN0YXRlLmRiSW1nID0gW107CgogICAgICAgIGlmIChkYXRhLmFyY2hpdm9zWydhcmNoaXZvMCddICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHN0YXRlLmRiSW1nWzBdID0gZGF0YS5wcm9mZXNvci5hcmNoaXZvcy5pbWFnZTsKICAgICAgICB9CgogICAgICAgIGlmIChkYXRhLmFyY2hpdm9zWydhcmNoaXZvMSddICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHN0YXRlLmRiSW1nWzFdID0gZGF0YS5wcm9mZXNvci5hcmNoaXZvcy5jdjsKICAgICAgICB9CgogICAgICAgIHZhciBfc3RvcmFnZVJlZjQgPSBbXTsKICAgICAgICB2YXIgX3BlcmNlbnRhZ2UzID0gW107CiAgICAgICAgdmFyIF9vcmRlcjMgPSBbXTsKICAgICAgICB2YXIgX3Rhc2szID0ge307CiAgICAgICAgdmFyIF9pNiA9IDA7CiAgICAgICAgdmFyIF9uMyA9IDA7CiAgICAgICAgdmFyIF9qID0gMDsKCiAgICAgICAgdmFyIF9kYlJlZjMgPSBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZigiIi5jb25jYXQoZGF0YS50YXJnZXQpKTsKCiAgICAgICAgdmFyIF9wdXNoZGJSZWYzID0gX2RiUmVmMy5wdXNoKCk7CgogICAgICAgIHZhciBfZGF0YVJlZjMgPSB7CiAgICAgICAgICBwcm9mX2lkOiBfcHVzaGRiUmVmMy5rZXkKICAgICAgICB9OwogICAgICAgIE9iamVjdC52YWx1ZXMoZGF0YS5hcmNoaXZvcykuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgX3N0b3JhZ2VSZWY0ID0gZmlyZWJhc2Uuc3RvcmFnZSgpLnJlZigiLyIuY29uY2F0KGRhdGEudGFyZ2V0LCAiLyIpLmNvbmNhdChfZGF0YVJlZjMucHJvZl9pZCwgIi8iKS5jb25jYXQoT2JqZWN0LnZhbHVlcyhkYXRhLnByb2Zlc29yLmFyY2hpdm9zKVtfaTZdLm5vbWJyZSkpOwogICAgICAgICAgX3Rhc2szWyIiLmNvbmNhdChlbGVtZW50LmlkKV0gPSBfc3RvcmFnZVJlZjQucHV0KGVsZW1lbnQpOwogICAgICAgICAgX2k2Kys7CiAgICAgICAgfSk7CgogICAgICAgIGlmIChPYmplY3QudmFsdWVzKF90YXNrMykubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgICBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgICAgX3Rhc2szWyIiLmNvbmNhdChlbGVtZW50LmlkKV0ub24oJ3N0YXRlX2NoYW5nZWQnLCBmdW5jdGlvbiAoc25hcHNob3QpIHsKICAgICAgICAgICAgICBfcGVyY2VudGFnZTNbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF0gPSBzbmFwc2hvdC5ieXRlc1RyYW5zZmVycmVkIC8gc25hcHNob3QudG90YWxCeXRlcyAqIDEwMDsKICAgICAgICAgICAgICBzdGF0ZS5kYkltZ1tzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkXS51cGxvYWRQZXJjZW50YWdlID0gX3BlcmNlbnRhZ2UzW3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdOwoKICAgICAgICAgICAgICBpZiAoc3RhdGUuZGJJbWdbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF0udXBsb2FkUGVyY2VudGFnZSA9PT0gMTAwICYmIF9vcmRlcjMubGVuZ3RoIDwgT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIF9vcmRlcjMucHVzaChzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLm1lc3NhZ2UpOwogICAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgX2RhdGFSZWYzID0gewogICAgICAgICAgICAgICAgY29taV9pZDogZGF0YS5wcm9mZXNvci5jb2lkLAogICAgICAgICAgICAgICAgcHJvZl9jdjogW10sCiAgICAgICAgICAgICAgICBwcm9mX2NpOiBkYXRhLnByb2Zlc29yLmNpLAogICAgICAgICAgICAgICAgcHJvZl9jb3JyZW86IGRhdGEucHJvZmVzb3IuY29ycmVvLAogICAgICAgICAgICAgICAgcHJvZl9mZWNoYWRlbmFjaW1pZW50bzogZGF0YS5wcm9mZXNvci5uYWNpbWllbnRvLAogICAgICAgICAgICAgICAgcHJvZl9mb3RvOiBbXSwKICAgICAgICAgICAgICAgIHByb2ZfaWQ6IF9wdXNoZGJSZWYzLmtleSwKICAgICAgICAgICAgICAgIHByb2Zfbm9tYnJlOiBkYXRhLnByb2Zlc29yLm5vbWJyZSwKICAgICAgICAgICAgICAgIHByb2ZfdGVsZWZvbm9zOiBkYXRhLnByb2Zlc29yLnRlbGVmb25vcwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgdmFyIHN0b3JhZ2VSZWYgPSBmaXJlYmFzZS5zdG9yYWdlKCkucmVmKCIvIi5jb25jYXQoZGF0YS50YXJnZXQsICIvIikuY29uY2F0KF9kYXRhUmVmMy5wcm9mX2lkLCAiLyIpLmNvbmNhdChPYmplY3QudmFsdWVzKGRhdGEucHJvZmVzb3IuYXJjaGl2b3MpW19vcmRlcjNbX2pdXS5ub21icmUpKTsKICAgICAgICAgICAgICBzdG9yYWdlUmVmLmdldERvd25sb2FkVVJMKCkudGhlbihmdW5jdGlvbiAodXJsKSB7CiAgICAgICAgICAgICAgICB2YXIgdmFsID0gX29yZGVyM1tfbjNdOwoKICAgICAgICAgICAgICAgIGlmICh2YWwgPT09IDApIHsKICAgICAgICAgICAgICAgICAgc3RhdGUuZGJJbWdbdmFsXS51cmwgPSB1cmw7CiAgICAgICAgICAgICAgICAgIHN0YXRlLmRiSW1nW3ZhbF0ubm9tYnJlID0gIiIuY29uY2F0KGRhdGEucHJvZmVzb3IuaWQpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgc3RhdGUuZGJJbWdbdmFsXS51cmwgPSB1cmw7CiAgICAgICAgICAgICAgICAgIHN0YXRlLmRiSW1nW3ZhbF0ubm9tYnJlID0gImNfdl8iLmNvbmNhdChkYXRhLnByb2Zlc29yLmlkKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfbjMrKzsKCiAgICAgICAgICAgICAgICBpZiAoX24zID49IE9iamVjdC52YWx1ZXMoZGF0YS5hcmNoaXZvcykubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgIF9kYXRhUmVmMy5wcm9mX2ZvdG8ubm9tYnJlID0gc3RhdGUuZGJJbWdbMF0ubm9tYnJlOwogICAgICAgICAgICAgICAgICBfZGF0YVJlZjMucHJvZl9mb3RvLnVybCA9IHN0YXRlLmRiSW1nWzBdLnVybDsKICAgICAgICAgICAgICAgICAgX2RhdGFSZWYzLnByb2ZfY3Yubm9tYnJlID0gc3RhdGUuZGJJbWdbMV0ubm9tYnJlOwogICAgICAgICAgICAgICAgICBfZGF0YVJlZjMucHJvZl9jdi51cmwgPSBzdGF0ZS5kYkltZ1sxXS51cmw7CgogICAgICAgICAgICAgICAgICBpZiAoX24zID49IE9iamVjdC52YWx1ZXMoZGF0YS5hcmNoaXZvcykubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgX3B1c2hkYlJlZjMuc2V0KF9kYXRhUmVmMyk7CgogICAgICAgICAgICAgICAgICAgIHN0YXRlLmNyZWFyREJWYWxzID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgdmFyIF9zdWNjZXNzNSA9IHsKICAgICAgICAgICAgICAgICAgICAgIDA6ICdzdWNjZXNzVXBsb2FkJywKICAgICAgICAgICAgICAgICAgICAgIDE6ICdTZSBoYSBjcmVhZG8gZXhpdG9zYW1lbnRlJwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIF90aGlzNi5jb21taXQoJ3N1Y2Nlc3NBZHZpc2UnLCBfc3VjY2VzczUpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgX2orKzsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX2RhdGFSZWYzID0gewogICAgICAgICAgICBjb21pX2lkOiBkYXRhLnByb2Zlc29yLmNvaWQsCiAgICAgICAgICAgIHByb2ZfY3Y6IFtdLAogICAgICAgICAgICBwcm9mX2NpOiBkYXRhLnByb2Zlc29yLmNpLAogICAgICAgICAgICBwcm9mX2NvcnJlbzogZGF0YS5wcm9mZXNvci5jb3JyZW8sCiAgICAgICAgICAgIHByb2ZfZmVjaGFkZW5hY2ltaWVudG86IGRhdGEucHJvZmVzb3IubmFjaW1pZW50bywKICAgICAgICAgICAgcHJvZl9mb3RvOiBbXSwKICAgICAgICAgICAgcHJvZl9pZDogX3B1c2hkYlJlZjMua2V5LAogICAgICAgICAgICBwcm9mX25vbWJyZTogZGF0YS5wcm9mZXNvci5ub21icmUsCiAgICAgICAgICAgIHByb2ZfdGVsZWZvbm9zOiBkYXRhLnByb2Zlc29yLnRlbGVmb25vcwogICAgICAgICAgfTsKICAgICAgICAgIF9uMysrOwoKICAgICAgICAgIGlmIChfbjMgPj0gT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5sZW5ndGgpIHsKICAgICAgICAgICAgX3B1c2hkYlJlZjMuc2V0KF9kYXRhUmVmMyk7CgogICAgICAgICAgICBzdGF0ZS5jcmVhckRCVmFscyA9IGZhbHNlOwogICAgICAgICAgICB2YXIgX3N1Y2Nlc3M2ID0gewogICAgICAgICAgICAgIDA6ICdzdWNjZXNzVXBsb2FkJywKICAgICAgICAgICAgICAxOiAnU2UgaGEgY3JlYWRvIGV4aXRvc2FtZW50ZScKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdGhpcy5jb21taXQoJ3N1Y2Nlc3NBZHZpc2UnLCBfc3VjY2VzczYpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChkYXRhLnRhcmdldCA9PT0gJ0NvbWl0ZXMnKSB7CiAgICAgICAgc3RhdGUuZGJJbWcgPSBbXTsKCiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBPYmplY3QudmFsdWVzKGRhdGEuY29taXRlLmFyY2hpdm9zKS5sZW5ndGg7IGsrKykgewogICAgICAgICAgaWYgKE9iamVjdC52YWx1ZXMoZGF0YS5jb21pdGUuYXJjaGl2b3MpW2tdLmlkICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgc3RhdGUuZGJJbWdbT2JqZWN0LnZhbHVlcyhkYXRhLmNvbWl0ZS5hcmNoaXZvcylba10uaWRdID0gT2JqZWN0LnZhbHVlcyhkYXRhLmNvbWl0ZS5hcmNoaXZvcylba107CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBzdGF0ZS5kYkltZ1trXSA9ICcnOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgdmFyIF9zdG9yYWdlUmVmNSA9IFtdOwogICAgICAgIHZhciBfcGVyY2VudGFnZTQgPSBbXTsKICAgICAgICB2YXIgX29yZGVyNCA9IFtdOwogICAgICAgIHZhciBfdGFzazQgPSB7fTsKICAgICAgICB2YXIgX2k3ID0gMDsKICAgICAgICB2YXIgX240ID0gMDsKICAgICAgICB2YXIgX2oyID0gMDsKCiAgICAgICAgdmFyIF9kYlJlZjQgPSBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZigiIi5jb25jYXQoZGF0YS50YXJnZXQpKTsKCiAgICAgICAgdmFyIF9wdXNoZGJSZWY0ID0gX2RiUmVmNC5wdXNoKCk7CgogICAgICAgIHZhciBfZGF0YVJlZjQgPSB7CiAgICAgICAgICBjb21pX2lkOiBfcHVzaGRiUmVmNC5rZXkKICAgICAgICB9OwogICAgICAgIE9iamVjdC52YWx1ZXMoZGF0YS5hcmNoaXZvcykuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgX3N0b3JhZ2VSZWY1ID0gZmlyZWJhc2Uuc3RvcmFnZSgpLnJlZigiLyIuY29uY2F0KGRhdGEudGFyZ2V0LCAiLyIpLmNvbmNhdChfZGF0YVJlZjQuY29taV9pZCwgIi8iKS5jb25jYXQoT2JqZWN0LnZhbHVlcyhkYXRhLmNvbWl0ZS5hcmNoaXZvcylbZWxlbWVudC5pZF0ubm9tYnJlKSk7CiAgICAgICAgICBfdGFzazRbIiIuY29uY2F0KGVsZW1lbnQuaWQpXSA9IF9zdG9yYWdlUmVmNS5wdXQoZWxlbWVudCk7CiAgICAgICAgICBfaTcrKzsKICAgICAgICB9KTsKCiAgICAgICAgaWYgKE9iamVjdC52YWx1ZXMoX3Rhc2s0KS5sZW5ndGggIT09IDApIHsKICAgICAgICAgIE9iamVjdC52YWx1ZXMoZGF0YS5hcmNoaXZvcykuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgICBfdGFzazRbIiIuY29uY2F0KGVsZW1lbnQuaWQpXS5vbignc3RhdGVfY2hhbmdlZCcsIGZ1bmN0aW9uIChzbmFwc2hvdCkgewogICAgICAgICAgICAgIF9wZXJjZW50YWdlNFtzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkXSA9IHNuYXBzaG90LmJ5dGVzVHJhbnNmZXJyZWQgLyBzbmFwc2hvdC50b3RhbEJ5dGVzICogMTAwOwogICAgICAgICAgICAgIHN0YXRlLmRiSW1nW3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdLnVwbG9hZFBlcmNlbnRhZ2UgPSBfcGVyY2VudGFnZTRbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF07CgogICAgICAgICAgICAgIGlmIChzdGF0ZS5kYkltZ1tzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkXS51cGxvYWRQZXJjZW50YWdlID09PSAxMDAgJiYgX29yZGVyNC5sZW5ndGggPCBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgX29yZGVyNC5wdXNoKHNuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWQpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IubWVzc2FnZSk7CiAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICBfZGF0YVJlZjQgPSB7CiAgICAgICAgICAgICAgICBjb21pX2lkOiBfcHVzaGRiUmVmNC5rZXksCiAgICAgICAgICAgICAgICBjb21pX2FjdGl2bzogZGF0YS5jb21pdGUuYWN0aXZvLAogICAgICAgICAgICAgICAgY29taV9jb21pUGFnZTogZGF0YS5jb21pdGUuY29taXBhZ2UsCiAgICAgICAgICAgICAgICBjb21pX2NvcnJlbzogZGF0YS5jb21pdGUuY29ycmVvLAogICAgICAgICAgICAgICAgY29taV9jb3N0b3M6IGRhdGEuY29taXRlLmNvc3RvcywKICAgICAgICAgICAgICAgIGNvbWlfZGVzY3JpcGNpb246IGRhdGEuY29taXRlLmRlc2NyaXBjaW9uLAogICAgICAgICAgICAgICAgY29taV9mZWNoYXZpZ2VuY2lhOiBkYXRhLmNvbWl0ZS5mZWNoYXYsCiAgICAgICAgICAgICAgICBjb21pX2ZvdG86IFtdLAogICAgICAgICAgICAgICAgY29taV9pbnQ6IGRhdGEuY29taXRlLmludGhwYWdlLAogICAgICAgICAgICAgICAgY29taV9pbnRlZ3JhbnRlczogZGF0YS5jb21pdGUuaW50ZWdyYW50ZXMsCiAgICAgICAgICAgICAgICBjb21pX25vbWJyZTogZGF0YS5jb21pdGUubm9tYnJlLAogICAgICAgICAgICAgICAgY29taV9ub3JtYXRpdmE6IFtdLAogICAgICAgICAgICAgICAgY29taV9yZWdsYW1lbnRvOiBbXQogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgdmFyIHN0b3JhZ2VSZWYgPSBmaXJlYmFzZS5zdG9yYWdlKCkucmVmKCIvIi5jb25jYXQoZGF0YS50YXJnZXQsICIvIikuY29uY2F0KF9kYXRhUmVmNC5jb21pX2lkLCAiLyIpLmNvbmNhdChPYmplY3QudmFsdWVzKGRhdGEuY29taXRlLmFyY2hpdm9zKVsiIi5jb25jYXQoX29yZGVyNFtfajJdKV0ubm9tYnJlKSk7CiAgICAgICAgICAgICAgc3RvcmFnZVJlZi5nZXREb3dubG9hZFVSTCgpLnRoZW4oZnVuY3Rpb24gKHVybCkgewogICAgICAgICAgICAgICAgdmFyIHZhbCA9IF9vcmRlcjRbX240XTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHZhbCk7CgogICAgICAgICAgICAgICAgZm9yICh2YXIgbSA9IDA7IG0gPCBPYmplY3QudmFsdWVzKGRhdGEuY29taXRlLmFyY2hpdm9zKS5sZW5ndGg7IG0rKykgewogICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LnZhbHVlcyhkYXRhLmNvbWl0ZS5hcmNoaXZvcylbbV0uaWQgIT09IHVuZGVmaW5lZCAmJiB2YWwgPT09IE9iamVjdC52YWx1ZXMoZGF0YS5jb21pdGUuYXJjaGl2b3MpW21dLmlkKSB7CiAgICAgICAgICAgICAgICAgICAgc3RhdGUuZGJJbWdbdmFsXS51cmwgPSB1cmw7CiAgICAgICAgICAgICAgICAgICAgc3RhdGUuZGJJbWdbdmFsXS5ub21icmUgPSBPYmplY3QudmFsdWVzKGRhdGEuY29taXRlLmFyY2hpdm9zKVttXS5ub21icmU7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfbjQrKzsKCiAgICAgICAgICAgICAgICBpZiAoX240ID49IE9iamVjdC52YWx1ZXMoZGF0YS5hcmNoaXZvcykubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5kYkltZ1swXS5ub21icmUgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgIF9kYXRhUmVmNC5jb21pX2ZvdG8gPSB7CiAgICAgICAgICAgICAgICAgICAgICBub21icmU6IHN0YXRlLmRiSW1nWzBdLm5vbWJyZSwKICAgICAgICAgICAgICAgICAgICAgIHVybDogc3RhdGUuZGJJbWdbMF0udXJsCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBfZGF0YVJlZjQuY29taV9mb3RvID0gJyc7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5kYkltZ1sxXS5ub21icmUgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgIF9kYXRhUmVmNC5jb21pX3JlZ2xhbWVudG8gPSB7CiAgICAgICAgICAgICAgICAgICAgICBub21icmU6IHN0YXRlLmRiSW1nWzFdLm5vbWJyZSwKICAgICAgICAgICAgICAgICAgICAgIHVybDogc3RhdGUuZGJJbWdbMV0udXJsCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBfZGF0YVJlZjQuY29taV9yZWdsYW1lbnRvID0gJyc7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5kYkltZ1syXS5ub21icmUgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgIF9kYXRhUmVmNC5jb21pX25vcm1hdGl2YSA9IHsKICAgICAgICAgICAgICAgICAgICAgIG5vbWJyZTogc3RhdGUuZGJJbWdbMl0ubm9tYnJlLAogICAgICAgICAgICAgICAgICAgICAgdXJsOiBzdGF0ZS5kYkltZ1syXS51cmwKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIF9kYXRhUmVmNC5jb21pX25vcm1hdGl2YSA9ICcnOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBpZiAoX240ID49IE9iamVjdC52YWx1ZXMoZGF0YS5hcmNoaXZvcykubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgX3B1c2hkYlJlZjQuc2V0KF9kYXRhUmVmNCk7CgogICAgICAgICAgICAgICAgICAgIHN0YXRlLmNyZWFyREJWYWxzID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgdmFyIF9zdWNjZXNzNyA9IHsKICAgICAgICAgICAgICAgICAgICAgIDA6ICdzdWNjZXNzVXBsb2FkJywKICAgICAgICAgICAgICAgICAgICAgIDE6ICdTZSBoYSBjcmVhZG8gZXhpdG9zYW1lbnRlJwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIF90aGlzNi5jb21taXQoJ3N1Y2Nlc3NBZHZpc2UnLCBfc3VjY2VzczcpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgX2oyKys7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF9kYXRhUmVmNCA9IHsKICAgICAgICAgICAgY29taV9pZDogX3B1c2hkYlJlZjQua2V5LAogICAgICAgICAgICBjb21pX2FjdGl2bzogZGF0YS5jb21pdGUuYWN0aXZvLAogICAgICAgICAgICBjb21pX2NvbWlQYWdlOiBkYXRhLmNvbWl0ZS5jb21pcGFnZSwKICAgICAgICAgICAgY29taV9jb3JyZW86IGRhdGEuY29taXRlLmNvcnJlbywKICAgICAgICAgICAgY29taV9jb3N0b3M6IGRhdGEuY29taXRlLmNvc3RvcywKICAgICAgICAgICAgY29taV9kZXNjcmlwY2lvbjogZGF0YS5jb21pdGUuZGVzY3JpcGNpb24sCiAgICAgICAgICAgIGNvbWlfZmVjaGF2aWdlbmNpYTogZGF0YS5jb21pdGUuZmVjaGF2LAogICAgICAgICAgICBjb21pX2ZvdG86IGRhdGEuY29taXRlLmFyY2hpdm9zLmltYWdlbiwKICAgICAgICAgICAgY29taV9pbnQ6IGRhdGEuY29taXRlLmludGhwYWdlLAogICAgICAgICAgICBjb21pX2ludGVncmFudGVzOiBkYXRhLmNvbWl0ZS5pbnRlZ3JhbnRlcywKICAgICAgICAgICAgY29taV9ub21icmU6IGRhdGEuY29taXRlLm5vbWJyZSwKICAgICAgICAgICAgY29taV9ub3JtYXRpdmE6IGRhdGEuY29taXRlLmFyY2hpdm9zLm5vcm1hdGl2YSwKICAgICAgICAgICAgY29taV9yZWdsYW1lbnRvOiBkYXRhLmNvbWl0ZS5hcmNoaXZvcy5yZWdsYW1lbnRvCiAgICAgICAgICB9OwogICAgICAgICAgX240Kys7CgogICAgICAgICAgaWYgKF9uNCA+PSBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmxlbmd0aCkgewogICAgICAgICAgICBfcHVzaGRiUmVmNC5zZXQoX2RhdGFSZWY0KTsKCiAgICAgICAgICAgIHN0YXRlLmNyZWFyREJWYWxzID0gZmFsc2U7CiAgICAgICAgICAgIHZhciBfc3VjY2VzczggPSB7CiAgICAgICAgICAgICAgMDogJ3N1Y2Nlc3NVcGxvYWQnLAogICAgICAgICAgICAgIDE6ICdTZSBoYSBjcmVhZG8gZXhpdG9zYW1lbnRlJwogICAgICAgICAgICB9OwogICAgICAgICAgICB0aGlzLmNvbW1pdCgnc3VjY2Vzc0FkdmlzZScsIF9zdWNjZXNzOCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgdXBkYXRlREI6IGZ1bmN0aW9uIHVwZGF0ZURCKHN0YXRlLCBkYXRhKSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwoKICAgICAgc3RhdGUuY3JlYXJEQlZhbHMgPSB0cnVlOwoKICAgICAgaWYgKGRhdGEudGFyZ2V0ID09PSAnSnVudGFzJykgewogICAgICAgIGlmIChPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmxlbmd0aCAhPT0gMCkgewogICAgICAgICAgZm9yICh2YXIgX2k4ID0gMDsgX2k4IDwgT2JqZWN0LnZhbHVlcyhkYXRhLmp1bnRhLmludGVncmFudGVzKS5sZW5ndGg7IF9pOCsrKSB7CiAgICAgICAgICAgIHN0YXRlLmRiSW1nW19pOF0gPSBbXTsKICAgICAgICAgICAgc3RhdGUuZGJJbWdbX2k4XSA9IE9iamVjdC52YWx1ZXMoZGF0YS5qdW50YS5pbnRlZ3JhbnRlcylbX2k4XS5pbWFnZTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHZhciBzdG9yYWdlUmVmID0gW107CiAgICAgICAgdmFyIHBlcmNlbnRhZ2UgPSBbXTsKICAgICAgICB2YXIgb3JkZXIgPSBbXTsKICAgICAgICB2YXIgdGFzayA9IHt9OwogICAgICAgIHZhciBpID0gMDsKICAgICAgICB2YXIgaiA9IDA7CiAgICAgICAgdmFyIG4gPSAwOwogICAgICAgIE9iamVjdC52YWx1ZXMoZGF0YS5hcmNoaXZvcykuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgc3RvcmFnZVJlZiA9IGZpcmViYXNlLnN0b3JhZ2UoKS5yZWYoIi8iLmNvbmNhdChkYXRhLnRhcmdldCwgIi8iKS5jb25jYXQoZGF0YS5qdW50YS5pZCwgIi8iKS5jb25jYXQoZGF0YS5qdW50YS5pbnRlZ3JhbnRlc1siIi5jb25jYXQoZWxlbWVudC5pZCldLmNhcmdvLnNwbGl0KCcgJykuam9pbignXycpKSk7CiAgICAgICAgICB0YXNrWyIiLmNvbmNhdChlbGVtZW50LmlkKV0gPSBzdG9yYWdlUmVmLnB1dChlbGVtZW50KTsKICAgICAgICB9KTsKCiAgICAgICAgaWYgKE9iamVjdC52YWx1ZXModGFzaykubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgICBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgICAgdGFza1siIi5jb25jYXQoZWxlbWVudC5pZCldLm9uKCdzdGF0ZV9jaGFuZ2VkJywgZnVuY3Rpb24gKHNuYXBzaG90KSB7CiAgICAgICAgICAgICAgcGVyY2VudGFnZVtzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkXSA9IHNuYXBzaG90LmJ5dGVzVHJhbnNmZXJyZWQgLyBzbmFwc2hvdC50b3RhbEJ5dGVzICogMTAwOwogICAgICAgICAgICAgIHN0YXRlLmRiSW1nW3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdLnVwbG9hZFBlcmNlbnRhZ2UgPSBwZXJjZW50YWdlW3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdOwoKICAgICAgICAgICAgICBpZiAoc3RhdGUuZGJJbWdbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF0udXBsb2FkUGVyY2VudGFnZSA9PT0gMTAwICYmIG9yZGVyLmxlbmd0aCA8IE9iamVjdC52YWx1ZXMoZGF0YS5hcmNoaXZvcykubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICBvcmRlci5wdXNoKHNuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWQpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IubWVzc2FnZSk7CiAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICB2YXIgZGF0YVJlZiA9IFtdOwogICAgICAgICAgICAgIGRhdGFSZWYuanVudF9wZXJpb2RvID0gIiIuY29uY2F0KGRhdGEuanVudGEuaW5pY2lvLCAiLSIpLmNvbmNhdChkYXRhLmp1bnRhLmZpbik7CiAgICAgICAgICAgICAgZGF0YVJlZi5qdW50X2lkID0gZGF0YS5qdW50YS5pZDsKICAgICAgICAgICAgICBkYXRhUmVmLmp1bnRfYWN0aXZhID0gZGF0YS5qdW50YS5qdW50YV9hY3R1YWw7CiAgICAgICAgICAgICAgZGF0YVJlZi5qdW50X2ludGVncmFudGVzID0gW107CgogICAgICAgICAgICAgIGZvciAodmFyIF9pOSA9IDA7IF9pOSA8IE9iamVjdC52YWx1ZXMoZGF0YS5qdW50YS5pbnRlZ3JhbnRlcykubGVuZ3RoOyBfaTkrKykgewogICAgICAgICAgICAgICAgZGF0YVJlZi5qdW50X2ludGVncmFudGVzW19pOV0gPSBbXTsKICAgICAgICAgICAgICAgIGRhdGFSZWYuanVudF9pbnRlZ3JhbnRlc1tfaTldLmp1aW5fY2FyZ28gPSBPYmplY3QudmFsdWVzKGRhdGEuanVudGEuaW50ZWdyYW50ZXMpW19pOV0uY2FyZ287CiAgICAgICAgICAgICAgICBkYXRhUmVmLmp1bnRfaW50ZWdyYW50ZXNbX2k5XS5qdWluX25vbWJyZSA9IE9iamVjdC52YWx1ZXMoZGF0YS5qdW50YS5pbnRlZ3JhbnRlcylbX2k5XS5ub21icmU7CiAgICAgICAgICAgICAgICBkYXRhUmVmLmp1bnRfaW50ZWdyYW50ZXNbX2k5XS5qdWluX2FwZWxsaWRvID0gT2JqZWN0LnZhbHVlcyhkYXRhLmp1bnRhLmludGVncmFudGVzKVtfaTldLmFwZWxsaWRvOwogICAgICAgICAgICAgICAgZGF0YVJlZi5qdW50X2ludGVncmFudGVzW19pOV0uanVpbl9jb3JyZW8gPSBPYmplY3QudmFsdWVzKGRhdGEuanVudGEuaW50ZWdyYW50ZXMpW19pOV0uY29ycmVvOwogICAgICAgICAgICAgICAgZGF0YVJlZi5qdW50X2ludGVncmFudGVzW19pOV0uanVpbl9mb3RvID0gW107CiAgICAgICAgICAgICAgICBkYXRhUmVmLmp1bnRfaW50ZWdyYW50ZXNbX2k5XS5qdWluX2FjdGl2byA9IE9iamVjdC52YWx1ZXMoZGF0YS5qdW50YS5pbnRlZ3JhbnRlcylbX2k5XS5hY3Rpdm87CiAgICAgICAgICAgICAgICBkYXRhUmVmLmp1bnRfaW50ZWdyYW50ZXNbX2k5XS5qdWluX2NyZWFyID0gT2JqZWN0LnZhbHVlcyhkYXRhLmp1bnRhLmludGVncmFudGVzKVtfaTldLmNyZWFyOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgdmFyIHN0b3JhZ2VSZWYgPSBmaXJlYmFzZS5zdG9yYWdlKCkucmVmKCIvIi5jb25jYXQoZGF0YS50YXJnZXQsICIvIikuY29uY2F0KGRhdGEuanVudGEuaW5pY2lvLCAiLyIpLmNvbmNhdChkYXRhLmp1bnRhLmludGVncmFudGVzWyIiLmNvbmNhdChvcmRlcltqXSldLmNhcmdvLnNwbGl0KCcgJykuam9pbignXycpKSk7CiAgICAgICAgICAgICAgc3RvcmFnZVJlZi5nZXREb3dubG9hZFVSTCgpLnRoZW4oZnVuY3Rpb24gKHVybCkgewogICAgICAgICAgICAgICAgdmFyIHZhbCA9IG9yZGVyW25dOwogICAgICAgICAgICAgICAgc3RhdGUuZGJJbWdbdmFsXS51cmwgPSB1cmw7CiAgICAgICAgICAgICAgICBzdGF0ZS5kYkltZ1t2YWxdLm5vbWJyZSA9ICIiLmNvbmNhdChkYXRhLmp1bnRhLmludGVncmFudGVzWyIiLmNvbmNhdChvcmRlcltuXSldLmNhcmdvLnNwbGl0KCcgJykuam9pbignXycpKTsKICAgICAgICAgICAgICAgIG4rKzsKCiAgICAgICAgICAgICAgICBpZiAobiA+PSBvcmRlci5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgaSA9IDA7CiAgICAgICAgICAgICAgICAgIE9iamVjdC52YWx1ZXMoZGF0YVJlZi5qdW50X2ludGVncmFudGVzKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLmRiSW1nW2ldLm5vbWJyZSAhPT0gdW5kZWZpbmVkICYmIHN0YXRlLmRiSW1nW2ldLnVybCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50Lmp1aW5fZm90by5ub21icmUgPSBzdGF0ZS5kYkltZ1tpXS5ub21icmU7CiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50Lmp1aW5fZm90by51cmwgPSBzdGF0ZS5kYkltZ1tpXS51cmw7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuanVpbl9mb3RvID0gIiI7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpKys7CgogICAgICAgICAgICAgICAgICAgIGlmIChuID49IE9iamVjdC52YWx1ZXMoZGF0YS5hcmNoaXZvcykubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgZGJSZWYgPSBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZigiIi5jb25jYXQoZGF0YS50YXJnZXQpKTsKICAgICAgICAgICAgICAgICAgICAgIGRiUmVmLmNoaWxkKCIiLmNvbmNhdChkYXRhLmp1bnRhLmlkKSkuc2V0KGRhdGFSZWYpOwogICAgICAgICAgICAgICAgICAgICAgc3RhdGUuY3JlYXJEQlZhbHMgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgIHZhciBzdWNjZXNzID0gewogICAgICAgICAgICAgICAgICAgICAgICAwOiAnc3VjY2Vzc1VwbG9hZCcsCiAgICAgICAgICAgICAgICAgICAgICAgIDE6ICdTZSBoYSBjcmVhZG8gZXhpdG9zYW1lbnRlJwogICAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgICBfdGhpczcuY29tbWl0KCdzdWNjZXNzQWR2aXNlJywgc3VjY2Vzcyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBqKys7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciBkYXRhUmVmID0gW107CiAgICAgICAgICBkYXRhUmVmLmp1bnRfcGVyaW9kbyA9ICIiLmNvbmNhdChkYXRhLmp1bnRhLmluaWNpbywgIi0iKS5jb25jYXQoZGF0YS5qdW50YS5maW4pOwogICAgICAgICAgZGF0YVJlZi5qdW50X2lkID0gZGF0YS5qdW50YS5pZDsKICAgICAgICAgIGRhdGFSZWYuanVudF9hY3RpdmEgPSBkYXRhLmp1bnRhLmp1bnRhX2FjdHVhbDsKICAgICAgICAgIGRhdGFSZWYuanVudF9pbnRlZ3JhbnRlcyA9IFtdOwoKICAgICAgICAgIGZvciAodmFyIF9pMTAgPSAwOyBfaTEwIDwgT2JqZWN0LnZhbHVlcyhkYXRhLmp1bnRhLmludGVncmFudGVzKS5sZW5ndGg7IF9pMTArKykgewogICAgICAgICAgICBkYXRhUmVmLmp1bnRfaW50ZWdyYW50ZXNbX2kxMF0gPSBbXTsKICAgICAgICAgICAgZGF0YVJlZi5qdW50X2ludGVncmFudGVzW19pMTBdLmp1aW5fY2FyZ28gPSBPYmplY3QudmFsdWVzKGRhdGEuanVudGEuaW50ZWdyYW50ZXMpW19pMTBdLmNhcmdvOwogICAgICAgICAgICBkYXRhUmVmLmp1bnRfaW50ZWdyYW50ZXNbX2kxMF0uanVpbl9ub21icmUgPSBPYmplY3QudmFsdWVzKGRhdGEuanVudGEuaW50ZWdyYW50ZXMpW19pMTBdLm5vbWJyZTsKICAgICAgICAgICAgZGF0YVJlZi5qdW50X2ludGVncmFudGVzW19pMTBdLmp1aW5fYXBlbGxpZG8gPSBPYmplY3QudmFsdWVzKGRhdGEuanVudGEuaW50ZWdyYW50ZXMpW19pMTBdLmFwZWxsaWRvOwogICAgICAgICAgICBkYXRhUmVmLmp1bnRfaW50ZWdyYW50ZXNbX2kxMF0uanVpbl9jb3JyZW8gPSBPYmplY3QudmFsdWVzKGRhdGEuanVudGEuaW50ZWdyYW50ZXMpW19pMTBdLmNvcnJlbzsKICAgICAgICAgICAgZGF0YVJlZi5qdW50X2ludGVncmFudGVzW19pMTBdLmp1aW5fZm90byA9IE9iamVjdC52YWx1ZXMoZGF0YS5qdW50YS5pbnRlZ3JhbnRlcylbX2kxMF0uaW1hZ2U7CiAgICAgICAgICAgIGRhdGFSZWYuanVudF9pbnRlZ3JhbnRlc1tfaTEwXS5qdWluX2FjdGl2byA9IE9iamVjdC52YWx1ZXMoZGF0YS5qdW50YS5pbnRlZ3JhbnRlcylbX2kxMF0uYWN0aXZvOwogICAgICAgICAgICBkYXRhUmVmLmp1bnRfaW50ZWdyYW50ZXNbX2kxMF0uanVpbl9jcmVhciA9IE9iamVjdC52YWx1ZXMoZGF0YS5qdW50YS5pbnRlZ3JhbnRlcylbX2kxMF0uY3JlYXI7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIGRiUmVmID0gZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoIiIuY29uY2F0KGRhdGEudGFyZ2V0KSk7CiAgICAgICAgICBkYlJlZi5jaGlsZCgiIi5jb25jYXQoZGF0YS5qdW50YS5pZCkpLnNldChkYXRhUmVmKTsKICAgICAgICAgIHN0YXRlLmNyZWFyREJWYWxzID0gZmFsc2U7CiAgICAgICAgICB2YXIgc3VjY2VzcyA9IHsKICAgICAgICAgICAgMDogJ3N1Y2Nlc3NVcGxvYWQnLAogICAgICAgICAgICAxOiAnU2UgaGEgY3JlYWRvIGV4aXRvc2FtZW50ZScKICAgICAgICAgIH07CiAgICAgICAgICB0aGlzLmNvbW1pdCgnc3VjY2Vzc0FkdmlzZScsIHN1Y2Nlc3MpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChkYXRhLnRhcmdldCA9PT0gJ1NlcnZpY2lvcycpIHsKICAgICAgICBpZiAoT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5sZW5ndGggIT09IDApIHsKICAgICAgICAgIHN0YXRlLmRiSW1nID0gW107CiAgICAgICAgICBzdGF0ZS5kYkltZ1swXSA9IGRhdGEuc2VydmljaW8uaW1hZ2U7CiAgICAgICAgfQoKICAgICAgICB2YXIgX3N0b3JhZ2VSZWY2ID0gW107CiAgICAgICAgdmFyIF9wZXJjZW50YWdlNSA9IFtdOwogICAgICAgIHZhciBfb3JkZXI1ID0gW107CiAgICAgICAgdmFyIF90YXNrNSA9IHt9OwogICAgICAgIHZhciBfbjUgPSAwOwogICAgICAgIE9iamVjdC52YWx1ZXMoZGF0YS5hcmNoaXZvcykuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgX3N0b3JhZ2VSZWY2ID0gZmlyZWJhc2Uuc3RvcmFnZSgpLnJlZigiLyIuY29uY2F0KGRhdGEudGFyZ2V0LCAiLyIpLmNvbmNhdChkYXRhLnNlcnZpY2lvLmlkLCAiLyIpLmNvbmNhdChkYXRhLnNlcnZpY2lvLm5vbWJyZS5zcGxpdCgnICcpLmpvaW4oJ18nKSkpOwogICAgICAgICAgX3Rhc2s1WyIiLmNvbmNhdChlbGVtZW50LmlkKV0gPSBfc3RvcmFnZVJlZjYucHV0KGVsZW1lbnQpOwogICAgICAgIH0pOwoKICAgICAgICBpZiAoT2JqZWN0LnZhbHVlcyhfdGFzazUpLmxlbmd0aCAhPT0gMCkgewogICAgICAgICAgT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICAgIF90YXNrNVsiIi5jb25jYXQoZWxlbWVudC5pZCldLm9uKCdzdGF0ZV9jaGFuZ2VkJywgZnVuY3Rpb24gKHNuYXBzaG90KSB7CiAgICAgICAgICAgICAgX3BlcmNlbnRhZ2U1W3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdID0gc25hcHNob3QuYnl0ZXNUcmFuc2ZlcnJlZCAvIHNuYXBzaG90LnRvdGFsQnl0ZXMgKiAxMDA7CiAgICAgICAgICAgICAgc3RhdGUuZGJJbWdbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF0udXBsb2FkUGVyY2VudGFnZSA9IF9wZXJjZW50YWdlNVtzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkXTsKCiAgICAgICAgICAgICAgaWYgKHN0YXRlLmRiSW1nW3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdLnVwbG9hZFBlcmNlbnRhZ2UgPT09IDEwMCAmJiBfb3JkZXI1Lmxlbmd0aCA8IE9iamVjdC52YWx1ZXMoZGF0YS5hcmNoaXZvcykubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICBfb3JkZXI1LnB1c2goc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5tZXNzYWdlKTsKICAgICAgICAgICAgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHZhciBkYXRhUmVmID0gewogICAgICAgICAgICAgICAgc2Vydl9hY3Rpdm86IGRhdGEuc2VydmljaW8uYWN0aXZvLAogICAgICAgICAgICAgICAgc2Vydl9jaWVycmU6IGRhdGEuc2VydmljaW8uZmluLAogICAgICAgICAgICAgICAgc2Vydl9jb250YWN0bzogZGF0YS5zZXJ2aWNpby5jb250YWN0bywKICAgICAgICAgICAgICAgIHNlcnZfZGVzY3JpcGNpb246IGRhdGEuc2VydmljaW8uZGVzY3JpcGNpb24sCiAgICAgICAgICAgICAgICBzZXJ2X2lkOiBkYXRhLnNlcnZpY2lvLmlkLAogICAgICAgICAgICAgICAgc2Vydl9pbmljaW86IGRhdGEuc2VydmljaW8uaW5pY2lvLAogICAgICAgICAgICAgICAgc2Vydl9ub21icmU6IGRhdGEuc2VydmljaW8ubm9tYnJlLAogICAgICAgICAgICAgICAgc2Vydl9mb3RvOiBbXQogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgdmFyIHN0b3JhZ2VSZWYgPSBmaXJlYmFzZS5zdG9yYWdlKCkucmVmKCIvIi5jb25jYXQoZGF0YS50YXJnZXQsICIvIikuY29uY2F0KGRhdGEuc2VydmljaW8uaWQsICIvIikuY29uY2F0KGRhdGEuc2VydmljaW8ubm9tYnJlLnNwbGl0KCcgJykuam9pbignXycpKSk7CiAgICAgICAgICAgICAgc3RvcmFnZVJlZi5nZXREb3dubG9hZFVSTCgpLnRoZW4oZnVuY3Rpb24gKHVybCkgewogICAgICAgICAgICAgICAgdmFyIHZhbCA9IF9vcmRlcjVbX241XTsKICAgICAgICAgICAgICAgIHN0YXRlLmRiSW1nW3ZhbF0udXJsID0gdXJsOwogICAgICAgICAgICAgICAgc3RhdGUuZGJJbWdbdmFsXS5ub21icmUgPSAiIi5jb25jYXQoZGF0YS5zZXJ2aWNpby5ub21icmUuc3BsaXQoJyAnKS5qb2luKCdfJykpOwogICAgICAgICAgICAgICAgX241Kys7CgogICAgICAgICAgICAgICAgaWYgKF9uNSA+PSBfb3JkZXI1Lmxlbmd0aCkgewogICAgICAgICAgICAgICAgICBkYXRhUmVmLnNlcnZfZm90by5ub21icmUgPSBzdGF0ZS5kYkltZ1swXS5ub21icmU7CiAgICAgICAgICAgICAgICAgIGRhdGFSZWYuc2Vydl9mb3RvLnVybCA9IHN0YXRlLmRiSW1nWzBdLnVybDsKCiAgICAgICAgICAgICAgICAgIGlmIChfbjUgPj0gT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgX2RiUmVmNSA9IGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKCIiLmNvbmNhdChkYXRhLnRhcmdldCkpOwoKICAgICAgICAgICAgICAgICAgICBfZGJSZWY1LmNoaWxkKCIiLmNvbmNhdChkYXRhLnNlcnZpY2lvLmlkKSkuc2V0KGRhdGFSZWYpOwoKICAgICAgICAgICAgICAgICAgICBzdGF0ZS5jcmVhckRCVmFscyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIHZhciBfc3VjY2VzczkgPSB7CiAgICAgICAgICAgICAgICAgICAgICAwOiAnc3VjY2Vzc1VwbG9hZCcsCiAgICAgICAgICAgICAgICAgICAgICAxOiAnU2UgaGEgY3JlYWRvIGV4aXRvc2FtZW50ZScKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICBfdGhpczcuY29tbWl0KCdzdWNjZXNzQWR2aXNlJywgX3N1Y2Nlc3M5KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YXIgX2RhdGFSZWY1ID0gewogICAgICAgICAgICBzZXJ2X2FjdGl2bzogZGF0YS5zZXJ2aWNpby5hY3Rpdm8sCiAgICAgICAgICAgIHNlcnZfY2llcnJlOiBkYXRhLnNlcnZpY2lvLmZpbiwKICAgICAgICAgICAgc2Vydl9jb250YWN0bzogZGF0YS5zZXJ2aWNpby5jb250YWN0bywKICAgICAgICAgICAgc2Vydl9kZXNjcmlwY2lvbjogZGF0YS5zZXJ2aWNpby5kZXNjcmlwY2lvbiwKICAgICAgICAgICAgc2Vydl9pZDogZGF0YS5zZXJ2aWNpby5pZCwKICAgICAgICAgICAgc2Vydl9pbmljaW86IGRhdGEuc2VydmljaW8uaW5pY2lvLAogICAgICAgICAgICBzZXJ2X25vbWJyZTogZGF0YS5zZXJ2aWNpby5ub21icmUsCiAgICAgICAgICAgIHNlcnZfZm90bzogZGF0YS5zZXJ2aWNpby5pbWFnZQogICAgICAgICAgfTsKICAgICAgICAgIF9uNSsrOwoKICAgICAgICAgIGlmIChfbjUgPj0gT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5sZW5ndGgpIHsKICAgICAgICAgICAgdmFyIF9kYlJlZjYgPSBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZigiIi5jb25jYXQoZGF0YS50YXJnZXQpKTsKCiAgICAgICAgICAgIF9kYlJlZjYuY2hpbGQoIiIuY29uY2F0KGRhdGEuc2VydmljaW8uaWQpKS5zZXQoX2RhdGFSZWY1KTsKCiAgICAgICAgICAgIHN0YXRlLmNyZWFyREJWYWxzID0gZmFsc2U7CiAgICAgICAgICAgIHZhciBfc3VjY2VzczEwID0gewogICAgICAgICAgICAgIDA6ICdzdWNjZXNzVXBsb2FkJywKICAgICAgICAgICAgICAxOiAnU2UgaGEgY3JlYWRvIGV4aXRvc2FtZW50ZScKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdGhpcy5jb21taXQoJ3N1Y2Nlc3NBZHZpc2UnLCBfc3VjY2VzczEwKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoZGF0YS50YXJnZXQgPT09ICdHZXJlbmNpYScpIHsKICAgICAgICBpZiAoT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5sZW5ndGggIT09IDApIHsKICAgICAgICAgIHN0YXRlLmRiSW1nID0gW107CiAgICAgICAgICBzdGF0ZS5kYkltZ1swXSA9IGRhdGEuaW50ZWdyYW50ZS5pbWFnZTsKICAgICAgICB9CgogICAgICAgIHZhciBfc3RvcmFnZVJlZjcgPSBbXTsKICAgICAgICB2YXIgX3BlcmNlbnRhZ2U2ID0gW107CiAgICAgICAgdmFyIF9vcmRlcjYgPSBbXTsKICAgICAgICB2YXIgX3Rhc2s2ID0ge307CiAgICAgICAgdmFyIF9uNiA9IDA7CiAgICAgICAgT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICBfc3RvcmFnZVJlZjcgPSBmaXJlYmFzZS5zdG9yYWdlKCkucmVmKCIvIi5jb25jYXQoZGF0YS50YXJnZXQsICIvIikuY29uY2F0KGRhdGEuaW50ZWdyYW50ZS5pZCwgIi8iKS5jb25jYXQoZGF0YS5pbnRlZ3JhbnRlLmNhcmdvLnNwbGl0KCcgJykuam9pbignXycpKSk7CiAgICAgICAgICBfdGFzazZbIiIuY29uY2F0KGVsZW1lbnQuaWQpXSA9IF9zdG9yYWdlUmVmNy5wdXQoZWxlbWVudCk7CiAgICAgICAgfSk7CgogICAgICAgIGlmIChPYmplY3QudmFsdWVzKF90YXNrNikubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgICBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgICAgX3Rhc2s2WyIiLmNvbmNhdChlbGVtZW50LmlkKV0ub24oJ3N0YXRlX2NoYW5nZWQnLCBmdW5jdGlvbiAoc25hcHNob3QpIHsKICAgICAgICAgICAgICBfcGVyY2VudGFnZTZbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF0gPSBzbmFwc2hvdC5ieXRlc1RyYW5zZmVycmVkIC8gc25hcHNob3QudG90YWxCeXRlcyAqIDEwMDsKICAgICAgICAgICAgICBzdGF0ZS5kYkltZ1tzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkXS51cGxvYWRQZXJjZW50YWdlID0gX3BlcmNlbnRhZ2U2W3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdOwoKICAgICAgICAgICAgICBpZiAoc3RhdGUuZGJJbWdbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF0udXBsb2FkUGVyY2VudGFnZSA9PT0gMTAwICYmIF9vcmRlcjYubGVuZ3RoIDwgT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIF9vcmRlcjYucHVzaChzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLm1lc3NhZ2UpOwogICAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgdmFyIGRhdGFSZWYgPSB7CiAgICAgICAgICAgICAgICBncl9jb3JyZW86IGRhdGEuaW50ZWdyYW50ZS5jb3JyZW8sCiAgICAgICAgICAgICAgICBncl9ub21icmU6IGRhdGEuaW50ZWdyYW50ZS5ub21icmUsCiAgICAgICAgICAgICAgICBncl9jYXJnbzogZGF0YS5pbnRlZ3JhbnRlLmNhcmdvLAogICAgICAgICAgICAgICAgZ3JfaWQ6IGRhdGEuaW50ZWdyYW50ZS5pZCwKICAgICAgICAgICAgICAgIGdyX2ZvdG86IFtdCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICB2YXIgc3RvcmFnZVJlZiA9IGZpcmViYXNlLnN0b3JhZ2UoKS5yZWYoIi9pbWFnZW5lcy8iLmNvbmNhdChkYXRhLnRhcmdldCwgIi8iKS5jb25jYXQoZGF0YS5pbnRlZ3JhbnRlLmlkLCAiLyIpLmNvbmNhdChkYXRhLmludGVncmFudGUuY2FyZ28uc3BsaXQoJyAnKS5qb2luKCdfJykpKTsKICAgICAgICAgICAgICBzdG9yYWdlUmVmLmdldERvd25sb2FkVVJMKCkudGhlbihmdW5jdGlvbiAodXJsKSB7CiAgICAgICAgICAgICAgICB2YXIgdmFsID0gX29yZGVyNltfbjZdOwogICAgICAgICAgICAgICAgc3RhdGUuZGJJbWdbdmFsXS51cmwgPSB1cmw7CiAgICAgICAgICAgICAgICBzdGF0ZS5kYkltZ1t2YWxdLm5vbWJyZSA9ICIiLmNvbmNhdChkYXRhLmludGVncmFudGUuY2FyZ28uc3BsaXQoJyAnKS5qb2luKCdfJykpOwogICAgICAgICAgICAgICAgX242Kys7CgogICAgICAgICAgICAgICAgaWYgKF9uNiA+PSBfb3JkZXI2Lmxlbmd0aCkgewogICAgICAgICAgICAgICAgICBkYXRhUmVmLmdyX2ZvdG8ubm9tYnJlID0gc3RhdGUuZGJJbWdbMF0ubm9tYnJlOwogICAgICAgICAgICAgICAgICBkYXRhUmVmLmdyX2ZvdG8udXJsID0gc3RhdGUuZGJJbWdbMF0udXJsOwoKICAgICAgICAgICAgICAgICAgaWYgKF9uNiA+PSBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIHZhciBfZGJSZWY3ID0gZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoIiIuY29uY2F0KGRhdGEudGFyZ2V0KSk7CgogICAgICAgICAgICAgICAgICAgIF9kYlJlZjcuY2hpbGQoIiIuY29uY2F0KGRhdGEuaW50ZWdyYW50ZS5pZCkpLnNldChkYXRhUmVmKTsKCiAgICAgICAgICAgICAgICAgICAgc3RhdGUuY3JlYXJEQlZhbHMgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB2YXIgX3N1Y2Nlc3MxMSA9IHsKICAgICAgICAgICAgICAgICAgICAgIDA6ICdzdWNjZXNzVXBsb2FkJywKICAgICAgICAgICAgICAgICAgICAgIDE6ICdTZSBoYSBjcmVhZG8gZXhpdG9zYW1lbnRlJwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIF90aGlzNy5jb21taXQoJ3N1Y2Nlc3NBZHZpc2UnLCBfc3VjY2VzczExKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YXIgX2RhdGFSZWY2ID0gewogICAgICAgICAgICBncl9jb3JyZW86IGRhdGEuaW50ZWdyYW50ZS5jb3JyZW8sCiAgICAgICAgICAgIGdyX25vbWJyZTogZGF0YS5pbnRlZ3JhbnRlLm5vbWJyZSwKICAgICAgICAgICAgZ3JfY2FyZ286IGRhdGEuaW50ZWdyYW50ZS5jYXJnbywKICAgICAgICAgICAgZ3JfaWQ6IGRhdGEuaW50ZWdyYW50ZS5pZCwKICAgICAgICAgICAgZ3JfZm90bzogZGF0YS5pbnRlZ3JhbnRlLmltYWdlCiAgICAgICAgICB9OwogICAgICAgICAgX242Kys7CgogICAgICAgICAgaWYgKF9uNiA+PSBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmxlbmd0aCkgewogICAgICAgICAgICB2YXIgX2RiUmVmOCA9IGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKCIiLmNvbmNhdChkYXRhLnRhcmdldCkpOwoKICAgICAgICAgICAgX2RiUmVmOC5jaGlsZCgiIi5jb25jYXQoZGF0YS5pbnRlZ3JhbnRlLmlkKSkuc2V0KF9kYXRhUmVmNik7CgogICAgICAgICAgICBzdGF0ZS5jcmVhckRCVmFscyA9IGZhbHNlOwogICAgICAgICAgICB2YXIgX3N1Y2Nlc3MxMiA9IHsKICAgICAgICAgICAgICAwOiAnc3VjY2Vzc1VwbG9hZCcsCiAgICAgICAgICAgICAgMTogJ1NlIGhhIGNyZWFkbyBleGl0b3NhbWVudGUnCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHRoaXMuY29tbWl0KCdzdWNjZXNzQWR2aXNlJywgX3N1Y2Nlc3MxMik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKGRhdGEudGFyZ2V0ID09PSAnUHJvZmVzb3JlcycpIHsKICAgICAgICBzdGF0ZS5kYkltZyA9IFtdOwoKICAgICAgICBpZiAoZGF0YS5hcmNoaXZvc1snYXJjaGl2bzAnXSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICBzdGF0ZS5kYkltZ1swXSA9IGRhdGEucHJvZmVzb3IuYXJjaGl2b3MuaW1hZ2U7CiAgICAgICAgfQoKICAgICAgICBpZiAoZGF0YS5hcmNoaXZvc1snYXJjaGl2bzEnXSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICBzdGF0ZS5kYkltZ1sxXSA9IGRhdGEucHJvZmVzb3IuYXJjaGl2b3MuY3Y7CiAgICAgICAgfQoKICAgICAgICB2YXIgX3N0b3JhZ2VSZWY4ID0gW107CiAgICAgICAgdmFyIF9wZXJjZW50YWdlNyA9IFtdOwogICAgICAgIHZhciBfb3JkZXI3ID0gW107CiAgICAgICAgdmFyIF90YXNrNyA9IHt9OwogICAgICAgIHZhciBfaTExID0gMDsKICAgICAgICB2YXIgX243ID0gMDsKICAgICAgICB2YXIgX2ozID0gMDsKICAgICAgICBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgIF9zdG9yYWdlUmVmOCA9IGZpcmViYXNlLnN0b3JhZ2UoKS5yZWYoIi8iLmNvbmNhdChkYXRhLnRhcmdldCwgIi8iKS5jb25jYXQoZGF0YS5wcm9mZXNvci5pZCwgIi8iKS5jb25jYXQoT2JqZWN0LnZhbHVlcyhkYXRhLnByb2Zlc29yLmFyY2hpdm9zKVtfaTExXS5ub21icmUpKTsKICAgICAgICAgIF90YXNrN1siIi5jb25jYXQoZWxlbWVudC5pZCldID0gX3N0b3JhZ2VSZWY4LnB1dChlbGVtZW50KTsKICAgICAgICAgIF9pMTErKzsKICAgICAgICB9KTsKCiAgICAgICAgaWYgKE9iamVjdC52YWx1ZXMoX3Rhc2s3KS5sZW5ndGggIT09IDApIHsKICAgICAgICAgIE9iamVjdC52YWx1ZXMoZGF0YS5hcmNoaXZvcykuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgICBfdGFzazdbIiIuY29uY2F0KGVsZW1lbnQuaWQpXS5vbignc3RhdGVfY2hhbmdlZCcsIGZ1bmN0aW9uIChzbmFwc2hvdCkgewogICAgICAgICAgICAgIF9wZXJjZW50YWdlN1tzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkXSA9IHNuYXBzaG90LmJ5dGVzVHJhbnNmZXJyZWQgLyBzbmFwc2hvdC50b3RhbEJ5dGVzICogMTAwOwogICAgICAgICAgICAgIHN0YXRlLmRiSW1nW3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdLnVwbG9hZFBlcmNlbnRhZ2UgPSBfcGVyY2VudGFnZTdbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF07CgogICAgICAgICAgICAgIGlmIChzdGF0ZS5kYkltZ1tzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkXS51cGxvYWRQZXJjZW50YWdlID09PSAxMDAgJiYgX29yZGVyNy5sZW5ndGggPCBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgX29yZGVyNy5wdXNoKHNuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWQpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IubWVzc2FnZSk7CiAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICB2YXIgZGF0YVJlZiA9IHsKICAgICAgICAgICAgICAgIGNvbWlfaWQ6IGRhdGEucHJvZmVzb3IuY29pZCwKICAgICAgICAgICAgICAgIHByb2ZfY3Y6IFtdLAogICAgICAgICAgICAgICAgcHJvZl9jaTogZGF0YS5wcm9mZXNvci5jaSwKICAgICAgICAgICAgICAgIHByb2ZfY29ycmVvOiBkYXRhLnByb2Zlc29yLmNvcnJlbywKICAgICAgICAgICAgICAgIHByb2ZfZmVjaGFkZW5hY2ltaWVudG86IGRhdGEucHJvZmVzb3IubmFjaW1pZW50bywKICAgICAgICAgICAgICAgIHByb2ZfZm90bzogW10sCiAgICAgICAgICAgICAgICBwcm9mX2lkOiBkYXRhLnByb2Zlc29yLmlkLAogICAgICAgICAgICAgICAgcHJvZl9ub21icmU6IGRhdGEucHJvZmVzb3Iubm9tYnJlLAogICAgICAgICAgICAgICAgcHJvZl90ZWxlZm9ub3M6IGRhdGEucHJvZmVzb3IudGVsZWZvbm9zCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICB2YXIgc3RvcmFnZVJlZiA9IGZpcmViYXNlLnN0b3JhZ2UoKS5yZWYoIi8iLmNvbmNhdChkYXRhLnRhcmdldCwgIi8iKS5jb25jYXQoZGF0YS5wcm9mZXNvci5pZCwgIi8iKS5jb25jYXQoT2JqZWN0LnZhbHVlcyhkYXRhLnByb2Zlc29yLmFyY2hpdm9zKVtfb3JkZXI3W19qM11dLm5vbWJyZSkpOwogICAgICAgICAgICAgIHN0b3JhZ2VSZWYuZ2V0RG93bmxvYWRVUkwoKS50aGVuKGZ1bmN0aW9uICh1cmwpIHsKICAgICAgICAgICAgICAgIHZhciB2YWwgPSBfb3JkZXI3W19uN107CgogICAgICAgICAgICAgICAgaWYgKHZhbCA9PT0gMCkgewogICAgICAgICAgICAgICAgICBzdGF0ZS5kYkltZ1t2YWxdLnVybCA9IHVybDsKICAgICAgICAgICAgICAgICAgc3RhdGUuZGJJbWdbdmFsXS5ub21icmUgPSAiIi5jb25jYXQoZGF0YS5wcm9mZXNvci5pZCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBzdGF0ZS5kYkltZ1t2YWxdLnVybCA9IHVybDsKICAgICAgICAgICAgICAgICAgc3RhdGUuZGJJbWdbdmFsXS5ub21icmUgPSAiY192XyIuY29uY2F0KGRhdGEucHJvZmVzb3IuaWQpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9uNysrOwoKICAgICAgICAgICAgICAgIGlmIChfbjcgPj0gT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgZGF0YVJlZi5wcm9mX2ZvdG8ubm9tYnJlID0gc3RhdGUuZGJJbWdbMF0ubm9tYnJlOwogICAgICAgICAgICAgICAgICBkYXRhUmVmLnByb2ZfZm90by51cmwgPSBzdGF0ZS5kYkltZ1swXS51cmw7CiAgICAgICAgICAgICAgICAgIGRhdGFSZWYucHJvZl9jdi5ub21icmUgPSBzdGF0ZS5kYkltZ1sxXS5ub21icmU7CiAgICAgICAgICAgICAgICAgIGRhdGFSZWYucHJvZl9jdi51cmwgPSBzdGF0ZS5kYkltZ1sxXS51cmw7CgogICAgICAgICAgICAgICAgICBpZiAoX243ID49IE9iamVjdC52YWx1ZXMoZGF0YS5hcmNoaXZvcykubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIF9kYlJlZjkgPSBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZigiIi5jb25jYXQoZGF0YS50YXJnZXQpKTsKCiAgICAgICAgICAgICAgICAgICAgX2RiUmVmOS5jaGlsZCgiIi5jb25jYXQoZGF0YS5wcm9mZXNvci5pZCkpLnNldChkYXRhUmVmKTsKCiAgICAgICAgICAgICAgICAgICAgc3RhdGUuY3JlYXJEQlZhbHMgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB2YXIgX3N1Y2Nlc3MxMyA9IHsKICAgICAgICAgICAgICAgICAgICAgIDA6ICdzdWNjZXNzVXBsb2FkJywKICAgICAgICAgICAgICAgICAgICAgIDE6ICdTZSBoYSBjcmVhZG8gZXhpdG9zYW1lbnRlJwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIF90aGlzNy5jb21taXQoJ3N1Y2Nlc3NBZHZpc2UnLCBfc3VjY2VzczEzKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIF9qMysrOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YXIgX2RhdGFSZWY3ID0gewogICAgICAgICAgICBjb21pX2lkOiBkYXRhLnByb2Zlc29yLmNvaWQsCiAgICAgICAgICAgIHByb2ZfY3Y6IFtdLAogICAgICAgICAgICBwcm9mX2NpOiBkYXRhLnByb2Zlc29yLmNpLAogICAgICAgICAgICBwcm9mX2NvcnJlbzogZGF0YS5wcm9mZXNvci5jb3JyZW8sCiAgICAgICAgICAgIHByb2ZfZmVjaGFkZW5hY2ltaWVudG86IGRhdGEucHJvZmVzb3IubmFjaW1pZW50bywKICAgICAgICAgICAgcHJvZl9mb3RvOiBbXSwKICAgICAgICAgICAgcHJvZl9pZDogZGF0YS5wcm9mZXNvci5pZCwKICAgICAgICAgICAgcHJvZl9ub21icmU6IGRhdGEucHJvZmVzb3Iubm9tYnJlLAogICAgICAgICAgICBwcm9mX3RlbGVmb25vczogZGF0YS5wcm9mZXNvci50ZWxlZm9ub3MKICAgICAgICAgIH07CiAgICAgICAgICBfbjcrKzsKCiAgICAgICAgICBpZiAoX243ID49IE9iamVjdC52YWx1ZXMoZGF0YS5hcmNoaXZvcykubGVuZ3RoKSB7CiAgICAgICAgICAgIHZhciBfZGJSZWYxMCA9IGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKCIiLmNvbmNhdChkYXRhLnRhcmdldCkpOwoKICAgICAgICAgICAgX2RiUmVmMTAuY2hpbGQoIiIuY29uY2F0KGRhdGEucHJvZmVzb3IuaWQpKS5zZXQoX2RhdGFSZWY3KTsKCiAgICAgICAgICAgIHN0YXRlLmNyZWFyREJWYWxzID0gZmFsc2U7CiAgICAgICAgICAgIHZhciBfc3VjY2VzczE0ID0gewogICAgICAgICAgICAgIDA6ICdzdWNjZXNzVXBsb2FkJywKICAgICAgICAgICAgICAxOiAnU2UgaGEgY3JlYWRvIGV4aXRvc2FtZW50ZScKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdGhpcy5jb21taXQoJ3N1Y2Nlc3NBZHZpc2UnLCBfc3VjY2VzczE0KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoZGF0YS50YXJnZXQgPT09ICdDb21pdGVzJykgewogICAgICAgIHN0YXRlLmRiSW1nID0gW107CgogICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgT2JqZWN0LnZhbHVlcyhkYXRhLmNvbWl0ZS5hcmNoaXZvcykubGVuZ3RoOyBrKyspIHsKICAgICAgICAgIGlmIChPYmplY3QudmFsdWVzKGRhdGEuY29taXRlLmFyY2hpdm9zKVtrXS5pZCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIHN0YXRlLmRiSW1nW09iamVjdC52YWx1ZXMoZGF0YS5jb21pdGUuYXJjaGl2b3MpW2tdLmlkXSA9IE9iamVjdC52YWx1ZXMoZGF0YS5jb21pdGUuYXJjaGl2b3MpW2tdOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc3RhdGUuZGJJbWdba10gPSAnJzsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHZhciBfc3RvcmFnZVJlZjkgPSBbXTsKICAgICAgICB2YXIgX3BlcmNlbnRhZ2U4ID0gW107CiAgICAgICAgdmFyIF9vcmRlcjggPSBbXTsKICAgICAgICB2YXIgX3Rhc2s4ID0ge307CiAgICAgICAgdmFyIF9pMTIgPSAwOwogICAgICAgIHZhciBfbjggPSAwOwogICAgICAgIHZhciBfajQgPSAwOwogICAgICAgIE9iamVjdC52YWx1ZXMoZGF0YS5hcmNoaXZvcykuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgX3N0b3JhZ2VSZWY5ID0gZmlyZWJhc2Uuc3RvcmFnZSgpLnJlZigiLyIuY29uY2F0KGRhdGEudGFyZ2V0LCAiLyIpLmNvbmNhdChkYXRhLmNvbWl0ZS5pZCwgIi8iKS5jb25jYXQoT2JqZWN0LnZhbHVlcyhkYXRhLmNvbWl0ZS5hcmNoaXZvcylbZWxlbWVudC5pZF0ubm9tYnJlKSk7CiAgICAgICAgICBfdGFzazhbIiIuY29uY2F0KGVsZW1lbnQuaWQpXSA9IF9zdG9yYWdlUmVmOS5wdXQoZWxlbWVudCk7CiAgICAgICAgICBfaTEyKys7CiAgICAgICAgfSk7CgogICAgICAgIGlmIChPYmplY3QudmFsdWVzKF90YXNrOCkubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgICBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgICAgX3Rhc2s4WyIiLmNvbmNhdChlbGVtZW50LmlkKV0ub24oJ3N0YXRlX2NoYW5nZWQnLCBmdW5jdGlvbiAoc25hcHNob3QpIHsKICAgICAgICAgICAgICBfcGVyY2VudGFnZThbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF0gPSBzbmFwc2hvdC5ieXRlc1RyYW5zZmVycmVkIC8gc25hcHNob3QudG90YWxCeXRlcyAqIDEwMDsKICAgICAgICAgICAgICBzdGF0ZS5kYkltZ1tzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkXS51cGxvYWRQZXJjZW50YWdlID0gX3BlcmNlbnRhZ2U4W3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdOwoKICAgICAgICAgICAgICBpZiAoc3RhdGUuZGJJbWdbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF0udXBsb2FkUGVyY2VudGFnZSA9PT0gMTAwICYmIF9vcmRlcjgubGVuZ3RoIDwgT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIF9vcmRlcjgucHVzaChzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLm1lc3NhZ2UpOwogICAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgdmFyIGRhdGFSZWYgPSB7CiAgICAgICAgICAgICAgICBjb21pX2lkOiBkYXRhLmNvbWl0ZS5pZCwKICAgICAgICAgICAgICAgIGNvbWlfYWN0aXZvOiBkYXRhLmNvbWl0ZS5hY3Rpdm8sCiAgICAgICAgICAgICAgICBjb21pX2NvbWlQYWdlOiBkYXRhLmNvbWl0ZS5jb21pcGFnZSwKICAgICAgICAgICAgICAgIGNvbWlfY29ycmVvOiBkYXRhLmNvbWl0ZS5jb3JyZW8sCiAgICAgICAgICAgICAgICBjb21pX2Nvc3RvczogZGF0YS5jb21pdGUuY29zdG9zLAogICAgICAgICAgICAgICAgY29taV9kZXNjcmlwY2lvbjogZGF0YS5jb21pdGUuZGVzY3JpcGNpb24sCiAgICAgICAgICAgICAgICBjb21pX2ZlY2hhdmlnZW5jaWE6IGRhdGEuY29taXRlLmZlY2hhdiwKICAgICAgICAgICAgICAgIGNvbWlfZm90bzogW10sCiAgICAgICAgICAgICAgICBjb21pX2ludDogZGF0YS5jb21pdGUuaW50aHBhZ2UsCiAgICAgICAgICAgICAgICBjb21pX2ludGVncmFudGVzOiBkYXRhLmNvbWl0ZS5pbnRlZ3JhbnRlcywKICAgICAgICAgICAgICAgIGNvbWlfbm9tYnJlOiBkYXRhLmNvbWl0ZS5ub21icmUsCiAgICAgICAgICAgICAgICBjb21pX25vcm1hdGl2YTogW10sCiAgICAgICAgICAgICAgICBjb21pX3JlZ2xhbWVudG86IFtdCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICB2YXIgc3RvcmFnZVJlZiA9IGZpcmViYXNlLnN0b3JhZ2UoKS5yZWYoIi8iLmNvbmNhdChkYXRhLnRhcmdldCwgIi8iKS5jb25jYXQoZGF0YS5jb21pdGUuaWQsICIvIikuY29uY2F0KE9iamVjdC52YWx1ZXMoZGF0YS5jb21pdGUuYXJjaGl2b3MpWyIiLmNvbmNhdChfb3JkZXI4W19qNF0pXS5ub21icmUpKTsKICAgICAgICAgICAgICBfOwogICAgICAgICAgICAgIHN0b3JhZ2VSZWYuZ2V0RG93bmxvYWRVUkwoKS50aGVuKGZ1bmN0aW9uICh1cmwpIHsKICAgICAgICAgICAgICAgIHZhciB2YWwgPSBfb3JkZXI4W19uOF07CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh2YWwpOwoKICAgICAgICAgICAgICAgIGZvciAodmFyIG0gPSAwOyBtIDwgT2JqZWN0LnZhbHVlcyhkYXRhLmNvbWl0ZS5hcmNoaXZvcykubGVuZ3RoOyBtKyspIHsKICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC52YWx1ZXMoZGF0YS5jb21pdGUuYXJjaGl2b3MpW21dLmlkICE9PSB1bmRlZmluZWQgJiYgdmFsID09PSBPYmplY3QudmFsdWVzKGRhdGEuY29taXRlLmFyY2hpdm9zKVttXS5pZCkgewogICAgICAgICAgICAgICAgICAgIHN0YXRlLmRiSW1nW3ZhbF0udXJsID0gdXJsOwogICAgICAgICAgICAgICAgICAgIHN0YXRlLmRiSW1nW3ZhbF0ubm9tYnJlID0gT2JqZWN0LnZhbHVlcyhkYXRhLmNvbWl0ZS5hcmNoaXZvcylbbV0ubm9tYnJlOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX244Kys7CgogICAgICAgICAgICAgICAgaWYgKF9uOCA+PSBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuZGJJbWdbMF0ubm9tYnJlICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgICBkYXRhUmVmLmNvbWlfZm90byA9IHsKICAgICAgICAgICAgICAgICAgICAgIG5vbWJyZTogc3RhdGUuZGJJbWdbMF0ubm9tYnJlLAogICAgICAgICAgICAgICAgICAgICAgdXJsOiBzdGF0ZS5kYkltZ1swXS51cmwKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGRhdGFSZWYuY29taV9mb3RvID0gJyc7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5kYkltZ1sxXS5ub21icmUgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgIGRhdGFSZWYuY29taV9yZWdsYW1lbnRvID0gewogICAgICAgICAgICAgICAgICAgICAgbm9tYnJlOiBzdGF0ZS5kYkltZ1sxXS5ub21icmUsCiAgICAgICAgICAgICAgICAgICAgICB1cmw6IHN0YXRlLmRiSW1nWzFdLnVybAogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZGF0YVJlZi5jb21pX3JlZ2xhbWVudG8gPSAnJzsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLmRiSW1nWzJdLm5vbWJyZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgICAgZGF0YVJlZi5jb21pX25vcm1hdGl2YSA9IHsKICAgICAgICAgICAgICAgICAgICAgIG5vbWJyZTogc3RhdGUuZGJJbWdbMl0ubm9tYnJlLAogICAgICAgICAgICAgICAgICAgICAgdXJsOiBzdGF0ZS5kYkltZ1syXS51cmwKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGRhdGFSZWYuY29taV9ub3JtYXRpdmEgPSAnJzsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgaWYgKF9uOCA+PSBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIHZhciBfZGJSZWYxMSA9IGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKCIiLmNvbmNhdChkYXRhLnRhcmdldCwgIi8iKS5jb25jYXQoZGF0YS5jb21pdGUuaWQpKTsKCiAgICAgICAgICAgICAgICAgICAgX2RiUmVmMTEuc2V0KGRhdGFSZWYpOwoKICAgICAgICAgICAgICAgICAgICBzdGF0ZS5jcmVhckRCVmFscyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIHZhciBfc3VjY2VzczE1ID0gewogICAgICAgICAgICAgICAgICAgICAgMDogJ3N1Y2Nlc3NVcGxvYWQnLAogICAgICAgICAgICAgICAgICAgICAgMTogJ1NlIGhhIGNyZWFkbyBleGl0b3NhbWVudGUnCiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgX3RoaXM3LmNvbW1pdCgnc3VjY2Vzc0FkdmlzZScsIF9zdWNjZXNzMTUpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgX2o0Kys7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciBfZGF0YVJlZjggPSB7CiAgICAgICAgICAgIGNvbWlfaWQ6IGRhdGEuY29taXRlLmlkLAogICAgICAgICAgICBjb21pX2FjdGl2bzogZGF0YS5jb21pdGUuYWN0aXZvLAogICAgICAgICAgICBjb21pX2NvbWlQYWdlOiBkYXRhLmNvbWl0ZS5jb21pcGFnZSwKICAgICAgICAgICAgY29taV9jb3JyZW86IGRhdGEuY29taXRlLmNvcnJlbywKICAgICAgICAgICAgY29taV9jb3N0b3M6IGRhdGEuY29taXRlLmNvc3RvcywKICAgICAgICAgICAgY29taV9kZXNjcmlwY2lvbjogZGF0YS5jb21pdGUuZGVzY3JpcGNpb24sCiAgICAgICAgICAgIGNvbWlfZmVjaGF2aWdlbmNpYTogZGF0YS5jb21pdGUuZmVjaGF2LAogICAgICAgICAgICBjb21pX2ZvdG86IGRhdGEuY29taXRlLmFyY2hpdm9zLmltYWdlbiwKICAgICAgICAgICAgY29taV9pbnQ6IGRhdGEuY29taXRlLmludGhwYWdlLAogICAgICAgICAgICBjb21pX2ludGVncmFudGVzOiBkYXRhLmNvbWl0ZS5pbnRlZ3JhbnRlcywKICAgICAgICAgICAgY29taV9ub21icmU6IGRhdGEuY29taXRlLm5vbWJyZSwKICAgICAgICAgICAgY29taV9ub3JtYXRpdmE6IGRhdGEuY29taXRlLmFyY2hpdm9zLm5vcm1hdGl2YSwKICAgICAgICAgICAgY29taV9yZWdsYW1lbnRvOiBkYXRhLmNvbWl0ZS5hcmNoaXZvcy5yZWdsYW1lbnRvCiAgICAgICAgICB9OwogICAgICAgICAgX244Kys7CgogICAgICAgICAgaWYgKF9uOCA+PSBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmxlbmd0aCkgewogICAgICAgICAgICB2YXIgX2RiUmVmMTIgPSBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZigiIi5jb25jYXQoZGF0YS50YXJnZXQsICIvIikuY29uY2F0KGRhdGEuY29taXRlLmlkKSk7CgogICAgICAgICAgICBfZGJSZWYxMi5zZXQoX2RhdGFSZWY4KTsKCiAgICAgICAgICAgIHN0YXRlLmNyZWFyREJWYWxzID0gZmFsc2U7CiAgICAgICAgICAgIHZhciBfc3VjY2VzczE2ID0gewogICAgICAgICAgICAgIDA6ICdzdWNjZXNzVXBsb2FkJywKICAgICAgICAgICAgICAxOiAnU2UgaGEgY3JlYWRvIGV4aXRvc2FtZW50ZScKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdGhpcy5jb21taXQoJ3N1Y2Nlc3NBZHZpc2UnLCBfc3VjY2VzczE2KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICByZXNldERCVmFsdWVzOiBmdW5jdGlvbiByZXNldERCVmFsdWVzKHN0YXRlLCB2YWx1ZSkgewogICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHN0YXRlLnN1Y2Nlc3NVcGxvYWQgPSBudWxsOwogICAgICAgIHN0YXRlLmRlbGV0aW5nVmFsID0gbnVsbDsKICAgICAgICBzdGF0ZS5kYkltZyA9IFtdOwogICAgICB9IGVsc2UgaWYgKHN0YXRlLmRiSW1nWyIiLmNvbmNhdCh2YWx1ZSldICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBzdGF0ZS5kYkltZ1siIi5jb25jYXQodmFsdWUpXSA9IFtdOwogICAgICB9CiAgICB9LAogICAgZmFsc2VDYXJnYXJEQjogZnVuY3Rpb24gZmFsc2VDYXJnYXJEQihzdGF0ZSkgewogICAgICBzdGF0ZS5jYXJnYXJEQiA9IGZhbHNlOwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgZ2V0RGF0YTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2dldERhdGEgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoX3JlZiwgdmFsKSB7CiAgICAgICAgdmFyIGNvbW1pdCwgdHJ5QWdhaW4sIF9kYXRhLCBkYldlYiwgdmFsdWU7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgICAgICAgICAgICAgdHJ5QWdhaW4gPSB0cnVlOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBpZiAoIXRyeUFnYWluKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDM7CiAgICAgICAgICAgICAgICB0cnlBZ2FpbiA9IGZhbHNlOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICByZXR1cm4gZmV0Y2goImh0dHBzOi8vd2ViLWRhdGFiYXNlLTY2ODQyLmZpcmViYXNlaW8uY29tLy5qc29uIik7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIF9kYXRhID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMDsKICAgICAgICAgICAgICAgIHJldHVybiBfZGF0YS5qc29uKCk7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBkYldlYiA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICB2YWx1ZSA9IHsKICAgICAgICAgICAgICAgICAgMDogZGJXZWIsCiAgICAgICAgICAgICAgICAgIDE6IHZhbAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGNvbW1pdCgnZGF0YVdlYicsIHZhbHVlKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxODsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE1OwogICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgzKTsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICB0cnlBZ2FpbiA9IHRydWU7CiAgICAgICAgICAgICAgICB9LCAxMDAwMCk7CgogICAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1szLCAxNV1dKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gZ2V0RGF0YShfeCwgX3gyKSB7CiAgICAgICAgcmV0dXJuIF9nZXREYXRhLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBnZXREYXRhOwogICAgfSgpCiAgfSwKICBtb2R1bGVzOiB7fSwKICBnZXR0ZXJzOiB7CiAgICB1c2VyVXBkYXRlOiBmdW5jdGlvbiB1c2VyVXBkYXRlKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS51c2VyOwogICAgfQogIH0KfSk7"},{"version":3,"sources":["C:/WebProjects/Web-csp/web-csp/web-csp-files-laptop/src/store/index.js"],"names":["Vue","Vuex","firebase","auth","data","use","Store","state","secTitle","successUpload","cargarDB","crearDBVals","errorUpload","deletingVal","loadEdit","deletingIndex","actUser","dbWeb","dpResponsive","headerView","formtipo","user","activo","apellido","autori","cargo","correo","correoVeri","fotoUrl","id","nombre","telefono","accion","refUser","createContent","formUpload","titulo","info","prev","fecha","seccion","images","tipo","editContent","uploadImages","uploadDataBase","users","userRefer","createUser","create","pass","deleteContent","dbImg","dbFiles","mutations","dataWeb","baseDatos","undefined","changeSecTitle","value","setUser","dbUserVal","valuesRef","user_activo","user_apellido","user_autori","user_cargo","user_correo","user_correoVeri","user_fotoUrl","user_id","user_nombre","user_telefono","user_accion","dbRef","database","ref","child","set","then","commit","Object","values","config","apiKey","authDomain","databaseURL","secondaryApp","initializeApp","createUserWithEmailAndPassword","email","emailVerified","displayName","uid","signOut","delete","success","valuesDb","Usuarios","catch","err","message","updateUser","currentUser","updateProfile","phoneNumber","isUserDiff","i","length","deleteItem","index","storage","idDb","remove","storageRef","idSt","listAll","prom","items","forEach","element","name","console","log","deletedEl","resetContentValues","val","successAdvise","handleUpload","files","percentage","order","task","j","m","n","put","on","snapshot","blob_","data_","bytesTransferred","totalBytes","uploadPercentage","push","error","dataRef","noti_titulo","noti_info","noti_fecha","noti_id","noti_prev","noti_publicar","noti_seccion","noti_imagenes","getDownloadURL","url","filesUpload","d","Date","miliSec","parse","dString","toString","splittedDate","split","joinedDate","joined","join","imagenes","crearDB","target","archivos","junta","integrantes","image","pushdbRef","junt_id","key","junt_periodo","inicio","fin","junt_activa","junta_actual","junt_integrantes","juin_cargo","juin_nombre","juin_apellido","juin_correo","juin_foto","juin_activo","juin_crear","crear","servicio","serv_id","serv_activo","serv_cierre","serv_contacto","contacto","serv_descripcion","descripcion","serv_inicio","serv_nombre","serv_foto","integrante","gr_id","gr_correo","gr_nombre","gr_cargo","gr_foto","profesor","cv","prof_id","comi_id","coid","prof_cv","prof_ci","ci","prof_correo","prof_fechadenacimiento","nacimiento","prof_foto","prof_nombre","prof_telefonos","telefonos","k","comite","comi_activo","comi_comiPage","comipage","comi_correo","comi_costos","costos","comi_descripcion","comi_fechavigencia","fechav","comi_foto","comi_int","inthpage","comi_integrantes","comi_nombre","comi_normativa","comi_reglamento","imagen","normativa","reglamento","updateDB","_","resetDBValues","falseCargarDB","actions","getData","tryAgain","fetch","json","setTimeout","modules","getters","userUpdate"],"mappings":";;;;;;;;;;;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,IAAP,MAAiB,MAAjB;AACA,OAAOC,QAAP,IAAmBC,IAAnB,QAA+B,UAA/B;AACA,SAASC,IAAT,QAAqB,QAArB;AAEAJ,GAAG,CAACK,GAAJ,CAAQJ,IAAR;AAEA,eAAe,IAAIA,IAAI,CAACK,KAAT,CAAe;AAC5BC,EAAAA,KAAK,EAAE;AACLC,IAAAA,QAAQ,EAAE,WADL;AAELC,IAAAA,aAAa,EAAE,IAFV;AAGLC,IAAAA,QAAQ,EAAE,KAHL;AAILC,IAAAA,WAAW,EAAE,KAJR;AAKLC,IAAAA,WAAW,EAAE,IALR;AAMLC,IAAAA,WAAW,EAAE,IANR;AAOLC,IAAAA,QAAQ,EAAE,KAPL;AAQLC,IAAAA,aAAa,EAAE,EARV;AASLC,IAAAA,OAAO,EAAE,IATJ;AAULC,IAAAA,KAAK,EAAC,EAVD;AAWLC,IAAAA,YAAY,EAAE,KAXT;AAYLC,IAAAA,UAAU,EAAE,CAZP;AAaLC,IAAAA,QAAQ,EAAE,CAbL;AAcLC,IAAAA,IAAI,EAAE;AACJC,MAAAA,MAAM,EAAE,EADJ;AAEJC,MAAAA,QAAQ,EAAE,EAFN;AAGJC,MAAAA,MAAM,EAAE,EAHJ;AAIJC,MAAAA,KAAK,EAAE,EAJH;AAKJC,MAAAA,MAAM,EAAE,EALJ;AAMJC,MAAAA,UAAU,EAAE,EANR;AAOJC,MAAAA,OAAO,EAAE,EAPL;AAQJC,MAAAA,EAAE,EAAE,EARA;AASJC,MAAAA,MAAM,EAAE,EATJ;AAUJC,MAAAA,QAAQ,EAAE,EAVN;AAWJC,MAAAA,MAAM,EAAE;AAXJ,KAdD;AA2BLC,IAAAA,OAAO,EAAE,EA3BJ;AA4BLC,IAAAA,aAAa,EAAC;AACZC,MAAAA,UAAU,EAAE;AACVC,QAAAA,MAAM,EAAE,EADE;AAEVC,QAAAA,IAAI,EAAE,EAFI;AAGVC,QAAAA,IAAI,EAAE,EAHI;AAIVC,QAAAA,KAAK,EAAE,EAJG;AAKVV,QAAAA,EAAE,EAAE,EALM;AAMVW,QAAAA,OAAO,EAAE,uBANC;AAOVC,QAAAA,MAAM,EAAE,EAPE;AAQVC,QAAAA,IAAI,EAAE;AARI;AADA,KA5BT;AAwCLC,IAAAA,WAAW,EAAC;AACVR,MAAAA,UAAU,EAAE;AACVC,QAAAA,MAAM,EAAE,EADE;AAEVC,QAAAA,IAAI,EAAE,EAFI;AAGVC,QAAAA,IAAI,EAAE,EAHI;AAIVC,QAAAA,KAAK,EAAE,EAJG;AAKVV,QAAAA,EAAE,EAAE,EALM;AAMVW,QAAAA,OAAO,EAAE,EANC;AAOVC,QAAAA,MAAM,EAAE,EAPE;AAQVC,QAAAA,IAAI,EAAE,KARI;AASVE,QAAAA,YAAY,EAAE,KATJ;AAUVC,QAAAA,cAAc,EAAE;AAVN;AADF,KAxCP;AAsDLC,IAAAA,KAAK,EAAC;AACJC,MAAAA,SAAS,EAAE,KADP;AAEJC,MAAAA,UAAU,EAAC;AACTb,QAAAA,UAAU,EAAE;AACVb,UAAAA,MAAM,EAAE,EADE;AAEVC,UAAAA,QAAQ,EAAE,EAFA;AAGVE,UAAAA,KAAK,EAAE,EAHG;AAIVC,UAAAA,MAAM,EAAE,EAJE;AAKVC,UAAAA,UAAU,EAAE,EALF;AAMVC,UAAAA,OAAO,EAAE,EANC;AAOVC,UAAAA,EAAE,EAAE,EAPM;AAQVC,UAAAA,MAAM,EAAE,EARE;AASVC,UAAAA,QAAQ,EAAE,EATA;AAUVkB,UAAAA,MAAM,EAAE,KAVE;AAWVC,UAAAA,IAAI,EAAE;AAXI;AADH;AAFP,KAtDD;AAwELC,IAAAA,aAAa,EAAC;AACZhB,MAAAA,UAAU,EAAE;AACVN,QAAAA,EAAE,EAAE,EADM;AAEVa,QAAAA,IAAI,EAAE;AAFI;AADA,KAxET;AA8ELU,IAAAA,KAAK,EAAE,EA9EF;AA+ELC,IAAAA,OAAO,EAAE;AA/EJ,GADqB;AAkF5BC,EAAAA,SAAS,EAAE;AACTC,IAAAA,OADS,mBACDhD,KADC,EACMiD,SADN,EACgB;AACvBjD,MAAAA,KAAK,CAACU,KAAN,GAAcuC,SAAS,CAAC,CAAD,CAAvB;;AACA,UAAGA,SAAS,CAAC,CAAD,CAAT,KAAiBC,SAApB,EAA8B;AAC5BD,QAAAA,SAAS,CAAC,CAAD,CAAT,GAAe,IAAf;AACD;AACF,KANQ;AAOTE,IAAAA,cAPS,0BAOMnD,KAPN,EAOaoD,KAPb,EAOmB;AAC1BpD,MAAAA,KAAK,CAACC,QAAN,GAAiBmD,KAAjB;AACD,KATQ;AAUTC,IAAAA,OAVS,mBAUDrD,KAVC,EAUMc,IAVN,EAUW;AAClBd,MAAAA,KAAK,CAACuC,KAAN,CAAYC,SAAZ,GAAwB,KAAxB;AAEAxC,MAAAA,KAAK,CAACc,IAAN,GAAa;AACXC,QAAAA,MAAM,EAAED,IAAI,CAACC,MADF;AAEXC,QAAAA,QAAQ,EAAEF,IAAI,CAACE,QAFJ;AAGXC,QAAAA,MAAM,EAAEH,IAAI,CAACG,MAHF;AAIXC,QAAAA,KAAK,EAAEJ,IAAI,CAACI,KAJD;AAKXC,QAAAA,MAAM,EAAEL,IAAI,CAACK,MALF;AAMXC,QAAAA,UAAU,EAAEN,IAAI,CAACM,UANN;AAOXC,QAAAA,OAAO,EAAEP,IAAI,CAACO,OAPH;AAQXC,QAAAA,EAAE,EAAER,IAAI,CAACQ,EARE;AASXC,QAAAA,MAAM,EAAET,IAAI,CAACS,MATF;AAUXC,QAAAA,QAAQ,EAAEV,IAAI,CAACU,QAVJ;AAWXC,QAAAA,MAAM,EAAEX,IAAI,CAACW;AAXF,OAAb;AAcAzB,MAAAA,KAAK,CAAC0B,OAAN,GAAgB;AACdX,QAAAA,MAAM,EAAED,IAAI,CAACC,MADC;AAEdC,QAAAA,QAAQ,EAAEF,IAAI,CAACE,QAFD;AAGdC,QAAAA,MAAM,EAAEH,IAAI,CAACG,MAHC;AAIdC,QAAAA,KAAK,EAAEJ,IAAI,CAACI,KAJE;AAKdC,QAAAA,MAAM,EAAEL,IAAI,CAACK,MALC;AAMdC,QAAAA,UAAU,EAAEN,IAAI,CAACM,UANH;AAOdC,QAAAA,OAAO,EAAEP,IAAI,CAACO,OAPA;AAQdC,QAAAA,EAAE,EAAER,IAAI,CAACQ,EARK;AASdC,QAAAA,MAAM,EAAET,IAAI,CAACS,MATC;AAUdC,QAAAA,QAAQ,EAAEV,IAAI,CAACU,QAVD;AAWdC,QAAAA,MAAM,EAAEX,IAAI,CAACW;AAXC,OAAhB;AAaD,KAxCQ;AAyCT6B,IAAAA,SAzCS,qBAyCCtD,KAzCD,EAyCQoD,KAzCR,EAyCc;AAAA;;AACrB,UAAMG,SAAS,GAAG;AAChBC,QAAAA,WAAW,EAAE,IADG;AAEhBC,QAAAA,aAAa,EAAEL,KAAK,CAACpC,QAFL;AAGhB0C,QAAAA,WAAW,EAAEN,KAAK,CAACnC,MAHH;AAIhB0C,QAAAA,UAAU,EAAEP,KAAK,CAAClC,KAJF;AAKhB0C,QAAAA,WAAW,EAAER,KAAK,CAACjC,MALH;AAMhB0C,QAAAA,eAAe,EAAET,KAAK,CAAChC,UANP;AAOhB0C,QAAAA,YAAY,YAAKV,KAAK,CAAC/B,OAAX,CAPI;AAQhB0C,QAAAA,OAAO,EAAEX,KAAK,CAAC9B,EARC;AAShB0C,QAAAA,WAAW,EAAEZ,KAAK,CAAC7B,MATH;AAUhB0C,QAAAA,aAAa,YAAKb,KAAK,CAAC5B,QAAX,CAVG;AAWhB0C,QAAAA,WAAW,YAAKd,KAAK,CAAC3B,MAAX;AAXK,OAAlB;AAaA,UAAM0C,KAAK,GAAGxE,QAAQ,CAACyE,QAAT,GAAoBC,GAApB,CAAwB,UAAxB,CAAd;AACAF,MAAAA,KAAK,CAACG,KAAN,CAAYf,SAAS,CAACQ,OAAtB,EAA+BQ,GAA/B,CAAmChB,SAAnC,EAA8CiB,IAA9C,CAAmD,YAAI;AACrD,QAAA,KAAI,CAACC,MAAL,CAAY,SAAZ,EAAuBC,MAAM,CAACC,MAAP,CAAcpB,SAAd,CAAvB;AACD,OAFD;AAGD,KA3DQ;AA4DTd,IAAAA,UA5DS,sBA4DEzC,KA5DF,EA4DSoD,KA5DT,EA4De;AAAA;;AACtBpD,MAAAA,KAAK,CAACuC,KAAN,CAAYC,SAAZ,GAAwB,IAAxB;AACA,UAAMoC,MAAM,GAAG;AACbC,QAAAA,MAAM,EAAE,yCADK;AAEbC,QAAAA,UAAU,EAAE,oCAFC;AAGbC,QAAAA,WAAW,EAAE;AAHA,OAAf;AAKA,UAAMC,YAAY,GAAGrF,QAAQ,CAACsF,aAAT,CAAuBL,MAAvB,EAA+B,WAA/B,CAArB;AAEAI,MAAAA,YAAY,CAACpF,IAAb,GAAoBsF,8BAApB,CAAmDlF,KAAK,CAACuC,KAAN,CAAYE,UAAZ,CAAuBb,UAAvB,CAAkCT,MAArF,EAA6FnB,KAAK,CAACuC,KAAN,CAAYE,UAAZ,CAAuBb,UAAvB,CAAkCe,IAA/H,EAAqI6B,IAArI,CAA0I,UAAA1D,IAAI,EAAI;AAC9I,YAAMyC,SAAS,GAAG;AAChBpC,UAAAA,MAAM,EAAEL,IAAI,CAACA,IAAL,CAAUqE,KADF;AAEhB/D,UAAAA,UAAU,EAAEN,IAAI,CAACA,IAAL,CAAUsE,aAFN;AAGhB7D,UAAAA,MAAM,EAAET,IAAI,CAACA,IAAL,CAAUuE,WAHF;AAIhBrE,UAAAA,QAAQ,EAAE,EAJM;AAKhBC,UAAAA,MAAM,EAAE,EALQ;AAMhBI,UAAAA,OAAO,EAAE,EANO;AAOhBG,UAAAA,QAAQ,EAAE,EAPM;AAQhBN,UAAAA,KAAK,EAAE,EARS;AAShBI,UAAAA,EAAE,EAAER,IAAI,CAACA,IAAL,CAAUwE,GATE;AAUhBvE,UAAAA,MAAM,EAAE,EAVQ;AAWhBU,UAAAA,MAAM,EAAE;AAXQ,SAAlB;AAaAuD,QAAAA,YAAY,CAACpF,IAAb,GAAoB2F,OAApB;AACAP,QAAAA,YAAY,CAACQ,MAAb;AACA,YAAMC,OAAO,GAAG;AACd,aAAG,eADW;AAEd,aAAG;AAFW,SAAhB;;AAIA,QAAA,MAAI,CAAChB,MAAL,CAAY,eAAZ,EAA6BgB,OAA7B;;AACA,YAAMC,QAAQ,GAAG;AACf9B,UAAAA,WAAW,EAAE9C,IAAI,CAACA,IAAL,CAAUqE,KADR;AAEftB,UAAAA,eAAe,EAAE/C,IAAI,CAACA,IAAL,CAAUsE,aAFZ;AAGfpB,UAAAA,WAAW,EAAElD,IAAI,CAACA,IAAL,CAAUuE,WAHR;AAIf5B,UAAAA,aAAa,EAAE,EAJA;AAKfC,UAAAA,WAAW,EAAE,EALE;AAMfI,UAAAA,YAAY,EAAE,EANC;AAOfG,UAAAA,aAAa,EAAE,EAPA;AAQfN,UAAAA,UAAU,EAAE,EARG;AASfI,UAAAA,OAAO,EAAEjD,IAAI,CAACA,IAAL,CAAUwE,GATJ;AAUf9B,UAAAA,WAAW,EAAE,EAVE;AAWfU,UAAAA,WAAW,EAAE;AAXE,SAAjB;;AAaA,QAAA,MAAI,CAACO,MAAL,CAAY,WAAZ,EAAyBlB,SAAzB;;AACAvD,QAAAA,KAAK,CAACU,KAAN,CAAYiF,QAAZ,WAAwBD,QAAQ,CAACpE,EAAjC,KAAyCoE,QAAzC;AACD,OApCH,EAoCKE,KApCL,CAoCW,UAAAC,GAAG,EAAI;AACd7F,QAAAA,KAAK,CAACuC,KAAN,CAAYC,SAAZ,GAAwB,KAAxB;AACAwC,QAAAA,YAAY,CAACQ,MAAb;;AACA,YAAGK,GAAG,CAACC,OAAJ,KAAgB,yDAAnB,EAA6E;AAC3E,cAAML,OAAO,GAAG;AACd,eAAG,aADW;AAEd,eAAG;AAFW,WAAhB;;AAIA,UAAA,MAAI,CAAChB,MAAL,CAAY,eAAZ,EAA6BgB,OAA7B;AACD;AACF,OA9CH;AA+CD,KApHQ;AAqHTM,IAAAA,UArHS,sBAqHE/F,KArHF,EAqHSoD,KArHT,EAqHe;AAAA;;AACtB,UAAGA,KAAK,CAACjB,IAAN,KAAe,GAAlB,EAAsB;AACpB,YAAMoB,SAAS,GAAG;AAChBQ,UAAAA,OAAO,EAAEX,KAAK,CAAC9B,EADC;AAEhBsC,UAAAA,WAAW,EAAER,KAAK,CAACjC,MAFH;AAGhB0C,UAAAA,eAAe,EAAET,KAAK,CAAChC,UAHP;AAIhB8C,UAAAA,WAAW,EAAEd,KAAK,CAAC3B,MAJH;AAKhBwC,UAAAA,aAAa,EAAEb,KAAK,CAAC5B,QALL;AAMhBwC,UAAAA,WAAW,EAAEZ,KAAK,CAAC7B,MANH;AAOhBkC,UAAAA,aAAa,EAAEL,KAAK,CAACpC,QAPL;AAQhBwC,UAAAA,WAAW,EAAEJ,KAAK,CAACrC,MARH;AAShB+C,UAAAA,YAAY,EAAEV,KAAK,CAAC/B,OATJ;AAUhBqC,UAAAA,WAAW,EAAEN,KAAK,CAACnC,MAVH;AAWhB0C,UAAAA,UAAU,EAAEP,KAAK,CAAClC;AAXF,SAAlB;AAcA,YAAMiD,KAAK,GAAGxE,QAAQ,CAACyE,QAAT,GAAoBC,GAApB,CAAwB,UAAxB,CAAd;AACAF,QAAAA,KAAK,CAACG,KAAN,CAAYf,SAAS,CAACQ,OAAtB,EAA+BQ,GAA/B,CAAmChB,SAAnC,EAA8CiB,IAA9C,CAAmD,YAAI;AACrD;AACA,UAAA,MAAI,CAACC,MAAL,CAAY,SAAZ,EAAuBrB,KAAvB;;AACApD,UAAAA,KAAK,CAACS,OAAN,GAAgB,IAAhB;AACA,cAAMgF,OAAO,GAAG;AACd,eAAG,eADW;AAEd,eAAG;AAFW,WAAhB;;AAIA,UAAA,MAAI,CAAChB,MAAL,CAAY,eAAZ,EAA6BgB,OAA7B;AACD,SATD;AAUD,OA1BD,MA0BK;AACH,YAAM3E,IAAI,GAAGnB,QAAQ,CAACC,IAAT,GAAgBoG,WAA7B;;AACA,YAAGlF,IAAH,EAAQ;AACN;AAEAA,UAAAA,IAAI,CAACmF,aAAL,CAAmB;AACjBZ,YAAAA,WAAW,EAAEjC,KAAK,CAAC7B,MADF;AAEjB4D,YAAAA,KAAK,EAAE/B,KAAK,CAACjC,MAFI;AAGjB+E,YAAAA,WAAW,EAAE9C,KAAK,CAAC5B;AAHF,WAAnB,EAIGgD,IAJH,CAIQ,YAAK;AACX,gBAAMjB,SAAS,GAAG;AAChBK,cAAAA,WAAW,EAAER,KAAK,CAACjC,MADH;AAEhB0C,cAAAA,eAAe,EAAET,KAAK,CAAChC,UAFP;AAGhB4C,cAAAA,WAAW,EAAEZ,KAAK,CAAC7B,MAHH;AAIhBkC,cAAAA,aAAa,EAAEL,KAAK,CAACpC,QAJL;AAKhB0C,cAAAA,WAAW,EAAEN,KAAK,CAACnC,MALH;AAMhB6C,cAAAA,YAAY,EAAEV,KAAK,CAAC/B,OANJ;AAOhB4C,cAAAA,aAAa,EAAEb,KAAK,CAAC5B,QAPL;AAQhBmC,cAAAA,UAAU,EAAEP,KAAK,CAAClC,KARF;AAShB6C,cAAAA,OAAO,EAAEX,KAAK,CAAC9B,EATC;AAUhBkC,cAAAA,WAAW,EAAEJ,KAAK,CAACrC,MAVH;AAWhBmD,cAAAA,WAAW,EAAEd,KAAK,CAAC3B;AAXH,aAAlB;AAaA,gBAAM0C,KAAK,GAAGxE,QAAQ,CAACyE,QAAT,GAAoBC,GAApB,CAAwB,UAAxB,CAAd;AACAF,YAAAA,KAAK,CAACG,KAAN,CAAYlB,KAAK,CAAC9B,EAAlB,EAAsBiD,GAAtB,CAA0BhB,SAA1B,EAAqCiB,IAArC,CAA0C,YAAI;AAC5C;AACA,cAAA,MAAI,CAACC,MAAL,CAAY,SAAZ,EAAuBrB,KAAvB;;AACApD,cAAAA,KAAK,CAACS,OAAN,GAAgB,IAAhB;AACA,kBAAMgF,OAAO,GAAG;AACd,mBAAG,eADW;AAEd,mBAAG;AAFW,eAAhB;;AAIA,cAAA,MAAI,CAAChB,MAAL,CAAY,eAAZ,EAA6BgB,OAA7B;AACD,aATD;AAUD,WA7BD;AA8BD;AACF;AACF,KArLQ;AAsLTU,IAAAA,UAtLS,sBAsLEnG,KAtLF,EAsLSoD,KAtLT,EAsLe;AACtB,UAAGA,KAAK,CAACjB,IAAN,KAAe,GAAlB,EAAsB;AACpB,aAAI,IAAIiE,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG1B,MAAM,CAACC,MAAP,CAAc3E,KAAK,CAACc,IAApB,EAA0BuF,MAA7C,EAAqDD,CAAC,EAAtD,EAAyD;AACvD,cAAG1B,MAAM,CAACC,MAAP,CAAc3E,KAAK,CAACc,IAApB,EAA0BsF,CAA1B,MAAiC1B,MAAM,CAACC,MAAP,CAAc3E,KAAK,CAAC0B,OAApB,EAA6B0E,CAA7B,CAApC,EAAoE;AAClEpG,YAAAA,KAAK,CAACS,OAAN,GAAgB,IAAhB;AACA,mBAAO,KAAKgE,MAAL,CAAY,YAAZ,EAA0BzE,KAAK,CAACc,IAAhC,CAAP;AACD;AACF;AACF,OAPD,MAOK;AACHd,QAAAA,KAAK,CAACS,OAAN,GAAgB,IAAhB;AACA,aAAKgE,MAAL,CAAY,YAAZ,EAA0BrB,KAA1B;AACD;AACF,KAlMQ;AAmMTkD,IAAAA,UAnMS,sBAmMEtG,KAnMF,EAmMSoD,KAnMT,EAmMe;AAAA;;AACtBpD,MAAAA,KAAK,CAACM,WAAN,GAAoB,IAApB;AACAN,MAAAA,KAAK,CAACQ,aAAN,GAAsB4C,KAAK,CAACmD,KAA5B;;AAEA,UAAGnD,KAAK,CAACoD,OAAN,KAAkB,KAArB,EAA2B;AACzB7G,QAAAA,QAAQ,CAACyE,QAAT,GAAoBC,GAApB,WAA2BjB,KAAK,CAACiB,GAAjC,cAAwCjB,KAAK,CAACqD,IAA9C,GAAsDC,MAAtD,GAA+DlC,IAA/D,CAAoE,YAAI;AACtExE,UAAAA,KAAK,CAACM,WAAN,GAAoB,KAApB;AACAN,UAAAA,KAAK,CAACQ,aAAN,GAAsB,EAAtB;AACA,cAAMiF,OAAO,GAAG;AACd,eAAG,eADW;AAEd,eAAG;AAFW,WAAhB;;AAIA,UAAA,MAAI,CAAChB,MAAL,CAAY,eAAZ,EAA6BgB,OAA7B;AACC,SARH;AAUD,OAXD,MAWM,IAAGrC,KAAK,CAACoD,OAAN,KAAkB,IAArB,EAA0B;AAC9B,YAAG;AACD,cAAIG,UAAU,GAAGhH,QAAQ,CAAC6G,OAAT,GAAmBnC,GAAnB,YAA2BjB,KAAK,CAACiB,GAAjC,cAAwCjB,KAAK,CAACwD,IAA9C,EAAjB;AACAD,UAAAA,UAAU,CAACE,OAAX,GAAqBrC,IAArB,CAA0B,UAAAsC,IAAI,EAAI;AAChC,gBAAGA,IAAI,CAACC,KAAL,CAAWV,MAAX,KAAsB,CAAzB,EAA2B;AACzBS,cAAAA,IAAI,CAACC,KAAL,CAAWC,OAAX,CAAmB,UAAAC,OAAO,EAAI;AAC5BN,gBAAAA,UAAU,CAACrC,KAAX,CAAiB2C,OAAO,CAACC,IAAzB,EAA+B1B,MAA/B,GAAwChB,IAAxC,CAA8C,UAAAqB,GAAG,EAAI;AACnD,sBAAGA,GAAG,KAAK3C,SAAX,EAAqB;AACnBiE,oBAAAA,OAAO,CAACC,GAAR,CAAYvB,GAAZ;AACD,mBAFD,MAEK;AACHlG,oBAAAA,QAAQ,CAACyE,QAAT,GAAoBC,GAApB,WAA2BjB,KAAK,CAACiB,GAAjC,cAAwCjB,KAAK,CAACqD,IAA9C,GAAsDC,MAAtD,GAA+DlC,IAA/D,CAAoE,YAAI;AACtExE,sBAAAA,KAAK,CAACM,WAAN,GAAoB,KAApB;AACAN,sBAAAA,KAAK,CAACQ,aAAN,GAAsB,EAAtB;AACA,0BAAMiF,OAAO,GAAG;AACd,2BAAG,eADW;AAEd,2BAAG;AAFW,uBAAhB;;AAIA,sBAAA,MAAI,CAAChB,MAAL,CAAY,eAAZ,EAA6BgB,OAA7B;AACC,qBARH;AAUD;AACF,iBAfD;AAgBD,eAjBD;AAkBD,aAnBD,MAmBK;AACH9F,cAAAA,QAAQ,CAACyE,QAAT,GAAoBC,GAApB,WAA2BjB,KAAK,CAACiB,GAAjC,cAAwCjB,KAAK,CAACqD,IAA9C,GAAsDC,MAAtD,GAA+DlC,IAA/D,CAAoE,YAAI;AACtExE,gBAAAA,KAAK,CAACM,WAAN,GAAoB,KAApB;AACAN,gBAAAA,KAAK,CAACQ,aAAN,GAAsB,EAAtB;AACA,oBAAMiF,OAAO,GAAG;AACd,qBAAG,eADW;AAEd,qBAAG;AAFW,iBAAhB;;AAIA,gBAAA,MAAI,CAAChB,MAAL,CAAY,eAAZ,EAA6BgB,OAA7B;AACC,eARH;AAUD;AACF,WAhCD;AAiCD,SAnCD,CAmCC,OAAMI,GAAN,EAAU;AAACsB,UAAAA,OAAO,CAACC,GAAR,CAAYvB,GAAZ;AAAiB;AAC9B;AAEF,KAzPQ;AA0PTwB,IAAAA,SA1PS,qBA0PCrH,KA1PD,EA0PQoD,KA1PR,EA0Pc;AACrB,UAAGA,KAAK,CAAC,CAAD,CAAL,KAAa,CAAhB,EAAkB;AAChBpD,QAAAA,KAAK,CAACM,WAAN,GAAoB8C,KAAK,CAAC,CAAD,CAAzB;AACD;;AACD,UAAGA,KAAK,CAAC,CAAD,CAAL,KAAa,CAAhB,EAAkB;AAChBpD,QAAAA,KAAK,CAACQ,aAAN,GAAsB4C,KAAK,CAAC,CAAD,CAA3B;AACD;AACF,KAjQQ;AAkQTkE,IAAAA,kBAlQS,8BAkQUtH,KAlQV,EAkQiBuH,GAlQjB,EAkQqB;AAC5B,UAAGA,GAAG,KAAK,CAAX,EAAa;AACXvH,QAAAA,KAAK,CAAC2B,aAAN,CAAoBC,UAApB,CAA+BC,MAA/B,GAAwC,EAAxC;AACA7B,QAAAA,KAAK,CAAC2B,aAAN,CAAoBC,UAApB,CAA+BE,IAA/B,GAAsC,EAAtC;AACA9B,QAAAA,KAAK,CAAC2B,aAAN,CAAoBC,UAApB,CAA+BG,IAA/B,GAAsC,EAAtC;AACA/B,QAAAA,KAAK,CAAC2B,aAAN,CAAoBC,UAApB,CAA+BM,MAA/B,GAAwC,EAAxC;AACAlC,QAAAA,KAAK,CAAC2B,aAAN,CAAoBC,UAApB,CAA+BI,KAA/B,GAAuC,EAAvC;AACAhC,QAAAA,KAAK,CAAC2B,aAAN,CAAoBC,UAApB,CAA+BN,EAA/B,GAAoC,EAApC;AACAtB,QAAAA,KAAK,CAAC2B,aAAN,CAAoBC,UAApB,CAA+BK,OAA/B,GAAyC,uBAAzC;AACD,OARD,MAQM,IAAGsF,GAAG,KAAK,CAAX,EAAa;AACjBvH,QAAAA,KAAK,CAACoC,WAAN,CAAkBR,UAAlB,CAA6BC,MAA7B,GAAsC,EAAtC;AACA7B,QAAAA,KAAK,CAACoC,WAAN,CAAkBR,UAAlB,CAA6BE,IAA7B,GAAoC,EAApC;AACA9B,QAAAA,KAAK,CAACoC,WAAN,CAAkBR,UAAlB,CAA6BG,IAA7B,GAAoC,EAApC;AACA/B,QAAAA,KAAK,CAACoC,WAAN,CAAkBR,UAAlB,CAA6BM,MAA7B,GAAsC,EAAtC;AACAlC,QAAAA,KAAK,CAACoC,WAAN,CAAkBR,UAAlB,CAA6BI,KAA7B,GAAqC,EAArC;AACAhC,QAAAA,KAAK,CAACoC,WAAN,CAAkBR,UAAlB,CAA6BN,EAA7B,GAAkC,EAAlC;AACAtB,QAAAA,KAAK,CAACoC,WAAN,CAAkBR,UAAlB,CAA6BK,OAA7B,GAAuC,qBAAvC;AACD,OARK,MAQA,IAAGsF,GAAG,KAAK,CAAX,EAAa;AACjBvH,QAAAA,KAAK,CAACuC,KAAN,GAAc;AACZC,UAAAA,SAAS,EAAE,KADC;AAEZC,UAAAA,UAAU,EAAC;AACTb,YAAAA,UAAU,EAAE;AACVb,cAAAA,MAAM,EAAE,EADE;AAEVC,cAAAA,QAAQ,EAAE,EAFA;AAGVE,cAAAA,KAAK,EAAE,EAHG;AAIVC,cAAAA,MAAM,EAAE,EAJE;AAKVC,cAAAA,UAAU,EAAE,EALF;AAMVC,cAAAA,OAAO,EAAE,EANC;AAOVC,cAAAA,EAAE,EAAE,EAPM;AAQVC,cAAAA,MAAM,EAAE,EARE;AASVC,cAAAA,QAAQ,EAAE,EATA;AAUVkB,cAAAA,MAAM,EAAE,KAVE;AAWVC,cAAAA,IAAI,EAAE;AAXI;AADH;AAFC,SAAd;AAkBD;AACF,KAvSQ;AAwST6E,IAAAA,aAxSS,yBAwSKxH,KAxSL,EAwSYH,IAxSZ,EAwSiB;AACxBG,MAAAA,KAAK,WAAIH,IAAI,CAAC,CAAD,CAAR,EAAL,GAAsBA,IAAI,CAAC,CAAD,CAA1B;AACD,KA1SQ;AA2ST4H,IAAAA,YA3SS,wBA2SIzH,KA3SJ,EA2SW0H,KA3SX,EA2SiB;AAAA;;AAExB,UAAIf,UAAU,GAAG,EAAjB;AACA,UAAIgB,UAAU,GAAG,EAAjB;AACA,UAAIC,KAAK,GAAG,EAAZ;AACA,UAAIC,IAAI,GAAG,EAAX;AACA,UAAIzB,CAAC,GAAG,CAAR;AACA,UAAI0B,CAAC,GAAG,CAAR;AACA,UAAIC,CAAC,GAAG,CAAR;AACA,UAAIC,CAAC,GAAG,CAAR;;AAEA,UAAGhI,KAAK,CAAC2B,aAAN,CAAoBC,UAApB,CAA+BO,IAA/B,KAAwC,IAA3C,EAAgD;AAC9CuF,QAAAA,KAAK,CAACV,OAAN,CAAc,UAAAC,OAAO,EAAI;AACvBN,UAAAA,UAAU,GAAEhH,QAAQ,CAAC6G,OAAT,GAAmBnC,GAAnB,8BAA6CrE,KAAK,CAAC2B,aAAN,CAAoBC,UAApB,CAA+BN,EAA5E,kBAAsF2F,OAAO,CAAC3F,EAA9F,EAAZ;AACAuG,UAAAA,IAAI,CAACzB,CAAD,CAAJ,GAAUO,UAAU,CAACsB,GAAX,CAAehB,OAAf,CAAV;AACAb,UAAAA,CAAC;AACF,SAJD;;AAMA,aAAI,IAAIA,EAAC,GAAG,CAAZ,EAAeA,EAAC,GAAGsB,KAAK,CAACrB,MAAzB,EAAiCD,EAAC,EAAlC,EAAqC;AACnCyB,UAAAA,IAAI,CAACzB,EAAD,CAAJ,CAAQ8B,EAAR,CAAW,eAAX,EAA4B,UAAAC,QAAQ,EAAI;AACtCR,YAAAA,UAAU,CAACQ,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAA3B,CAAV,GAA4C6G,QAAQ,CAACG,gBAAT,GAA4BH,QAAQ,CAACI,UAAtC,GAAoD,GAA/F;AACAvI,YAAAA,KAAK,CAAC2B,aAAN,CAAoBC,UAApB,CAA+BM,MAA/B,CAAsCiG,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAAhE,EAAoEkH,gBAApE,GAAuFb,UAAU,CAACQ,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAA3B,CAAjG;AACAyG,YAAAA,CAAC;;AACD,gBAAG/H,KAAK,CAAC2B,aAAN,CAAoBC,UAApB,CAA+BM,MAA/B,CAAsCiG,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAAhE,EAAoEkH,gBAApE,KAAyF,GAAzF,IAAgGZ,KAAK,CAACvB,MAAN,GAAeqB,KAAK,CAACrB,MAAxH,EAA+H;AAC7HuB,cAAAA,KAAK,CAACa,IAAN,CAAWN,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAArC;AACD;AACF,WAPD,EAOG,UAAAoH,KAAK,EAAI;AACVvB,YAAAA,OAAO,CAACC,GAAR,CAAYsB,KAAK,CAAC5C,OAAlB;AACD,WATD,EASG,YAAK;AACN,gBAAI6C,OAAO,GAAG;AACZC,cAAAA,WAAW,EAAE5I,KAAK,CAAC2B,aAAN,CAAoBC,UAApB,CAA+BC,MADhC;AAEZgH,cAAAA,SAAS,EAAE7I,KAAK,CAAC2B,aAAN,CAAoBC,UAApB,CAA+BE,IAF9B;AAGZgH,cAAAA,UAAU,EAAE9I,KAAK,CAAC2B,aAAN,CAAoBC,UAApB,CAA+BI,KAH/B;AAIZ+G,cAAAA,OAAO,EAAE/I,KAAK,CAAC2B,aAAN,CAAoBC,UAApB,CAA+BN,EAJ5B;AAKZ0H,cAAAA,SAAS,EAAEhJ,KAAK,CAAC2B,aAAN,CAAoBC,UAApB,CAA+BG,IAL9B;AAMZkH,cAAAA,aAAa,EAAE,IANH;AAOZC,cAAAA,YAAY,EAAElJ,KAAK,CAAC2B,aAAN,CAAoBC,UAApB,CAA+BK,OAPjC;AAQZkH,cAAAA,aAAa,EAAE;AARH,aAAd;AAUA,gBAAIxC,UAAU,GAAGhH,QAAQ,CAAC6G,OAAT,GAAmBnC,GAAnB,8BAA6CrE,KAAK,CAAC2B,aAAN,CAAoBC,UAApB,CAA+BN,EAA5E,kBAAsFsG,KAAK,CAACE,CAAD,CAA3F,EAAjB;AACAnB,YAAAA,UAAU,CAACyC,cAAX,GAA4B5E,IAA5B,CAAiC,UAAA6E,GAAG,EAAI;AACtC,kBAAI9B,GAAG,GAAGK,KAAK,CAACI,CAAD,CAAf;AACAhI,cAAAA,KAAK,CAAC2B,aAAN,CAAoBC,UAApB,CAA+BM,MAA/B,CAAsCqF,GAAtC,EAA2C8B,GAA3C,GAAiDA,GAAjD;AACArJ,cAAAA,KAAK,CAAC2B,aAAN,CAAoBC,UAApB,CAA+BM,MAA/B,CAAsCqF,GAAtC,EAA2CL,IAA3C,iBAAyDK,GAAzD;AACAS,cAAAA,CAAC;;AACD,kBAAGA,CAAC,IAAIhI,KAAK,CAAC2B,aAAN,CAAoBC,UAApB,CAA+BM,MAA/B,CAAsCmE,MAA9C,EAAqD;AACnD2B,gBAAAA,CAAC,GAAG,CAAJ;AACAhI,gBAAAA,KAAK,CAAC2B,aAAN,CAAoBC,UAApB,CAA+BM,MAA/B,CAAsC8E,OAAtC,CAA8C,UAAAC,OAAO,EAAI;AACvD0B,kBAAAA,OAAO,CAACQ,aAAR,CAAsBV,IAAtB,CAA2B,EAA3B;AACAE,kBAAAA,OAAO,CAACQ,aAAR,CAAsBnB,CAAtB,EAAyBzG,MAAzB,GAAkCvB,KAAK,CAAC2B,aAAN,CAAoBC,UAApB,CAA+BM,MAA/B,CAAsC8F,CAAtC,EAAyCd,IAA3E;AACAyB,kBAAAA,OAAO,CAACQ,aAAR,CAAsBnB,CAAtB,EAAyBqB,GAAzB,GAA+BrJ,KAAK,CAAC2B,aAAN,CAAoBC,UAApB,CAA+BM,MAA/B,CAAsC8F,CAAtC,EAAyCqB,GAAxE;AACArB,kBAAAA,CAAC;;AACD,sBAAGA,CAAC,IAAIhI,KAAK,CAAC2B,aAAN,CAAoBC,UAApB,CAA+BM,MAA/B,CAAsCmE,MAA9C,EAAqD;AACnD,wBAAMlC,KAAK,GAAGxE,QAAQ,CAACyE,QAAT,GAAoBC,GAApB,CAAwB,UAAxB,CAAd;AACAF,oBAAAA,KAAK,CAACG,KAAN,CAAYtE,KAAK,CAAC2B,aAAN,CAAoBC,UAApB,CAA+BN,EAA3C,EAA+CiD,GAA/C,CAAmDoE,OAAnD;AACA3I,oBAAAA,KAAK,CAAC2B,aAAN,CAAoBC,UAApB,CAA+BO,IAA/B,GAAsC,KAAtC;AACA,wBAAMsD,OAAO,GAAG;AACd,yBAAG,eADW;AAEd,yBAAG;AAFW,qBAAhB;;AAIA,oBAAA,MAAI,CAAChB,MAAL,CAAY,eAAZ,EAA6BgB,OAA7B;AACD;AACF,iBAfD;AAgBD;AACF,aAxBD;AAyBAqC,YAAAA,CAAC;AACF,WA/CD;AAgDD;AACF,OAzDD,MAyDM,IAAG9H,KAAK,CAACoC,WAAN,CAAkBR,UAAlB,CAA6BO,IAA7B,KAAsC,IAAzC,EAA8C;AAElD,YAAGnC,KAAK,CAACoC,WAAN,CAAkBR,UAAlB,CAA6BS,YAA7B,KAA8C,IAAjD,EAAsD;AACpDqF,UAAAA,KAAK,CAACV,OAAN,CAAc,UAAAC,OAAO,EAAI;AACvBN,YAAAA,UAAU,GAAEhH,QAAQ,CAAC6G,OAAT,GAAmBnC,GAAnB,8BAA6CrE,KAAK,CAACoC,WAAN,CAAkBR,UAAlB,CAA6BN,EAA1E,kBAAoF2F,OAAO,CAAC3F,EAA5F,EAAZ;AACAuG,YAAAA,IAAI,CAACzB,CAAD,CAAJ,GAAUO,UAAU,CAACsB,GAAX,CAAehB,OAAf,CAAV;AACAb,YAAAA,CAAC;AACF,WAJD;;AAMA,eAAI,IAAIA,GAAC,GAAG,CAAZ,EAAeA,GAAC,GAAGsB,KAAK,CAACrB,MAAzB,EAAiCD,GAAC,EAAlC,EAAqC;AACnCyB,YAAAA,IAAI,CAACzB,GAAD,CAAJ,CAAQ8B,EAAR,CAAW,eAAX,EAA4B,UAAAC,QAAQ,EAAI;AACtCR,cAAAA,UAAU,CAACQ,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAA3B,CAAV,GAA4C6G,QAAQ,CAACG,gBAAT,GAA4BH,QAAQ,CAACI,UAAtC,GAAoD,GAA/F;AACAvI,cAAAA,KAAK,CAACoC,WAAN,CAAkBR,UAAlB,CAA6BM,MAA7B,CAAoCiG,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAA9D,EAAkEkH,gBAAlE,GAAqFb,UAAU,CAACQ,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAA3B,CAA/F;AAA8H;AAC9HyG,cAAAA,CAAC;;AACD,kBAAG/H,KAAK,CAACoC,WAAN,CAAkBR,UAAlB,CAA6BM,MAA7B,CAAoCiG,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAA9D,EAAkEkH,gBAAlE,KAAuF,GAAvF,IAA8FZ,KAAK,CAACvB,MAAN,GAAeqB,KAAK,CAACrB,MAAtH,EAA6H;AAC3HuB,gBAAAA,KAAK,CAACa,IAAN,CAAWN,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAArC;AACD;AACF,aAPD,EAOG,UAAAoH,KAAK,EAAI;AACVvB,cAAAA,OAAO,CAACC,GAAR,CAAYsB,KAAK,CAAC5C,OAAlB;AACD,aATD,EASG,YAAK;AACN,kBAAI6C,OAAO,GAAG;AACZC,gBAAAA,WAAW,EAAE5I,KAAK,CAACoC,WAAN,CAAkBR,UAAlB,CAA6BC,MAD9B;AAEZgH,gBAAAA,SAAS,EAAE7I,KAAK,CAACoC,WAAN,CAAkBR,UAAlB,CAA6BE,IAF5B;AAGZgH,gBAAAA,UAAU,EAAE9I,KAAK,CAACoC,WAAN,CAAkBR,UAAlB,CAA6BI,KAH7B;AAIZ+G,gBAAAA,OAAO,EAAE/I,KAAK,CAACoC,WAAN,CAAkBR,UAAlB,CAA6BN,EAJ1B;AAKZ0H,gBAAAA,SAAS,EAAEhJ,KAAK,CAACoC,WAAN,CAAkBR,UAAlB,CAA6BG,IAL5B;AAMZkH,gBAAAA,aAAa,EAAE,IANH;AAOZC,gBAAAA,YAAY,EAAElJ,KAAK,CAACoC,WAAN,CAAkBR,UAAlB,CAA6BK,OAP/B;AAQZkH,gBAAAA,aAAa,EAAE;AARH,eAAd;AAUA,kBAAIxC,UAAU,GAAGhH,QAAQ,CAAC6G,OAAT,GAAmBnC,GAAnB,8BAA6CrE,KAAK,CAACoC,WAAN,CAAkBR,UAAlB,CAA6BN,EAA1E,kBAAoFsG,KAAK,CAACE,CAAD,CAAzF,EAAjB;AACAnB,cAAAA,UAAU,CAACyC,cAAX,GAA4B5E,IAA5B,CAAiC,UAAA6E,GAAG,EAAI;AACtC,oBAAI9B,GAAG,GAAGK,KAAK,CAACI,CAAD,CAAf;AACAhI,gBAAAA,KAAK,CAACoC,WAAN,CAAkBR,UAAlB,CAA6BM,MAA7B,CAAoCqF,GAApC,EAAyC8B,GAAzC,GAA+CA,GAA/C;AACArJ,gBAAAA,KAAK,CAACoC,WAAN,CAAkBR,UAAlB,CAA6BM,MAA7B,CAAoCqF,GAApC,EAAyCL,IAAzC,iBAAuDK,GAAvD;AACAS,gBAAAA,CAAC;;AACD,oBAAGA,CAAC,IAAIhI,KAAK,CAACoC,WAAN,CAAkBR,UAAlB,CAA6BM,MAA7B,CAAoCmE,MAA5C,EAAmD;AACjD2B,kBAAAA,CAAC,GAAG,CAAJ;AACAhI,kBAAAA,KAAK,CAACoC,WAAN,CAAkBR,UAAlB,CAA6BM,MAA7B,CAAoC8E,OAApC,CAA4C,UAAAC,OAAO,EAAI;AACrD0B,oBAAAA,OAAO,CAACQ,aAAR,CAAsBV,IAAtB,CAA2B,EAA3B;AACAE,oBAAAA,OAAO,CAACQ,aAAR,CAAsBnB,CAAtB,EAAyBzG,MAAzB,GAAkCvB,KAAK,CAACoC,WAAN,CAAkBR,UAAlB,CAA6BM,MAA7B,CAAoC8F,CAApC,EAAuCd,IAAzE;AACAyB,oBAAAA,OAAO,CAACQ,aAAR,CAAsBnB,CAAtB,EAAyBqB,GAAzB,GAA+BrJ,KAAK,CAACoC,WAAN,CAAkBR,UAAlB,CAA6BM,MAA7B,CAAoC8F,CAApC,EAAuCqB,GAAtE;AACArB,oBAAAA,CAAC;;AACD,wBAAGA,CAAC,IAAIhI,KAAK,CAACoC,WAAN,CAAkBR,UAAlB,CAA6BM,MAA7B,CAAoCmE,MAA5C,EAAmD;AACjD,0BAAMlC,KAAK,GAAGxE,QAAQ,CAACyE,QAAT,GAAoBC,GAApB,CAAwB,UAAxB,CAAd;AACAF,sBAAAA,KAAK,CAACG,KAAN,CAAYtE,KAAK,CAACoC,WAAN,CAAkBR,UAAlB,CAA6BN,EAAzC,EAA6CiD,GAA7C,CAAiDoE,OAAjD;AACA3I,sBAAAA,KAAK,CAACoC,WAAN,CAAkBR,UAAlB,CAA6BO,IAA7B,GAAoC,KAApC;AACA,0BAAMsD,OAAO,GAAG;AACd,2BAAG,eADW;AAEd,2BAAG;AAFW,uBAAhB;;AAIA,sBAAA,MAAI,CAAChB,MAAL,CAAY,eAAZ,EAA6BgB,OAA7B;AACD;AACF,mBAfD;AAgBD;AACF,eAxBD;AAyBAqC,cAAAA,CAAC;AACF,aA/CD;AAgDD;AACF,SAzDD,MAyDK;AACH,cAAIa,OAAO,GAAG;AACZC,YAAAA,WAAW,EAAE5I,KAAK,CAACoC,WAAN,CAAkBR,UAAlB,CAA6BC,MAD9B;AAEZgH,YAAAA,SAAS,EAAE7I,KAAK,CAACoC,WAAN,CAAkBR,UAAlB,CAA6BE,IAF5B;AAGZgH,YAAAA,UAAU,EAAE9I,KAAK,CAACoC,WAAN,CAAkBR,UAAlB,CAA6BI,KAH7B;AAIZ+G,YAAAA,OAAO,EAAE/I,KAAK,CAACoC,WAAN,CAAkBR,UAAlB,CAA6BN,EAJ1B;AAKZ0H,YAAAA,SAAS,EAAEhJ,KAAK,CAACoC,WAAN,CAAkBR,UAAlB,CAA6BG,IAL5B;AAMZkH,YAAAA,aAAa,EAAE,IANH;AAOZC,YAAAA,YAAY,EAAElJ,KAAK,CAACoC,WAAN,CAAkBR,UAAlB,CAA6BK,OAP/B;AAQZkH,YAAAA,aAAa,EAAEnJ,KAAK,CAACoC,WAAN,CAAkBR,UAAlB,CAA6BM;AARhC,WAAd;AAUA,cAAMiC,KAAK,GAAGxE,QAAQ,CAACyE,QAAT,GAAoBC,GAApB,CAAwB,UAAxB,CAAd;AACAF,UAAAA,KAAK,CAACG,KAAN,CAAYtE,KAAK,CAACoC,WAAN,CAAkBR,UAAlB,CAA6BN,EAAzC,EAA6CiD,GAA7C,CAAiDoE,OAAjD;AACA3I,UAAAA,KAAK,CAACoC,WAAN,CAAkBR,UAAlB,CAA6BO,IAA7B,GAAoC,KAApC;AACA,cAAMsD,OAAO,GAAG;AACd,eAAG,eADW;AAEd,eAAG;AAFW,WAAhB;AAIA,eAAKhB,MAAL,CAAY,eAAZ,EAA6BgB,OAA7B;AACD;AACF,OA/EK,MA+EA,IAAGzF,KAAK,CAAC4C,aAAN,CAAoBhB,UAApB,CAA+BO,IAA/B,KAAwC,IAA3C,EAAgD;AACpD,YAAG;AACD,cAAIwE,WAAU,GAAGhH,QAAQ,CAAC6G,OAAT,GAAmBnC,GAAnB,8BAA6CrE,KAAK,CAAC4C,aAAN,CAAoBhB,UAApB,CAA+BN,EAA5E,EAAjB;;AACAqF,UAAAA,WAAU,CAACE,OAAX,GAAqBrC,IAArB,CAA0B,UAAAsC,IAAI,EAAI;AAChCA,YAAAA,IAAI,CAACC,KAAL,CAAWC,OAAX,CAAmB,UAAAC,OAAO,EAAI;AAC5BN,cAAAA,WAAU,CAACrC,KAAX,CAAiB2C,OAAO,CAACC,IAAzB,EAA+B1B,MAA/B,GAAwChB,IAAxC,CAA8C,UAAAqB,GAAG,EAAI;AACnD,oBAAGA,GAAG,KAAK3C,SAAX,EAAqB;AACnBiE,kBAAAA,OAAO,CAACC,GAAR,CAAYvB,GAAZ;AACD,iBAFD,MAEK;AACHlG,kBAAAA,QAAQ,CAACyE,QAAT,GAAoBC,GAApB,oBAAoCrE,KAAK,CAAC4C,aAAN,CAAoBhB,UAApB,CAA+BN,EAAnE,GAAyEoF,MAAzE,GAAkFlC,IAAlF,CAAuF,YAAI;AACvFxE,oBAAAA,KAAK,CAACM,WAAN,GAAoB,KAApB;AACAN,oBAAAA,KAAK,CAAC4C,aAAN,CAAoBhB,UAApB,CAA+BO,IAA/B,GAAsC,KAAtC;AACA,wBAAMsD,OAAO,GAAG;AACd,yBAAG,eADW;AAEd,yBAAG;AAFW,qBAAhB;;AAIA,oBAAA,MAAI,CAAChB,MAAL,CAAY,eAAZ,EAA6BgB,OAA7B;AACD,mBARH;AAUD;AACF,eAfD;AAgBD,aAjBD;AAkBD,WAnBD;AAoBD,SAtBD,CAsBC,OAAMI,GAAN,EAAU;AAACsB,UAAAA,OAAO,CAACC,GAAR,CAAYvB,GAAZ;AAAiB;AAC9B;AACF,KAvdQ;AAwdTyD,IAAAA,WAxdS,uBAwdGtJ,KAxdH,EAwdUH,IAxdV,EAwde;AAEtBG,MAAAA,KAAK,CAACa,QAAN,GAAiBhB,IAAI,CAAC,CAAD,CAArB;;AAEA,UAAGG,KAAK,CAACa,QAAN,KAAmB,CAAtB,EAAwB;AACtB,YAAI0I,CAAC,GAAG,IAAIC,IAAJ,EAAR;AACA,YAAMC,OAAO,GAAGD,IAAI,CAACE,KAAL,CAAWH,CAAX,CAAhB;AACA,YAAII,OAAO,GAAGJ,CAAC,CAACK,QAAF,EAAd;AACA,YAAMC,YAAY,GAAGF,OAAO,CAACG,KAAR,CAAc,GAAd,CAArB;AACA,YAAMC,UAAU,GAAG,EAAnB;;AACA,aAAI,IAAI3D,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG,CAAnB,EAAsBA,CAAC,EAAvB,EAA0B;AACxB2D,UAAAA,UAAU,CAACtB,IAAX,CAAgBoB,YAAY,CAACzD,CAAD,CAA5B;AACD;;AACD,YAAM4D,MAAM,GAAGD,UAAU,CAACE,IAAX,CAAgB,GAAhB,CAAf;AAEAjK,QAAAA,KAAK,CAAC2B,aAAN,CAAoBC,UAApB,CAA+BO,IAA/B,GAAsC,IAAtC;AACAnC,QAAAA,KAAK,CAAC2B,aAAN,CAAoBC,UAApB,CAA+BI,KAA/B,GAAuCgI,MAAvC;AACAhK,QAAAA,KAAK,CAAC2B,aAAN,CAAoBC,UAApB,CAA+BM,MAA/B,GAAwCrC,IAAI,CAAC,CAAD,CAA5C;AACAG,QAAAA,KAAK,CAAC2B,aAAN,CAAoBC,UAApB,CAA+BN,EAA/B,GAAoCmI,OAApC;AAEA,aAAKhF,MAAL,CAAY,cAAZ,EAA4B5E,IAAI,CAAC,CAAD,CAAhC;AACD,OAjBD,MAiBM,IAAGG,KAAK,CAACa,QAAN,KAAmB,CAAtB,EAAwB;AAC5Bb,QAAAA,KAAK,CAACoC,WAAN,CAAkBR,UAAlB,CAA6BO,IAA7B,GAAoC,IAApC;AACAnC,QAAAA,KAAK,CAACoC,WAAN,CAAkBR,UAAlB,CAA6BI,KAA7B,GAAqCnC,IAAI,CAAC,CAAD,CAAJ,CAAQmC,KAA7C;AACAhC,QAAAA,KAAK,CAACoC,WAAN,CAAkBR,UAAlB,CAA6BM,MAA7B,GAAsCrC,IAAI,CAAC,CAAD,CAAJ,CAAQqK,QAA9C;AACAlK,QAAAA,KAAK,CAACoC,WAAN,CAAkBR,UAAlB,CAA6BN,EAA7B,GAAkCzB,IAAI,CAAC,CAAD,CAAJ,CAAQyB,EAA1C;AACAtB,QAAAA,KAAK,CAACoC,WAAN,CAAkBR,UAAlB,CAA6BC,MAA7B,GAAsChC,IAAI,CAAC,CAAD,CAAJ,CAAQgC,MAA9C;AACA7B,QAAAA,KAAK,CAACoC,WAAN,CAAkBR,UAAlB,CAA6BE,IAA7B,GAAoCjC,IAAI,CAAC,CAAD,CAAJ,CAAQiC,IAA5C;AACA9B,QAAAA,KAAK,CAACoC,WAAN,CAAkBR,UAAlB,CAA6BG,IAA7B,GAAoClC,IAAI,CAAC,CAAD,CAAJ,CAAQkC,IAA5C;AACA/B,QAAAA,KAAK,CAACoC,WAAN,CAAkBR,UAAlB,CAA6BK,OAA7B,GAAuCpC,IAAI,CAAC,CAAD,CAAJ,CAAQoC,OAA/C;AACAjC,QAAAA,KAAK,CAACoC,WAAN,CAAkBR,UAAlB,CAA6BS,YAA7B,GAA4CxC,IAAI,CAAC,CAAD,CAAhD;AACAG,QAAAA,KAAK,CAACoC,WAAN,CAAkBR,UAAlB,CAA6BU,cAA7B,GAA8CzC,IAAI,CAAC,CAAD,CAAlD;AAEA,aAAK4E,MAAL,CAAY,cAAZ,EAA4B5E,IAAI,CAAC,CAAD,CAAhC;AACD,OAbK,MAaA,IAAGG,KAAK,CAACa,QAAN,KAAmB,CAAtB,EAAwB;AAC5Bb,QAAAA,KAAK,CAAC4C,aAAN,CAAoBhB,UAApB,CAA+BN,EAA/B,GAAoCzB,IAAI,CAAC,CAAD,CAAxC;AACAG,QAAAA,KAAK,CAAC4C,aAAN,CAAoBhB,UAApB,CAA+BO,IAA/B,GAAsC,IAAtC;AACAnC,QAAAA,KAAK,CAACM,WAAN,GAAoB,IAApB;AACAN,QAAAA,KAAK,CAACQ,aAAN,GAAsBX,IAAI,CAAC,CAAD,CAA1B;AAEA,aAAK4E,MAAL,CAAY,cAAZ,EAA4B5E,IAAI,CAAC,CAAD,CAAhC;AACD;AAEF,KAngBQ;AAogBTsK,IAAAA,OApgBS,mBAogBDnK,KApgBC,EAogBMH,IApgBN,EAogBW;AAAA;;AAClBG,MAAAA,KAAK,CAACI,WAAN,GAAoB,IAApB;;AACA,UAAGP,IAAI,CAACuK,MAAL,KAAgB,QAAnB,EAA4B;AAE1B,YAAG1F,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BhE,MAA7B,KAAwC,CAA3C,EAA6C;AAC3C,eAAI,IAAID,GAAC,GAAG,CAAZ,EAAeA,GAAC,GAAG1B,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACyK,KAAL,CAAWC,WAAzB,EAAsClE,MAAzD,EAAiED,GAAC,EAAlE,EAAqE;AACnEpG,YAAAA,KAAK,CAAC6C,KAAN,CAAYuD,GAAZ,IAAiB,EAAjB;AACApG,YAAAA,KAAK,CAAC6C,KAAN,CAAYuD,GAAZ,IAAiB1B,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACyK,KAAL,CAAWC,WAAzB,EAAsCnE,GAAtC,EAAyCoE,KAA1D;AACD;AACF;;AAED,YAAI7D,UAAU,GAAG,EAAjB;AACA,YAAIgB,UAAU,GAAG,EAAjB;AACA,YAAIC,KAAK,GAAG,EAAZ;AACA,YAAIC,IAAI,GAAG,EAAX;AACA,YAAIzB,CAAC,GAAG,CAAR;AACA,YAAI0B,CAAC,GAAG,CAAR;AACA,YAAIE,CAAC,GAAG,CAAR;AAEA,YAAM7D,KAAK,GAAGxE,QAAQ,CAACyE,QAAT,GAAoBC,GAApB,WAA2BxE,IAAI,CAACuK,MAAhC,EAAd;AACA,YAAMK,SAAS,GAAGtG,KAAK,CAACsE,IAAN,EAAlB;AAEA,YAAIE,OAAO,GAAG;AACZ+B,UAAAA,OAAO,EAAED,SAAS,CAACE;AADP,SAAd;AAKAjG,QAAAA,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BrD,OAA7B,CAAqC,UAAAC,OAAO,EAAI;AAC9CN,UAAAA,UAAU,GAAEhH,QAAQ,CAAC6G,OAAT,GAAmBnC,GAAnB,YAA2BxE,IAAI,CAACuK,MAAhC,cAA0CzB,OAAO,CAAC+B,OAAlD,cAA6D7K,IAAI,CAACyK,KAAL,CAAWC,WAAX,WAA0BtD,OAAO,CAAC3F,EAAlC,GAAwCJ,KAAxC,CAA8C4I,KAA9C,CAAoD,GAApD,EAAyDG,IAAzD,CAA8D,GAA9D,CAA7D,EAAZ;AACApC,UAAAA,IAAI,WAAIZ,OAAO,CAAC3F,EAAZ,EAAJ,GAAwBqF,UAAU,CAACsB,GAAX,CAAehB,OAAf,CAAxB;AACD,SAHD;;AAKA,YAAGvC,MAAM,CAACC,MAAP,CAAckD,IAAd,EAAoBxB,MAApB,KAA+B,CAAlC,EAAoC;AAClC3B,UAAAA,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BrD,OAA7B,CAAqC,UAAAC,OAAO,EAAI;AAC9CY,YAAAA,IAAI,WAAIZ,OAAO,CAAC3F,EAAZ,EAAJ,CAAsB4G,EAAtB,CAAyB,eAAzB,EAA0C,UAAAC,QAAQ,EAAI;AACpDR,cAAAA,UAAU,CAACQ,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAA3B,CAAV,GAA4C6G,QAAQ,CAACG,gBAAT,GAA4BH,QAAQ,CAACI,UAAtC,GAAoD,GAA/F;AACAvI,cAAAA,KAAK,CAAC6C,KAAN,CAAYsF,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAAtC,EAA0CkH,gBAA1C,GAA6Db,UAAU,CAACQ,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAA3B,CAAvE;;AACA,kBAAGtB,KAAK,CAAC6C,KAAN,CAAYsF,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAAtC,EAA0CkH,gBAA1C,KAA+D,GAA/D,IAAsEZ,KAAK,CAACvB,MAAN,GAAe3B,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BhE,MAArH,EAA4H;AAC1HuB,gBAAAA,KAAK,CAACa,IAAN,CAAWN,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAArC;AACD;AACF,aAND,EAMG,UAAAoH,KAAK,EAAI;AACVvB,cAAAA,OAAO,CAACC,GAAR,CAAYsB,KAAK,CAAC5C,OAAlB;AACD,aARD,EAQG,YAAK;AAEN6C,cAAAA,OAAO,CAACiC,YAAR,aAA0B/K,IAAI,CAACyK,KAAL,CAAWO,MAArC,cAA+ChL,IAAI,CAACyK,KAAL,CAAWQ,GAA1D;AACAnC,cAAAA,OAAO,CAACoC,WAAR,GAAsBlL,IAAI,CAACyK,KAAL,CAAWU,YAAjC;AACArC,cAAAA,OAAO,CAACsC,gBAAR,GAA2B,EAA3B;;AAEA,mBAAI,IAAI7E,GAAC,GAAG,CAAZ,EAAeA,GAAC,GAAG1B,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACyK,KAAL,CAAWC,WAAzB,EAAsClE,MAAzD,EAAiED,GAAC,EAAlE,EAAqE;AACnEuC,gBAAAA,OAAO,CAACsC,gBAAR,CAAyB7E,GAAzB,IAA8B,EAA9B;AACAuC,gBAAAA,OAAO,CAACsC,gBAAR,CAAyB7E,GAAzB,EAA4B8E,UAA5B,GAAyCxG,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACyK,KAAL,CAAWC,WAAzB,EAAsCnE,GAAtC,EAAyClF,KAAlF;AACAyH,gBAAAA,OAAO,CAACsC,gBAAR,CAAyB7E,GAAzB,EAA4B+E,WAA5B,GAA0CzG,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACyK,KAAL,CAAWC,WAAzB,EAAsCnE,GAAtC,EAAyC7E,MAAnF;AACAoH,gBAAAA,OAAO,CAACsC,gBAAR,CAAyB7E,GAAzB,EAA4BgF,aAA5B,GAA4C1G,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACyK,KAAL,CAAWC,WAAzB,EAAsCnE,GAAtC,EAAyCpF,QAArF;AACA2H,gBAAAA,OAAO,CAACsC,gBAAR,CAAyB7E,GAAzB,EAA4BiF,WAA5B,GAA0C3G,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACyK,KAAL,CAAWC,WAAzB,EAAsCnE,GAAtC,EAAyCjF,MAAnF;AACAwH,gBAAAA,OAAO,CAACsC,gBAAR,CAAyB7E,GAAzB,EAA4BkF,SAA5B,GAAwC,EAAxC;AACA3C,gBAAAA,OAAO,CAACsC,gBAAR,CAAyB7E,GAAzB,EAA4BmF,WAA5B,GAA0C7G,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACyK,KAAL,CAAWC,WAAzB,EAAsCnE,GAAtC,EAAyCrF,MAAnF;AACA4H,gBAAAA,OAAO,CAACsC,gBAAR,CAAyB7E,GAAzB,EAA4BoF,UAA5B,GAAyC9G,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACyK,KAAL,CAAWC,WAAzB,EAAsCnE,GAAtC,EAAyCqF,KAAlF;AACD;;AAED,kBAAI9E,UAAU,GAAEhH,QAAQ,CAAC6G,OAAT,GAAmBnC,GAAnB,YAA2BxE,IAAI,CAACuK,MAAhC,cAA0CzB,OAAO,CAAC+B,OAAlD,cAA6D7K,IAAI,CAACyK,KAAL,CAAWC,WAAX,WAA0B3C,KAAK,CAACE,CAAD,CAA/B,GAAsC5G,KAAtC,CAA4C4I,KAA5C,CAAkD,GAAlD,EAAuDG,IAAvD,CAA4D,GAA5D,CAA7D,EAAhB;AAEAtD,cAAAA,UAAU,CAACyC,cAAX,GAA4B5E,IAA5B,CAAiC,UAAA6E,GAAG,EAAI;AACtC,oBAAI9B,GAAG,GAAGK,KAAK,CAACI,CAAD,CAAf;AACAhI,gBAAAA,KAAK,CAAC6C,KAAN,CAAY0E,GAAZ,EAAiB8B,GAAjB,GAAuBA,GAAvB;AACArJ,gBAAAA,KAAK,CAAC6C,KAAN,CAAY0E,GAAZ,EAAiBhG,MAAjB,aAA6B1B,IAAI,CAACyK,KAAL,CAAWC,WAAX,WAA0B3C,KAAK,CAACI,CAAD,CAA/B,GAAsC9G,KAAtC,CAA4C4I,KAA5C,CAAkD,GAAlD,EAAuDG,IAAvD,CAA4D,GAA5D,CAA7B;AACAjC,gBAAAA,CAAC;;AACD,oBAAGA,CAAC,IAAIJ,KAAK,CAACvB,MAAd,EAAqB;AACnBD,kBAAAA,CAAC,GAAG,CAAJ;AACA1B,kBAAAA,MAAM,CAACC,MAAP,CAAcgE,OAAO,CAACsC,gBAAtB,EAAwCjE,OAAxC,CAAgD,UAAAC,OAAO,EAAI;AACzD,wBAAGjH,KAAK,CAAC6C,KAAN,CAAYuD,CAAZ,EAAe7E,MAAf,KAA0B2B,SAA1B,IAAuClD,KAAK,CAAC6C,KAAN,CAAYuD,CAAZ,EAAeiD,GAAf,KAAuBnG,SAAjE,EAA2E;AACzE+D,sBAAAA,OAAO,CAACqE,SAAR,CAAkB/J,MAAlB,GAA2BvB,KAAK,CAAC6C,KAAN,CAAYuD,CAAZ,EAAe7E,MAA1C;AACA0F,sBAAAA,OAAO,CAACqE,SAAR,CAAkBjC,GAAlB,GAAwBrJ,KAAK,CAAC6C,KAAN,CAAYuD,CAAZ,EAAeiD,GAAvC;AACD,qBAHD,MAGK;AACHpC,sBAAAA,OAAO,CAACqE,SAAR,GAAoB,EAApB;AACD;;AACDlF,oBAAAA,CAAC;;AACD,wBAAG4B,CAAC,IAAItD,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BhE,MAArC,EAA4C;AAC1CoE,sBAAAA,SAAS,CAAClG,GAAV,CAAcoE,OAAd;AACA3I,sBAAAA,KAAK,CAACI,WAAN,GAAoB,KAApB;AACA,0BAAMqF,OAAO,GAAG;AACd,2BAAG,eADW;AAEd,2BAAG;AAFW,uBAAhB;;AAIA,sBAAA,MAAI,CAAChB,MAAL,CAAY,eAAZ,EAA6BgB,OAA7B;AACD;AACF,mBAjBD;AAkBD;AACF,eA1BD;AA2BAqC,cAAAA,CAAC;AACF,aAvDD;AAwDD,WAzDD;AA0DD,SA3DD,MA2DK;AAEHa,UAAAA,OAAO,CAACiC,YAAR,aAA0B/K,IAAI,CAACyK,KAAL,CAAWO,MAArC,cAA+ChL,IAAI,CAACyK,KAAL,CAAWQ,GAA1D;AACAnC,UAAAA,OAAO,CAACoC,WAAR,GAAsBlL,IAAI,CAACyK,KAAL,CAAWU,YAAjC;AACArC,UAAAA,OAAO,CAACsC,gBAAR,GAA2B,EAA3B;;AAEA,eAAI,IAAI7E,GAAC,GAAG,CAAZ,EAAeA,GAAC,GAAG1B,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACyK,KAAL,CAAWC,WAAzB,EAAsClE,MAAzD,EAAiED,GAAC,EAAlE,EAAqE;AACnEuC,YAAAA,OAAO,CAACsC,gBAAR,CAAyB7E,GAAzB,IAA8B,EAA9B;AACAuC,YAAAA,OAAO,CAACsC,gBAAR,CAAyB7E,GAAzB,EAA4B8E,UAA5B,GAAyCxG,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACyK,KAAL,CAAWC,WAAzB,EAAsCnE,GAAtC,EAAyClF,KAAlF;AACAyH,YAAAA,OAAO,CAACsC,gBAAR,CAAyB7E,GAAzB,EAA4B+E,WAA5B,GAA0CzG,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACyK,KAAL,CAAWC,WAAzB,EAAsCnE,GAAtC,EAAyC7E,MAAnF;AACAoH,YAAAA,OAAO,CAACsC,gBAAR,CAAyB7E,GAAzB,EAA4BgF,aAA5B,GAA4C1G,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACyK,KAAL,CAAWC,WAAzB,EAAsCnE,GAAtC,EAAyCpF,QAArF;AACA2H,YAAAA,OAAO,CAACsC,gBAAR,CAAyB7E,GAAzB,EAA4BiF,WAA5B,GAA0C3G,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACyK,KAAL,CAAWC,WAAzB,EAAsCnE,GAAtC,EAAyCjF,MAAnF;AACAwH,YAAAA,OAAO,CAACsC,gBAAR,CAAyB7E,GAAzB,EAA4BkF,SAA5B,GAAwC5G,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACyK,KAAL,CAAWC,WAAzB,EAAsCnE,GAAtC,EAAyCoE,KAAjF;AACA7B,YAAAA,OAAO,CAACsC,gBAAR,CAAyB7E,GAAzB,EAA4BmF,WAA5B,GAA0C7G,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACyK,KAAL,CAAWC,WAAzB,EAAsCnE,GAAtC,EAAyCrF,MAAnF;AACA4H,YAAAA,OAAO,CAACsC,gBAAR,CAAyB7E,GAAzB,EAA4BoF,UAA5B,GAAyC9G,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACyK,KAAL,CAAWC,WAAzB,EAAsCnE,GAAtC,EAAyCqF,KAAlF;AACD;;AAEDhB,UAAAA,SAAS,CAAClG,GAAV,CAAcoE,OAAd,EAAuBpE,GAAvB,CAA2BoE,OAA3B;AACA3I,UAAAA,KAAK,CAACI,WAAN,GAAoB,KAApB;AACA,cAAMqF,OAAO,GAAG;AACd,eAAG,eADW;AAEd,eAAG;AAFW,WAAhB;AAIA,eAAKhB,MAAL,CAAY,eAAZ,EAA6BgB,OAA7B;AACD;AACF,OAlHD,MAkHM,IAAG5F,IAAI,CAACuK,MAAL,KAAgB,WAAnB,EAA+B;AAEnC,YAAG1F,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BhE,MAA7B,KAAwC,CAA3C,EAA6C;AAC3CrG,UAAAA,KAAK,CAAC6C,KAAN,GAAc,EAAd;AACA7C,UAAAA,KAAK,CAAC6C,KAAN,CAAY,CAAZ,IAAiBhD,IAAI,CAAC6L,QAAL,CAAclB,KAA/B;AACD;;AAED,YAAI7D,YAAU,GAAG,EAAjB;AACA,YAAIgB,WAAU,GAAG,EAAjB;AACA,YAAIC,MAAK,GAAG,EAAZ;AACA,YAAIC,KAAI,GAAG,EAAX;AACA,YAAIG,EAAC,GAAG,CAAR;;AAEA,YAAM7D,MAAK,GAAGxE,QAAQ,CAACyE,QAAT,GAAoBC,GAApB,WAA2BxE,IAAI,CAACuK,MAAhC,EAAd;;AACA,YAAMK,UAAS,GAAGtG,MAAK,CAACsE,IAAN,EAAlB;;AAEA,YAAIE,QAAO,GAAG;AACZgD,UAAAA,OAAO,EAAElB,UAAS,CAACE;AADP,SAAd;AAKAjG,QAAAA,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BrD,OAA7B,CAAqC,UAAAC,OAAO,EAAI;AAC9CN,UAAAA,YAAU,GAAEhH,QAAQ,CAAC6G,OAAT,GAAmBnC,GAAnB,YAA2BxE,IAAI,CAACuK,MAAhC,cAA0CzB,QAAO,CAACgD,OAAlD,cAA6D9L,IAAI,CAAC6L,QAAL,CAAcnK,MAAd,CAAqBuI,KAArB,CAA2B,GAA3B,EAAgCG,IAAhC,CAAqC,GAArC,CAA7D,EAAZ;AACApC,UAAAA,KAAI,WAAIZ,OAAO,CAAC3F,EAAZ,EAAJ,GAAwBqF,YAAU,CAACsB,GAAX,CAAehB,OAAf,CAAxB;AACD,SAHD;;AAKA,YAAGvC,MAAM,CAACC,MAAP,CAAckD,KAAd,EAAoBxB,MAApB,KAA+B,CAAlC,EAAoC;AAClC3B,UAAAA,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BrD,OAA7B,CAAqC,UAAAC,OAAO,EAAI;AAC9CY,YAAAA,KAAI,WAAIZ,OAAO,CAAC3F,EAAZ,EAAJ,CAAsB4G,EAAtB,CAAyB,eAAzB,EAA0C,UAAAC,QAAQ,EAAI;AACpDR,cAAAA,WAAU,CAACQ,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAA3B,CAAV,GAA4C6G,QAAQ,CAACG,gBAAT,GAA4BH,QAAQ,CAACI,UAAtC,GAAoD,GAA/F;AACAvI,cAAAA,KAAK,CAAC6C,KAAN,CAAYsF,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAAtC,EAA0CkH,gBAA1C,GAA6Db,WAAU,CAACQ,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAA3B,CAAvE;;AACA,kBAAGtB,KAAK,CAAC6C,KAAN,CAAYsF,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAAtC,EAA0CkH,gBAA1C,KAA+D,GAA/D,IAAsEZ,MAAK,CAACvB,MAAN,GAAe3B,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BhE,MAArH,EAA4H;AAC1HuB,gBAAAA,MAAK,CAACa,IAAN,CAAWN,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAArC;AACD;AACF,aAND,EAMG,UAAAoH,KAAK,EAAI;AACVvB,cAAAA,OAAO,CAACC,GAAR,CAAYsB,KAAK,CAAC5C,OAAlB;AACD,aARD,EAQG,YAAK;AAEN6C,cAAAA,QAAO,GAAG;AACRiD,gBAAAA,WAAW,EAAE/L,IAAI,CAAC6L,QAAL,CAAc3K,MADnB;AAER8K,gBAAAA,WAAW,EAAEhM,IAAI,CAAC6L,QAAL,CAAcZ,GAFnB;AAGRgB,gBAAAA,aAAa,EAAEjM,IAAI,CAAC6L,QAAL,CAAcK,QAHrB;AAIRC,gBAAAA,gBAAgB,EAAEnM,IAAI,CAAC6L,QAAL,CAAcO,WAJxB;AAKRN,gBAAAA,OAAO,EAAElB,UAAS,CAACE,GALX;AAMRuB,gBAAAA,WAAW,EAAErM,IAAI,CAAC6L,QAAL,CAAcb,MANnB;AAORsB,gBAAAA,WAAW,EAAEtM,IAAI,CAAC6L,QAAL,CAAcnK,MAPnB;AAQR6K,gBAAAA,SAAS,EAAE;AARH,eAAV;AAWA,kBAAIzF,UAAU,GAAEhH,QAAQ,CAAC6G,OAAT,GAAmBnC,GAAnB,YAA2BxE,IAAI,CAACuK,MAAhC,cAA0CzB,QAAO,CAACgD,OAAlD,cAA6D9L,IAAI,CAAC6L,QAAL,CAAcnK,MAAd,CAAqBuI,KAArB,CAA2B,GAA3B,EAAgCG,IAAhC,CAAqC,GAArC,CAA7D,EAAhB;AAEAtD,cAAAA,UAAU,CAACyC,cAAX,GAA4B5E,IAA5B,CAAiC,UAAA6E,GAAG,EAAI;AACtC,oBAAI9B,GAAG,GAAGK,MAAK,CAACI,EAAD,CAAf;AACAhI,gBAAAA,KAAK,CAAC6C,KAAN,CAAY0E,GAAZ,EAAiB8B,GAAjB,GAAuBA,GAAvB;AACArJ,gBAAAA,KAAK,CAAC6C,KAAN,CAAY0E,GAAZ,EAAiBhG,MAAjB,aAA6B1B,IAAI,CAAC6L,QAAL,CAAcnK,MAAd,CAAqBuI,KAArB,CAA2B,GAA3B,EAAgCG,IAAhC,CAAqC,GAArC,CAA7B;AACAjC,gBAAAA,EAAC;;AACD,oBAAGA,EAAC,IAAIJ,MAAK,CAACvB,MAAd,EAAqB;AACnBsC,kBAAAA,QAAO,CAACyD,SAAR,CAAkB7K,MAAlB,GAA2BvB,KAAK,CAAC6C,KAAN,CAAY,CAAZ,EAAetB,MAA1C;AACAoH,kBAAAA,QAAO,CAACyD,SAAR,CAAkB/C,GAAlB,GAAwBrJ,KAAK,CAAC6C,KAAN,CAAY,CAAZ,EAAewG,GAAvC;;AACA,sBAAGrB,EAAC,IAAItD,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BhE,MAArC,EAA4C;AAC1CoE,oBAAAA,UAAS,CAAClG,GAAV,CAAcoE,QAAd;;AACA3I,oBAAAA,KAAK,CAACI,WAAN,GAAoB,KAApB;AACA,wBAAMqF,QAAO,GAAG;AACd,yBAAG,eADW;AAEd,yBAAG;AAFW,qBAAhB;;AAIA,oBAAA,MAAI,CAAChB,MAAL,CAAY,eAAZ,EAA6BgB,QAA7B;AACD;AACF;AACF,eAlBD;AAmBD,aA1CD;AA2CD,WA5CD;AA6CD,SA9CD,MA8CK;AACHkD,UAAAA,QAAO,GAAG;AACRiD,YAAAA,WAAW,EAAE/L,IAAI,CAAC6L,QAAL,CAAc3K,MADnB;AAER8K,YAAAA,WAAW,EAAEhM,IAAI,CAAC6L,QAAL,CAAcZ,GAFnB;AAGRgB,YAAAA,aAAa,EAAEjM,IAAI,CAAC6L,QAAL,CAAcK,QAHrB;AAIRC,YAAAA,gBAAgB,EAAEnM,IAAI,CAAC6L,QAAL,CAAcO,WAJxB;AAKRN,YAAAA,OAAO,EAAElB,UAAS,CAACE,GALX;AAMRuB,YAAAA,WAAW,EAAErM,IAAI,CAAC6L,QAAL,CAAcb,MANnB;AAORsB,YAAAA,WAAW,EAAEtM,IAAI,CAAC6L,QAAL,CAAcnK,MAPnB;AAQR6K,YAAAA,SAAS,EAAEvM,IAAI,CAAC6L,QAAL,CAAclB;AARjB,WAAV;AAWAxC,UAAAA,EAAC;;AACD,cAAGA,EAAC,IAAItD,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BhE,MAArC,EAA4C;AAC1CoE,YAAAA,UAAS,CAAClG,GAAV,CAAcoE,QAAd;;AACA3I,YAAAA,KAAK,CAACI,WAAN,GAAoB,KAApB;AACA,gBAAMqF,SAAO,GAAG;AACd,iBAAG,eADW;AAEd,iBAAG;AAFW,aAAhB;AAIA,iBAAKhB,MAAL,CAAY,eAAZ,EAA6BgB,SAA7B;AACD;AACF;AACF,OA/FK,MA+FA,IAAG5F,IAAI,CAACuK,MAAL,KAAgB,UAAnB,EAA8B;AAElC,YAAG1F,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BhE,MAA7B,KAAwC,CAA3C,EAA6C;AAC3CrG,UAAAA,KAAK,CAAC6C,KAAN,GAAc,EAAd;AACA7C,UAAAA,KAAK,CAAC6C,KAAN,CAAY,CAAZ,IAAiBhD,IAAI,CAACwM,UAAL,CAAgB7B,KAAjC;AACD;;AAED,YAAI7D,YAAU,GAAG,EAAjB;AACA,YAAIgB,YAAU,GAAG,EAAjB;AACA,YAAIC,OAAK,GAAG,EAAZ;AACA,YAAIC,MAAI,GAAG,EAAX;AACA,YAAIG,GAAC,GAAG,CAAR;;AAEA,YAAM7D,OAAK,GAAGxE,QAAQ,CAACyE,QAAT,GAAoBC,GAApB,WAA2BxE,IAAI,CAACuK,MAAhC,EAAd;;AACA,YAAMK,WAAS,GAAGtG,OAAK,CAACsE,IAAN,EAAlB;;AAEA,YAAIE,SAAO,GAAG;AACZ2D,UAAAA,KAAK,EAAE7B,WAAS,CAACE;AADL,SAAd;AAIAjG,QAAAA,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BrD,OAA7B,CAAqC,UAAAC,OAAO,EAAI;AAC9CN,UAAAA,YAAU,GAAEhH,QAAQ,CAAC6G,OAAT,GAAmBnC,GAAnB,YAA2BxE,IAAI,CAACuK,MAAhC,cAA0CzB,SAAO,CAAC2D,KAAlD,cAA2DzM,IAAI,CAACwM,UAAL,CAAgBnL,KAAhB,CAAsB4I,KAAtB,CAA4B,GAA5B,EAAiCG,IAAjC,CAAsC,GAAtC,CAA3D,EAAZ;AACApC,UAAAA,MAAI,WAAIZ,OAAO,CAAC3F,EAAZ,EAAJ,GAAwBqF,YAAU,CAACsB,GAAX,CAAehB,OAAf,CAAxB;AACD,SAHD;;AAKA,YAAGvC,MAAM,CAACC,MAAP,CAAckD,MAAd,EAAoBxB,MAApB,KAA+B,CAAlC,EAAoC;AAClC3B,UAAAA,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BrD,OAA7B,CAAqC,UAAAC,OAAO,EAAI;AAC9CY,YAAAA,MAAI,WAAIZ,OAAO,CAAC3F,EAAZ,EAAJ,CAAsB4G,EAAtB,CAAyB,eAAzB,EAA0C,UAAAC,QAAQ,EAAI;AACpDR,cAAAA,YAAU,CAACQ,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAA3B,CAAV,GAA4C6G,QAAQ,CAACG,gBAAT,GAA4BH,QAAQ,CAACI,UAAtC,GAAoD,GAA/F;AACAvI,cAAAA,KAAK,CAAC6C,KAAN,CAAYsF,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAAtC,EAA0CkH,gBAA1C,GAA6Db,YAAU,CAACQ,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAA3B,CAAvE;;AACA,kBAAGtB,KAAK,CAAC6C,KAAN,CAAYsF,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAAtC,EAA0CkH,gBAA1C,KAA+D,GAA/D,IAAsEZ,OAAK,CAACvB,MAAN,GAAe3B,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BhE,MAArH,EAA4H;AAC1HuB,gBAAAA,OAAK,CAACa,IAAN,CAAWN,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAArC;AACD;AACF,aAND,EAMG,UAAAoH,KAAK,EAAI;AACVvB,cAAAA,OAAO,CAACC,GAAR,CAAYsB,KAAK,CAAC5C,OAAlB;AACD,aARD,EAQG,YAAK;AAEN6C,cAAAA,SAAO,GAAG;AACR4D,gBAAAA,SAAS,EAAE1M,IAAI,CAACwM,UAAL,CAAgBlL,MADnB;AAERqL,gBAAAA,SAAS,EAAE3M,IAAI,CAACwM,UAAL,CAAgB9K,MAFnB;AAGRkL,gBAAAA,QAAQ,EAAE5M,IAAI,CAACwM,UAAL,CAAgBnL,KAHlB;AAIRoL,gBAAAA,KAAK,EAAE7B,WAAS,CAACE,GAJT;AAKR+B,gBAAAA,OAAO,EAAE;AALD,eAAV;AAQA,kBAAI/F,UAAU,GAAEhH,QAAQ,CAAC6G,OAAT,GAAmBnC,GAAnB,YAA2BxE,IAAI,CAACuK,MAAhC,cAA0CzB,SAAO,CAAC2D,KAAlD,cAA2DzM,IAAI,CAACwM,UAAL,CAAgBnL,KAAhB,CAAsB4I,KAAtB,CAA4B,GAA5B,EAAiCG,IAAjC,CAAsC,GAAtC,CAA3D,EAAhB;AAEAtD,cAAAA,UAAU,CAACyC,cAAX,GAA4B5E,IAA5B,CAAiC,UAAA6E,GAAG,EAAI;AACtC,oBAAI9B,GAAG,GAAGK,OAAK,CAACI,GAAD,CAAf;AACAhI,gBAAAA,KAAK,CAAC6C,KAAN,CAAY0E,GAAZ,EAAiB8B,GAAjB,GAAuBA,GAAvB;AACArJ,gBAAAA,KAAK,CAAC6C,KAAN,CAAY0E,GAAZ,EAAiBhG,MAAjB,aAA6B1B,IAAI,CAACwM,UAAL,CAAgBnL,KAAhB,CAAsB4I,KAAtB,CAA4B,GAA5B,EAAiCG,IAAjC,CAAsC,GAAtC,CAA7B;AACAjC,gBAAAA,GAAC;;AACD,oBAAGA,GAAC,IAAIJ,OAAK,CAACvB,MAAd,EAAqB;AACnBsC,kBAAAA,SAAO,CAAC+D,OAAR,CAAgBnL,MAAhB,GAAyBvB,KAAK,CAAC6C,KAAN,CAAY,CAAZ,EAAetB,MAAxC;AACAoH,kBAAAA,SAAO,CAAC+D,OAAR,CAAgBrD,GAAhB,GAAsBrJ,KAAK,CAAC6C,KAAN,CAAY,CAAZ,EAAewG,GAArC;;AACA,sBAAGrB,GAAC,IAAItD,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BhE,MAArC,EAA4C;AAC1CoE,oBAAAA,WAAS,CAAClG,GAAV,CAAcoE,SAAd;;AACA3I,oBAAAA,KAAK,CAACI,WAAN,GAAoB,KAApB;AACA,wBAAMqF,SAAO,GAAG;AACd,yBAAG,eADW;AAEd,yBAAG;AAFW,qBAAhB;;AAIA,oBAAA,MAAI,CAAChB,MAAL,CAAY,eAAZ,EAA6BgB,SAA7B;AACD;AACF;AACF,eAlBD;AAmBD,aAvCD;AAwCD,WAzCD;AA0CD,SA3CD,MA2CK;AACHkD,UAAAA,SAAO,GAAG;AACR4D,YAAAA,SAAS,EAAE1M,IAAI,CAACwM,UAAL,CAAgBlL,MADnB;AAERqL,YAAAA,SAAS,EAAE3M,IAAI,CAACwM,UAAL,CAAgB9K,MAFnB;AAGRkL,YAAAA,QAAQ,EAAE5M,IAAI,CAACwM,UAAL,CAAgBnL,KAHlB;AAIRoL,YAAAA,KAAK,EAAE7B,WAAS,CAACE,GAJT;AAKR+B,YAAAA,OAAO,EAAE7M,IAAI,CAACwM,UAAL,CAAgB7B;AALjB,WAAV;AAQAxC,UAAAA,GAAC;;AACD,cAAGA,GAAC,IAAItD,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BhE,MAArC,EAA4C;AAC1CoE,YAAAA,WAAS,CAAClG,GAAV,CAAcoE,SAAd;;AACA3I,YAAAA,KAAK,CAACI,WAAN,GAAoB,KAApB;AACA,gBAAMqF,SAAO,GAAG;AACd,iBAAG,eADW;AAEd,iBAAG;AAFW,aAAhB;AAIA,iBAAKhB,MAAL,CAAY,eAAZ,EAA6BgB,SAA7B;AACD;AACF;AACF,OAxFK,MAwFA,IAAG5F,IAAI,CAACuK,MAAL,KAAgB,YAAnB,EAAgC;AAEpCpK,QAAAA,KAAK,CAAC6C,KAAN,GAAc,EAAd;;AAEA,YAAGhD,IAAI,CAACwK,QAAL,CAAc,UAAd,MAA8BnH,SAAjC,EAA2C;AACzClD,UAAAA,KAAK,CAAC6C,KAAN,CAAY,CAAZ,IAAiBhD,IAAI,CAAC8M,QAAL,CAActC,QAAd,CAAuBG,KAAxC;AACD;;AAED,YAAG3K,IAAI,CAACwK,QAAL,CAAc,UAAd,MAA8BnH,SAAjC,EAA2C;AACzClD,UAAAA,KAAK,CAAC6C,KAAN,CAAY,CAAZ,IAAiBhD,IAAI,CAAC8M,QAAL,CAActC,QAAd,CAAuBuC,EAAxC;AACD;;AAED,YAAIjG,YAAU,GAAG,EAAjB;AACA,YAAIgB,YAAU,GAAG,EAAjB;AACA,YAAIC,OAAK,GAAG,EAAZ;AACA,YAAIC,MAAI,GAAG,EAAX;AACA,YAAIzB,GAAC,GAAG,CAAR;AACA,YAAI4B,GAAC,GAAG,CAAR;AACA,YAAIF,EAAC,GAAG,CAAR;;AAEA,YAAM3D,OAAK,GAAGxE,QAAQ,CAACyE,QAAT,GAAoBC,GAApB,WAA2BxE,IAAI,CAACuK,MAAhC,EAAd;;AACA,YAAMK,WAAS,GAAGtG,OAAK,CAACsE,IAAN,EAAlB;;AAEA,YAAIE,SAAO,GAAG;AACZkE,UAAAA,OAAO,EAAEpC,WAAS,CAACE;AADP,SAAd;AAIAjG,QAAAA,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BrD,OAA7B,CAAqC,UAAAC,OAAO,EAAI;AAC9CN,UAAAA,YAAU,GAAEhH,QAAQ,CAAC6G,OAAT,GAAmBnC,GAAnB,YAA2BxE,IAAI,CAACuK,MAAhC,cAA0CzB,SAAO,CAACkE,OAAlD,cAA6DnI,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAAC8M,QAAL,CAActC,QAA5B,EAAsCjE,GAAtC,EAAyC7E,MAAtG,EAAZ;AACAsG,UAAAA,MAAI,WAAIZ,OAAO,CAAC3F,EAAZ,EAAJ,GAAwBqF,YAAU,CAACsB,GAAX,CAAehB,OAAf,CAAxB;AACAb,UAAAA,GAAC;AACF,SAJD;;AAMA,YAAG1B,MAAM,CAACC,MAAP,CAAckD,MAAd,EAAoBxB,MAApB,KAA+B,CAAlC,EAAoC;AAClC3B,UAAAA,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BrD,OAA7B,CAAqC,UAAAC,OAAO,EAAI;AAC9CY,YAAAA,MAAI,WAAIZ,OAAO,CAAC3F,EAAZ,EAAJ,CAAsB4G,EAAtB,CAAyB,eAAzB,EAA0C,UAAAC,QAAQ,EAAI;AACpDR,cAAAA,YAAU,CAACQ,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAA3B,CAAV,GAA4C6G,QAAQ,CAACG,gBAAT,GAA4BH,QAAQ,CAACI,UAAtC,GAAoD,GAA/F;AACAvI,cAAAA,KAAK,CAAC6C,KAAN,CAAYsF,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAAtC,EAA0CkH,gBAA1C,GAA6Db,YAAU,CAACQ,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAA3B,CAAvE;;AACA,kBAAGtB,KAAK,CAAC6C,KAAN,CAAYsF,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAAtC,EAA0CkH,gBAA1C,KAA+D,GAA/D,IAAsEZ,OAAK,CAACvB,MAAN,GAAe3B,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BhE,MAArH,EAA4H;AAC1HuB,gBAAAA,OAAK,CAACa,IAAN,CAAWN,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAArC;AACD;AACF,aAND,EAMG,UAAAoH,KAAK,EAAI;AACVvB,cAAAA,OAAO,CAACC,GAAR,CAAYsB,KAAK,CAAC5C,OAAlB;AACD,aARD,EAQG,YAAK;AAEN6C,cAAAA,SAAO,GAAG;AACRmE,gBAAAA,OAAO,EAAEjN,IAAI,CAAC8M,QAAL,CAAcI,IADf;AAERC,gBAAAA,OAAO,EAAE,EAFD;AAGRC,gBAAAA,OAAO,EAAEpN,IAAI,CAAC8M,QAAL,CAAcO,EAHf;AAIRC,gBAAAA,WAAW,EAAEtN,IAAI,CAAC8M,QAAL,CAAcxL,MAJnB;AAKRiM,gBAAAA,sBAAsB,EAAEvN,IAAI,CAAC8M,QAAL,CAAcU,UAL9B;AAMRC,gBAAAA,SAAS,EAAE,EANH;AAORT,gBAAAA,OAAO,EAAEpC,WAAS,CAACE,GAPX;AAQR4C,gBAAAA,WAAW,EAAE1N,IAAI,CAAC8M,QAAL,CAAcpL,MARnB;AASRiM,gBAAAA,cAAc,EAAC3N,IAAI,CAAC8M,QAAL,CAAcc;AATrB,eAAV;AAYA,kBAAI9G,UAAU,GAAEhH,QAAQ,CAAC6G,OAAT,GAAmBnC,GAAnB,YAA2BxE,IAAI,CAACuK,MAAhC,cAA0CzB,SAAO,CAACkE,OAAlD,cAA6DnI,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAAC8M,QAAL,CAActC,QAA5B,EAAsCzC,OAAK,CAACE,EAAD,CAA3C,EAAgDvG,MAA7G,EAAhB;AAEAoF,cAAAA,UAAU,CAACyC,cAAX,GAA4B5E,IAA5B,CAAiC,UAAA6E,GAAG,EAAI;AACtC,oBAAI9B,GAAG,GAAGK,OAAK,CAACI,GAAD,CAAf;;AACA,oBAAGT,GAAG,KAAK,CAAX,EAAa;AACXvH,kBAAAA,KAAK,CAAC6C,KAAN,CAAY0E,GAAZ,EAAiB8B,GAAjB,GAAuBA,GAAvB;AACArJ,kBAAAA,KAAK,CAAC6C,KAAN,CAAY0E,GAAZ,EAAiBhG,MAAjB,aAA6B1B,IAAI,CAAC8M,QAAL,CAAcrL,EAA3C;AACD,iBAHD,MAGK;AACHtB,kBAAAA,KAAK,CAAC6C,KAAN,CAAY0E,GAAZ,EAAiB8B,GAAjB,GAAuBA,GAAvB;AACArJ,kBAAAA,KAAK,CAAC6C,KAAN,CAAY0E,GAAZ,EAAiBhG,MAAjB,iBAAiC1B,IAAI,CAAC8M,QAAL,CAAcrL,EAA/C;AACD;;AACD0G,gBAAAA,GAAC;;AACD,oBAAGA,GAAC,IAAItD,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BhE,MAArC,EAA4C;AAC1CsC,kBAAAA,SAAO,CAAC2E,SAAR,CAAkB/L,MAAlB,GAA2BvB,KAAK,CAAC6C,KAAN,CAAY,CAAZ,EAAetB,MAA1C;AACAoH,kBAAAA,SAAO,CAAC2E,SAAR,CAAkBjE,GAAlB,GAAwBrJ,KAAK,CAAC6C,KAAN,CAAY,CAAZ,EAAewG,GAAvC;AACAV,kBAAAA,SAAO,CAACqE,OAAR,CAAgBzL,MAAhB,GAAyBvB,KAAK,CAAC6C,KAAN,CAAY,CAAZ,EAAetB,MAAxC;AACAoH,kBAAAA,SAAO,CAACqE,OAAR,CAAgB3D,GAAhB,GAAsBrJ,KAAK,CAAC6C,KAAN,CAAY,CAAZ,EAAewG,GAArC;;AAEA,sBAAGrB,GAAC,IAAItD,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BhE,MAArC,EAA4C;AAC1CoE,oBAAAA,WAAS,CAAClG,GAAV,CAAcoE,SAAd;;AACA3I,oBAAAA,KAAK,CAACI,WAAN,GAAoB,KAApB;AACA,wBAAMqF,SAAO,GAAG;AACd,yBAAG,eADW;AAEd,yBAAG;AAFW,qBAAhB;;AAIA,oBAAA,MAAI,CAAChB,MAAL,CAAY,eAAZ,EAA6BgB,SAA7B;AACD;AACF;AACF,eA1BD;AA2BAqC,cAAAA,EAAC;AACF,aApDD;AAqDD,WAtDD;AAuDD,SAxDD,MAwDK;AAEHa,UAAAA,SAAO,GAAG;AACRmE,YAAAA,OAAO,EAAEjN,IAAI,CAAC8M,QAAL,CAAcI,IADf;AAERC,YAAAA,OAAO,EAAE,EAFD;AAGRC,YAAAA,OAAO,EAAEpN,IAAI,CAAC8M,QAAL,CAAcO,EAHf;AAIRC,YAAAA,WAAW,EAAEtN,IAAI,CAAC8M,QAAL,CAAcxL,MAJnB;AAKRiM,YAAAA,sBAAsB,EAAEvN,IAAI,CAAC8M,QAAL,CAAcU,UAL9B;AAMRC,YAAAA,SAAS,EAAE,EANH;AAORT,YAAAA,OAAO,EAAEpC,WAAS,CAACE,GAPX;AAQR4C,YAAAA,WAAW,EAAE1N,IAAI,CAAC8M,QAAL,CAAcpL,MARnB;AASRiM,YAAAA,cAAc,EAAC3N,IAAI,CAAC8M,QAAL,CAAcc;AATrB,WAAV;AAYAzF,UAAAA,GAAC;;AACD,cAAGA,GAAC,IAAItD,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BhE,MAArC,EAA4C;AAC1CoE,YAAAA,WAAS,CAAClG,GAAV,CAAcoE,SAAd;;AACA3I,YAAAA,KAAK,CAACI,WAAN,GAAoB,KAApB;AACA,gBAAMqF,SAAO,GAAG;AACd,iBAAG,eADW;AAEd,iBAAG;AAFW,aAAhB;AAIA,iBAAKhB,MAAL,CAAY,eAAZ,EAA6BgB,SAA7B;AACD;AACF;AACF,OAlHK,MAkHA,IAAG5F,IAAI,CAACuK,MAAL,KAAgB,SAAnB,EAA6B;AAEjCpK,QAAAA,KAAK,CAAC6C,KAAN,GAAc,EAAd;;AAEA,aAAI,IAAI6K,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGhJ,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAAC8N,MAAL,CAAYtD,QAA1B,EAAoChE,MAAvD,EAA+DqH,CAAC,EAAhE,EAAmE;AACjE,cAAGhJ,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAAC8N,MAAL,CAAYtD,QAA1B,EAAoCqD,CAApC,EAAuCpM,EAAvC,KAA8C4B,SAAjD,EAA2D;AACzDlD,YAAAA,KAAK,CAAC6C,KAAN,CAAY6B,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAAC8N,MAAL,CAAYtD,QAA1B,EAAoCqD,CAApC,EAAuCpM,EAAnD,IAAyDoD,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAAC8N,MAAL,CAAYtD,QAA1B,EAAoCqD,CAApC,CAAzD;AACD,WAFD,MAEK;AACH1N,YAAAA,KAAK,CAAC6C,KAAN,CAAY6K,CAAZ,IAAiB,EAAjB;AACD;AACF;;AAED,YAAI/G,YAAU,GAAG,EAAjB;AACA,YAAIgB,YAAU,GAAG,EAAjB;AACA,YAAIC,OAAK,GAAG,EAAZ;AACA,YAAIC,MAAI,GAAG,EAAX;AACA,YAAIzB,GAAC,GAAG,CAAR;AACA,YAAI4B,GAAC,GAAG,CAAR;AACA,YAAIF,GAAC,GAAG,CAAR;;AAEA,YAAM3D,OAAK,GAAGxE,QAAQ,CAACyE,QAAT,GAAoBC,GAApB,WAA2BxE,IAAI,CAACuK,MAAhC,EAAd;;AACA,YAAMK,WAAS,GAAGtG,OAAK,CAACsE,IAAN,EAAlB;;AAEA,YAAIE,SAAO,GAAG;AACZmE,UAAAA,OAAO,EAAErC,WAAS,CAACE;AADP,SAAd;AAIAjG,QAAAA,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BrD,OAA7B,CAAqC,UAAAC,OAAO,EAAI;AAC9CN,UAAAA,YAAU,GAAEhH,QAAQ,CAAC6G,OAAT,GAAmBnC,GAAnB,YAA2BxE,IAAI,CAACuK,MAAhC,cAA0CzB,SAAO,CAACmE,OAAlD,cAA6DpI,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAAC8N,MAAL,CAAYtD,QAA1B,EAAoCpD,OAAO,CAAC3F,EAA5C,EAAgDC,MAA7G,EAAZ;AACAsG,UAAAA,MAAI,WAAIZ,OAAO,CAAC3F,EAAZ,EAAJ,GAAwBqF,YAAU,CAACsB,GAAX,CAAehB,OAAf,CAAxB;AACAb,UAAAA,GAAC;AACF,SAJD;;AAMA,YAAG1B,MAAM,CAACC,MAAP,CAAckD,MAAd,EAAoBxB,MAApB,KAA+B,CAAlC,EAAoC;AAClC3B,UAAAA,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BrD,OAA7B,CAAqC,UAAAC,OAAO,EAAI;AAC9CY,YAAAA,MAAI,WAAIZ,OAAO,CAAC3F,EAAZ,EAAJ,CAAsB4G,EAAtB,CAAyB,eAAzB,EAA0C,UAAAC,QAAQ,EAAI;AACpDR,cAAAA,YAAU,CAACQ,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAA3B,CAAV,GAA4C6G,QAAQ,CAACG,gBAAT,GAA4BH,QAAQ,CAACI,UAAtC,GAAoD,GAA/F;AACAvI,cAAAA,KAAK,CAAC6C,KAAN,CAAYsF,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAAtC,EAA0CkH,gBAA1C,GAA6Db,YAAU,CAACQ,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAA3B,CAAvE;;AACA,kBAAGtB,KAAK,CAAC6C,KAAN,CAAYsF,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAAtC,EAA0CkH,gBAA1C,KAA+D,GAA/D,IAAsEZ,OAAK,CAACvB,MAAN,GAAe3B,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BhE,MAArH,EAA4H;AAC1HuB,gBAAAA,OAAK,CAACa,IAAN,CAAWN,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAArC;AACD;AACF,aAND,EAMG,UAAAoH,KAAK,EAAI;AACVvB,cAAAA,OAAO,CAACC,GAAR,CAAYsB,KAAK,CAAC5C,OAAlB;AACD,aARD,EAQG,YAAK;AAEN6C,cAAAA,SAAO,GAAG;AACRmE,gBAAAA,OAAO,EAAErC,WAAS,CAACE,GADX;AAERiD,gBAAAA,WAAW,EAAE/N,IAAI,CAAC8N,MAAL,CAAY5M,MAFjB;AAGR8M,gBAAAA,aAAa,EAAEhO,IAAI,CAAC8N,MAAL,CAAYG,QAHnB;AAIRC,gBAAAA,WAAW,EAAElO,IAAI,CAAC8N,MAAL,CAAYxM,MAJjB;AAKR6M,gBAAAA,WAAW,EAAEnO,IAAI,CAAC8N,MAAL,CAAYM,MALjB;AAMRC,gBAAAA,gBAAgB,EAAErO,IAAI,CAAC8N,MAAL,CAAY1B,WANtB;AAORkC,gBAAAA,kBAAkB,EAAEtO,IAAI,CAAC8N,MAAL,CAAYS,MAPxB;AAQRC,gBAAAA,SAAS,EAAE,EARH;AASRC,gBAAAA,QAAQ,EAAEzO,IAAI,CAAC8N,MAAL,CAAYY,QATd;AAURC,gBAAAA,gBAAgB,EAAE3O,IAAI,CAAC8N,MAAL,CAAYpD,WAVtB;AAWRkE,gBAAAA,WAAW,EAAE5O,IAAI,CAAC8N,MAAL,CAAYpM,MAXjB;AAYRmN,gBAAAA,cAAc,EAAE,EAZR;AAaRC,gBAAAA,eAAe,EAAE;AAbT,eAAV;AAgBA,kBAAIhI,UAAU,GAAEhH,QAAQ,CAAC6G,OAAT,GAAmBnC,GAAnB,YAA2BxE,IAAI,CAACuK,MAAhC,cAA0CzB,SAAO,CAACmE,OAAlD,cAA6DpI,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAAC8N,MAAL,CAAYtD,QAA1B,YAAuCzC,OAAK,CAACE,GAAD,CAA5C,GAAmDvG,MAAhH,EAAhB;AAEAoF,cAAAA,UAAU,CAACyC,cAAX,GAA4B5E,IAA5B,CAAiC,UAAA6E,GAAG,EAAI;AACtC,oBAAI9B,GAAG,GAAGK,OAAK,CAACI,GAAD,CAAf;AACAb,gBAAAA,OAAO,CAACC,GAAR,CAAYG,GAAZ;;AACA,qBAAI,IAAIQ,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGrD,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAAC8N,MAAL,CAAYtD,QAA1B,EAAoChE,MAAvD,EAA+D0B,CAAC,EAAhE,EAAmE;AACjE,sBAAGrD,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAAC8N,MAAL,CAAYtD,QAA1B,EAAoCtC,CAApC,EAAuCzG,EAAvC,KAA8C4B,SAA9C,IAA2DqE,GAAG,KAAK7C,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAAC8N,MAAL,CAAYtD,QAA1B,EAAoCtC,CAApC,EAAuCzG,EAA7G,EAAgH;AAC9GtB,oBAAAA,KAAK,CAAC6C,KAAN,CAAY0E,GAAZ,EAAiB8B,GAAjB,GAAuBA,GAAvB;AACArJ,oBAAAA,KAAK,CAAC6C,KAAN,CAAY0E,GAAZ,EAAiBhG,MAAjB,GAA0BmD,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAAC8N,MAAL,CAAYtD,QAA1B,EAAoCtC,CAApC,EAAuCxG,MAAjE;AACD;AACF;;AACDyG,gBAAAA,GAAC;;AACD,oBAAGA,GAAC,IAAItD,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BhE,MAArC,EAA4C;AAC1C,sBAAGrG,KAAK,CAAC6C,KAAN,CAAY,CAAZ,EAAetB,MAAf,KAA0B2B,SAA7B,EAAuC;AACrCyF,oBAAAA,SAAO,CAAC0F,SAAR,GAAoB;AAClB9M,sBAAAA,MAAM,EAAEvB,KAAK,CAAC6C,KAAN,CAAY,CAAZ,EAAetB,MADL;AAElB8H,sBAAAA,GAAG,EAAErJ,KAAK,CAAC6C,KAAN,CAAY,CAAZ,EAAewG;AAFF,qBAApB;AAID,mBALD,MAKK;AACHV,oBAAAA,SAAO,CAAC0F,SAAR,GAAoB,EAApB;AACD;;AAED,sBAAGrO,KAAK,CAAC6C,KAAN,CAAY,CAAZ,EAAetB,MAAf,KAA0B2B,SAA7B,EAAuC;AACrCyF,oBAAAA,SAAO,CAACgG,eAAR,GAA0B;AACxBpN,sBAAAA,MAAM,EAAEvB,KAAK,CAAC6C,KAAN,CAAY,CAAZ,EAAetB,MADC;AAExB8H,sBAAAA,GAAG,EAAErJ,KAAK,CAAC6C,KAAN,CAAY,CAAZ,EAAewG;AAFI,qBAA1B;AAID,mBALD,MAKK;AACHV,oBAAAA,SAAO,CAACgG,eAAR,GAA0B,EAA1B;AACD;;AAED,sBAAG3O,KAAK,CAAC6C,KAAN,CAAY,CAAZ,EAAetB,MAAf,KAA0B2B,SAA7B,EAAuC;AACrCyF,oBAAAA,SAAO,CAAC+F,cAAR,GAAyB;AACvBnN,sBAAAA,MAAM,EAAEvB,KAAK,CAAC6C,KAAN,CAAY,CAAZ,EAAetB,MADA;AAEvB8H,sBAAAA,GAAG,EAAErJ,KAAK,CAAC6C,KAAN,CAAY,CAAZ,EAAewG;AAFG,qBAAzB;AAID,mBALD,MAKK;AACHV,oBAAAA,SAAO,CAAC+F,cAAR,GAAyB,EAAzB;AACD;;AAED,sBAAG1G,GAAC,IAAItD,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BhE,MAArC,EAA4C;AAC1CoE,oBAAAA,WAAS,CAAClG,GAAV,CAAcoE,SAAd;;AACA3I,oBAAAA,KAAK,CAACI,WAAN,GAAoB,KAApB;AACA,wBAAMqF,SAAO,GAAG;AACd,yBAAG,eADW;AAEd,yBAAG;AAFW,qBAAhB;;AAIA,oBAAA,MAAI,CAAChB,MAAL,CAAY,eAAZ,EAA6BgB,SAA7B;AACD;AACF;AACF,eAhDD;AAiDAqC,cAAAA,GAAC;AACF,aA9ED;AA+ED,WAhFD;AAiFD,SAlFD,MAkFK;AAEHa,UAAAA,SAAO,GAAG;AACRmE,YAAAA,OAAO,EAAErC,WAAS,CAACE,GADX;AAERiD,YAAAA,WAAW,EAAE/N,IAAI,CAAC8N,MAAL,CAAY5M,MAFjB;AAGR8M,YAAAA,aAAa,EAAEhO,IAAI,CAAC8N,MAAL,CAAYG,QAHnB;AAIRC,YAAAA,WAAW,EAAElO,IAAI,CAAC8N,MAAL,CAAYxM,MAJjB;AAKR6M,YAAAA,WAAW,EAAEnO,IAAI,CAAC8N,MAAL,CAAYM,MALjB;AAMRC,YAAAA,gBAAgB,EAAErO,IAAI,CAAC8N,MAAL,CAAY1B,WANtB;AAORkC,YAAAA,kBAAkB,EAAEtO,IAAI,CAAC8N,MAAL,CAAYS,MAPxB;AAQRC,YAAAA,SAAS,EAAExO,IAAI,CAAC8N,MAAL,CAAYtD,QAAZ,CAAqBuE,MARxB;AASRN,YAAAA,QAAQ,EAAEzO,IAAI,CAAC8N,MAAL,CAAYY,QATd;AAURC,YAAAA,gBAAgB,EAAE3O,IAAI,CAAC8N,MAAL,CAAYpD,WAVtB;AAWRkE,YAAAA,WAAW,EAAE5O,IAAI,CAAC8N,MAAL,CAAYpM,MAXjB;AAYRmN,YAAAA,cAAc,EAAE7O,IAAI,CAAC8N,MAAL,CAAYtD,QAAZ,CAAqBwE,SAZ7B;AAaRF,YAAAA,eAAe,EAAE9O,IAAI,CAAC8N,MAAL,CAAYtD,QAAZ,CAAqByE;AAb9B,WAAV;AAgBA9G,UAAAA,GAAC;;AACD,cAAGA,GAAC,IAAItD,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BhE,MAArC,EAA4C;AAC1CoE,YAAAA,WAAS,CAAClG,GAAV,CAAcoE,SAAd;;AACA3I,YAAAA,KAAK,CAACI,WAAN,GAAoB,KAApB;AACA,gBAAMqF,SAAO,GAAG;AACd,iBAAG,eADW;AAEd,iBAAG;AAFW,aAAhB;AAIA,iBAAKhB,MAAL,CAAY,eAAZ,EAA6BgB,SAA7B;AACD;AACF;AACF;AACF,KAljCQ;AAmjCTsJ,IAAAA,QAnjCS,oBAmjCA/O,KAnjCA,EAmjCOH,IAnjCP,EAmjCY;AAAA;;AACnBG,MAAAA,KAAK,CAACI,WAAN,GAAoB,IAApB;;AACA,UAAGP,IAAI,CAACuK,MAAL,KAAgB,QAAnB,EAA4B;AAE1B,YAAG1F,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BhE,MAA7B,KAAwC,CAA3C,EAA6C;AAC3C,eAAI,IAAID,GAAC,GAAG,CAAZ,EAAeA,GAAC,GAAG1B,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACyK,KAAL,CAAWC,WAAzB,EAAsClE,MAAzD,EAAiED,GAAC,EAAlE,EAAqE;AACnEpG,YAAAA,KAAK,CAAC6C,KAAN,CAAYuD,GAAZ,IAAiB,EAAjB;AACApG,YAAAA,KAAK,CAAC6C,KAAN,CAAYuD,GAAZ,IAAiB1B,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACyK,KAAL,CAAWC,WAAzB,EAAsCnE,GAAtC,EAAyCoE,KAA1D;AACD;AACF;;AAED,YAAI7D,UAAU,GAAG,EAAjB;AACA,YAAIgB,UAAU,GAAG,EAAjB;AACA,YAAIC,KAAK,GAAG,EAAZ;AACA,YAAIC,IAAI,GAAG,EAAX;AACA,YAAIzB,CAAC,GAAG,CAAR;AACA,YAAI0B,CAAC,GAAG,CAAR;AACA,YAAIE,CAAC,GAAG,CAAR;AAEAtD,QAAAA,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BrD,OAA7B,CAAqC,UAAAC,OAAO,EAAI;AAC9CN,UAAAA,UAAU,GAAEhH,QAAQ,CAAC6G,OAAT,GAAmBnC,GAAnB,YAA2BxE,IAAI,CAACuK,MAAhC,cAA0CvK,IAAI,CAACyK,KAAL,CAAWhJ,EAArD,cAA2DzB,IAAI,CAACyK,KAAL,CAAWC,WAAX,WAA0BtD,OAAO,CAAC3F,EAAlC,GAAwCJ,KAAxC,CAA8C4I,KAA9C,CAAoD,GAApD,EAAyDG,IAAzD,CAA8D,GAA9D,CAA3D,EAAZ;AACApC,UAAAA,IAAI,WAAIZ,OAAO,CAAC3F,EAAZ,EAAJ,GAAwBqF,UAAU,CAACsB,GAAX,CAAehB,OAAf,CAAxB;AACD,SAHD;;AAKA,YAAGvC,MAAM,CAACC,MAAP,CAAckD,IAAd,EAAoBxB,MAApB,KAA+B,CAAlC,EAAoC;AAClC3B,UAAAA,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BrD,OAA7B,CAAqC,UAAAC,OAAO,EAAI;AAC9CY,YAAAA,IAAI,WAAIZ,OAAO,CAAC3F,EAAZ,EAAJ,CAAsB4G,EAAtB,CAAyB,eAAzB,EAA0C,UAAAC,QAAQ,EAAI;AACpDR,cAAAA,UAAU,CAACQ,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAA3B,CAAV,GAA4C6G,QAAQ,CAACG,gBAAT,GAA4BH,QAAQ,CAACI,UAAtC,GAAoD,GAA/F;AACAvI,cAAAA,KAAK,CAAC6C,KAAN,CAAYsF,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAAtC,EAA0CkH,gBAA1C,GAA6Db,UAAU,CAACQ,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAA3B,CAAvE;;AACA,kBAAGtB,KAAK,CAAC6C,KAAN,CAAYsF,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAAtC,EAA0CkH,gBAA1C,KAA+D,GAA/D,IAAsEZ,KAAK,CAACvB,MAAN,GAAe3B,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BhE,MAArH,EAA4H;AAC1HuB,gBAAAA,KAAK,CAACa,IAAN,CAAWN,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAArC;AACD;AACF,aAND,EAMG,UAAAoH,KAAK,EAAI;AACVvB,cAAAA,OAAO,CAACC,GAAR,CAAYsB,KAAK,CAAC5C,OAAlB;AACD,aARD,EAQG,YAAK;AAEN,kBAAI6C,OAAO,GAAG,EAAd;AACAA,cAAAA,OAAO,CAACiC,YAAR,aAA0B/K,IAAI,CAACyK,KAAL,CAAWO,MAArC,cAA+ChL,IAAI,CAACyK,KAAL,CAAWQ,GAA1D;AACAnC,cAAAA,OAAO,CAAC+B,OAAR,GAAkB7K,IAAI,CAACyK,KAAL,CAAWhJ,EAA7B;AACAqH,cAAAA,OAAO,CAACoC,WAAR,GAAsBlL,IAAI,CAACyK,KAAL,CAAWU,YAAjC;AACArC,cAAAA,OAAO,CAACsC,gBAAR,GAA2B,EAA3B;;AAEA,mBAAI,IAAI7E,GAAC,GAAG,CAAZ,EAAeA,GAAC,GAAG1B,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACyK,KAAL,CAAWC,WAAzB,EAAsClE,MAAzD,EAAiED,GAAC,EAAlE,EAAqE;AACnEuC,gBAAAA,OAAO,CAACsC,gBAAR,CAAyB7E,GAAzB,IAA8B,EAA9B;AACAuC,gBAAAA,OAAO,CAACsC,gBAAR,CAAyB7E,GAAzB,EAA4B8E,UAA5B,GAAyCxG,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACyK,KAAL,CAAWC,WAAzB,EAAsCnE,GAAtC,EAAyClF,KAAlF;AACAyH,gBAAAA,OAAO,CAACsC,gBAAR,CAAyB7E,GAAzB,EAA4B+E,WAA5B,GAA0CzG,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACyK,KAAL,CAAWC,WAAzB,EAAsCnE,GAAtC,EAAyC7E,MAAnF;AACAoH,gBAAAA,OAAO,CAACsC,gBAAR,CAAyB7E,GAAzB,EAA4BgF,aAA5B,GAA4C1G,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACyK,KAAL,CAAWC,WAAzB,EAAsCnE,GAAtC,EAAyCpF,QAArF;AACA2H,gBAAAA,OAAO,CAACsC,gBAAR,CAAyB7E,GAAzB,EAA4BiF,WAA5B,GAA0C3G,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACyK,KAAL,CAAWC,WAAzB,EAAsCnE,GAAtC,EAAyCjF,MAAnF;AACAwH,gBAAAA,OAAO,CAACsC,gBAAR,CAAyB7E,GAAzB,EAA4BkF,SAA5B,GAAwC,EAAxC;AACA3C,gBAAAA,OAAO,CAACsC,gBAAR,CAAyB7E,GAAzB,EAA4BmF,WAA5B,GAA0C7G,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACyK,KAAL,CAAWC,WAAzB,EAAsCnE,GAAtC,EAAyCrF,MAAnF;AACA4H,gBAAAA,OAAO,CAACsC,gBAAR,CAAyB7E,GAAzB,EAA4BoF,UAA5B,GAAyC9G,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACyK,KAAL,CAAWC,WAAzB,EAAsCnE,GAAtC,EAAyCqF,KAAlF;AACD;;AAED,kBAAI9E,UAAU,GAAEhH,QAAQ,CAAC6G,OAAT,GAAmBnC,GAAnB,YAA2BxE,IAAI,CAACuK,MAAhC,cAA0CvK,IAAI,CAACyK,KAAL,CAAWO,MAArD,cAA+DhL,IAAI,CAACyK,KAAL,CAAWC,WAAX,WAA0B3C,KAAK,CAACE,CAAD,CAA/B,GAAsC5G,KAAtC,CAA4C4I,KAA5C,CAAkD,GAAlD,EAAuDG,IAAvD,CAA4D,GAA5D,CAA/D,EAAhB;AAEAtD,cAAAA,UAAU,CAACyC,cAAX,GAA4B5E,IAA5B,CAAiC,UAAA6E,GAAG,EAAI;AACtC,oBAAI9B,GAAG,GAAGK,KAAK,CAACI,CAAD,CAAf;AACAhI,gBAAAA,KAAK,CAAC6C,KAAN,CAAY0E,GAAZ,EAAiB8B,GAAjB,GAAuBA,GAAvB;AACArJ,gBAAAA,KAAK,CAAC6C,KAAN,CAAY0E,GAAZ,EAAiBhG,MAAjB,aAA6B1B,IAAI,CAACyK,KAAL,CAAWC,WAAX,WAA0B3C,KAAK,CAACI,CAAD,CAA/B,GAAsC9G,KAAtC,CAA4C4I,KAA5C,CAAkD,GAAlD,EAAuDG,IAAvD,CAA4D,GAA5D,CAA7B;AACAjC,gBAAAA,CAAC;;AACD,oBAAGA,CAAC,IAAIJ,KAAK,CAACvB,MAAd,EAAqB;AACnBD,kBAAAA,CAAC,GAAG,CAAJ;AACA1B,kBAAAA,MAAM,CAACC,MAAP,CAAcgE,OAAO,CAACsC,gBAAtB,EAAwCjE,OAAxC,CAAgD,UAAAC,OAAO,EAAI;AACzD,wBAAGjH,KAAK,CAAC6C,KAAN,CAAYuD,CAAZ,EAAe7E,MAAf,KAA0B2B,SAA1B,IAAuClD,KAAK,CAAC6C,KAAN,CAAYuD,CAAZ,EAAeiD,GAAf,KAAuBnG,SAAjE,EAA2E;AACzE+D,sBAAAA,OAAO,CAACqE,SAAR,CAAkB/J,MAAlB,GAA2BvB,KAAK,CAAC6C,KAAN,CAAYuD,CAAZ,EAAe7E,MAA1C;AACA0F,sBAAAA,OAAO,CAACqE,SAAR,CAAkBjC,GAAlB,GAAwBrJ,KAAK,CAAC6C,KAAN,CAAYuD,CAAZ,EAAeiD,GAAvC;AACD,qBAHD,MAGK;AACHpC,sBAAAA,OAAO,CAACqE,SAAR,GAAoB,EAApB;AACD;;AACDlF,oBAAAA,CAAC;;AACD,wBAAG4B,CAAC,IAAItD,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BhE,MAArC,EAA4C;AAC1C,0BAAMlC,KAAK,GAAGxE,QAAQ,CAACyE,QAAT,GAAoBC,GAApB,WAA2BxE,IAAI,CAACuK,MAAhC,EAAd;AACAjG,sBAAAA,KAAK,CAACG,KAAN,WAAezE,IAAI,CAACyK,KAAL,CAAWhJ,EAA1B,GAAgCiD,GAAhC,CAAoCoE,OAApC;AACA3I,sBAAAA,KAAK,CAACI,WAAN,GAAoB,KAApB;AACA,0BAAMqF,OAAO,GAAG;AACd,2BAAG,eADW;AAEd,2BAAG;AAFW,uBAAhB;;AAIA,sBAAA,MAAI,CAAChB,MAAL,CAAY,eAAZ,EAA6BgB,OAA7B;AACD;AACF,mBAlBD;AAmBD;AACF,eA3BD;AA4BAqC,cAAAA,CAAC;AACF,aA1DD;AA2DD,WA5DD;AA6DD,SA9DD,MA8DK;AACH,cAAIa,OAAO,GAAG,EAAd;AACAA,UAAAA,OAAO,CAACiC,YAAR,aAA0B/K,IAAI,CAACyK,KAAL,CAAWO,MAArC,cAA+ChL,IAAI,CAACyK,KAAL,CAAWQ,GAA1D;AACAnC,UAAAA,OAAO,CAAC+B,OAAR,GAAkB7K,IAAI,CAACyK,KAAL,CAAWhJ,EAA7B;AACAqH,UAAAA,OAAO,CAACoC,WAAR,GAAsBlL,IAAI,CAACyK,KAAL,CAAWU,YAAjC;AACArC,UAAAA,OAAO,CAACsC,gBAAR,GAA2B,EAA3B;;AAEA,eAAI,IAAI7E,IAAC,GAAG,CAAZ,EAAeA,IAAC,GAAG1B,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACyK,KAAL,CAAWC,WAAzB,EAAsClE,MAAzD,EAAiED,IAAC,EAAlE,EAAqE;AACnEuC,YAAAA,OAAO,CAACsC,gBAAR,CAAyB7E,IAAzB,IAA8B,EAA9B;AACAuC,YAAAA,OAAO,CAACsC,gBAAR,CAAyB7E,IAAzB,EAA4B8E,UAA5B,GAAyCxG,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACyK,KAAL,CAAWC,WAAzB,EAAsCnE,IAAtC,EAAyClF,KAAlF;AACAyH,YAAAA,OAAO,CAACsC,gBAAR,CAAyB7E,IAAzB,EAA4B+E,WAA5B,GAA0CzG,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACyK,KAAL,CAAWC,WAAzB,EAAsCnE,IAAtC,EAAyC7E,MAAnF;AACAoH,YAAAA,OAAO,CAACsC,gBAAR,CAAyB7E,IAAzB,EAA4BgF,aAA5B,GAA4C1G,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACyK,KAAL,CAAWC,WAAzB,EAAsCnE,IAAtC,EAAyCpF,QAArF;AACA2H,YAAAA,OAAO,CAACsC,gBAAR,CAAyB7E,IAAzB,EAA4BiF,WAA5B,GAA0C3G,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACyK,KAAL,CAAWC,WAAzB,EAAsCnE,IAAtC,EAAyCjF,MAAnF;AACAwH,YAAAA,OAAO,CAACsC,gBAAR,CAAyB7E,IAAzB,EAA4BkF,SAA5B,GAAwC5G,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACyK,KAAL,CAAWC,WAAzB,EAAsCnE,IAAtC,EAAyCoE,KAAjF;AACA7B,YAAAA,OAAO,CAACsC,gBAAR,CAAyB7E,IAAzB,EAA4BmF,WAA5B,GAA0C7G,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACyK,KAAL,CAAWC,WAAzB,EAAsCnE,IAAtC,EAAyCrF,MAAnF;AACA4H,YAAAA,OAAO,CAACsC,gBAAR,CAAyB7E,IAAzB,EAA4BoF,UAA5B,GAAyC9G,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACyK,KAAL,CAAWC,WAAzB,EAAsCnE,IAAtC,EAAyCqF,KAAlF;AACD;;AAED,cAAMtH,KAAK,GAAGxE,QAAQ,CAACyE,QAAT,GAAoBC,GAApB,WAA2BxE,IAAI,CAACuK,MAAhC,EAAd;AACAjG,UAAAA,KAAK,CAACG,KAAN,WAAezE,IAAI,CAACyK,KAAL,CAAWhJ,EAA1B,GAAgCiD,GAAhC,CAAoCoE,OAApC;AACA3I,UAAAA,KAAK,CAACI,WAAN,GAAoB,KAApB;AACA,cAAMqF,OAAO,GAAG;AACd,eAAG,eADW;AAEd,eAAG;AAFW,WAAhB;AAIA,eAAKhB,MAAL,CAAY,eAAZ,EAA6BgB,OAA7B;AACD;AACF,OA/GD,MA+GM,IAAG5F,IAAI,CAACuK,MAAL,KAAgB,WAAnB,EAA+B;AAEnC,YAAG1F,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BhE,MAA7B,KAAwC,CAA3C,EAA6C;AAC3CrG,UAAAA,KAAK,CAAC6C,KAAN,GAAc,EAAd;AACA7C,UAAAA,KAAK,CAAC6C,KAAN,CAAY,CAAZ,IAAiBhD,IAAI,CAAC6L,QAAL,CAAclB,KAA/B;AACD;;AAED,YAAI7D,YAAU,GAAG,EAAjB;AACA,YAAIgB,YAAU,GAAG,EAAjB;AACA,YAAIC,OAAK,GAAG,EAAZ;AACA,YAAIC,MAAI,GAAG,EAAX;AACA,YAAIG,GAAC,GAAG,CAAR;AAEAtD,QAAAA,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BrD,OAA7B,CAAqC,UAAAC,OAAO,EAAI;AAC9CN,UAAAA,YAAU,GAAEhH,QAAQ,CAAC6G,OAAT,GAAmBnC,GAAnB,YAA2BxE,IAAI,CAACuK,MAAhC,cAA0CvK,IAAI,CAAC6L,QAAL,CAAcpK,EAAxD,cAA8DzB,IAAI,CAAC6L,QAAL,CAAcnK,MAAd,CAAqBuI,KAArB,CAA2B,GAA3B,EAAgCG,IAAhC,CAAqC,GAArC,CAA9D,EAAZ;AACApC,UAAAA,MAAI,WAAIZ,OAAO,CAAC3F,EAAZ,EAAJ,GAAwBqF,YAAU,CAACsB,GAAX,CAAehB,OAAf,CAAxB;AACD,SAHD;;AAKA,YAAGvC,MAAM,CAACC,MAAP,CAAckD,MAAd,EAAoBxB,MAApB,KAA+B,CAAlC,EAAoC;AAClC3B,UAAAA,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BrD,OAA7B,CAAqC,UAAAC,OAAO,EAAI;AAC9CY,YAAAA,MAAI,WAAIZ,OAAO,CAAC3F,EAAZ,EAAJ,CAAsB4G,EAAtB,CAAyB,eAAzB,EAA0C,UAAAC,QAAQ,EAAI;AACpDR,cAAAA,YAAU,CAACQ,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAA3B,CAAV,GAA4C6G,QAAQ,CAACG,gBAAT,GAA4BH,QAAQ,CAACI,UAAtC,GAAoD,GAA/F;AACAvI,cAAAA,KAAK,CAAC6C,KAAN,CAAYsF,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAAtC,EAA0CkH,gBAA1C,GAA6Db,YAAU,CAACQ,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAA3B,CAAvE;;AACA,kBAAGtB,KAAK,CAAC6C,KAAN,CAAYsF,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAAtC,EAA0CkH,gBAA1C,KAA+D,GAA/D,IAAsEZ,OAAK,CAACvB,MAAN,GAAe3B,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BhE,MAArH,EAA4H;AAC1HuB,gBAAAA,OAAK,CAACa,IAAN,CAAWN,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAArC;AACD;AACF,aAND,EAMG,UAAAoH,KAAK,EAAI;AACVvB,cAAAA,OAAO,CAACC,GAAR,CAAYsB,KAAK,CAAC5C,OAAlB;AACD,aARD,EAQG,YAAK;AAEN,kBAAI6C,OAAO,GAAG;AACZiD,gBAAAA,WAAW,EAAE/L,IAAI,CAAC6L,QAAL,CAAc3K,MADf;AAEZ8K,gBAAAA,WAAW,EAAEhM,IAAI,CAAC6L,QAAL,CAAcZ,GAFf;AAGZgB,gBAAAA,aAAa,EAAEjM,IAAI,CAAC6L,QAAL,CAAcK,QAHjB;AAIZC,gBAAAA,gBAAgB,EAAEnM,IAAI,CAAC6L,QAAL,CAAcO,WAJpB;AAKZN,gBAAAA,OAAO,EAAE9L,IAAI,CAAC6L,QAAL,CAAcpK,EALX;AAMZ4K,gBAAAA,WAAW,EAAErM,IAAI,CAAC6L,QAAL,CAAcb,MANf;AAOZsB,gBAAAA,WAAW,EAAEtM,IAAI,CAAC6L,QAAL,CAAcnK,MAPf;AAQZ6K,gBAAAA,SAAS,EAAE;AARC,eAAd;AAWA,kBAAIzF,UAAU,GAAEhH,QAAQ,CAAC6G,OAAT,GAAmBnC,GAAnB,YAA2BxE,IAAI,CAACuK,MAAhC,cAA0CvK,IAAI,CAAC6L,QAAL,CAAcpK,EAAxD,cAA8DzB,IAAI,CAAC6L,QAAL,CAAcnK,MAAd,CAAqBuI,KAArB,CAA2B,GAA3B,EAAgCG,IAAhC,CAAqC,GAArC,CAA9D,EAAhB;AAEAtD,cAAAA,UAAU,CAACyC,cAAX,GAA4B5E,IAA5B,CAAiC,UAAA6E,GAAG,EAAI;AACtC,oBAAI9B,GAAG,GAAGK,OAAK,CAACI,GAAD,CAAf;AACAhI,gBAAAA,KAAK,CAAC6C,KAAN,CAAY0E,GAAZ,EAAiB8B,GAAjB,GAAuBA,GAAvB;AACArJ,gBAAAA,KAAK,CAAC6C,KAAN,CAAY0E,GAAZ,EAAiBhG,MAAjB,aAA6B1B,IAAI,CAAC6L,QAAL,CAAcnK,MAAd,CAAqBuI,KAArB,CAA2B,GAA3B,EAAgCG,IAAhC,CAAqC,GAArC,CAA7B;AACAjC,gBAAAA,GAAC;;AACD,oBAAGA,GAAC,IAAIJ,OAAK,CAACvB,MAAd,EAAqB;AACnBsC,kBAAAA,OAAO,CAACyD,SAAR,CAAkB7K,MAAlB,GAA2BvB,KAAK,CAAC6C,KAAN,CAAY,CAAZ,EAAetB,MAA1C;AACAoH,kBAAAA,OAAO,CAACyD,SAAR,CAAkB/C,GAAlB,GAAwBrJ,KAAK,CAAC6C,KAAN,CAAY,CAAZ,EAAewG,GAAvC;;AACA,sBAAGrB,GAAC,IAAItD,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BhE,MAArC,EAA4C;AAC1C,wBAAMlC,OAAK,GAAGxE,QAAQ,CAACyE,QAAT,GAAoBC,GAApB,WAA2BxE,IAAI,CAACuK,MAAhC,EAAd;;AACAjG,oBAAAA,OAAK,CAACG,KAAN,WAAezE,IAAI,CAAC6L,QAAL,CAAcpK,EAA7B,GAAmCiD,GAAnC,CAAuCoE,OAAvC;;AACA3I,oBAAAA,KAAK,CAACI,WAAN,GAAoB,KAApB;AACA,wBAAMqF,SAAO,GAAG;AACd,yBAAG,eADW;AAEd,yBAAG;AAFW,qBAAhB;;AAIA,oBAAA,MAAI,CAAChB,MAAL,CAAY,eAAZ,EAA6BgB,SAA7B;AACD;AACF;AACF,eAnBD;AAoBD,aA3CD;AA4CD,WA7CD;AA8CD,SA/CD,MA+CK;AACH,cAAIkD,SAAO,GAAG;AACZiD,YAAAA,WAAW,EAAE/L,IAAI,CAAC6L,QAAL,CAAc3K,MADf;AAEZ8K,YAAAA,WAAW,EAAEhM,IAAI,CAAC6L,QAAL,CAAcZ,GAFf;AAGZgB,YAAAA,aAAa,EAAEjM,IAAI,CAAC6L,QAAL,CAAcK,QAHjB;AAIZC,YAAAA,gBAAgB,EAAEnM,IAAI,CAAC6L,QAAL,CAAcO,WAJpB;AAKZN,YAAAA,OAAO,EAAE9L,IAAI,CAAC6L,QAAL,CAAcpK,EALX;AAMZ4K,YAAAA,WAAW,EAAErM,IAAI,CAAC6L,QAAL,CAAcb,MANf;AAOZsB,YAAAA,WAAW,EAAEtM,IAAI,CAAC6L,QAAL,CAAcnK,MAPf;AAQZ6K,YAAAA,SAAS,EAAEvM,IAAI,CAAC6L,QAAL,CAAclB;AARb,WAAd;AAWAxC,UAAAA,GAAC;;AACD,cAAGA,GAAC,IAAItD,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BhE,MAArC,EAA4C;AAC1C,gBAAMlC,OAAK,GAAGxE,QAAQ,CAACyE,QAAT,GAAoBC,GAApB,WAA2BxE,IAAI,CAACuK,MAAhC,EAAd;;AACAjG,YAAAA,OAAK,CAACG,KAAN,WAAezE,IAAI,CAAC6L,QAAL,CAAcpK,EAA7B,GAAmCiD,GAAnC,CAAuCoE,SAAvC;;AACA3I,YAAAA,KAAK,CAACI,WAAN,GAAoB,KAApB;AACA,gBAAMqF,UAAO,GAAG;AACd,iBAAG,eADW;AAEd,iBAAG;AAFW,aAAhB;AAIA,iBAAKhB,MAAL,CAAY,eAAZ,EAA6BgB,UAA7B;AACD;AACF;AACF,OAzFK,MAyFA,IAAG5F,IAAI,CAACuK,MAAL,KAAgB,UAAnB,EAA8B;AAElC,YAAG1F,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BhE,MAA7B,KAAwC,CAA3C,EAA6C;AAC3CrG,UAAAA,KAAK,CAAC6C,KAAN,GAAc,EAAd;AACA7C,UAAAA,KAAK,CAAC6C,KAAN,CAAY,CAAZ,IAAiBhD,IAAI,CAACwM,UAAL,CAAgB7B,KAAjC;AACD;;AAED,YAAI7D,YAAU,GAAG,EAAjB;AACA,YAAIgB,YAAU,GAAG,EAAjB;AACA,YAAIC,OAAK,GAAG,EAAZ;AACA,YAAIC,MAAI,GAAG,EAAX;AACA,YAAIG,GAAC,GAAG,CAAR;AAEAtD,QAAAA,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BrD,OAA7B,CAAqC,UAAAC,OAAO,EAAI;AAC9CN,UAAAA,YAAU,GAAEhH,QAAQ,CAAC6G,OAAT,GAAmBnC,GAAnB,YAA2BxE,IAAI,CAACuK,MAAhC,cAA0CvK,IAAI,CAACwM,UAAL,CAAgB/K,EAA1D,cAAgEzB,IAAI,CAACwM,UAAL,CAAgBnL,KAAhB,CAAsB4I,KAAtB,CAA4B,GAA5B,EAAiCG,IAAjC,CAAsC,GAAtC,CAAhE,EAAZ;AACApC,UAAAA,MAAI,WAAIZ,OAAO,CAAC3F,EAAZ,EAAJ,GAAwBqF,YAAU,CAACsB,GAAX,CAAehB,OAAf,CAAxB;AACD,SAHD;;AAKA,YAAGvC,MAAM,CAACC,MAAP,CAAckD,MAAd,EAAoBxB,MAApB,KAA+B,CAAlC,EAAoC;AAClC3B,UAAAA,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BrD,OAA7B,CAAqC,UAAAC,OAAO,EAAI;AAC9CY,YAAAA,MAAI,WAAIZ,OAAO,CAAC3F,EAAZ,EAAJ,CAAsB4G,EAAtB,CAAyB,eAAzB,EAA0C,UAAAC,QAAQ,EAAI;AACpDR,cAAAA,YAAU,CAACQ,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAA3B,CAAV,GAA4C6G,QAAQ,CAACG,gBAAT,GAA4BH,QAAQ,CAACI,UAAtC,GAAoD,GAA/F;AACAvI,cAAAA,KAAK,CAAC6C,KAAN,CAAYsF,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAAtC,EAA0CkH,gBAA1C,GAA6Db,YAAU,CAACQ,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAA3B,CAAvE;;AACA,kBAAGtB,KAAK,CAAC6C,KAAN,CAAYsF,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAAtC,EAA0CkH,gBAA1C,KAA+D,GAA/D,IAAsEZ,OAAK,CAACvB,MAAN,GAAe3B,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BhE,MAArH,EAA4H;AAC1HuB,gBAAAA,OAAK,CAACa,IAAN,CAAWN,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAArC;AACD;AACF,aAND,EAMG,UAAAoH,KAAK,EAAI;AACVvB,cAAAA,OAAO,CAACC,GAAR,CAAYsB,KAAK,CAAC5C,OAAlB;AACD,aARD,EAQG,YAAK;AAEN,kBAAI6C,OAAO,GAAG;AACZ4D,gBAAAA,SAAS,EAAE1M,IAAI,CAACwM,UAAL,CAAgBlL,MADf;AAEZqL,gBAAAA,SAAS,EAAE3M,IAAI,CAACwM,UAAL,CAAgB9K,MAFf;AAGZkL,gBAAAA,QAAQ,EAAE5M,IAAI,CAACwM,UAAL,CAAgBnL,KAHd;AAIZoL,gBAAAA,KAAK,EAAEzM,IAAI,CAACwM,UAAL,CAAgB/K,EAJX;AAKZoL,gBAAAA,OAAO,EAAE;AALG,eAAd;AAQA,kBAAI/F,UAAU,GAAEhH,QAAQ,CAAC6G,OAAT,GAAmBnC,GAAnB,qBAAoCxE,IAAI,CAACuK,MAAzC,cAAmDvK,IAAI,CAACwM,UAAL,CAAgB/K,EAAnE,cAAyEzB,IAAI,CAACwM,UAAL,CAAgBnL,KAAhB,CAAsB4I,KAAtB,CAA4B,GAA5B,EAAiCG,IAAjC,CAAsC,GAAtC,CAAzE,EAAhB;AAEAtD,cAAAA,UAAU,CAACyC,cAAX,GAA4B5E,IAA5B,CAAiC,UAAA6E,GAAG,EAAI;AACtC,oBAAI9B,GAAG,GAAGK,OAAK,CAACI,GAAD,CAAf;AACAhI,gBAAAA,KAAK,CAAC6C,KAAN,CAAY0E,GAAZ,EAAiB8B,GAAjB,GAAuBA,GAAvB;AACArJ,gBAAAA,KAAK,CAAC6C,KAAN,CAAY0E,GAAZ,EAAiBhG,MAAjB,aAA6B1B,IAAI,CAACwM,UAAL,CAAgBnL,KAAhB,CAAsB4I,KAAtB,CAA4B,GAA5B,EAAiCG,IAAjC,CAAsC,GAAtC,CAA7B;AACAjC,gBAAAA,GAAC;;AACD,oBAAGA,GAAC,IAAIJ,OAAK,CAACvB,MAAd,EAAqB;AACnBsC,kBAAAA,OAAO,CAAC+D,OAAR,CAAgBnL,MAAhB,GAAyBvB,KAAK,CAAC6C,KAAN,CAAY,CAAZ,EAAetB,MAAxC;AACAoH,kBAAAA,OAAO,CAAC+D,OAAR,CAAgBrD,GAAhB,GAAsBrJ,KAAK,CAAC6C,KAAN,CAAY,CAAZ,EAAewG,GAArC;;AACA,sBAAGrB,GAAC,IAAItD,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BhE,MAArC,EAA4C;AAC1C,wBAAMlC,OAAK,GAAGxE,QAAQ,CAACyE,QAAT,GAAoBC,GAApB,WAA2BxE,IAAI,CAACuK,MAAhC,EAAd;;AACAjG,oBAAAA,OAAK,CAACG,KAAN,WAAezE,IAAI,CAACwM,UAAL,CAAgB/K,EAA/B,GAAqCiD,GAArC,CAAyCoE,OAAzC;;AACA3I,oBAAAA,KAAK,CAACI,WAAN,GAAoB,KAApB;AACA,wBAAMqF,UAAO,GAAG;AACd,yBAAG,eADW;AAEd,yBAAG;AAFW,qBAAhB;;AAIA,oBAAA,MAAI,CAAChB,MAAL,CAAY,eAAZ,EAA6BgB,UAA7B;AACD;AACF;AACF,eAnBD;AAoBD,aAxCD;AAyCD,WA1CD;AA2CD,SA5CD,MA4CK;AACH,cAAIkD,SAAO,GAAG;AACZ4D,YAAAA,SAAS,EAAE1M,IAAI,CAACwM,UAAL,CAAgBlL,MADf;AAEZqL,YAAAA,SAAS,EAAE3M,IAAI,CAACwM,UAAL,CAAgB9K,MAFf;AAGZkL,YAAAA,QAAQ,EAAE5M,IAAI,CAACwM,UAAL,CAAgBnL,KAHd;AAIZoL,YAAAA,KAAK,EAAEzM,IAAI,CAACwM,UAAL,CAAgB/K,EAJX;AAKZoL,YAAAA,OAAO,EAAE7M,IAAI,CAACwM,UAAL,CAAgB7B;AALb,WAAd;AAQAxC,UAAAA,GAAC;;AACD,cAAGA,GAAC,IAAItD,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BhE,MAArC,EAA4C;AAC1C,gBAAMlC,OAAK,GAAGxE,QAAQ,CAACyE,QAAT,GAAoBC,GAApB,WAA2BxE,IAAI,CAACuK,MAAhC,EAAd;;AACAjG,YAAAA,OAAK,CAACG,KAAN,WAAezE,IAAI,CAACwM,UAAL,CAAgB/K,EAA/B,GAAqCiD,GAArC,CAAyCoE,SAAzC;;AACA3I,YAAAA,KAAK,CAACI,WAAN,GAAoB,KAApB;AACA,gBAAMqF,UAAO,GAAG;AACd,iBAAG,eADW;AAEd,iBAAG;AAFW,aAAhB;AAIA,iBAAKhB,MAAL,CAAY,eAAZ,EAA6BgB,UAA7B;AACD;AACF;AACF,OAnFK,MAmFA,IAAG5F,IAAI,CAACuK,MAAL,KAAgB,YAAnB,EAAgC;AAEpCpK,QAAAA,KAAK,CAAC6C,KAAN,GAAc,EAAd;;AAEA,YAAGhD,IAAI,CAACwK,QAAL,CAAc,UAAd,MAA8BnH,SAAjC,EAA2C;AACzClD,UAAAA,KAAK,CAAC6C,KAAN,CAAY,CAAZ,IAAiBhD,IAAI,CAAC8M,QAAL,CAActC,QAAd,CAAuBG,KAAxC;AACD;;AAED,YAAG3K,IAAI,CAACwK,QAAL,CAAc,UAAd,MAA8BnH,SAAjC,EAA2C;AACzClD,UAAAA,KAAK,CAAC6C,KAAN,CAAY,CAAZ,IAAiBhD,IAAI,CAAC8M,QAAL,CAActC,QAAd,CAAuBuC,EAAxC;AACD;;AAED,YAAIjG,YAAU,GAAG,EAAjB;AACA,YAAIgB,YAAU,GAAG,EAAjB;AACA,YAAIC,OAAK,GAAG,EAAZ;AACA,YAAIC,MAAI,GAAG,EAAX;AACA,YAAIzB,IAAC,GAAG,CAAR;AACA,YAAI4B,GAAC,GAAG,CAAR;AACA,YAAIF,GAAC,GAAG,CAAR;AAEApD,QAAAA,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BrD,OAA7B,CAAqC,UAAAC,OAAO,EAAI;AAC9CN,UAAAA,YAAU,GAAEhH,QAAQ,CAAC6G,OAAT,GAAmBnC,GAAnB,YAA2BxE,IAAI,CAACuK,MAAhC,cAA0CvK,IAAI,CAAC8M,QAAL,CAAcrL,EAAxD,cAA8DoD,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAAC8M,QAAL,CAActC,QAA5B,EAAsCjE,IAAtC,EAAyC7E,MAAvG,EAAZ;AACAsG,UAAAA,MAAI,WAAIZ,OAAO,CAAC3F,EAAZ,EAAJ,GAAwBqF,YAAU,CAACsB,GAAX,CAAehB,OAAf,CAAxB;AACAb,UAAAA,IAAC;AACF,SAJD;;AAMA,YAAG1B,MAAM,CAACC,MAAP,CAAckD,MAAd,EAAoBxB,MAApB,KAA+B,CAAlC,EAAoC;AAClC3B,UAAAA,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BrD,OAA7B,CAAqC,UAAAC,OAAO,EAAI;AAC9CY,YAAAA,MAAI,WAAIZ,OAAO,CAAC3F,EAAZ,EAAJ,CAAsB4G,EAAtB,CAAyB,eAAzB,EAA0C,UAAAC,QAAQ,EAAI;AACpDR,cAAAA,YAAU,CAACQ,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAA3B,CAAV,GAA4C6G,QAAQ,CAACG,gBAAT,GAA4BH,QAAQ,CAACI,UAAtC,GAAoD,GAA/F;AACAvI,cAAAA,KAAK,CAAC6C,KAAN,CAAYsF,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAAtC,EAA0CkH,gBAA1C,GAA6Db,YAAU,CAACQ,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAA3B,CAAvE;;AACA,kBAAGtB,KAAK,CAAC6C,KAAN,CAAYsF,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAAtC,EAA0CkH,gBAA1C,KAA+D,GAA/D,IAAsEZ,OAAK,CAACvB,MAAN,GAAe3B,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BhE,MAArH,EAA4H;AAC1HuB,gBAAAA,OAAK,CAACa,IAAN,CAAWN,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAArC;AACD;AACF,aAND,EAMG,UAAAoH,KAAK,EAAI;AACVvB,cAAAA,OAAO,CAACC,GAAR,CAAYsB,KAAK,CAAC5C,OAAlB;AACD,aARD,EAQG,YAAK;AAEN,kBAAI6C,OAAO,GAAG;AACZmE,gBAAAA,OAAO,EAAEjN,IAAI,CAAC8M,QAAL,CAAcI,IADX;AAEZC,gBAAAA,OAAO,EAAE,EAFG;AAGZC,gBAAAA,OAAO,EAAEpN,IAAI,CAAC8M,QAAL,CAAcO,EAHX;AAIZC,gBAAAA,WAAW,EAAEtN,IAAI,CAAC8M,QAAL,CAAcxL,MAJf;AAKZiM,gBAAAA,sBAAsB,EAAEvN,IAAI,CAAC8M,QAAL,CAAcU,UAL1B;AAMZC,gBAAAA,SAAS,EAAE,EANC;AAOZT,gBAAAA,OAAO,EAAEhN,IAAI,CAAC8M,QAAL,CAAcrL,EAPX;AAQZiM,gBAAAA,WAAW,EAAE1N,IAAI,CAAC8M,QAAL,CAAcpL,MARf;AASZiM,gBAAAA,cAAc,EAAC3N,IAAI,CAAC8M,QAAL,CAAcc;AATjB,eAAd;AAYA,kBAAI9G,UAAU,GAAEhH,QAAQ,CAAC6G,OAAT,GAAmBnC,GAAnB,YAA2BxE,IAAI,CAACuK,MAAhC,cAA0CvK,IAAI,CAAC8M,QAAL,CAAcrL,EAAxD,cAA8DoD,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAAC8M,QAAL,CAActC,QAA5B,EAAsCzC,OAAK,CAACE,GAAD,CAA3C,EAAgDvG,MAA9G,EAAhB;AAEAoF,cAAAA,UAAU,CAACyC,cAAX,GAA4B5E,IAA5B,CAAiC,UAAA6E,GAAG,EAAI;AACtC,oBAAI9B,GAAG,GAAGK,OAAK,CAACI,GAAD,CAAf;;AACA,oBAAGT,GAAG,KAAK,CAAX,EAAa;AACXvH,kBAAAA,KAAK,CAAC6C,KAAN,CAAY0E,GAAZ,EAAiB8B,GAAjB,GAAuBA,GAAvB;AACArJ,kBAAAA,KAAK,CAAC6C,KAAN,CAAY0E,GAAZ,EAAiBhG,MAAjB,aAA6B1B,IAAI,CAAC8M,QAAL,CAAcrL,EAA3C;AACD,iBAHD,MAGK;AACHtB,kBAAAA,KAAK,CAAC6C,KAAN,CAAY0E,GAAZ,EAAiB8B,GAAjB,GAAuBA,GAAvB;AACArJ,kBAAAA,KAAK,CAAC6C,KAAN,CAAY0E,GAAZ,EAAiBhG,MAAjB,iBAAiC1B,IAAI,CAAC8M,QAAL,CAAcrL,EAA/C;AACD;;AACD0G,gBAAAA,GAAC;;AACD,oBAAGA,GAAC,IAAItD,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BhE,MAArC,EAA4C;AAC1CsC,kBAAAA,OAAO,CAAC2E,SAAR,CAAkB/L,MAAlB,GAA2BvB,KAAK,CAAC6C,KAAN,CAAY,CAAZ,EAAetB,MAA1C;AACAoH,kBAAAA,OAAO,CAAC2E,SAAR,CAAkBjE,GAAlB,GAAwBrJ,KAAK,CAAC6C,KAAN,CAAY,CAAZ,EAAewG,GAAvC;AACAV,kBAAAA,OAAO,CAACqE,OAAR,CAAgBzL,MAAhB,GAAyBvB,KAAK,CAAC6C,KAAN,CAAY,CAAZ,EAAetB,MAAxC;AACAoH,kBAAAA,OAAO,CAACqE,OAAR,CAAgB3D,GAAhB,GAAsBrJ,KAAK,CAAC6C,KAAN,CAAY,CAAZ,EAAewG,GAArC;;AAEA,sBAAGrB,GAAC,IAAItD,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BhE,MAArC,EAA4C;AAC1C,wBAAMlC,OAAK,GAAGxE,QAAQ,CAACyE,QAAT,GAAoBC,GAApB,WAA2BxE,IAAI,CAACuK,MAAhC,EAAd;;AACAjG,oBAAAA,OAAK,CAACG,KAAN,WAAezE,IAAI,CAAC8M,QAAL,CAAcrL,EAA7B,GAAmCiD,GAAnC,CAAuCoE,OAAvC;;AACA3I,oBAAAA,KAAK,CAACI,WAAN,GAAoB,KAApB;AACA,wBAAMqF,UAAO,GAAG;AACd,yBAAG,eADW;AAEd,yBAAG;AAFW,qBAAhB;;AAIA,oBAAA,MAAI,CAAChB,MAAL,CAAY,eAAZ,EAA6BgB,UAA7B;AACD;AACF;AACF,eA3BD;AA4BAqC,cAAAA,GAAC;AACF,aArDD;AAsDD,WAvDD;AAwDD,SAzDD,MAyDK;AAEH,cAAIa,SAAO,GAAG;AACZmE,YAAAA,OAAO,EAAEjN,IAAI,CAAC8M,QAAL,CAAcI,IADX;AAEZC,YAAAA,OAAO,EAAE,EAFG;AAGZC,YAAAA,OAAO,EAAEpN,IAAI,CAAC8M,QAAL,CAAcO,EAHX;AAIZC,YAAAA,WAAW,EAAEtN,IAAI,CAAC8M,QAAL,CAAcxL,MAJf;AAKZiM,YAAAA,sBAAsB,EAAEvN,IAAI,CAAC8M,QAAL,CAAcU,UAL1B;AAMZC,YAAAA,SAAS,EAAE,EANC;AAOZT,YAAAA,OAAO,EAAEhN,IAAI,CAAC8M,QAAL,CAAcrL,EAPX;AAQZiM,YAAAA,WAAW,EAAE1N,IAAI,CAAC8M,QAAL,CAAcpL,MARf;AASZiM,YAAAA,cAAc,EAAC3N,IAAI,CAAC8M,QAAL,CAAcc;AATjB,WAAd;AAYAzF,UAAAA,GAAC;;AACD,cAAGA,GAAC,IAAItD,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BhE,MAArC,EAA4C;AAC1C,gBAAMlC,QAAK,GAAGxE,QAAQ,CAACyE,QAAT,GAAoBC,GAApB,WAA2BxE,IAAI,CAACuK,MAAhC,EAAd;;AACAjG,YAAAA,QAAK,CAACG,KAAN,WAAezE,IAAI,CAAC8M,QAAL,CAAcrL,EAA7B,GAAmCiD,GAAnC,CAAuCoE,SAAvC;;AACA3I,YAAAA,KAAK,CAACI,WAAN,GAAoB,KAApB;AACA,gBAAMqF,UAAO,GAAG;AACd,iBAAG,eADW;AAEd,iBAAG;AAFW,aAAhB;AAIA,iBAAKhB,MAAL,CAAY,eAAZ,EAA6BgB,UAA7B;AACD;AACF;AACF,OA7GK,MA6GA,IAAG5F,IAAI,CAACuK,MAAL,KAAgB,SAAnB,EAA6B;AAEjCpK,QAAAA,KAAK,CAAC6C,KAAN,GAAc,EAAd;;AAEA,aAAI,IAAI6K,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGhJ,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAAC8N,MAAL,CAAYtD,QAA1B,EAAoChE,MAAvD,EAA+DqH,CAAC,EAAhE,EAAmE;AACjE,cAAGhJ,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAAC8N,MAAL,CAAYtD,QAA1B,EAAoCqD,CAApC,EAAuCpM,EAAvC,KAA8C4B,SAAjD,EAA2D;AACzDlD,YAAAA,KAAK,CAAC6C,KAAN,CAAY6B,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAAC8N,MAAL,CAAYtD,QAA1B,EAAoCqD,CAApC,EAAuCpM,EAAnD,IAAyDoD,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAAC8N,MAAL,CAAYtD,QAA1B,EAAoCqD,CAApC,CAAzD;AACD,WAFD,MAEK;AACH1N,YAAAA,KAAK,CAAC6C,KAAN,CAAY6K,CAAZ,IAAiB,EAAjB;AACD;AACF;;AAED,YAAI/G,YAAU,GAAG,EAAjB;AACA,YAAIgB,YAAU,GAAG,EAAjB;AACA,YAAIC,OAAK,GAAG,EAAZ;AACA,YAAIC,MAAI,GAAG,EAAX;AACA,YAAIzB,IAAC,GAAG,CAAR;AACA,YAAI4B,GAAC,GAAG,CAAR;AACA,YAAIF,GAAC,GAAG,CAAR;AAEApD,QAAAA,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BrD,OAA7B,CAAqC,UAAAC,OAAO,EAAI;AAC9CN,UAAAA,YAAU,GAAEhH,QAAQ,CAAC6G,OAAT,GAAmBnC,GAAnB,YAA2BxE,IAAI,CAACuK,MAAhC,cAA0CvK,IAAI,CAAC8N,MAAL,CAAYrM,EAAtD,cAA4DoD,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAAC8N,MAAL,CAAYtD,QAA1B,EAAoCpD,OAAO,CAAC3F,EAA5C,EAAgDC,MAA5G,EAAZ;AACAsG,UAAAA,MAAI,WAAIZ,OAAO,CAAC3F,EAAZ,EAAJ,GAAwBqF,YAAU,CAACsB,GAAX,CAAehB,OAAf,CAAxB;AACAb,UAAAA,IAAC;AACF,SAJD;;AAMA,YAAG1B,MAAM,CAACC,MAAP,CAAckD,MAAd,EAAoBxB,MAApB,KAA+B,CAAlC,EAAoC;AAClC3B,UAAAA,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BrD,OAA7B,CAAqC,UAAAC,OAAO,EAAI;AAC9CY,YAAAA,MAAI,WAAIZ,OAAO,CAAC3F,EAAZ,EAAJ,CAAsB4G,EAAtB,CAAyB,eAAzB,EAA0C,UAAAC,QAAQ,EAAI;AACpDR,cAAAA,YAAU,CAACQ,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAA3B,CAAV,GAA4C6G,QAAQ,CAACG,gBAAT,GAA4BH,QAAQ,CAACI,UAAtC,GAAoD,GAA/F;AACAvI,cAAAA,KAAK,CAAC6C,KAAN,CAAYsF,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAAtC,EAA0CkH,gBAA1C,GAA6Db,YAAU,CAACQ,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAA3B,CAAvE;;AACA,kBAAGtB,KAAK,CAAC6C,KAAN,CAAYsF,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAAtC,EAA0CkH,gBAA1C,KAA+D,GAA/D,IAAsEZ,OAAK,CAACvB,MAAN,GAAe3B,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BhE,MAArH,EAA4H;AAC1HuB,gBAAAA,OAAK,CAACa,IAAN,CAAWN,QAAQ,CAACN,IAAT,CAAcO,KAAd,CAAoBC,KAApB,CAA0B/G,EAArC;AACD;AACF,aAND,EAMG,UAAAoH,KAAK,EAAI;AACVvB,cAAAA,OAAO,CAACC,GAAR,CAAYsB,KAAK,CAAC5C,OAAlB;AACD,aARD,EAQG,YAAK;AAEN,kBAAI6C,OAAO,GAAG;AACZmE,gBAAAA,OAAO,EAAEjN,IAAI,CAAC8N,MAAL,CAAYrM,EADT;AAEZsM,gBAAAA,WAAW,EAAE/N,IAAI,CAAC8N,MAAL,CAAY5M,MAFb;AAGZ8M,gBAAAA,aAAa,EAAEhO,IAAI,CAAC8N,MAAL,CAAYG,QAHf;AAIZC,gBAAAA,WAAW,EAAElO,IAAI,CAAC8N,MAAL,CAAYxM,MAJb;AAKZ6M,gBAAAA,WAAW,EAAEnO,IAAI,CAAC8N,MAAL,CAAYM,MALb;AAMZC,gBAAAA,gBAAgB,EAAErO,IAAI,CAAC8N,MAAL,CAAY1B,WANlB;AAOZkC,gBAAAA,kBAAkB,EAAEtO,IAAI,CAAC8N,MAAL,CAAYS,MAPpB;AAQZC,gBAAAA,SAAS,EAAE,EARC;AASZC,gBAAAA,QAAQ,EAAEzO,IAAI,CAAC8N,MAAL,CAAYY,QATV;AAUZC,gBAAAA,gBAAgB,EAAE3O,IAAI,CAAC8N,MAAL,CAAYpD,WAVlB;AAWZkE,gBAAAA,WAAW,EAAE5O,IAAI,CAAC8N,MAAL,CAAYpM,MAXb;AAYZmN,gBAAAA,cAAc,EAAE,EAZJ;AAaZC,gBAAAA,eAAe,EAAE;AAbL,eAAd;AAgBA,kBAAIhI,UAAU,GAAEhH,QAAQ,CAAC6G,OAAT,GAAmBnC,GAAnB,YAA2BxE,IAAI,CAACuK,MAAhC,cAA0CvK,IAAI,CAAC8N,MAAL,CAAYrM,EAAtD,cAA4DoD,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAAC8N,MAAL,CAAYtD,QAA1B,YAAuCzC,OAAK,CAACE,GAAD,CAA5C,GAAmDvG,MAA/G,EAAhB;AACAyN,cAAAA,CAAC;AACDrI,cAAAA,UAAU,CAACyC,cAAX,GAA4B5E,IAA5B,CAAiC,UAAA6E,GAAG,EAAI;AACtC,oBAAI9B,GAAG,GAAGK,OAAK,CAACI,GAAD,CAAf;AACAb,gBAAAA,OAAO,CAACC,GAAR,CAAYG,GAAZ;;AACA,qBAAI,IAAIQ,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGrD,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAAC8N,MAAL,CAAYtD,QAA1B,EAAoChE,MAAvD,EAA+D0B,CAAC,EAAhE,EAAmE;AACjE,sBAAGrD,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAAC8N,MAAL,CAAYtD,QAA1B,EAAoCtC,CAApC,EAAuCzG,EAAvC,KAA8C4B,SAA9C,IAA2DqE,GAAG,KAAK7C,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAAC8N,MAAL,CAAYtD,QAA1B,EAAoCtC,CAApC,EAAuCzG,EAA7G,EAAgH;AAC9GtB,oBAAAA,KAAK,CAAC6C,KAAN,CAAY0E,GAAZ,EAAiB8B,GAAjB,GAAuBA,GAAvB;AACArJ,oBAAAA,KAAK,CAAC6C,KAAN,CAAY0E,GAAZ,EAAiBhG,MAAjB,GAA0BmD,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAAC8N,MAAL,CAAYtD,QAA1B,EAAoCtC,CAApC,EAAuCxG,MAAjE;AACD;AACF;;AACDyG,gBAAAA,GAAC;;AACD,oBAAGA,GAAC,IAAItD,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BhE,MAArC,EAA4C;AAC1C,sBAAGrG,KAAK,CAAC6C,KAAN,CAAY,CAAZ,EAAetB,MAAf,KAA0B2B,SAA7B,EAAuC;AACrCyF,oBAAAA,OAAO,CAAC0F,SAAR,GAAoB;AAClB9M,sBAAAA,MAAM,EAAEvB,KAAK,CAAC6C,KAAN,CAAY,CAAZ,EAAetB,MADL;AAElB8H,sBAAAA,GAAG,EAAErJ,KAAK,CAAC6C,KAAN,CAAY,CAAZ,EAAewG;AAFF,qBAApB;AAID,mBALD,MAKK;AACHV,oBAAAA,OAAO,CAAC0F,SAAR,GAAoB,EAApB;AACD;;AAED,sBAAGrO,KAAK,CAAC6C,KAAN,CAAY,CAAZ,EAAetB,MAAf,KAA0B2B,SAA7B,EAAuC;AACrCyF,oBAAAA,OAAO,CAACgG,eAAR,GAA0B;AACxBpN,sBAAAA,MAAM,EAAEvB,KAAK,CAAC6C,KAAN,CAAY,CAAZ,EAAetB,MADC;AAExB8H,sBAAAA,GAAG,EAAErJ,KAAK,CAAC6C,KAAN,CAAY,CAAZ,EAAewG;AAFI,qBAA1B;AAID,mBALD,MAKK;AACHV,oBAAAA,OAAO,CAACgG,eAAR,GAA0B,EAA1B;AACD;;AAED,sBAAG3O,KAAK,CAAC6C,KAAN,CAAY,CAAZ,EAAetB,MAAf,KAA0B2B,SAA7B,EAAuC;AACrCyF,oBAAAA,OAAO,CAAC+F,cAAR,GAAyB;AACvBnN,sBAAAA,MAAM,EAAEvB,KAAK,CAAC6C,KAAN,CAAY,CAAZ,EAAetB,MADA;AAEvB8H,sBAAAA,GAAG,EAAErJ,KAAK,CAAC6C,KAAN,CAAY,CAAZ,EAAewG;AAFG,qBAAzB;AAID,mBALD,MAKK;AACHV,oBAAAA,OAAO,CAAC+F,cAAR,GAAyB,EAAzB;AACD;;AAED,sBAAG1G,GAAC,IAAItD,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BhE,MAArC,EAA4C;AAC1C,wBAAMlC,QAAK,GAAGxE,QAAQ,CAACyE,QAAT,GAAoBC,GAApB,WAA2BxE,IAAI,CAACuK,MAAhC,cAA0CvK,IAAI,CAAC8N,MAAL,CAAYrM,EAAtD,EAAd;;AACA6C,oBAAAA,QAAK,CAACI,GAAN,CAAUoE,OAAV;;AACA3I,oBAAAA,KAAK,CAACI,WAAN,GAAoB,KAApB;AACA,wBAAMqF,UAAO,GAAG;AACd,yBAAG,eADW;AAEd,yBAAG;AAFW,qBAAhB;;AAIA,oBAAA,MAAI,CAAChB,MAAL,CAAY,eAAZ,EAA6BgB,UAA7B;AACD;AACF;AACF,eAjDD;AAkDAqC,cAAAA,GAAC;AACF,aA/ED;AAgFD,WAjFD;AAkFD,SAnFD,MAmFK;AAEH,cAAIa,SAAO,GAAG;AACZmE,YAAAA,OAAO,EAAEjN,IAAI,CAAC8N,MAAL,CAAYrM,EADT;AAEZsM,YAAAA,WAAW,EAAE/N,IAAI,CAAC8N,MAAL,CAAY5M,MAFb;AAGZ8M,YAAAA,aAAa,EAAEhO,IAAI,CAAC8N,MAAL,CAAYG,QAHf;AAIZC,YAAAA,WAAW,EAAElO,IAAI,CAAC8N,MAAL,CAAYxM,MAJb;AAKZ6M,YAAAA,WAAW,EAAEnO,IAAI,CAAC8N,MAAL,CAAYM,MALb;AAMZC,YAAAA,gBAAgB,EAAErO,IAAI,CAAC8N,MAAL,CAAY1B,WANlB;AAOZkC,YAAAA,kBAAkB,EAAEtO,IAAI,CAAC8N,MAAL,CAAYS,MAPpB;AAQZC,YAAAA,SAAS,EAAExO,IAAI,CAAC8N,MAAL,CAAYtD,QAAZ,CAAqBuE,MARpB;AASZN,YAAAA,QAAQ,EAAEzO,IAAI,CAAC8N,MAAL,CAAYY,QATV;AAUZC,YAAAA,gBAAgB,EAAE3O,IAAI,CAAC8N,MAAL,CAAYpD,WAVlB;AAWZkE,YAAAA,WAAW,EAAE5O,IAAI,CAAC8N,MAAL,CAAYpM,MAXb;AAYZmN,YAAAA,cAAc,EAAE7O,IAAI,CAAC8N,MAAL,CAAYtD,QAAZ,CAAqBwE,SAZzB;AAaZF,YAAAA,eAAe,EAAE9O,IAAI,CAAC8N,MAAL,CAAYtD,QAAZ,CAAqByE;AAb1B,WAAd;AAgBA9G,UAAAA,GAAC;;AACD,cAAGA,GAAC,IAAItD,MAAM,CAACC,MAAP,CAAc9E,IAAI,CAACwK,QAAnB,EAA6BhE,MAArC,EAA4C;AAC1C,gBAAMlC,QAAK,GAAGxE,QAAQ,CAACyE,QAAT,GAAoBC,GAApB,WAA2BxE,IAAI,CAACuK,MAAhC,cAA0CvK,IAAI,CAAC8N,MAAL,CAAYrM,EAAtD,EAAd;;AACA6C,YAAAA,QAAK,CAACI,GAAN,CAAUoE,SAAV;;AACA3I,YAAAA,KAAK,CAACI,WAAN,GAAoB,KAApB;AACA,gBAAMqF,UAAO,GAAG;AACd,iBAAG,eADW;AAEd,iBAAG;AAFW,aAAhB;AAIA,iBAAKhB,MAAL,CAAY,eAAZ,EAA6BgB,UAA7B;AACD;AACF;AACF;AACF,KAzkDQ;AA0kDTwJ,IAAAA,aA1kDS,yBA0kDKjP,KA1kDL,EA0kDYoD,KA1kDZ,EA0kDkB;AACzB,UAAGA,KAAK,KAAKF,SAAb,EAAuB;AACrBlD,QAAAA,KAAK,CAACE,aAAN,GAAsB,IAAtB;AACAF,QAAAA,KAAK,CAACM,WAAN,GAAoB,IAApB;AACAN,QAAAA,KAAK,CAAC6C,KAAN,GAAc,EAAd;AACD,OAJD,MAIM,IAAG7C,KAAK,CAAC6C,KAAN,WAAeO,KAAf,OAA4BF,SAA/B,EAAyC;AAC7ClD,QAAAA,KAAK,CAAC6C,KAAN,WAAeO,KAAf,KAA0B,EAA1B;AACD;AACF,KAllDQ;AAmlDT8L,IAAAA,aAnlDS,yBAmlDKlP,KAnlDL,EAmlDW;AAClBA,MAAAA,KAAK,CAACG,QAAN,GAAiB,KAAjB;AACD;AArlDQ,GAlFiB;AAyqD5BgP,EAAAA,OAAO,EAAE;AACPC,IAAAA,OAAO;AAAA,6EAAE,uBAAyB7H,GAAzB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAgB9C,gBAAAA,MAAhB,QAAgBA,MAAhB;AACH4K,gBAAAA,QADG,GACQ,IADR;;AAAA;AAAA,qBAEDA,QAFC;AAAA;AAAA;AAAA;;AAAA;AAIHA,gBAAAA,QAAQ,GAAG,KAAX;AAJG;AAAA,uBAKgBC,KAAK,CAAC,iDAAD,CALrB;;AAAA;AAKGzP,gBAAAA,KALH;AAAA;AAAA,uBAMiBA,KAAI,CAAC0P,IAAL,EANjB;;AAAA;AAMG7O,gBAAAA,KANH;AAOG0C,gBAAAA,KAPH,GAOW;AACZ,qBAAG1C,KADS;AAEZ,qBAAG6G;AAFS,iBAPX;AAWH9C,gBAAAA,MAAM,CAAC,SAAD,EAAYrB,KAAZ,CAAN;AAXG;AAAA;;AAAA;AAAA;AAAA;AAaHoM,gBAAAA,UAAU,CAAC,YAAM;AACfH,kBAAAA,QAAQ,GAAG,IAAX;AACD,iBAFS,EAEP,KAFO,CAAV;;AAbG;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAF;;AAAA;AAAA;AAAA;;AAAA;AAAA;AADA,GAzqDmB;AA8rD5BI,EAAAA,OAAO,EAAE,EA9rDmB;AAgsD5BC,EAAAA,OAAO,EAAE;AACPC,IAAAA,UAAU,EAAE,oBAAA3P,KAAK,EAAI;AACnB,aAAOA,KAAK,CAACc,IAAb;AACD;AAHM;AAhsDmB,CAAf,CAAf","sourcesContent":["import Vue from 'vue'\r\nimport Vuex from 'vuex'\r\nimport firebase, { auth } from 'firebase'\r\nimport { data } from 'jquery'\r\n\r\nVue.use(Vuex)\r\n\r\nexport default new Vuex.Store({\r\n  state: {\r\n    secTitle: 'Dashboard',\r\n    successUpload: null,\r\n    cargarDB: false,\r\n    crearDBVals: false,\r\n    errorUpload: null,\r\n    deletingVal: null,\r\n    loadEdit: false,\r\n    deletingIndex: '',\r\n    actUser: null,\r\n    dbWeb:[],\r\n    dpResponsive: false,\r\n    headerView: 0,\r\n    formtipo: 0,\r\n    user: {\r\n      activo: '',\r\n      apellido: '',\r\n      autori: '',\r\n      cargo: '',\r\n      correo: '',\r\n      correoVeri: '',\r\n      fotoUrl: '',\r\n      id: '',\r\n      nombre: '',\r\n      telefono: '',\r\n      accion: '',\r\n    },\r\n    refUser: {},\r\n    createContent:{\r\n      formUpload: {\r\n        titulo: '',\r\n        info: '',\r\n        prev: '',\r\n        fecha: '',\r\n        id: '',\r\n        seccion: 'Seleccione una opción',\r\n        images: [],\r\n        tipo: false,\r\n      },\r\n    },\r\n    editContent:{\r\n      formUpload: {\r\n        titulo: '',\r\n        info: '',\r\n        prev: '',\r\n        fecha: '',\r\n        id: '',\r\n        seccion: '',\r\n        images: [],\r\n        tipo: false,\r\n        uploadImages: false,\r\n        uploadDataBase: false,\r\n      },\r\n    },\r\n    users:{\r\n      userRefer: false,\r\n      createUser:{\r\n        formUpload: {\r\n          activo: '',\r\n          apellido: '',\r\n          cargo: '',\r\n          correo: '',\r\n          correoVeri: '',\r\n          fotoUrl: '',\r\n          id: '',\r\n          nombre: '',\r\n          telefono: '',\r\n          create: false,\r\n          pass: '',\r\n        },\r\n      },\r\n    },\r\n    deleteContent:{\r\n      formUpload: {\r\n        id: '',\r\n        tipo: false,\r\n      },\r\n    },\r\n    dbImg: [],\r\n    dbFiles: [],\r\n  },\r\n  mutations: {\r\n    dataWeb(state, baseDatos){\r\n      state.dbWeb = baseDatos[0]\r\n      if(baseDatos[1] !== undefined){\r\n        baseDatos[1] = true;\r\n      }\r\n    },\r\n    changeSecTitle(state, value){\r\n      state.secTitle = value\r\n    },\r\n    setUser(state, user){\r\n      state.users.userRefer = false;\r\n      \r\n      state.user = {\r\n        activo: user.activo,\r\n        apellido: user.apellido,\r\n        autori: user.autori,\r\n        cargo: user.cargo,\r\n        correo: user.correo,\r\n        correoVeri: user.correoVeri,\r\n        fotoUrl: user.fotoUrl,\r\n        id: user.id,\r\n        nombre: user.nombre,\r\n        telefono: user.telefono,\r\n        accion: user.accion,\r\n      }\r\n\r\n      state.refUser = {\r\n        activo: user.activo,\r\n        apellido: user.apellido,\r\n        autori: user.autori,\r\n        cargo: user.cargo,\r\n        correo: user.correo,\r\n        correoVeri: user.correoVeri,\r\n        fotoUrl: user.fotoUrl,\r\n        id: user.id,\r\n        nombre: user.nombre,\r\n        telefono: user.telefono,\r\n        accion: user.accion,\r\n      }\r\n    },\r\n    dbUserVal(state, value){\r\n      const valuesRef = {\r\n        user_activo: true,\r\n        user_apellido: value.apellido,\r\n        user_autori: value.autori,\r\n        user_cargo: value.cargo,\r\n        user_correo: value.correo,\r\n        user_correoVeri: value.correoVeri,\r\n        user_fotoUrl: `${value.fotoUrl}`,\r\n        user_id: value.id,\r\n        user_nombre: value.nombre,\r\n        user_telefono: `${value.telefono}`,\r\n        user_accion: `${value.accion}`,\r\n      }\r\n      const dbRef = firebase.database().ref('Usuarios');\r\n      dbRef.child(valuesRef.user_id).set(valuesRef).then(()=>{\r\n        this.commit('setUser', Object.values(valuesRef));\r\n      })\r\n    },\r\n    createUser(state, value){\r\n      state.users.userRefer = true;\r\n      const config = {\r\n        apiKey: \"AIzaSyCpsNVtsACCeS-amNprGUh0vGOE-SD9y5Q\",\r\n        authDomain: \"web-database-66842.firebaseapp.com\",\r\n        databaseURL: \"https://web-database-66842.firebaseio.com\",\r\n      }\r\n      const secondaryApp = firebase.initializeApp(config, \"Secondary\");\r\n      \r\n      secondaryApp.auth().createUserWithEmailAndPassword(state.users.createUser.formUpload.correo, state.users.createUser.formUpload.pass).then(user => {\r\n          const valuesRef = {\r\n            correo: user.user.email,\r\n            correoVeri: user.user.emailVerified,\r\n            nombre: user.user.displayName,\r\n            apellido: '',\r\n            autori: '',\r\n            fotoUrl: '',\r\n            telefono: '',\r\n            cargo: '',\r\n            id: user.user.uid,\r\n            activo: '',\r\n            accion: '',\r\n          }\r\n          secondaryApp.auth().signOut();\r\n          secondaryApp.delete()\r\n          const success = {\r\n            0: 'successUpload',\r\n            1: 'Se ha creado exitosamente'\r\n          };\r\n          this.commit('successAdvise', success);\r\n          const valuesDb = {\r\n            user_correo: user.user.email,\r\n            user_correoVeri: user.user.emailVerified,\r\n            user_nombre: user.user.displayName,\r\n            user_apellido: '',\r\n            user_autori: '',\r\n            user_fotoUrl: '',\r\n            user_telefono: '',\r\n            user_cargo: '',\r\n            user_id: user.user.uid,\r\n            user_activo: '',\r\n            user_accion: '',\r\n          }\r\n          this.commit('dbUserVal', valuesRef);\r\n          state.dbWeb.Usuarios[`${valuesDb.id}`] = valuesDb;\r\n        }).catch(err => {\r\n          state.users.userRefer = false;\r\n          secondaryApp.delete();\r\n          if(err.message === 'The email address is already in use by another account.'){\r\n            const success = {\r\n              0: 'errorUpload',\r\n              1: 'El correo ya está en uso'\r\n            };\r\n            this.commit('successAdvise', success);\r\n          }\r\n        })\r\n    },\r\n    updateUser(state, value){\r\n      if(value.tipo === '1'){\r\n        const valuesRef = {\r\n          user_id: value.id,\r\n          user_correo: value.correo,\r\n          user_correoVeri: value.correoVeri,\r\n          user_accion: value.accion,\r\n          user_telefono: value.telefono,\r\n          user_nombre: value.nombre,\r\n          user_apellido: value.apellido,\r\n          user_activo: value.activo,\r\n          user_fotoUrl: value.fotoUrl,\r\n          user_autori: value.autori,\r\n          user_cargo: value.cargo,\r\n        }\r\n\r\n        const dbRef = firebase.database().ref('Usuarios');\r\n        dbRef.child(valuesRef.user_id).set(valuesRef).then(()=>{\r\n          // Aqui debo poner para quitar el cargador\r\n          this.commit('setUser', value);\r\n          state.actUser = null;\r\n          const success = {\r\n            0: 'successUpload',\r\n            1: 'Se ha actualizado exitosamente'\r\n          };\r\n          this.commit('successAdvise', success);\r\n        })\r\n      }else{\r\n        const user = firebase.auth().currentUser;\r\n        if(user){\r\n          // Aqui debo poner el activador para el cargador\r\n          \r\n          user.updateProfile({\r\n            displayName: value.nombre,\r\n            email: value.correo,\r\n            phoneNumber: value.telefono,\r\n          }).then(() =>{\r\n            const valuesRef = {\r\n              user_correo: value.correo,\r\n              user_correoVeri: value.correoVeri,\r\n              user_nombre: value.nombre,\r\n              user_apellido: value.apellido,\r\n              user_autori: value.autori,\r\n              user_fotoUrl: value.fotoUrl,\r\n              user_telefono: value.telefono,\r\n              user_cargo: value.cargo,\r\n              user_id: value.id,\r\n              user_activo: value.activo,\r\n              user_accion: value.accion,\r\n            }\r\n            const dbRef = firebase.database().ref('Usuarios');\r\n            dbRef.child(value.id).set(valuesRef).then(()=>{\r\n              // Aqui debo poner para quitar el cargador\r\n              this.commit('setUser', value);\r\n              state.actUser = null;\r\n              const success = {\r\n                0: 'successUpload',\r\n                1: 'Se ha actualizado exitosamente'\r\n              };\r\n              this.commit('successAdvise', success);\r\n            })\r\n          })\r\n        }\r\n      }\r\n    },\r\n    isUserDiff(state, value){\r\n      if(value.tipo === '0'){\r\n        for(let i = 0; i < Object.values(state.user).length; i++){\r\n          if(Object.values(state.user)[i] !== Object.values(state.refUser)[i]){\r\n            state.actUser = true;\r\n            return this.commit('updateUser', state.user);\r\n          }\r\n        }\r\n      }else{\r\n        state.actUser = true;\r\n        this.commit('updateUser', value);\r\n      }\r\n    },\r\n    deleteItem(state, value){\r\n      state.deletingVal = true;\r\n      state.deletingIndex = value.index;\r\n\r\n      if(value.storage === false){\r\n        firebase.database().ref(`${value.ref}/${value.idDb}`).remove().then(()=>{\r\n          state.deletingVal = false;\r\n          state.deletingIndex = '';\r\n          const success = {\r\n            0: 'successUpload',\r\n            1: 'Se ha eliminado exitosamente'\r\n          }\r\n          this.commit('successAdvise', success)\r\n          }\r\n        )\r\n      }else if(value.storage === true){\r\n        try{\r\n          let storageRef = firebase.storage().ref(`/${value.ref}/${value.idSt}`)\r\n          storageRef.listAll().then(prom => {\r\n            if(prom.items.length !== 0){\r\n              prom.items.forEach(element => {\r\n                storageRef.child(element.name).delete().then( err => {\r\n                  if(err !== undefined){\r\n                    console.log(err)\r\n                  }else{\r\n                    firebase.database().ref(`${value.ref}/${value.idDb}`).remove().then(()=>{\r\n                      state.deletingVal = false;\r\n                      state.deletingIndex = '';\r\n                      const success = {\r\n                        0: 'successUpload',\r\n                        1: 'Se ha eliminado exitosamente'\r\n                      }\r\n                      this.commit('successAdvise', success)\r\n                      }\r\n                    )\r\n                  }\r\n                })\r\n              });\r\n            }else{\r\n              firebase.database().ref(`${value.ref}/${value.idDb}`).remove().then(()=>{\r\n                state.deletingVal = false;\r\n                state.deletingIndex = '';\r\n                const success = {\r\n                  0: 'successUpload',\r\n                  1: 'Se ha eliminado exitosamente'\r\n                }\r\n                this.commit('successAdvise', success)\r\n                }\r\n              )\r\n            }\r\n          })\r\n        }catch(err){console.log(err)}\r\n      }\r\n\r\n    },\r\n    deletedEl(state, value){\r\n      if(value[0] === 0){\r\n        state.deletingVal = value[1];\r\n      }\r\n      if(value[0] === 1){\r\n        state.deletingIndex = value[1];\r\n      }\r\n    },\r\n    resetContentValues(state, val){\r\n      if(val === 0){\r\n        state.createContent.formUpload.titulo = '';\r\n        state.createContent.formUpload.info = '';\r\n        state.createContent.formUpload.prev = '';\r\n        state.createContent.formUpload.images = [];\r\n        state.createContent.formUpload.fecha = '';\r\n        state.createContent.formUpload.id = '';\r\n        state.createContent.formUpload.seccion = 'Seleccione una opción';\r\n      }else if(val === 1){\r\n        state.editContent.formUpload.titulo = '';\r\n        state.editContent.formUpload.info = '';\r\n        state.editContent.formUpload.prev = '';\r\n        state.editContent.formUpload.images = [];\r\n        state.editContent.formUpload.fecha = '';\r\n        state.editContent.formUpload.id = '';\r\n        state.editContent.formUpload.seccion = 'Todas las secciones';\r\n      }else if(val === 3){\r\n        state.users = {\r\n          userRefer: false,\r\n          createUser:{\r\n            formUpload: {\r\n              activo: '',\r\n              apellido: '',\r\n              cargo: '',\r\n              correo: '',\r\n              correoVeri: '',\r\n              fotoUrl: '',\r\n              id: '',\r\n              nombre: '',\r\n              telefono: '',\r\n              create: false,\r\n              pass: '',\r\n            },\r\n          },\r\n        };\r\n      }\r\n    },\r\n    successAdvise(state, data){\r\n      state[`${data[0]}`] = data[1];\r\n    },\r\n    handleUpload(state, files){\r\n\r\n      let storageRef = [];\r\n      let percentage = [];\r\n      let order = [];\r\n      let task = {};\r\n      let i = 0;\r\n      let j = 0;\r\n      let m = 0;\r\n      let n = 0;\r\n\r\n      if(state.createContent.formUpload.tipo === true){\r\n        files.forEach(element => {\r\n          storageRef= firebase.storage().ref(`/imagenes/noticias/${state.createContent.formUpload.id}/foto${element.id}`);\r\n          task[i] = storageRef.put(element);\r\n          i++;\r\n        })\r\n  \r\n        for(let i = 0; i < files.length; i++){\r\n          task[i].on('state_changed', snapshot => {\r\n            percentage[snapshot.task.blob_.data_.id] = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n            state.createContent.formUpload.images[snapshot.task.blob_.data_.id].uploadPercentage = percentage[snapshot.task.blob_.data_.id];\r\n            m ++;\r\n            if(state.createContent.formUpload.images[snapshot.task.blob_.data_.id].uploadPercentage === 100 && order.length < files.length){\r\n              order.push(snapshot.task.blob_.data_.id)\r\n            }\r\n          }, error => {\r\n            console.log(error.message);\r\n          }, () =>{\r\n            let dataRef = {\r\n              noti_titulo: state.createContent.formUpload.titulo,\r\n              noti_info: state.createContent.formUpload.info,\r\n              noti_fecha: state.createContent.formUpload.fecha,\r\n              noti_id: state.createContent.formUpload.id,\r\n              noti_prev: state.createContent.formUpload.prev,\r\n              noti_publicar: true,\r\n              noti_seccion: state.createContent.formUpload.seccion,\r\n              noti_imagenes: [],\r\n            }\r\n            let storageRef = firebase.storage().ref(`/imagenes/noticias/${state.createContent.formUpload.id}/foto${order[j]}`);\r\n            storageRef.getDownloadURL().then(url => {\r\n              let val = order[n];\r\n              state.createContent.formUpload.images[val].url = url;\r\n              state.createContent.formUpload.images[val].name = `foto${val}`;\r\n              n ++;\r\n              if(n >= state.createContent.formUpload.images.length){\r\n                n = 0;\r\n                state.createContent.formUpload.images.forEach(element => {\r\n                  dataRef.noti_imagenes.push({});\r\n                  dataRef.noti_imagenes[n].nombre = state.createContent.formUpload.images[n].name;\r\n                  dataRef.noti_imagenes[n].url = state.createContent.formUpload.images[n].url;\r\n                  n ++;\r\n                  if(n >= state.createContent.formUpload.images.length){\r\n                    const dbRef = firebase.database().ref('Noticias');\r\n                    dbRef.child(state.createContent.formUpload.id).set(dataRef);\r\n                    state.createContent.formUpload.tipo = false;\r\n                    const success = {\r\n                      0: 'successUpload',\r\n                      1: 'Se ha creado exitosamente'\r\n                    }\r\n                    this.commit('successAdvise', success)\r\n                  }\r\n                })\r\n              }\r\n            })\r\n            j ++;\r\n          })\r\n        }\r\n      }else if(state.editContent.formUpload.tipo === true){\r\n\r\n        if(state.editContent.formUpload.uploadImages === true){\r\n          files.forEach(element => {\r\n            storageRef= firebase.storage().ref(`/imagenes/noticias/${state.editContent.formUpload.id}/foto${element.id}`);\r\n            task[i] = storageRef.put(element);\r\n            i++;\r\n          })\r\n\r\n          for(let i = 0; i < files.length; i++){\r\n            task[i].on('state_changed', snapshot => {\r\n              percentage[snapshot.task.blob_.data_.id] = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n              state.editContent.formUpload.images[snapshot.task.blob_.data_.id].uploadPercentage = percentage[snapshot.task.blob_.data_.id];;\r\n              m ++;\r\n              if(state.editContent.formUpload.images[snapshot.task.blob_.data_.id].uploadPercentage === 100 && order.length < files.length){\r\n                order.push(snapshot.task.blob_.data_.id)\r\n              }\r\n            }, error => {\r\n              console.log(error.message);\r\n            }, () =>{\r\n              let dataRef = {\r\n                noti_titulo: state.editContent.formUpload.titulo,\r\n                noti_info: state.editContent.formUpload.info,\r\n                noti_fecha: state.editContent.formUpload.fecha,\r\n                noti_id: state.editContent.formUpload.id,\r\n                noti_prev: state.editContent.formUpload.prev,\r\n                noti_publicar: true,\r\n                noti_seccion: state.editContent.formUpload.seccion,\r\n                noti_imagenes: [],\r\n              }\r\n              let storageRef = firebase.storage().ref(`/imagenes/noticias/${state.editContent.formUpload.id}/foto${order[j]}`);\r\n              storageRef.getDownloadURL().then(url => {\r\n                let val = order[n];\r\n                state.editContent.formUpload.images[val].url = url;\r\n                state.editContent.formUpload.images[val].name = `foto${val}`;\r\n                n ++;\r\n                if(n >= state.editContent.formUpload.images.length){\r\n                  n = 0;\r\n                  state.editContent.formUpload.images.forEach(element => {\r\n                    dataRef.noti_imagenes.push({});\r\n                    dataRef.noti_imagenes[n].nombre = state.editContent.formUpload.images[n].name;\r\n                    dataRef.noti_imagenes[n].url = state.editContent.formUpload.images[n].url;\r\n                    n ++;\r\n                    if(n >= state.editContent.formUpload.images.length){\r\n                      const dbRef = firebase.database().ref('Noticias');\r\n                      dbRef.child(state.editContent.formUpload.id).set(dataRef);\r\n                      state.editContent.formUpload.tipo = false;\r\n                      const success = {\r\n                        0: 'successUpload',\r\n                        1: 'Se ha actualizado exitosamente'\r\n                      }\r\n                      this.commit('successAdvise', success)\r\n                    }\r\n                  })\r\n                }\r\n              })\r\n              j ++;\r\n            })\r\n          }\r\n        }else{\r\n          let dataRef = {\r\n            noti_titulo: state.editContent.formUpload.titulo,\r\n            noti_info: state.editContent.formUpload.info,\r\n            noti_fecha: state.editContent.formUpload.fecha,\r\n            noti_id: state.editContent.formUpload.id,\r\n            noti_prev: state.editContent.formUpload.prev,\r\n            noti_publicar: true,\r\n            noti_seccion: state.editContent.formUpload.seccion,\r\n            noti_imagenes: state.editContent.formUpload.images,\r\n          }\r\n          const dbRef = firebase.database().ref('Noticias');\r\n          dbRef.child(state.editContent.formUpload.id).set(dataRef);\r\n          state.editContent.formUpload.tipo = false;\r\n          const success = {\r\n            0: 'successUpload',\r\n            1: 'Se ha actualizado exitosamente'\r\n          }\r\n          this.commit('successAdvise', success)\r\n        }\r\n      }else if(state.deleteContent.formUpload.tipo === true){\r\n        try{\r\n          let storageRef = firebase.storage().ref(`/imagenes/noticias/${state.deleteContent.formUpload.id}`)\r\n          storageRef.listAll().then(prom => {\r\n            prom.items.forEach(element => {\r\n              storageRef.child(element.name).delete().then( err => {\r\n                if(err !== undefined){\r\n                  console.log(err)\r\n                }else{\r\n                  firebase.database().ref(`Noticias/${state.deleteContent.formUpload.id}`).remove().then(()=>{\r\n                      state.deletingVal = false;\r\n                      state.deleteContent.formUpload.tipo = false;\r\n                      const success = {\r\n                        0: 'successUpload',\r\n                        1: 'Se ha eliminado exitosamente'\r\n                      }\r\n                      this.commit('successAdvise', success)\r\n                    }\r\n                  )\r\n                }\r\n              })\r\n            });\r\n          })\r\n        }catch(err){console.log(err)}\r\n      }\r\n    },\r\n    filesUpload(state, data){\r\n\r\n      state.formtipo = data[2]\r\n\r\n      if(state.formtipo === 0){\r\n        let d = new Date();\r\n        const miliSec = Date.parse(d);\r\n        let dString = d.toString();\r\n        const splittedDate = dString.split(' ');\r\n        const joinedDate = [];\r\n        for(let i = 1; i < 5; i++){\r\n          joinedDate.push(splittedDate[i]);\r\n        }\r\n        const joined = joinedDate.join('|');\r\n        \r\n        state.createContent.formUpload.tipo = true\r\n        state.createContent.formUpload.fecha = joined;\r\n        state.createContent.formUpload.images = data[0];\r\n        state.createContent.formUpload.id = miliSec;\r\n  \r\n        this.commit('handleUpload', data[1])\r\n      }else if(state.formtipo === 1){\r\n        state.editContent.formUpload.tipo = true;\r\n        state.editContent.formUpload.fecha = data[0].fecha;\r\n        state.editContent.formUpload.images = data[0].imagenes;\r\n        state.editContent.formUpload.id = data[0].id;\r\n        state.editContent.formUpload.titulo = data[0].titulo;\r\n        state.editContent.formUpload.info = data[0].info;\r\n        state.editContent.formUpload.prev = data[0].prev;\r\n        state.editContent.formUpload.seccion = data[0].seccion;\r\n        state.editContent.formUpload.uploadImages = data[3];\r\n        state.editContent.formUpload.uploadDataBase = data[4];\r\n  \r\n        this.commit('handleUpload', data[1])\r\n      }else if(state.formtipo === 2){\r\n        state.deleteContent.formUpload.id = data[0];\r\n        state.deleteContent.formUpload.tipo = true;\r\n        state.deletingVal = true;\r\n        state.deletingIndex = data[3];\r\n\r\n        this.commit('handleUpload', data[1])\r\n      }\r\n      \r\n    },\r\n    crearDB(state, data){\r\n      state.crearDBVals = true;\r\n      if(data.target === 'Juntas'){\r\n        \r\n        if(Object.values(data.archivos).length !== 0){\r\n          for(let i = 0; i < Object.values(data.junta.integrantes).length; i++){\r\n            state.dbImg[i] = [];\r\n            state.dbImg[i] = Object.values(data.junta.integrantes)[i].image;\r\n          }\r\n        }\r\n\r\n        let storageRef = [];\r\n        let percentage = [];\r\n        let order = [];\r\n        let task = {};\r\n        let i = 0;\r\n        let j = 0;\r\n        let n = 0;\r\n\r\n        const dbRef = firebase.database().ref(`${data.target}`);\r\n        const pushdbRef = dbRef.push();\r\n\r\n        let dataRef = {\r\n          junt_id: pushdbRef.key,\r\n        }\r\n\r\n\r\n        Object.values(data.archivos).forEach(element => {\r\n          storageRef= firebase.storage().ref(`/${data.target}/${dataRef.junt_id}/${data.junta.integrantes[`${element.id}`].cargo.split(' ').join('_')}`);\r\n          task[`${element.id}`] = storageRef.put(element);\r\n        })\r\n        \r\n        if(Object.values(task).length !== 0){\r\n          Object.values(data.archivos).forEach(element => {\r\n            task[`${element.id}`].on('state_changed', snapshot => {\r\n              percentage[snapshot.task.blob_.data_.id] = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n              state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage = percentage[snapshot.task.blob_.data_.id];\r\n              if(state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage === 100 && order.length < Object.values(data.archivos).length){\r\n                order.push(snapshot.task.blob_.data_.id)\r\n              }\r\n            }, error => {\r\n              console.log(error.message);\r\n            }, () =>{\r\n  \r\n              dataRef.junt_periodo = `${data.junta.inicio}-${data.junta.fin}`;\r\n              dataRef.junt_activa = data.junta.junta_actual;\r\n              dataRef.junt_integrantes = [];\r\n  \r\n              for(let i = 0; i < Object.values(data.junta.integrantes).length; i++){\r\n                dataRef.junt_integrantes[i] = [];\r\n                dataRef.junt_integrantes[i].juin_cargo = Object.values(data.junta.integrantes)[i].cargo\r\n                dataRef.junt_integrantes[i].juin_nombre = Object.values(data.junta.integrantes)[i].nombre\r\n                dataRef.junt_integrantes[i].juin_apellido = Object.values(data.junta.integrantes)[i].apellido\r\n                dataRef.junt_integrantes[i].juin_correo = Object.values(data.junta.integrantes)[i].correo\r\n                dataRef.junt_integrantes[i].juin_foto = []\r\n                dataRef.junt_integrantes[i].juin_activo = Object.values(data.junta.integrantes)[i].activo\r\n                dataRef.junt_integrantes[i].juin_crear = Object.values(data.junta.integrantes)[i].crear\r\n              }\r\n  \r\n              let storageRef= firebase.storage().ref(`/${data.target}/${dataRef.junt_id}/${data.junta.integrantes[`${order[j]}`].cargo.split(' ').join('_')}`);\r\n              \r\n              storageRef.getDownloadURL().then(url => {\r\n                let val = order[n];\r\n                state.dbImg[val].url = url;\r\n                state.dbImg[val].nombre = `${data.junta.integrantes[`${order[n]}`].cargo.split(' ').join('_')}`;\r\n                n ++;\r\n                if(n >= order.length){\r\n                  i = 0;\r\n                  Object.values(dataRef.junt_integrantes).forEach(element => {\r\n                    if(state.dbImg[i].nombre !== undefined && state.dbImg[i].url !== undefined){\r\n                      element.juin_foto.nombre = state.dbImg[i].nombre;\r\n                      element.juin_foto.url = state.dbImg[i].url;\r\n                    }else{\r\n                      element.juin_foto = \"\";\r\n                    }\r\n                    i ++;\r\n                    if(n >= Object.values(data.archivos).length){\r\n                      pushdbRef.set(dataRef);\r\n                      state.crearDBVals = false;\r\n                      const success = {\r\n                        0: 'successUpload',\r\n                        1: 'Se ha creado exitosamente'\r\n                      }\r\n                      this.commit('successAdvise', success)\r\n                    }\r\n                  })\r\n                }\r\n              })\r\n              j ++;\r\n            })\r\n          })\r\n        }else{\r\n\r\n          dataRef.junt_periodo = `${data.junta.inicio}-${data.junta.fin}`;\r\n          dataRef.junt_activa = data.junta.junta_actual;\r\n          dataRef.junt_integrantes = [];\r\n\r\n          for(let i = 0; i < Object.values(data.junta.integrantes).length; i++){\r\n            dataRef.junt_integrantes[i] = [];\r\n            dataRef.junt_integrantes[i].juin_cargo = Object.values(data.junta.integrantes)[i].cargo\r\n            dataRef.junt_integrantes[i].juin_nombre = Object.values(data.junta.integrantes)[i].nombre\r\n            dataRef.junt_integrantes[i].juin_apellido = Object.values(data.junta.integrantes)[i].apellido\r\n            dataRef.junt_integrantes[i].juin_correo = Object.values(data.junta.integrantes)[i].correo\r\n            dataRef.junt_integrantes[i].juin_foto = Object.values(data.junta.integrantes)[i].image\r\n            dataRef.junt_integrantes[i].juin_activo = Object.values(data.junta.integrantes)[i].activo\r\n            dataRef.junt_integrantes[i].juin_crear = Object.values(data.junta.integrantes)[i].crear\r\n          }\r\n\r\n          pushdbRef.set(dataRef).set(dataRef);\r\n          state.crearDBVals = false;\r\n          const success = {\r\n            0: 'successUpload',\r\n            1: 'Se ha creado exitosamente'\r\n          }\r\n          this.commit('successAdvise', success)\r\n        }\r\n      }else if(data.target === 'Servicios'){\r\n\r\n        if(Object.values(data.archivos).length !== 0){\r\n          state.dbImg = [];\r\n          state.dbImg[0] = data.servicio.image;\r\n        }\r\n\r\n        let storageRef = [];\r\n        let percentage = [];\r\n        let order = [];\r\n        let task = {};\r\n        let n = 0;\r\n\r\n        const dbRef = firebase.database().ref(`${data.target}`);\r\n        const pushdbRef = dbRef.push();\r\n\r\n        let dataRef = {\r\n          serv_id: pushdbRef.key,\r\n        }\r\n\r\n\r\n        Object.values(data.archivos).forEach(element => {\r\n          storageRef= firebase.storage().ref(`/${data.target}/${dataRef.serv_id}/${data.servicio.nombre.split(' ').join('_')}`);\r\n          task[`${element.id}`] = storageRef.put(element);\r\n        })\r\n        \r\n        if(Object.values(task).length !== 0){\r\n          Object.values(data.archivos).forEach(element => {\r\n            task[`${element.id}`].on('state_changed', snapshot => {\r\n              percentage[snapshot.task.blob_.data_.id] = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n              state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage = percentage[snapshot.task.blob_.data_.id];\r\n              if(state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage === 100 && order.length < Object.values(data.archivos).length){\r\n                order.push(snapshot.task.blob_.data_.id)\r\n              }\r\n            }, error => {\r\n              console.log(error.message);\r\n            }, () =>{\r\n\r\n              dataRef = {\r\n                serv_activo: data.servicio.activo,\r\n                serv_cierre: data.servicio.fin,\r\n                serv_contacto: data.servicio.contacto,\r\n                serv_descripcion: data.servicio.descripcion,\r\n                serv_id: pushdbRef.key,\r\n                serv_inicio: data.servicio.inicio,\r\n                serv_nombre: data.servicio.nombre,\r\n                serv_foto: [],\r\n              }\r\n\r\n              let storageRef= firebase.storage().ref(`/${data.target}/${dataRef.serv_id}/${data.servicio.nombre.split(' ').join('_')}`);\r\n              \r\n              storageRef.getDownloadURL().then(url => {\r\n                let val = order[n];\r\n                state.dbImg[val].url = url;\r\n                state.dbImg[val].nombre = `${data.servicio.nombre.split(' ').join('_')}`;\r\n                n ++;\r\n                if(n >= order.length){\r\n                  dataRef.serv_foto.nombre = state.dbImg[0].nombre;\r\n                  dataRef.serv_foto.url = state.dbImg[0].url;\r\n                  if(n >= Object.values(data.archivos).length){\r\n                    pushdbRef.set(dataRef);\r\n                    state.crearDBVals = false;\r\n                    const success = {\r\n                      0: 'successUpload',\r\n                      1: 'Se ha creado exitosamente'\r\n                    }\r\n                    this.commit('successAdvise', success)\r\n                  }\r\n                }\r\n              })\r\n            })\r\n          })\r\n        }else{\r\n          dataRef = {\r\n            serv_activo: data.servicio.activo,\r\n            serv_cierre: data.servicio.fin,\r\n            serv_contacto: data.servicio.contacto,\r\n            serv_descripcion: data.servicio.descripcion,\r\n            serv_id: pushdbRef.key,\r\n            serv_inicio: data.servicio.inicio,\r\n            serv_nombre: data.servicio.nombre,\r\n            serv_foto: data.servicio.image,\r\n          }\r\n\r\n          n++;\r\n          if(n >= Object.values(data.archivos).length){\r\n            pushdbRef.set(dataRef);\r\n            state.crearDBVals = false;\r\n            const success = {\r\n              0: 'successUpload',\r\n              1: 'Se ha creado exitosamente'\r\n            }\r\n            this.commit('successAdvise', success)\r\n          }\r\n        }\r\n      }else if(data.target === 'Gerencia'){\r\n\r\n        if(Object.values(data.archivos).length !== 0){\r\n          state.dbImg = [];\r\n          state.dbImg[0] = data.integrante.image;\r\n        }\r\n\r\n        let storageRef = [];\r\n        let percentage = [];\r\n        let order = [];\r\n        let task = {};\r\n        let n = 0;\r\n\r\n        const dbRef = firebase.database().ref(`${data.target}`);\r\n        const pushdbRef = dbRef.push();\r\n\r\n        let dataRef = {\r\n          gr_id: pushdbRef.key,\r\n        }\r\n\r\n        Object.values(data.archivos).forEach(element => {\r\n          storageRef= firebase.storage().ref(`/${data.target}/${dataRef.gr_id}/${data.integrante.cargo.split(' ').join('_')}`);\r\n          task[`${element.id}`] = storageRef.put(element);\r\n        })\r\n        \r\n        if(Object.values(task).length !== 0){\r\n          Object.values(data.archivos).forEach(element => {\r\n            task[`${element.id}`].on('state_changed', snapshot => {\r\n              percentage[snapshot.task.blob_.data_.id] = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n              state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage = percentage[snapshot.task.blob_.data_.id];\r\n              if(state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage === 100 && order.length < Object.values(data.archivos).length){\r\n                order.push(snapshot.task.blob_.data_.id)\r\n              }\r\n            }, error => {\r\n              console.log(error.message);\r\n            }, () =>{\r\n\r\n              dataRef = {\r\n                gr_correo: data.integrante.correo,\r\n                gr_nombre: data.integrante.nombre,\r\n                gr_cargo: data.integrante.cargo,\r\n                gr_id: pushdbRef.key,\r\n                gr_foto: [],\r\n              }\r\n\r\n              let storageRef= firebase.storage().ref(`/${data.target}/${dataRef.gr_id}/${data.integrante.cargo.split(' ').join('_')}`);\r\n              \r\n              storageRef.getDownloadURL().then(url => {\r\n                let val = order[n];\r\n                state.dbImg[val].url = url;\r\n                state.dbImg[val].nombre = `${data.integrante.cargo.split(' ').join('_')}`;\r\n                n ++;\r\n                if(n >= order.length){\r\n                  dataRef.gr_foto.nombre = state.dbImg[0].nombre;\r\n                  dataRef.gr_foto.url = state.dbImg[0].url;\r\n                  if(n >= Object.values(data.archivos).length){\r\n                    pushdbRef.set(dataRef);\r\n                    state.crearDBVals = false;\r\n                    const success = {\r\n                      0: 'successUpload',\r\n                      1: 'Se ha creado exitosamente'\r\n                    }\r\n                    this.commit('successAdvise', success)\r\n                  }\r\n                }\r\n              })\r\n            })\r\n          })\r\n        }else{\r\n          dataRef = {\r\n            gr_correo: data.integrante.correo,\r\n            gr_nombre: data.integrante.nombre,\r\n            gr_cargo: data.integrante.cargo,\r\n            gr_id: pushdbRef.key,\r\n            gr_foto: data.integrante.image,\r\n          }\r\n\r\n          n++;\r\n          if(n >= Object.values(data.archivos).length){\r\n            pushdbRef.set(dataRef);\r\n            state.crearDBVals = false;\r\n            const success = {\r\n              0: 'successUpload',\r\n              1: 'Se ha creado exitosamente'\r\n            }\r\n            this.commit('successAdvise', success)\r\n          }\r\n        }\r\n      }else if(data.target === 'Profesores'){\r\n        \r\n        state.dbImg = [];\r\n\r\n        if(data.archivos['archivo0'] !== undefined){\r\n          state.dbImg[0] = data.profesor.archivos.image;\r\n        }\r\n\r\n        if(data.archivos['archivo1'] !== undefined){\r\n          state.dbImg[1] = data.profesor.archivos.cv;\r\n        }\r\n\r\n        let storageRef = [];\r\n        let percentage = [];\r\n        let order = [];\r\n        let task = {};\r\n        let i = 0;\r\n        let n = 0;\r\n        let j = 0;\r\n\r\n        const dbRef = firebase.database().ref(`${data.target}`);\r\n        const pushdbRef = dbRef.push();\r\n\r\n        let dataRef = {\r\n          prof_id: pushdbRef.key,\r\n        }\r\n\r\n        Object.values(data.archivos).forEach(element => {\r\n          storageRef= firebase.storage().ref(`/${data.target}/${dataRef.prof_id}/${Object.values(data.profesor.archivos)[i].nombre}`);\r\n          task[`${element.id}`] = storageRef.put(element);\r\n          i++;\r\n        })\r\n        \r\n        if(Object.values(task).length !== 0){\r\n          Object.values(data.archivos).forEach(element => {\r\n            task[`${element.id}`].on('state_changed', snapshot => {\r\n              percentage[snapshot.task.blob_.data_.id] = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n              state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage = percentage[snapshot.task.blob_.data_.id];\r\n              if(state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage === 100 && order.length < Object.values(data.archivos).length){\r\n                order.push(snapshot.task.blob_.data_.id)\r\n              }\r\n            }, error => {\r\n              console.log(error.message);\r\n            }, () =>{\r\n\r\n              dataRef = {\r\n                comi_id: data.profesor.coid,\r\n                prof_cv: [],\r\n                prof_ci: data.profesor.ci,\r\n                prof_correo: data.profesor.correo,\r\n                prof_fechadenacimiento: data.profesor.nacimiento,\r\n                prof_foto: [],\r\n                prof_id: pushdbRef.key,\r\n                prof_nombre: data.profesor.nombre,\r\n                prof_telefonos:data.profesor.telefonos,\r\n              }\r\n              \r\n              let storageRef= firebase.storage().ref(`/${data.target}/${dataRef.prof_id}/${Object.values(data.profesor.archivos)[order[j]].nombre}`);\r\n              \r\n              storageRef.getDownloadURL().then(url => {\r\n                let val = order[n];\r\n                if(val === 0){\r\n                  state.dbImg[val].url = url;\r\n                  state.dbImg[val].nombre = `${data.profesor.id}`;\r\n                }else{\r\n                  state.dbImg[val].url = url;\r\n                  state.dbImg[val].nombre = `c_v_${data.profesor.id}`;\r\n                }\r\n                n ++;\r\n                if(n >= Object.values(data.archivos).length){\r\n                  dataRef.prof_foto.nombre = state.dbImg[0].nombre;\r\n                  dataRef.prof_foto.url = state.dbImg[0].url;\r\n                  dataRef.prof_cv.nombre = state.dbImg[1].nombre;\r\n                  dataRef.prof_cv.url = state.dbImg[1].url;\r\n\r\n                  if(n >= Object.values(data.archivos).length){\r\n                    pushdbRef.set(dataRef);\r\n                    state.crearDBVals = false;\r\n                    const success = {\r\n                      0: 'successUpload',\r\n                      1: 'Se ha creado exitosamente'\r\n                    }\r\n                    this.commit('successAdvise', success)\r\n                  }\r\n                }\r\n              })\r\n              j++;\r\n            })\r\n          })\r\n        }else{\r\n\r\n          dataRef = {\r\n            comi_id: data.profesor.coid,\r\n            prof_cv: [],\r\n            prof_ci: data.profesor.ci,\r\n            prof_correo: data.profesor.correo,\r\n            prof_fechadenacimiento: data.profesor.nacimiento,\r\n            prof_foto: [],\r\n            prof_id: pushdbRef.key,\r\n            prof_nombre: data.profesor.nombre,\r\n            prof_telefonos:data.profesor.telefonos,\r\n          }\r\n\r\n          n++;\r\n          if(n >= Object.values(data.archivos).length){\r\n            pushdbRef.set(dataRef);\r\n            state.crearDBVals = false;\r\n            const success = {\r\n              0: 'successUpload',\r\n              1: 'Se ha creado exitosamente'\r\n            }\r\n            this.commit('successAdvise', success)\r\n          }\r\n        }\r\n      }else if(data.target === 'Comites'){\r\n        \r\n        state.dbImg = [];\r\n\r\n        for(let k = 0; k < Object.values(data.comite.archivos).length; k++){\r\n          if(Object.values(data.comite.archivos)[k].id !== undefined){\r\n            state.dbImg[Object.values(data.comite.archivos)[k].id] = Object.values(data.comite.archivos)[k];\r\n          }else{\r\n            state.dbImg[k] = '';\r\n          }\r\n        }\r\n        \r\n        let storageRef = [];\r\n        let percentage = [];\r\n        let order = [];\r\n        let task = {};\r\n        let i = 0;\r\n        let n = 0;\r\n        let j = 0;\r\n\r\n        const dbRef = firebase.database().ref(`${data.target}`);\r\n        const pushdbRef = dbRef.push();\r\n\r\n        let dataRef = {\r\n          comi_id: pushdbRef.key,\r\n        }\r\n\r\n        Object.values(data.archivos).forEach(element => {\r\n          storageRef= firebase.storage().ref(`/${data.target}/${dataRef.comi_id}/${Object.values(data.comite.archivos)[element.id].nombre}`);\r\n          task[`${element.id}`] = storageRef.put(element);\r\n          i++;\r\n        })\r\n        \r\n        if(Object.values(task).length !== 0){\r\n          Object.values(data.archivos).forEach(element => {\r\n            task[`${element.id}`].on('state_changed', snapshot => {\r\n              percentage[snapshot.task.blob_.data_.id] = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n              state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage = percentage[snapshot.task.blob_.data_.id];\r\n              if(state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage === 100 && order.length < Object.values(data.archivos).length){\r\n                order.push(snapshot.task.blob_.data_.id)\r\n              }\r\n            }, error => {\r\n              console.log(error.message);\r\n            }, () =>{\r\n\r\n              dataRef = {\r\n                comi_id: pushdbRef.key,\r\n                comi_activo: data.comite.activo,\r\n                comi_comiPage: data.comite.comipage,\r\n                comi_correo: data.comite.correo,\r\n                comi_costos: data.comite.costos,\r\n                comi_descripcion: data.comite.descripcion,\r\n                comi_fechavigencia: data.comite.fechav,\r\n                comi_foto: [],\r\n                comi_int: data.comite.inthpage,\r\n                comi_integrantes: data.comite.integrantes,\r\n                comi_nombre: data.comite.nombre,\r\n                comi_normativa: [],\r\n                comi_reglamento: [],\r\n              }\r\n              \r\n              let storageRef= firebase.storage().ref(`/${data.target}/${dataRef.comi_id}/${Object.values(data.comite.archivos)[`${order[j]}`].nombre}`);\r\n              \r\n              storageRef.getDownloadURL().then(url => {\r\n                let val = order[n];\r\n                console.log(val);\r\n                for(let m = 0; m < Object.values(data.comite.archivos).length; m++){\r\n                  if(Object.values(data.comite.archivos)[m].id !== undefined && val === Object.values(data.comite.archivos)[m].id){\r\n                    state.dbImg[val].url = url;\r\n                    state.dbImg[val].nombre = Object.values(data.comite.archivos)[m].nombre\r\n                  }\r\n                }\r\n                n ++;\r\n                if(n >= Object.values(data.archivos).length){\r\n                  if(state.dbImg[0].nombre !== undefined){\r\n                    dataRef.comi_foto = {\r\n                      nombre: state.dbImg[0].nombre,\r\n                      url: state.dbImg[0].url,\r\n                    } \r\n                  }else{\r\n                    dataRef.comi_foto = '';\r\n                  }\r\n\r\n                  if(state.dbImg[1].nombre !== undefined){\r\n                    dataRef.comi_reglamento = {\r\n                      nombre: state.dbImg[1].nombre,\r\n                      url: state.dbImg[1].url,\r\n                    }\r\n                  }else{\r\n                    dataRef.comi_reglamento = '';\r\n                  }\r\n\r\n                  if(state.dbImg[2].nombre !== undefined){\r\n                    dataRef.comi_normativa = {\r\n                      nombre: state.dbImg[2].nombre,\r\n                      url: state.dbImg[2].url,\r\n                    }\r\n                  }else{\r\n                    dataRef.comi_normativa = '';\r\n                  }\r\n\r\n                  if(n >= Object.values(data.archivos).length){\r\n                    pushdbRef.set(dataRef);\r\n                    state.crearDBVals = false;\r\n                    const success = {\r\n                      0: 'successUpload',\r\n                      1: 'Se ha creado exitosamente'\r\n                    }\r\n                    this.commit('successAdvise', success)\r\n                  }\r\n                }\r\n              })\r\n              j++;\r\n            })\r\n          })\r\n        }else{\r\n\r\n          dataRef = {\r\n            comi_id: pushdbRef.key,\r\n            comi_activo: data.comite.activo,\r\n            comi_comiPage: data.comite.comipage,\r\n            comi_correo: data.comite.correo,\r\n            comi_costos: data.comite.costos,\r\n            comi_descripcion: data.comite.descripcion,\r\n            comi_fechavigencia: data.comite.fechav,\r\n            comi_foto: data.comite.archivos.imagen,\r\n            comi_int: data.comite.inthpage,\r\n            comi_integrantes: data.comite.integrantes,\r\n            comi_nombre: data.comite.nombre,\r\n            comi_normativa: data.comite.archivos.normativa,\r\n            comi_reglamento: data.comite.archivos.reglamento,\r\n          }\r\n\r\n          n++;\r\n          if(n >= Object.values(data.archivos).length){\r\n            pushdbRef.set(dataRef);\r\n            state.crearDBVals = false;\r\n            const success = {\r\n              0: 'successUpload',\r\n              1: 'Se ha creado exitosamente'\r\n            }\r\n            this.commit('successAdvise', success)\r\n          }\r\n        }\r\n      }\r\n    },\r\n    updateDB(state, data){\r\n      state.crearDBVals = true;\r\n      if(data.target === 'Juntas'){\r\n        \r\n        if(Object.values(data.archivos).length !== 0){\r\n          for(let i = 0; i < Object.values(data.junta.integrantes).length; i++){\r\n            state.dbImg[i] = [];\r\n            state.dbImg[i] = Object.values(data.junta.integrantes)[i].image;\r\n          }\r\n        }\r\n\r\n        let storageRef = [];\r\n        let percentage = [];\r\n        let order = [];\r\n        let task = {};\r\n        let i = 0;\r\n        let j = 0;\r\n        let n = 0;\r\n\r\n        Object.values(data.archivos).forEach(element => {\r\n          storageRef= firebase.storage().ref(`/${data.target}/${data.junta.id}/${data.junta.integrantes[`${element.id}`].cargo.split(' ').join('_')}`);\r\n          task[`${element.id}`] = storageRef.put(element);\r\n        })\r\n        \r\n        if(Object.values(task).length !== 0){\r\n          Object.values(data.archivos).forEach(element => {\r\n            task[`${element.id}`].on('state_changed', snapshot => {\r\n              percentage[snapshot.task.blob_.data_.id] = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n              state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage = percentage[snapshot.task.blob_.data_.id];\r\n              if(state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage === 100 && order.length < Object.values(data.archivos).length){\r\n                order.push(snapshot.task.blob_.data_.id)\r\n              }\r\n            }, error => {\r\n              console.log(error.message);\r\n            }, () =>{\r\n  \r\n              let dataRef = [];\r\n              dataRef.junt_periodo = `${data.junta.inicio}-${data.junta.fin}`;\r\n              dataRef.junt_id = data.junta.id;\r\n              dataRef.junt_activa = data.junta.junta_actual;\r\n              dataRef.junt_integrantes = [];\r\n  \r\n              for(let i = 0; i < Object.values(data.junta.integrantes).length; i++){\r\n                dataRef.junt_integrantes[i] = [];\r\n                dataRef.junt_integrantes[i].juin_cargo = Object.values(data.junta.integrantes)[i].cargo\r\n                dataRef.junt_integrantes[i].juin_nombre = Object.values(data.junta.integrantes)[i].nombre\r\n                dataRef.junt_integrantes[i].juin_apellido = Object.values(data.junta.integrantes)[i].apellido\r\n                dataRef.junt_integrantes[i].juin_correo = Object.values(data.junta.integrantes)[i].correo\r\n                dataRef.junt_integrantes[i].juin_foto = []\r\n                dataRef.junt_integrantes[i].juin_activo = Object.values(data.junta.integrantes)[i].activo\r\n                dataRef.junt_integrantes[i].juin_crear = Object.values(data.junta.integrantes)[i].crear\r\n              }\r\n  \r\n              let storageRef= firebase.storage().ref(`/${data.target}/${data.junta.inicio}/${data.junta.integrantes[`${order[j]}`].cargo.split(' ').join('_')}`);\r\n              \r\n              storageRef.getDownloadURL().then(url => {\r\n                let val = order[n];\r\n                state.dbImg[val].url = url;\r\n                state.dbImg[val].nombre = `${data.junta.integrantes[`${order[n]}`].cargo.split(' ').join('_')}`;\r\n                n ++;\r\n                if(n >= order.length){\r\n                  i = 0;\r\n                  Object.values(dataRef.junt_integrantes).forEach(element => {\r\n                    if(state.dbImg[i].nombre !== undefined && state.dbImg[i].url !== undefined){\r\n                      element.juin_foto.nombre = state.dbImg[i].nombre;\r\n                      element.juin_foto.url = state.dbImg[i].url;\r\n                    }else{\r\n                      element.juin_foto = \"\";\r\n                    }\r\n                    i ++;\r\n                    if(n >= Object.values(data.archivos).length){\r\n                      const dbRef = firebase.database().ref(`${data.target}`);\r\n                      dbRef.child(`${data.junta.id}`).set(dataRef);\r\n                      state.crearDBVals = false;\r\n                      const success = {\r\n                        0: 'successUpload',\r\n                        1: 'Se ha creado exitosamente'\r\n                      }\r\n                      this.commit('successAdvise', success)\r\n                    }\r\n                  })\r\n                }\r\n              })\r\n              j ++;\r\n            })\r\n          })\r\n        }else{\r\n          let dataRef = [];\r\n          dataRef.junt_periodo = `${data.junta.inicio}-${data.junta.fin}`;\r\n          dataRef.junt_id = data.junta.id;\r\n          dataRef.junt_activa = data.junta.junta_actual;\r\n          dataRef.junt_integrantes = [];\r\n\r\n          for(let i = 0; i < Object.values(data.junta.integrantes).length; i++){\r\n            dataRef.junt_integrantes[i] = [];\r\n            dataRef.junt_integrantes[i].juin_cargo = Object.values(data.junta.integrantes)[i].cargo\r\n            dataRef.junt_integrantes[i].juin_nombre = Object.values(data.junta.integrantes)[i].nombre\r\n            dataRef.junt_integrantes[i].juin_apellido = Object.values(data.junta.integrantes)[i].apellido\r\n            dataRef.junt_integrantes[i].juin_correo = Object.values(data.junta.integrantes)[i].correo\r\n            dataRef.junt_integrantes[i].juin_foto = Object.values(data.junta.integrantes)[i].image\r\n            dataRef.junt_integrantes[i].juin_activo = Object.values(data.junta.integrantes)[i].activo\r\n            dataRef.junt_integrantes[i].juin_crear = Object.values(data.junta.integrantes)[i].crear\r\n          }\r\n\r\n          const dbRef = firebase.database().ref(`${data.target}`);\r\n          dbRef.child(`${data.junta.id}`).set(dataRef);\r\n          state.crearDBVals = false;\r\n          const success = {\r\n            0: 'successUpload',\r\n            1: 'Se ha creado exitosamente'\r\n          }\r\n          this.commit('successAdvise', success)\r\n        }\r\n      }else if(data.target === 'Servicios'){\r\n\r\n        if(Object.values(data.archivos).length !== 0){\r\n          state.dbImg = [];\r\n          state.dbImg[0] = data.servicio.image;\r\n        }\r\n\r\n        let storageRef = [];\r\n        let percentage = [];\r\n        let order = [];\r\n        let task = {};\r\n        let n = 0;\r\n\r\n        Object.values(data.archivos).forEach(element => {\r\n          storageRef= firebase.storage().ref(`/${data.target}/${data.servicio.id}/${data.servicio.nombre.split(' ').join('_')}`);\r\n          task[`${element.id}`] = storageRef.put(element);\r\n        })\r\n        \r\n        if(Object.values(task).length !== 0){\r\n          Object.values(data.archivos).forEach(element => {\r\n            task[`${element.id}`].on('state_changed', snapshot => {\r\n              percentage[snapshot.task.blob_.data_.id] = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n              state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage = percentage[snapshot.task.blob_.data_.id];\r\n              if(state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage === 100 && order.length < Object.values(data.archivos).length){\r\n                order.push(snapshot.task.blob_.data_.id)\r\n              }\r\n            }, error => {\r\n              console.log(error.message);\r\n            }, () =>{\r\n\r\n              let dataRef = {\r\n                serv_activo: data.servicio.activo,\r\n                serv_cierre: data.servicio.fin,\r\n                serv_contacto: data.servicio.contacto,\r\n                serv_descripcion: data.servicio.descripcion,\r\n                serv_id: data.servicio.id,\r\n                serv_inicio: data.servicio.inicio,\r\n                serv_nombre: data.servicio.nombre,\r\n                serv_foto: [],\r\n              }\r\n\r\n              let storageRef= firebase.storage().ref(`/${data.target}/${data.servicio.id}/${data.servicio.nombre.split(' ').join('_')}`);\r\n              \r\n              storageRef.getDownloadURL().then(url => {\r\n                let val = order[n];\r\n                state.dbImg[val].url = url;\r\n                state.dbImg[val].nombre = `${data.servicio.nombre.split(' ').join('_')}`;\r\n                n ++;\r\n                if(n >= order.length){\r\n                  dataRef.serv_foto.nombre = state.dbImg[0].nombre;\r\n                  dataRef.serv_foto.url = state.dbImg[0].url;\r\n                  if(n >= Object.values(data.archivos).length){\r\n                    const dbRef = firebase.database().ref(`${data.target}`);\r\n                    dbRef.child(`${data.servicio.id}`).set(dataRef);\r\n                    state.crearDBVals = false;\r\n                    const success = {\r\n                      0: 'successUpload',\r\n                      1: 'Se ha creado exitosamente'\r\n                    }\r\n                    this.commit('successAdvise', success)\r\n                  }\r\n                }\r\n              })\r\n            })\r\n          })\r\n        }else{\r\n          let dataRef = {\r\n            serv_activo: data.servicio.activo,\r\n            serv_cierre: data.servicio.fin,\r\n            serv_contacto: data.servicio.contacto,\r\n            serv_descripcion: data.servicio.descripcion,\r\n            serv_id: data.servicio.id,\r\n            serv_inicio: data.servicio.inicio,\r\n            serv_nombre: data.servicio.nombre,\r\n            serv_foto: data.servicio.image,\r\n          }\r\n\r\n          n++;\r\n          if(n >= Object.values(data.archivos).length){\r\n            const dbRef = firebase.database().ref(`${data.target}`);\r\n            dbRef.child(`${data.servicio.id}`).set(dataRef);\r\n            state.crearDBVals = false;\r\n            const success = {\r\n              0: 'successUpload',\r\n              1: 'Se ha creado exitosamente'\r\n            }\r\n            this.commit('successAdvise', success)\r\n          }\r\n        }\r\n      }else if(data.target === 'Gerencia'){\r\n\r\n        if(Object.values(data.archivos).length !== 0){\r\n          state.dbImg = [];\r\n          state.dbImg[0] = data.integrante.image;\r\n        }\r\n\r\n        let storageRef = [];\r\n        let percentage = [];\r\n        let order = [];\r\n        let task = {};\r\n        let n = 0;\r\n\r\n        Object.values(data.archivos).forEach(element => {\r\n          storageRef= firebase.storage().ref(`/${data.target}/${data.integrante.id}/${data.integrante.cargo.split(' ').join('_')}`);\r\n          task[`${element.id}`] = storageRef.put(element);\r\n        })\r\n        \r\n        if(Object.values(task).length !== 0){\r\n          Object.values(data.archivos).forEach(element => {\r\n            task[`${element.id}`].on('state_changed', snapshot => {\r\n              percentage[snapshot.task.blob_.data_.id] = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n              state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage = percentage[snapshot.task.blob_.data_.id];\r\n              if(state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage === 100 && order.length < Object.values(data.archivos).length){\r\n                order.push(snapshot.task.blob_.data_.id)\r\n              }\r\n            }, error => {\r\n              console.log(error.message);\r\n            }, () =>{\r\n\r\n              let dataRef = {\r\n                gr_correo: data.integrante.correo,\r\n                gr_nombre: data.integrante.nombre,\r\n                gr_cargo: data.integrante.cargo,\r\n                gr_id: data.integrante.id,\r\n                gr_foto: [],\r\n              }\r\n\r\n              let storageRef= firebase.storage().ref(`/imagenes/${data.target}/${data.integrante.id}/${data.integrante.cargo.split(' ').join('_')}`);\r\n              \r\n              storageRef.getDownloadURL().then(url => {\r\n                let val = order[n];\r\n                state.dbImg[val].url = url;\r\n                state.dbImg[val].nombre = `${data.integrante.cargo.split(' ').join('_')}`;\r\n                n ++;\r\n                if(n >= order.length){\r\n                  dataRef.gr_foto.nombre = state.dbImg[0].nombre;\r\n                  dataRef.gr_foto.url = state.dbImg[0].url;\r\n                  if(n >= Object.values(data.archivos).length){\r\n                    const dbRef = firebase.database().ref(`${data.target}`);\r\n                    dbRef.child(`${data.integrante.id}`).set(dataRef);\r\n                    state.crearDBVals = false;\r\n                    const success = {\r\n                      0: 'successUpload',\r\n                      1: 'Se ha creado exitosamente'\r\n                    }\r\n                    this.commit('successAdvise', success)\r\n                  }\r\n                }\r\n              })\r\n            })\r\n          })\r\n        }else{\r\n          let dataRef = {\r\n            gr_correo: data.integrante.correo,\r\n            gr_nombre: data.integrante.nombre,\r\n            gr_cargo: data.integrante.cargo,\r\n            gr_id: data.integrante.id,\r\n            gr_foto: data.integrante.image,\r\n          }\r\n\r\n          n++;\r\n          if(n >= Object.values(data.archivos).length){\r\n            const dbRef = firebase.database().ref(`${data.target}`);\r\n            dbRef.child(`${data.integrante.id}`).set(dataRef);\r\n            state.crearDBVals = false;\r\n            const success = {\r\n              0: 'successUpload',\r\n              1: 'Se ha creado exitosamente'\r\n            }\r\n            this.commit('successAdvise', success)\r\n          }\r\n        }\r\n      }else if(data.target === 'Profesores'){\r\n        \r\n        state.dbImg = [];\r\n\r\n        if(data.archivos['archivo0'] !== undefined){\r\n          state.dbImg[0] = data.profesor.archivos.image;\r\n        }\r\n\r\n        if(data.archivos['archivo1'] !== undefined){\r\n          state.dbImg[1] = data.profesor.archivos.cv;\r\n        }\r\n\r\n        let storageRef = [];\r\n        let percentage = [];\r\n        let order = [];\r\n        let task = {};\r\n        let i = 0;\r\n        let n = 0;\r\n        let j = 0;\r\n\r\n        Object.values(data.archivos).forEach(element => {\r\n          storageRef= firebase.storage().ref(`/${data.target}/${data.profesor.id}/${Object.values(data.profesor.archivos)[i].nombre}`);\r\n          task[`${element.id}`] = storageRef.put(element);\r\n          i++;\r\n        })\r\n        \r\n        if(Object.values(task).length !== 0){\r\n          Object.values(data.archivos).forEach(element => {\r\n            task[`${element.id}`].on('state_changed', snapshot => {\r\n              percentage[snapshot.task.blob_.data_.id] = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n              state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage = percentage[snapshot.task.blob_.data_.id];\r\n              if(state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage === 100 && order.length < Object.values(data.archivos).length){\r\n                order.push(snapshot.task.blob_.data_.id)\r\n              }\r\n            }, error => {\r\n              console.log(error.message);\r\n            }, () =>{\r\n\r\n              let dataRef = {\r\n                comi_id: data.profesor.coid,\r\n                prof_cv: [],\r\n                prof_ci: data.profesor.ci,\r\n                prof_correo: data.profesor.correo,\r\n                prof_fechadenacimiento: data.profesor.nacimiento,\r\n                prof_foto: [],\r\n                prof_id: data.profesor.id,\r\n                prof_nombre: data.profesor.nombre,\r\n                prof_telefonos:data.profesor.telefonos,\r\n              }\r\n              \r\n              let storageRef= firebase.storage().ref(`/${data.target}/${data.profesor.id}/${Object.values(data.profesor.archivos)[order[j]].nombre}`);\r\n              \r\n              storageRef.getDownloadURL().then(url => {\r\n                let val = order[n];\r\n                if(val === 0){\r\n                  state.dbImg[val].url = url;\r\n                  state.dbImg[val].nombre = `${data.profesor.id}`;\r\n                }else{\r\n                  state.dbImg[val].url = url;\r\n                  state.dbImg[val].nombre = `c_v_${data.profesor.id}`;\r\n                }\r\n                n ++;\r\n                if(n >= Object.values(data.archivos).length){\r\n                  dataRef.prof_foto.nombre = state.dbImg[0].nombre;\r\n                  dataRef.prof_foto.url = state.dbImg[0].url;\r\n                  dataRef.prof_cv.nombre = state.dbImg[1].nombre;\r\n                  dataRef.prof_cv.url = state.dbImg[1].url;\r\n\r\n                  if(n >= Object.values(data.archivos).length){\r\n                    const dbRef = firebase.database().ref(`${data.target}`);\r\n                    dbRef.child(`${data.profesor.id}`).set(dataRef);\r\n                    state.crearDBVals = false;\r\n                    const success = {\r\n                      0: 'successUpload',\r\n                      1: 'Se ha creado exitosamente'\r\n                    }\r\n                    this.commit('successAdvise', success)\r\n                  }\r\n                }\r\n              })\r\n              j++;\r\n            })\r\n          })\r\n        }else{\r\n\r\n          let dataRef = {\r\n            comi_id: data.profesor.coid,\r\n            prof_cv: [],\r\n            prof_ci: data.profesor.ci,\r\n            prof_correo: data.profesor.correo,\r\n            prof_fechadenacimiento: data.profesor.nacimiento,\r\n            prof_foto: [],\r\n            prof_id: data.profesor.id,\r\n            prof_nombre: data.profesor.nombre,\r\n            prof_telefonos:data.profesor.telefonos,\r\n          }\r\n\r\n          n++;\r\n          if(n >= Object.values(data.archivos).length){\r\n            const dbRef = firebase.database().ref(`${data.target}`);\r\n            dbRef.child(`${data.profesor.id}`).set(dataRef);\r\n            state.crearDBVals = false;\r\n            const success = {\r\n              0: 'successUpload',\r\n              1: 'Se ha creado exitosamente'\r\n            }\r\n            this.commit('successAdvise', success)\r\n          }\r\n        }\r\n      }else if(data.target === 'Comites'){\r\n        \r\n        state.dbImg = [];\r\n\r\n        for(let k = 0; k < Object.values(data.comite.archivos).length; k++){\r\n          if(Object.values(data.comite.archivos)[k].id !== undefined){\r\n            state.dbImg[Object.values(data.comite.archivos)[k].id] = Object.values(data.comite.archivos)[k];\r\n          }else{\r\n            state.dbImg[k] = '';\r\n          }\r\n        }\r\n        \r\n        let storageRef = [];\r\n        let percentage = [];\r\n        let order = [];\r\n        let task = {};\r\n        let i = 0;\r\n        let n = 0;\r\n        let j = 0;\r\n\r\n        Object.values(data.archivos).forEach(element => {\r\n          storageRef= firebase.storage().ref(`/${data.target}/${data.comite.id}/${Object.values(data.comite.archivos)[element.id].nombre}`);\r\n          task[`${element.id}`] = storageRef.put(element);\r\n          i++;\r\n        })\r\n        \r\n        if(Object.values(task).length !== 0){\r\n          Object.values(data.archivos).forEach(element => {\r\n            task[`${element.id}`].on('state_changed', snapshot => {\r\n              percentage[snapshot.task.blob_.data_.id] = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n              state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage = percentage[snapshot.task.blob_.data_.id];\r\n              if(state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage === 100 && order.length < Object.values(data.archivos).length){\r\n                order.push(snapshot.task.blob_.data_.id)\r\n              }\r\n            }, error => {\r\n              console.log(error.message);\r\n            }, () =>{\r\n\r\n              let dataRef = {\r\n                comi_id: data.comite.id,\r\n                comi_activo: data.comite.activo,\r\n                comi_comiPage: data.comite.comipage,\r\n                comi_correo: data.comite.correo,\r\n                comi_costos: data.comite.costos,\r\n                comi_descripcion: data.comite.descripcion,\r\n                comi_fechavigencia: data.comite.fechav,\r\n                comi_foto: [],\r\n                comi_int: data.comite.inthpage,\r\n                comi_integrantes: data.comite.integrantes,\r\n                comi_nombre: data.comite.nombre,\r\n                comi_normativa: [],\r\n                comi_reglamento: [],\r\n              }\r\n              \r\n              let storageRef= firebase.storage().ref(`/${data.target}/${data.comite.id}/${Object.values(data.comite.archivos)[`${order[j]}`].nombre}`);\r\n              _\r\n              storageRef.getDownloadURL().then(url => {\r\n                let val = order[n];\r\n                console.log(val);\r\n                for(let m = 0; m < Object.values(data.comite.archivos).length; m++){\r\n                  if(Object.values(data.comite.archivos)[m].id !== undefined && val === Object.values(data.comite.archivos)[m].id){\r\n                    state.dbImg[val].url = url;\r\n                    state.dbImg[val].nombre = Object.values(data.comite.archivos)[m].nombre\r\n                  }\r\n                }\r\n                n ++;\r\n                if(n >= Object.values(data.archivos).length){\r\n                  if(state.dbImg[0].nombre !== undefined){\r\n                    dataRef.comi_foto = {\r\n                      nombre: state.dbImg[0].nombre,\r\n                      url: state.dbImg[0].url,\r\n                    } \r\n                  }else{\r\n                    dataRef.comi_foto = '';\r\n                  }\r\n\r\n                  if(state.dbImg[1].nombre !== undefined){\r\n                    dataRef.comi_reglamento = {\r\n                      nombre: state.dbImg[1].nombre,\r\n                      url: state.dbImg[1].url,\r\n                    }\r\n                  }else{\r\n                    dataRef.comi_reglamento = '';\r\n                  }\r\n\r\n                  if(state.dbImg[2].nombre !== undefined){\r\n                    dataRef.comi_normativa = {\r\n                      nombre: state.dbImg[2].nombre,\r\n                      url: state.dbImg[2].url,\r\n                    }\r\n                  }else{\r\n                    dataRef.comi_normativa = '';\r\n                  }\r\n\r\n                  if(n >= Object.values(data.archivos).length){\r\n                    const dbRef = firebase.database().ref(`${data.target}/${data.comite.id}`);\r\n                    dbRef.set(dataRef);\r\n                    state.crearDBVals = false;\r\n                    const success = {\r\n                      0: 'successUpload',\r\n                      1: 'Se ha creado exitosamente'\r\n                    }\r\n                    this.commit('successAdvise', success)\r\n                  }\r\n                }\r\n              })\r\n              j++;\r\n            })\r\n          })\r\n        }else{\r\n\r\n          let dataRef = {\r\n            comi_id: data.comite.id,\r\n            comi_activo: data.comite.activo,\r\n            comi_comiPage: data.comite.comipage,\r\n            comi_correo: data.comite.correo,\r\n            comi_costos: data.comite.costos,\r\n            comi_descripcion: data.comite.descripcion,\r\n            comi_fechavigencia: data.comite.fechav,\r\n            comi_foto: data.comite.archivos.imagen,\r\n            comi_int: data.comite.inthpage,\r\n            comi_integrantes: data.comite.integrantes,\r\n            comi_nombre: data.comite.nombre,\r\n            comi_normativa: data.comite.archivos.normativa,\r\n            comi_reglamento: data.comite.archivos.reglamento,\r\n          }\r\n\r\n          n++;\r\n          if(n >= Object.values(data.archivos).length){\r\n            const dbRef = firebase.database().ref(`${data.target}/${data.comite.id}`);\r\n            dbRef.set(dataRef);\r\n            state.crearDBVals = false;\r\n            const success = {\r\n              0: 'successUpload',\r\n              1: 'Se ha creado exitosamente'\r\n            }\r\n            this.commit('successAdvise', success)\r\n          }\r\n        }\r\n      }\r\n    },\r\n    resetDBValues(state, value){\r\n      if(value === undefined){\r\n        state.successUpload = null;\r\n        state.deletingVal = null;\r\n        state.dbImg = [];\r\n      }else if(state.dbImg[`${value}`] !== undefined){\r\n        state.dbImg[`${value}`] = [];\r\n      }\r\n    },\r\n    falseCargarDB(state){\r\n      state.cargarDB = false;\r\n    },\r\n  },\r\n  actions: {\r\n    getData: async function({commit}, val){\r\n      let tryAgain = true;\r\n      while(tryAgain){\r\n        try{\r\n          tryAgain = false;\r\n          const data = await fetch(\"https://web-database-66842.firebaseio.com/.json\");\r\n          const dbWeb = await data.json();\r\n          const value = {\r\n            0: dbWeb,\r\n            1: val,\r\n          }\r\n          commit('dataWeb', value)\r\n        }catch(err){\r\n          setTimeout(() => {\r\n            tryAgain = true;\r\n          }, 10000);\r\n        }\r\n      }\r\n    },\r\n  },\r\n  modules: {\r\n  },\r\n  getters: {\r\n    userUpdate: state => {\r\n      return state.user;\r\n    },\r\n  }\r\n})\r\n"]}]}
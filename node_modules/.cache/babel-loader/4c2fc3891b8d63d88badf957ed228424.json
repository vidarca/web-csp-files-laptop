{"remainingRequest":"C:\\WebProjects\\Web-csp\\web-csp\\node_modules\\babel-loader\\lib\\index.js!C:\\WebProjects\\Web-csp\\web-csp\\src\\store\\index.js","dependencies":[{"path":"C:\\WebProjects\\Web-csp\\web-csp\\src\\store\\index.js","mtime":1602109283964},{"path":"C:\\WebProjects\\Web-csp\\web-csp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1598308836458},{"path":"C:\\WebProjects\\Web-csp\\web-csp\\node_modules\\babel-loader\\lib\\index.js","mtime":1598308833927}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudmFsdWVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1dlYlByb2plY3RzL1dlYi1jc3Avd2ViLWNzcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IFZ1ZXggZnJvbSAndnVleCc7CmltcG9ydCBmaXJlYmFzZSwgeyBhdXRoIH0gZnJvbSAnZmlyZWJhc2UnOwppbXBvcnQgeyBkYXRhIH0gZnJvbSAnanF1ZXJ5JzsKVnVlLnVzZShWdWV4KTsKZXhwb3J0IGRlZmF1bHQgbmV3IFZ1ZXguU3RvcmUoewogIHN0YXRlOiB7CiAgICBzZWNUaXRsZTogJ0Rhc2hib2FyZCcsCiAgICBzdWNjZXNzVXBsb2FkOiBudWxsLAogICAgY2FyZ2FyREI6IGZhbHNlLAogICAgY3JlYXJEQlZhbHM6IGZhbHNlLAogICAgZXJyb3JVcGxvYWQ6IG51bGwsCiAgICBkZWxldGluZ1ZhbDogbnVsbCwKICAgIGxvYWRFZGl0OiBmYWxzZSwKICAgIGRlbGV0aW5nSW5kZXg6ICcnLAogICAgYWN0VXNlcjogbnVsbCwKICAgIGRiV2ViOiBbXSwKICAgIGRwUmVzcG9uc2l2ZTogZmFsc2UsCiAgICBoZWFkZXJWaWV3OiAwLAogICAgZm9ybXRpcG86IDAsCiAgICB1c2VyOiB7CiAgICAgIGFjdGl2bzogJycsCiAgICAgIGFwZWxsaWRvOiAnJywKICAgICAgYXV0b3JpOiAnJywKICAgICAgY2FyZ286ICcnLAogICAgICBjb3JyZW86ICcnLAogICAgICBjb3JyZW9WZXJpOiAnJywKICAgICAgZm90b1VybDogJycsCiAgICAgIGlkOiAnJywKICAgICAgbm9tYnJlOiAnJywKICAgICAgdGVsZWZvbm86ICcnLAogICAgICBhY2Npb246ICcnCiAgICB9LAogICAgcmVmVXNlcjoge30sCiAgICBjcmVhdGVDb250ZW50OiB7CiAgICAgIGZvcm1VcGxvYWQ6IHsKICAgICAgICB0aXR1bG86ICcnLAogICAgICAgIGluZm86ICcnLAogICAgICAgIHByZXY6ICcnLAogICAgICAgIGZlY2hhOiAnJywKICAgICAgICBpZDogJycsCiAgICAgICAgc2VjY2lvbjogJ1NlbGVjY2lvbmUgdW5hIG9wY2nDs24nLAogICAgICAgIGltYWdlczogW10sCiAgICAgICAgdGlwbzogZmFsc2UKICAgICAgfQogICAgfSwKICAgIGVkaXRDb250ZW50OiB7CiAgICAgIGZvcm1VcGxvYWQ6IHsKICAgICAgICB0aXR1bG86ICcnLAogICAgICAgIGluZm86ICcnLAogICAgICAgIHByZXY6ICcnLAogICAgICAgIGZlY2hhOiAnJywKICAgICAgICBpZDogJycsCiAgICAgICAgc2VjY2lvbjogJycsCiAgICAgICAgaW1hZ2VzOiBbXSwKICAgICAgICB0aXBvOiBmYWxzZSwKICAgICAgICB1cGxvYWRJbWFnZXM6IGZhbHNlLAogICAgICAgIHVwbG9hZERhdGFCYXNlOiBmYWxzZQogICAgICB9CiAgICB9LAogICAgdXNlcnM6IHsKICAgICAgdXNlclJlZmVyOiBmYWxzZSwKICAgICAgY3JlYXRlVXNlcjogewogICAgICAgIGZvcm1VcGxvYWQ6IHsKICAgICAgICAgIGFjdGl2bzogJycsCiAgICAgICAgICBhcGVsbGlkbzogJycsCiAgICAgICAgICBjYXJnbzogJycsCiAgICAgICAgICBjb3JyZW86ICcnLAogICAgICAgICAgY29ycmVvVmVyaTogJycsCiAgICAgICAgICBmb3RvVXJsOiAnJywKICAgICAgICAgIGlkOiAnJywKICAgICAgICAgIG5vbWJyZTogJycsCiAgICAgICAgICB0ZWxlZm9ubzogJycsCiAgICAgICAgICBjcmVhdGU6IGZhbHNlLAogICAgICAgICAgcGFzczogJycKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBkZWxldGVDb250ZW50OiB7CiAgICAgIGZvcm1VcGxvYWQ6IHsKICAgICAgICBpZDogJycsCiAgICAgICAgdGlwbzogZmFsc2UKICAgICAgfQogICAgfSwKICAgIGRiSW1nOiBbXSwKICAgIGRiRmlsZXM6IFtdCiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIGRhdGFXZWI6IGZ1bmN0aW9uIGRhdGFXZWIoc3RhdGUsIGJhc2VEYXRvcykgewogICAgICBzdGF0ZS5kYldlYiA9IGJhc2VEYXRvc1swXTsKCiAgICAgIGlmIChiYXNlRGF0b3NbMV0gIT09IHVuZGVmaW5lZCkgewogICAgICAgIGJhc2VEYXRvc1sxXSA9IHRydWU7CiAgICAgIH0KICAgIH0sCiAgICBjaGFuZ2VTZWNUaXRsZTogZnVuY3Rpb24gY2hhbmdlU2VjVGl0bGUoc3RhdGUsIHZhbHVlKSB7CiAgICAgIHN0YXRlLnNlY1RpdGxlID0gdmFsdWU7CiAgICB9LAogICAgc2V0VXNlcjogZnVuY3Rpb24gc2V0VXNlcihzdGF0ZSwgdXNlcikgewogICAgICBzdGF0ZS51c2Vycy51c2VyUmVmZXIgPSBmYWxzZTsKICAgICAgc3RhdGUudXNlciA9IHsKICAgICAgICBhY3Rpdm86IHVzZXIuYWN0aXZvLAogICAgICAgIGFwZWxsaWRvOiB1c2VyLmFwZWxsaWRvLAogICAgICAgIGF1dG9yaTogdXNlci5hdXRvcmksCiAgICAgICAgY2FyZ286IHVzZXIuY2FyZ28sCiAgICAgICAgY29ycmVvOiB1c2VyLmNvcnJlbywKICAgICAgICBjb3JyZW9WZXJpOiB1c2VyLmNvcnJlb1ZlcmksCiAgICAgICAgZm90b1VybDogdXNlci5mb3RvVXJsLAogICAgICAgIGlkOiB1c2VyLmlkLAogICAgICAgIG5vbWJyZTogdXNlci5ub21icmUsCiAgICAgICAgdGVsZWZvbm86IHVzZXIudGVsZWZvbm8sCiAgICAgICAgYWNjaW9uOiB1c2VyLmFjY2lvbgogICAgICB9OwogICAgICBzdGF0ZS5yZWZVc2VyID0gewogICAgICAgIGFjdGl2bzogdXNlci5hY3Rpdm8sCiAgICAgICAgYXBlbGxpZG86IHVzZXIuYXBlbGxpZG8sCiAgICAgICAgYXV0b3JpOiB1c2VyLmF1dG9yaSwKICAgICAgICBjYXJnbzogdXNlci5jYXJnbywKICAgICAgICBjb3JyZW86IHVzZXIuY29ycmVvLAogICAgICAgIGNvcnJlb1Zlcmk6IHVzZXIuY29ycmVvVmVyaSwKICAgICAgICBmb3RvVXJsOiB1c2VyLmZvdG9VcmwsCiAgICAgICAgaWQ6IHVzZXIuaWQsCiAgICAgICAgbm9tYnJlOiB1c2VyLm5vbWJyZSwKICAgICAgICB0ZWxlZm9ubzogdXNlci50ZWxlZm9ubywKICAgICAgICBhY2Npb246IHVzZXIuYWNjaW9uCiAgICAgIH07CiAgICB9LAogICAgZGJVc2VyVmFsOiBmdW5jdGlvbiBkYlVzZXJWYWwoc3RhdGUsIHZhbHVlKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgdmFsdWVzUmVmID0gewogICAgICAgIHVzZXJfYWN0aXZvOiB0cnVlLAogICAgICAgIHVzZXJfYXBlbGxpZG86IHZhbHVlLmFwZWxsaWRvLAogICAgICAgIHVzZXJfYXV0b3JpOiB2YWx1ZS5hdXRvcmksCiAgICAgICAgdXNlcl9jYXJnbzogdmFsdWUuY2FyZ28sCiAgICAgICAgdXNlcl9jb3JyZW86IHZhbHVlLmNvcnJlbywKICAgICAgICB1c2VyX2NvcnJlb1Zlcmk6IHZhbHVlLmNvcnJlb1ZlcmksCiAgICAgICAgdXNlcl9mb3RvVXJsOiAiIi5jb25jYXQodmFsdWUuZm90b1VybCksCiAgICAgICAgdXNlcl9pZDogdmFsdWUuaWQsCiAgICAgICAgdXNlcl9ub21icmU6IHZhbHVlLm5vbWJyZSwKICAgICAgICB1c2VyX3RlbGVmb25vOiAiIi5jb25jYXQodmFsdWUudGVsZWZvbm8pLAogICAgICAgIHVzZXJfYWNjaW9uOiAiIi5jb25jYXQodmFsdWUuYWNjaW9uKQogICAgICB9OwogICAgICB2YXIgZGJSZWYgPSBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZignVXN1YXJpb3MnKTsKICAgICAgZGJSZWYuY2hpbGQodmFsdWVzUmVmLnVzZXJfaWQpLnNldCh2YWx1ZXNSZWYpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzLmNvbW1pdCgnc2V0VXNlcicsIE9iamVjdC52YWx1ZXModmFsdWVzUmVmKSk7CiAgICAgIH0pOwogICAgfSwKICAgIGNyZWF0ZVVzZXI6IGZ1bmN0aW9uIGNyZWF0ZVVzZXIoc3RhdGUsIHZhbHVlKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgc3RhdGUudXNlcnMudXNlclJlZmVyID0gdHJ1ZTsKICAgICAgdmFyIGNvbmZpZyA9IHsKICAgICAgICBhcGlLZXk6ICJBSXphU3lDcHNOVnRzQUNDZVMtYW1OcHJHVWgwdkdPRS1TRDl5NVEiLAogICAgICAgIGF1dGhEb21haW46ICJ3ZWItZGF0YWJhc2UtNjY4NDIuZmlyZWJhc2VhcHAuY29tIiwKICAgICAgICBkYXRhYmFzZVVSTDogImh0dHBzOi8vd2ViLWRhdGFiYXNlLTY2ODQyLmZpcmViYXNlaW8uY29tIgogICAgICB9OwogICAgICB2YXIgc2Vjb25kYXJ5QXBwID0gZmlyZWJhc2UuaW5pdGlhbGl6ZUFwcChjb25maWcsICJTZWNvbmRhcnkiKTsKICAgICAgc2Vjb25kYXJ5QXBwLmF1dGgoKS5jcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQoc3RhdGUudXNlcnMuY3JlYXRlVXNlci5mb3JtVXBsb2FkLmNvcnJlbywgc3RhdGUudXNlcnMuY3JlYXRlVXNlci5mb3JtVXBsb2FkLnBhc3MpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHsKICAgICAgICB2YXIgdmFsdWVzUmVmID0gewogICAgICAgICAgY29ycmVvOiB1c2VyLnVzZXIuZW1haWwsCiAgICAgICAgICBjb3JyZW9WZXJpOiB1c2VyLnVzZXIuZW1haWxWZXJpZmllZCwKICAgICAgICAgIG5vbWJyZTogdXNlci51c2VyLmRpc3BsYXlOYW1lLAogICAgICAgICAgYXBlbGxpZG86ICcnLAogICAgICAgICAgYXV0b3JpOiAnJywKICAgICAgICAgIGZvdG9Vcmw6ICcnLAogICAgICAgICAgdGVsZWZvbm86ICcnLAogICAgICAgICAgY2FyZ286ICcnLAogICAgICAgICAgaWQ6IHVzZXIudXNlci51aWQsCiAgICAgICAgICBhY3Rpdm86ICcnLAogICAgICAgICAgYWNjaW9uOiAnJwogICAgICAgIH07CiAgICAgICAgc2Vjb25kYXJ5QXBwLmF1dGgoKS5zaWduT3V0KCk7CiAgICAgICAgc2Vjb25kYXJ5QXBwLmRlbGV0ZSgpOwogICAgICAgIHZhciBzdWNjZXNzID0gewogICAgICAgICAgMDogJ3N1Y2Nlc3NVcGxvYWQnLAogICAgICAgICAgMTogJ1NlIGhhIGNyZWFkbyBleGl0b3NhbWVudGUnCiAgICAgICAgfTsKCiAgICAgICAgX3RoaXMyLmNvbW1pdCgnc3VjY2Vzc0FkdmlzZScsIHN1Y2Nlc3MpOwoKICAgICAgICB2YXIgdmFsdWVzRGIgPSB7CiAgICAgICAgICB1c2VyX2NvcnJlbzogdXNlci51c2VyLmVtYWlsLAogICAgICAgICAgdXNlcl9jb3JyZW9WZXJpOiB1c2VyLnVzZXIuZW1haWxWZXJpZmllZCwKICAgICAgICAgIHVzZXJfbm9tYnJlOiB1c2VyLnVzZXIuZGlzcGxheU5hbWUsCiAgICAgICAgICB1c2VyX2FwZWxsaWRvOiAnJywKICAgICAgICAgIHVzZXJfYXV0b3JpOiAnJywKICAgICAgICAgIHVzZXJfZm90b1VybDogJycsCiAgICAgICAgICB1c2VyX3RlbGVmb25vOiAnJywKICAgICAgICAgIHVzZXJfY2FyZ286ICcnLAogICAgICAgICAgdXNlcl9pZDogdXNlci51c2VyLnVpZCwKICAgICAgICAgIHVzZXJfYWN0aXZvOiAnJywKICAgICAgICAgIHVzZXJfYWNjaW9uOiAnJwogICAgICAgIH07CgogICAgICAgIF90aGlzMi5jb21taXQoJ2RiVXNlclZhbCcsIHZhbHVlc1JlZik7CgogICAgICAgIHN0YXRlLmRiV2ViLlVzdWFyaW9zWyIiLmNvbmNhdCh2YWx1ZXNEYi5pZCldID0gdmFsdWVzRGI7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBzdGF0ZS51c2Vycy51c2VyUmVmZXIgPSBmYWxzZTsKICAgICAgICBzZWNvbmRhcnlBcHAuZGVsZXRlKCk7CgogICAgICAgIGlmIChlcnIubWVzc2FnZSA9PT0gJ1RoZSBlbWFpbCBhZGRyZXNzIGlzIGFscmVhZHkgaW4gdXNlIGJ5IGFub3RoZXIgYWNjb3VudC4nKSB7CiAgICAgICAgICB2YXIgc3VjY2VzcyA9IHsKICAgICAgICAgICAgMDogJ2Vycm9yVXBsb2FkJywKICAgICAgICAgICAgMTogJ0VsIGNvcnJlbyB5YSBlc3TDoSBlbiB1c28nCiAgICAgICAgICB9OwoKICAgICAgICAgIF90aGlzMi5jb21taXQoJ3N1Y2Nlc3NBZHZpc2UnLCBzdWNjZXNzKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHVwZGF0ZVVzZXI6IGZ1bmN0aW9uIHVwZGF0ZVVzZXIoc3RhdGUsIHZhbHVlKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgaWYgKHZhbHVlLnRpcG8gPT09ICcxJykgewogICAgICAgIHZhciB2YWx1ZXNSZWYgPSB7CiAgICAgICAgICB1c2VyX2lkOiB2YWx1ZS5pZCwKICAgICAgICAgIHVzZXJfY29ycmVvOiB2YWx1ZS5jb3JyZW8sCiAgICAgICAgICB1c2VyX2NvcnJlb1Zlcmk6IHZhbHVlLmNvcnJlb1ZlcmksCiAgICAgICAgICB1c2VyX2FjY2lvbjogdmFsdWUuYWNjaW9uLAogICAgICAgICAgdXNlcl90ZWxlZm9ubzogdmFsdWUudGVsZWZvbm8sCiAgICAgICAgICB1c2VyX25vbWJyZTogdmFsdWUubm9tYnJlLAogICAgICAgICAgdXNlcl9hcGVsbGlkbzogdmFsdWUuYXBlbGxpZG8sCiAgICAgICAgICB1c2VyX2FjdGl2bzogdmFsdWUuYWN0aXZvLAogICAgICAgICAgdXNlcl9mb3RvVXJsOiB2YWx1ZS5mb3RvVXJsLAogICAgICAgICAgdXNlcl9hdXRvcmk6IHZhbHVlLmF1dG9yaSwKICAgICAgICAgIHVzZXJfY2FyZ286IHZhbHVlLmNhcmdvCiAgICAgICAgfTsKICAgICAgICB2YXIgZGJSZWYgPSBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZignVXN1YXJpb3MnKTsKICAgICAgICBkYlJlZi5jaGlsZCh2YWx1ZXNSZWYudXNlcl9pZCkuc2V0KHZhbHVlc1JlZikudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAvLyBBcXVpIGRlYm8gcG9uZXIgcGFyYSBxdWl0YXIgZWwgY2FyZ2Fkb3IKICAgICAgICAgIF90aGlzMy5jb21taXQoJ3NldFVzZXInLCB2YWx1ZSk7CgogICAgICAgICAgc3RhdGUuYWN0VXNlciA9IG51bGw7CiAgICAgICAgICB2YXIgc3VjY2VzcyA9IHsKICAgICAgICAgICAgMDogJ3N1Y2Nlc3NVcGxvYWQnLAogICAgICAgICAgICAxOiAnU2UgaGEgYWN0dWFsaXphZG8gZXhpdG9zYW1lbnRlJwogICAgICAgICAgfTsKCiAgICAgICAgICBfdGhpczMuY29tbWl0KCdzdWNjZXNzQWR2aXNlJywgc3VjY2Vzcyk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIHVzZXIgPSBmaXJlYmFzZS5hdXRoKCkuY3VycmVudFVzZXI7CgogICAgICAgIGlmICh1c2VyKSB7CiAgICAgICAgICAvLyBBcXVpIGRlYm8gcG9uZXIgZWwgYWN0aXZhZG9yIHBhcmEgZWwgY2FyZ2Fkb3IKICAgICAgICAgIHVzZXIudXBkYXRlUHJvZmlsZSh7CiAgICAgICAgICAgIGRpc3BsYXlOYW1lOiB2YWx1ZS5ub21icmUsCiAgICAgICAgICAgIGVtYWlsOiB2YWx1ZS5jb3JyZW8sCiAgICAgICAgICAgIHBob25lTnVtYmVyOiB2YWx1ZS50ZWxlZm9ubwogICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciB2YWx1ZXNSZWYgPSB7CiAgICAgICAgICAgICAgdXNlcl9jb3JyZW86IHZhbHVlLmNvcnJlbywKICAgICAgICAgICAgICB1c2VyX2NvcnJlb1Zlcmk6IHZhbHVlLmNvcnJlb1ZlcmksCiAgICAgICAgICAgICAgdXNlcl9ub21icmU6IHZhbHVlLm5vbWJyZSwKICAgICAgICAgICAgICB1c2VyX2FwZWxsaWRvOiB2YWx1ZS5hcGVsbGlkbywKICAgICAgICAgICAgICB1c2VyX2F1dG9yaTogdmFsdWUuYXV0b3JpLAogICAgICAgICAgICAgIHVzZXJfZm90b1VybDogdmFsdWUuZm90b1VybCwKICAgICAgICAgICAgICB1c2VyX3RlbGVmb25vOiB2YWx1ZS50ZWxlZm9ubywKICAgICAgICAgICAgICB1c2VyX2NhcmdvOiB2YWx1ZS5jYXJnbywKICAgICAgICAgICAgICB1c2VyX2lkOiB2YWx1ZS5pZCwKICAgICAgICAgICAgICB1c2VyX2FjdGl2bzogdmFsdWUuYWN0aXZvLAogICAgICAgICAgICAgIHVzZXJfYWNjaW9uOiB2YWx1ZS5hY2Npb24KICAgICAgICAgICAgfTsKICAgICAgICAgICAgdmFyIGRiUmVmID0gZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoJ1VzdWFyaW9zJyk7CiAgICAgICAgICAgIGRiUmVmLmNoaWxkKHZhbHVlLmlkKS5zZXQodmFsdWVzUmVmKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAvLyBBcXVpIGRlYm8gcG9uZXIgcGFyYSBxdWl0YXIgZWwgY2FyZ2Fkb3IKICAgICAgICAgICAgICBfdGhpczMuY29tbWl0KCdzZXRVc2VyJywgdmFsdWUpOwoKICAgICAgICAgICAgICBzdGF0ZS5hY3RVc2VyID0gbnVsbDsKICAgICAgICAgICAgICB2YXIgc3VjY2VzcyA9IHsKICAgICAgICAgICAgICAgIDA6ICdzdWNjZXNzVXBsb2FkJywKICAgICAgICAgICAgICAgIDE6ICdTZSBoYSBhY3R1YWxpemFkbyBleGl0b3NhbWVudGUnCiAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgX3RoaXMzLmNvbW1pdCgnc3VjY2Vzc0FkdmlzZScsIHN1Y2Nlc3MpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGlzVXNlckRpZmY6IGZ1bmN0aW9uIGlzVXNlckRpZmYoc3RhdGUsIHZhbHVlKSB7CiAgICAgIGlmICh2YWx1ZS50aXBvID09PSAnMCcpIHsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IE9iamVjdC52YWx1ZXMoc3RhdGUudXNlcikubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGlmIChPYmplY3QudmFsdWVzKHN0YXRlLnVzZXIpW2ldICE9PSBPYmplY3QudmFsdWVzKHN0YXRlLnJlZlVzZXIpW2ldKSB7CiAgICAgICAgICAgIHN0YXRlLmFjdFVzZXIgPSB0cnVlOwogICAgICAgICAgICByZXR1cm4gdGhpcy5jb21taXQoJ3VwZGF0ZVVzZXInLCBzdGF0ZS51c2VyKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc3RhdGUuYWN0VXNlciA9IHRydWU7CiAgICAgICAgdGhpcy5jb21taXQoJ3VwZGF0ZVVzZXInLCB2YWx1ZSk7CiAgICAgIH0KICAgIH0sCiAgICBkZWxldGVJdGVtOiBmdW5jdGlvbiBkZWxldGVJdGVtKHN0YXRlLCB2YWx1ZSkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHN0YXRlLmRlbGV0aW5nVmFsID0gdHJ1ZTsKICAgICAgc3RhdGUuZGVsZXRpbmdJbmRleCA9IHZhbHVlLmluZGV4OwoKICAgICAgaWYgKHZhbHVlLnN0b3JhZ2UgPT09IGZhbHNlKSB7CiAgICAgICAgZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoIiIuY29uY2F0KHZhbHVlLnJlZiwgIi8iKS5jb25jYXQodmFsdWUuaWREYikpLnJlbW92ZSgpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgc3RhdGUuZGVsZXRpbmdWYWwgPSBmYWxzZTsKICAgICAgICAgIHN0YXRlLmRlbGV0aW5nSW5kZXggPSAnJzsKICAgICAgICAgIHZhciBzdWNjZXNzID0gewogICAgICAgICAgICAwOiAnc3VjY2Vzc1VwbG9hZCcsCiAgICAgICAgICAgIDE6ICdTZSBoYSBlbGltaW5hZG8gZXhpdG9zYW1lbnRlJwogICAgICAgICAgfTsKCiAgICAgICAgICBfdGhpczQuY29tbWl0KCdzdWNjZXNzQWR2aXNlJywgc3VjY2Vzcyk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAodmFsdWUuc3RvcmFnZSA9PT0gdHJ1ZSkgewogICAgICAgIHRyeSB7CiAgICAgICAgICB2YXIgc3RvcmFnZVJlZiA9IGZpcmViYXNlLnN0b3JhZ2UoKS5yZWYoIi8iLmNvbmNhdCh2YWx1ZS5yZWYsICIvIikuY29uY2F0KHZhbHVlLmlkU3QpKTsKICAgICAgICAgIHN0b3JhZ2VSZWYubGlzdEFsbCgpLnRoZW4oZnVuY3Rpb24gKHByb20pIHsKICAgICAgICAgICAgaWYgKHByb20uaXRlbXMubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgICAgICAgcHJvbS5pdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICAgICAgICBzdG9yYWdlUmVmLmNoaWxkKGVsZW1lbnQubmFtZSkuZGVsZXRlKCkudGhlbihmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgICAgIGlmIChlcnIgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoIiIuY29uY2F0KHZhbHVlLnJlZiwgIi8iKS5jb25jYXQodmFsdWUuaWREYikpLnJlbW92ZSgpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgc3RhdGUuZGVsZXRpbmdWYWwgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLmRlbGV0aW5nSW5kZXggPSAnJzsKICAgICAgICAgICAgICAgICAgICAgIHZhciBzdWNjZXNzID0gewogICAgICAgICAgICAgICAgICAgICAgICAwOiAnc3VjY2Vzc1VwbG9hZCcsCiAgICAgICAgICAgICAgICAgICAgICAgIDE6ICdTZSBoYSBlbGltaW5hZG8gZXhpdG9zYW1lbnRlJwogICAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgICBfdGhpczQuY29tbWl0KCdzdWNjZXNzQWR2aXNlJywgc3VjY2Vzcyk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKCIiLmNvbmNhdCh2YWx1ZS5yZWYsICIvIikuY29uY2F0KHZhbHVlLmlkRGIpKS5yZW1vdmUoKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHN0YXRlLmRlbGV0aW5nVmFsID0gZmFsc2U7CiAgICAgICAgICAgICAgICBzdGF0ZS5kZWxldGluZ0luZGV4ID0gJyc7CiAgICAgICAgICAgICAgICB2YXIgc3VjY2VzcyA9IHsKICAgICAgICAgICAgICAgICAgMDogJ3N1Y2Nlc3NVcGxvYWQnLAogICAgICAgICAgICAgICAgICAxOiAnU2UgaGEgZWxpbWluYWRvIGV4aXRvc2FtZW50ZScKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgX3RoaXM0LmNvbW1pdCgnc3VjY2Vzc0FkdmlzZScsIHN1Y2Nlc3MpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgZGVsZXRlZEVsOiBmdW5jdGlvbiBkZWxldGVkRWwoc3RhdGUsIHZhbHVlKSB7CiAgICAgIGlmICh2YWx1ZVswXSA9PT0gMCkgewogICAgICAgIHN0YXRlLmRlbGV0aW5nVmFsID0gdmFsdWVbMV07CiAgICAgIH0KCiAgICAgIGlmICh2YWx1ZVswXSA9PT0gMSkgewogICAgICAgIHN0YXRlLmRlbGV0aW5nSW5kZXggPSB2YWx1ZVsxXTsKICAgICAgfQogICAgfSwKICAgIHJlc2V0Q29udGVudFZhbHVlczogZnVuY3Rpb24gcmVzZXRDb250ZW50VmFsdWVzKHN0YXRlLCB2YWwpIHsKICAgICAgaWYgKHZhbCA9PT0gMCkgewogICAgICAgIHN0YXRlLmNyZWF0ZUNvbnRlbnQuZm9ybVVwbG9hZC50aXR1bG8gPSAnJzsKICAgICAgICBzdGF0ZS5jcmVhdGVDb250ZW50LmZvcm1VcGxvYWQuaW5mbyA9ICcnOwogICAgICAgIHN0YXRlLmNyZWF0ZUNvbnRlbnQuZm9ybVVwbG9hZC5wcmV2ID0gJyc7CiAgICAgICAgc3RhdGUuY3JlYXRlQ29udGVudC5mb3JtVXBsb2FkLmltYWdlcyA9IFtdOwogICAgICAgIHN0YXRlLmNyZWF0ZUNvbnRlbnQuZm9ybVVwbG9hZC5mZWNoYSA9ICcnOwogICAgICAgIHN0YXRlLmNyZWF0ZUNvbnRlbnQuZm9ybVVwbG9hZC5pZCA9ICcnOwogICAgICAgIHN0YXRlLmNyZWF0ZUNvbnRlbnQuZm9ybVVwbG9hZC5zZWNjaW9uID0gJ1NlbGVjY2lvbmUgdW5hIG9wY2nDs24nOwogICAgICB9IGVsc2UgaWYgKHZhbCA9PT0gMSkgewogICAgICAgIHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQudGl0dWxvID0gJyc7CiAgICAgICAgc3RhdGUuZWRpdENvbnRlbnQuZm9ybVVwbG9hZC5pbmZvID0gJyc7CiAgICAgICAgc3RhdGUuZWRpdENvbnRlbnQuZm9ybVVwbG9hZC5wcmV2ID0gJyc7CiAgICAgICAgc3RhdGUuZWRpdENvbnRlbnQuZm9ybVVwbG9hZC5pbWFnZXMgPSBbXTsKICAgICAgICBzdGF0ZS5lZGl0Q29udGVudC5mb3JtVXBsb2FkLmZlY2hhID0gJyc7CiAgICAgICAgc3RhdGUuZWRpdENvbnRlbnQuZm9ybVVwbG9hZC5pZCA9ICcnOwogICAgICAgIHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQuc2VjY2lvbiA9ICdUb2RhcyBsYXMgc2VjY2lvbmVzJzsKICAgICAgfSBlbHNlIGlmICh2YWwgPT09IDMpIHsKICAgICAgICBzdGF0ZS51c2VycyA9IHsKICAgICAgICAgIHVzZXJSZWZlcjogZmFsc2UsCiAgICAgICAgICBjcmVhdGVVc2VyOiB7CiAgICAgICAgICAgIGZvcm1VcGxvYWQ6IHsKICAgICAgICAgICAgICBhY3Rpdm86ICcnLAogICAgICAgICAgICAgIGFwZWxsaWRvOiAnJywKICAgICAgICAgICAgICBjYXJnbzogJycsCiAgICAgICAgICAgICAgY29ycmVvOiAnJywKICAgICAgICAgICAgICBjb3JyZW9WZXJpOiAnJywKICAgICAgICAgICAgICBmb3RvVXJsOiAnJywKICAgICAgICAgICAgICBpZDogJycsCiAgICAgICAgICAgICAgbm9tYnJlOiAnJywKICAgICAgICAgICAgICB0ZWxlZm9ubzogJycsCiAgICAgICAgICAgICAgY3JlYXRlOiBmYWxzZSwKICAgICAgICAgICAgICBwYXNzOiAnJwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfQogICAgfSwKICAgIHN1Y2Nlc3NBZHZpc2U6IGZ1bmN0aW9uIHN1Y2Nlc3NBZHZpc2Uoc3RhdGUsIGRhdGEpIHsKICAgICAgc3RhdGVbIiIuY29uY2F0KGRhdGFbMF0pXSA9IGRhdGFbMV07CiAgICB9LAogICAgaGFuZGxlVXBsb2FkOiBmdW5jdGlvbiBoYW5kbGVVcGxvYWQoc3RhdGUsIGZpbGVzKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgdmFyIHN0b3JhZ2VSZWYgPSBbXTsKICAgICAgdmFyIHBlcmNlbnRhZ2UgPSBbXTsKICAgICAgdmFyIG9yZGVyID0gW107CiAgICAgIHZhciB0YXNrID0ge307CiAgICAgIHZhciBpID0gMDsKICAgICAgdmFyIGogPSAwOwogICAgICB2YXIgbSA9IDA7CiAgICAgIHZhciBuID0gMDsKCiAgICAgIGlmIChzdGF0ZS5jcmVhdGVDb250ZW50LmZvcm1VcGxvYWQudGlwbyA9PT0gdHJ1ZSkgewogICAgICAgIGZpbGVzLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgIHN0b3JhZ2VSZWYgPSBmaXJlYmFzZS5zdG9yYWdlKCkucmVmKCIvaW1hZ2VuZXMvbm90aWNpYXMvIi5jb25jYXQoc3RhdGUuY3JlYXRlQ29udGVudC5mb3JtVXBsb2FkLmlkLCAiL2ZvdG8iKS5jb25jYXQoZWxlbWVudC5pZCkpOwogICAgICAgICAgdGFza1tpXSA9IHN0b3JhZ2VSZWYucHV0KGVsZW1lbnQpOwogICAgICAgICAgaSsrOwogICAgICAgIH0pOwoKICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgZmlsZXMubGVuZ3RoOyBfaSsrKSB7CiAgICAgICAgICB0YXNrW19pXS5vbignc3RhdGVfY2hhbmdlZCcsIGZ1bmN0aW9uIChzbmFwc2hvdCkgewogICAgICAgICAgICBwZXJjZW50YWdlW3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdID0gc25hcHNob3QuYnl0ZXNUcmFuc2ZlcnJlZCAvIHNuYXBzaG90LnRvdGFsQnl0ZXMgKiAxMDA7CiAgICAgICAgICAgIHN0YXRlLmNyZWF0ZUNvbnRlbnQuZm9ybVVwbG9hZC5pbWFnZXNbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF0udXBsb2FkUGVyY2VudGFnZSA9IHBlcmNlbnRhZ2Vbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF07CiAgICAgICAgICAgIG0rKzsKCiAgICAgICAgICAgIGlmIChzdGF0ZS5jcmVhdGVDb250ZW50LmZvcm1VcGxvYWQuaW1hZ2VzW3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdLnVwbG9hZFBlcmNlbnRhZ2UgPT09IDEwMCAmJiBvcmRlci5sZW5ndGggPCBmaWxlcy5sZW5ndGgpIHsKICAgICAgICAgICAgICBvcmRlci5wdXNoKHNuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IubWVzc2FnZSk7CiAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBkYXRhUmVmID0gewogICAgICAgICAgICAgIG5vdGlfdGl0dWxvOiBzdGF0ZS5jcmVhdGVDb250ZW50LmZvcm1VcGxvYWQudGl0dWxvLAogICAgICAgICAgICAgIG5vdGlfaW5mbzogc3RhdGUuY3JlYXRlQ29udGVudC5mb3JtVXBsb2FkLmluZm8sCiAgICAgICAgICAgICAgbm90aV9mZWNoYTogc3RhdGUuY3JlYXRlQ29udGVudC5mb3JtVXBsb2FkLmZlY2hhLAogICAgICAgICAgICAgIG5vdGlfaWQ6IHN0YXRlLmNyZWF0ZUNvbnRlbnQuZm9ybVVwbG9hZC5pZCwKICAgICAgICAgICAgICBub3RpX3ByZXY6IHN0YXRlLmNyZWF0ZUNvbnRlbnQuZm9ybVVwbG9hZC5wcmV2LAogICAgICAgICAgICAgIG5vdGlfcHVibGljYXI6IHRydWUsCiAgICAgICAgICAgICAgbm90aV9zZWNjaW9uOiBzdGF0ZS5jcmVhdGVDb250ZW50LmZvcm1VcGxvYWQuc2VjY2lvbiwKICAgICAgICAgICAgICBub3RpX2ltYWdlbmVzOiBbXQogICAgICAgICAgICB9OwogICAgICAgICAgICB2YXIgc3RvcmFnZVJlZiA9IGZpcmViYXNlLnN0b3JhZ2UoKS5yZWYoIi9pbWFnZW5lcy9ub3RpY2lhcy8iLmNvbmNhdChzdGF0ZS5jcmVhdGVDb250ZW50LmZvcm1VcGxvYWQuaWQsICIvZm90byIpLmNvbmNhdChvcmRlcltqXSkpOwogICAgICAgICAgICBzdG9yYWdlUmVmLmdldERvd25sb2FkVVJMKCkudGhlbihmdW5jdGlvbiAodXJsKSB7CiAgICAgICAgICAgICAgdmFyIHZhbCA9IG9yZGVyW25dOwogICAgICAgICAgICAgIHN0YXRlLmNyZWF0ZUNvbnRlbnQuZm9ybVVwbG9hZC5pbWFnZXNbdmFsXS51cmwgPSB1cmw7CiAgICAgICAgICAgICAgc3RhdGUuY3JlYXRlQ29udGVudC5mb3JtVXBsb2FkLmltYWdlc1t2YWxdLm5hbWUgPSAiZm90byIuY29uY2F0KHZhbCk7CiAgICAgICAgICAgICAgbisrOwoKICAgICAgICAgICAgICBpZiAobiA+PSBzdGF0ZS5jcmVhdGVDb250ZW50LmZvcm1VcGxvYWQuaW1hZ2VzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgbiA9IDA7CiAgICAgICAgICAgICAgICBzdGF0ZS5jcmVhdGVDb250ZW50LmZvcm1VcGxvYWQuaW1hZ2VzLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgICAgICAgICAgZGF0YVJlZi5ub3RpX2ltYWdlbmVzLnB1c2goe30pOwogICAgICAgICAgICAgICAgICBkYXRhUmVmLm5vdGlfaW1hZ2VuZXNbbl0ubm9tYnJlID0gc3RhdGUuY3JlYXRlQ29udGVudC5mb3JtVXBsb2FkLmltYWdlc1tuXS5uYW1lOwogICAgICAgICAgICAgICAgICBkYXRhUmVmLm5vdGlfaW1hZ2VuZXNbbl0udXJsID0gc3RhdGUuY3JlYXRlQ29udGVudC5mb3JtVXBsb2FkLmltYWdlc1tuXS51cmw7CiAgICAgICAgICAgICAgICAgIG4rKzsKCiAgICAgICAgICAgICAgICAgIGlmIChuID49IHN0YXRlLmNyZWF0ZUNvbnRlbnQuZm9ybVVwbG9hZC5pbWFnZXMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGRiUmVmID0gZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoJ05vdGljaWFzJyk7CiAgICAgICAgICAgICAgICAgICAgZGJSZWYuY2hpbGQoc3RhdGUuY3JlYXRlQ29udGVudC5mb3JtVXBsb2FkLmlkKS5zZXQoZGF0YVJlZik7CiAgICAgICAgICAgICAgICAgICAgc3RhdGUuY3JlYXRlQ29udGVudC5mb3JtVXBsb2FkLnRpcG8gPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB2YXIgc3VjY2VzcyA9IHsKICAgICAgICAgICAgICAgICAgICAgIDA6ICdzdWNjZXNzVXBsb2FkJywKICAgICAgICAgICAgICAgICAgICAgIDE6ICdTZSBoYSBjcmVhZG8gZXhpdG9zYW1lbnRlJwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIF90aGlzNS5jb21taXQoJ3N1Y2Nlc3NBZHZpc2UnLCBzdWNjZXNzKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaisrOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQudGlwbyA9PT0gdHJ1ZSkgewogICAgICAgIGlmIChzdGF0ZS5lZGl0Q29udGVudC5mb3JtVXBsb2FkLnVwbG9hZEltYWdlcyA9PT0gdHJ1ZSkgewogICAgICAgICAgZmlsZXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgICBzdG9yYWdlUmVmID0gZmlyZWJhc2Uuc3RvcmFnZSgpLnJlZigiL2ltYWdlbmVzL25vdGljaWFzLyIuY29uY2F0KHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQuaWQsICIvZm90byIpLmNvbmNhdChlbGVtZW50LmlkKSk7CiAgICAgICAgICAgIHRhc2tbaV0gPSBzdG9yYWdlUmVmLnB1dChlbGVtZW50KTsKICAgICAgICAgICAgaSsrOwogICAgICAgICAgfSk7CgogICAgICAgICAgZm9yICh2YXIgX2kyID0gMDsgX2kyIDwgZmlsZXMubGVuZ3RoOyBfaTIrKykgewogICAgICAgICAgICB0YXNrW19pMl0ub24oJ3N0YXRlX2NoYW5nZWQnLCBmdW5jdGlvbiAoc25hcHNob3QpIHsKICAgICAgICAgICAgICBwZXJjZW50YWdlW3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdID0gc25hcHNob3QuYnl0ZXNUcmFuc2ZlcnJlZCAvIHNuYXBzaG90LnRvdGFsQnl0ZXMgKiAxMDA7CiAgICAgICAgICAgICAgc3RhdGUuZWRpdENvbnRlbnQuZm9ybVVwbG9hZC5pbWFnZXNbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF0udXBsb2FkUGVyY2VudGFnZSA9IHBlcmNlbnRhZ2Vbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF07CiAgICAgICAgICAgICAgOwogICAgICAgICAgICAgIG0rKzsKCiAgICAgICAgICAgICAgaWYgKHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQuaW1hZ2VzW3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdLnVwbG9hZFBlcmNlbnRhZ2UgPT09IDEwMCAmJiBvcmRlci5sZW5ndGggPCBmaWxlcy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIG9yZGVyLnB1c2goc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5tZXNzYWdlKTsKICAgICAgICAgICAgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHZhciBkYXRhUmVmID0gewogICAgICAgICAgICAgICAgbm90aV90aXR1bG86IHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQudGl0dWxvLAogICAgICAgICAgICAgICAgbm90aV9pbmZvOiBzdGF0ZS5lZGl0Q29udGVudC5mb3JtVXBsb2FkLmluZm8sCiAgICAgICAgICAgICAgICBub3RpX2ZlY2hhOiBzdGF0ZS5lZGl0Q29udGVudC5mb3JtVXBsb2FkLmZlY2hhLAogICAgICAgICAgICAgICAgbm90aV9pZDogc3RhdGUuZWRpdENvbnRlbnQuZm9ybVVwbG9hZC5pZCwKICAgICAgICAgICAgICAgIG5vdGlfcHJldjogc3RhdGUuZWRpdENvbnRlbnQuZm9ybVVwbG9hZC5wcmV2LAogICAgICAgICAgICAgICAgbm90aV9wdWJsaWNhcjogdHJ1ZSwKICAgICAgICAgICAgICAgIG5vdGlfc2VjY2lvbjogc3RhdGUuZWRpdENvbnRlbnQuZm9ybVVwbG9hZC5zZWNjaW9uLAogICAgICAgICAgICAgICAgbm90aV9pbWFnZW5lczogW10KICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIHZhciBzdG9yYWdlUmVmID0gZmlyZWJhc2Uuc3RvcmFnZSgpLnJlZigiL2ltYWdlbmVzL25vdGljaWFzLyIuY29uY2F0KHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQuaWQsICIvZm90byIpLmNvbmNhdChvcmRlcltqXSkpOwogICAgICAgICAgICAgIHN0b3JhZ2VSZWYuZ2V0RG93bmxvYWRVUkwoKS50aGVuKGZ1bmN0aW9uICh1cmwpIHsKICAgICAgICAgICAgICAgIHZhciB2YWwgPSBvcmRlcltuXTsKICAgICAgICAgICAgICAgIHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQuaW1hZ2VzW3ZhbF0udXJsID0gdXJsOwogICAgICAgICAgICAgICAgc3RhdGUuZWRpdENvbnRlbnQuZm9ybVVwbG9hZC5pbWFnZXNbdmFsXS5uYW1lID0gImZvdG8iLmNvbmNhdCh2YWwpOwogICAgICAgICAgICAgICAgbisrOwoKICAgICAgICAgICAgICAgIGlmIChuID49IHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQuaW1hZ2VzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICBuID0gMDsKICAgICAgICAgICAgICAgICAgc3RhdGUuZWRpdENvbnRlbnQuZm9ybVVwbG9hZC5pbWFnZXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgICAgICAgICAgIGRhdGFSZWYubm90aV9pbWFnZW5lcy5wdXNoKHt9KTsKICAgICAgICAgICAgICAgICAgICBkYXRhUmVmLm5vdGlfaW1hZ2VuZXNbbl0ubm9tYnJlID0gc3RhdGUuZWRpdENvbnRlbnQuZm9ybVVwbG9hZC5pbWFnZXNbbl0ubmFtZTsKICAgICAgICAgICAgICAgICAgICBkYXRhUmVmLm5vdGlfaW1hZ2VuZXNbbl0udXJsID0gc3RhdGUuZWRpdENvbnRlbnQuZm9ybVVwbG9hZC5pbWFnZXNbbl0udXJsOwogICAgICAgICAgICAgICAgICAgIG4rKzsKCiAgICAgICAgICAgICAgICAgICAgaWYgKG4gPj0gc3RhdGUuZWRpdENvbnRlbnQuZm9ybVVwbG9hZC5pbWFnZXMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgZGJSZWYgPSBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZignTm90aWNpYXMnKTsKICAgICAgICAgICAgICAgICAgICAgIGRiUmVmLmNoaWxkKHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQuaWQpLnNldChkYXRhUmVmKTsKICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQudGlwbyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgdmFyIHN1Y2Nlc3MgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIDA6ICdzdWNjZXNzVXBsb2FkJywKICAgICAgICAgICAgICAgICAgICAgICAgMTogJ1NlIGhhIGFjdHVhbGl6YWRvIGV4aXRvc2FtZW50ZScKICAgICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgICAgX3RoaXM1LmNvbW1pdCgnc3VjY2Vzc0FkdmlzZScsIHN1Y2Nlc3MpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgaisrOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFyIGRhdGFSZWYgPSB7CiAgICAgICAgICAgIG5vdGlfdGl0dWxvOiBzdGF0ZS5lZGl0Q29udGVudC5mb3JtVXBsb2FkLnRpdHVsbywKICAgICAgICAgICAgbm90aV9pbmZvOiBzdGF0ZS5lZGl0Q29udGVudC5mb3JtVXBsb2FkLmluZm8sCiAgICAgICAgICAgIG5vdGlfZmVjaGE6IHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQuZmVjaGEsCiAgICAgICAgICAgIG5vdGlfaWQ6IHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQuaWQsCiAgICAgICAgICAgIG5vdGlfcHJldjogc3RhdGUuZWRpdENvbnRlbnQuZm9ybVVwbG9hZC5wcmV2LAogICAgICAgICAgICBub3RpX3B1YmxpY2FyOiB0cnVlLAogICAgICAgICAgICBub3RpX3NlY2Npb246IHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQuc2VjY2lvbiwKICAgICAgICAgICAgbm90aV9pbWFnZW5lczogc3RhdGUuZWRpdENvbnRlbnQuZm9ybVVwbG9hZC5pbWFnZXMKICAgICAgICAgIH07CiAgICAgICAgICB2YXIgZGJSZWYgPSBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZignTm90aWNpYXMnKTsKICAgICAgICAgIGRiUmVmLmNoaWxkKHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQuaWQpLnNldChkYXRhUmVmKTsKICAgICAgICAgIHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQudGlwbyA9IGZhbHNlOwogICAgICAgICAgdmFyIHN1Y2Nlc3MgPSB7CiAgICAgICAgICAgIDA6ICdzdWNjZXNzVXBsb2FkJywKICAgICAgICAgICAgMTogJ1NlIGhhIGFjdHVhbGl6YWRvIGV4aXRvc2FtZW50ZScKICAgICAgICAgIH07CiAgICAgICAgICB0aGlzLmNvbW1pdCgnc3VjY2Vzc0FkdmlzZScsIHN1Y2Nlc3MpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChzdGF0ZS5kZWxldGVDb250ZW50LmZvcm1VcGxvYWQudGlwbyA9PT0gdHJ1ZSkgewogICAgICAgIHRyeSB7CiAgICAgICAgICB2YXIgX3N0b3JhZ2VSZWYgPSBmaXJlYmFzZS5zdG9yYWdlKCkucmVmKCIvaW1hZ2VuZXMvbm90aWNpYXMvIi5jb25jYXQoc3RhdGUuZGVsZXRlQ29udGVudC5mb3JtVXBsb2FkLmlkKSk7CgogICAgICAgICAgX3N0b3JhZ2VSZWYubGlzdEFsbCgpLnRoZW4oZnVuY3Rpb24gKHByb20pIHsKICAgICAgICAgICAgcHJvbS5pdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICAgICAgX3N0b3JhZ2VSZWYuY2hpbGQoZWxlbWVudC5uYW1lKS5kZWxldGUoKS50aGVuKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICAgIGlmIChlcnIgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoIk5vdGljaWFzLyIuY29uY2F0KHN0YXRlLmRlbGV0ZUNvbnRlbnQuZm9ybVVwbG9hZC5pZCkpLnJlbW92ZSgpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHN0YXRlLmRlbGV0aW5nVmFsID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgc3RhdGUuZGVsZXRlQ29udGVudC5mb3JtVXBsb2FkLnRpcG8gPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB2YXIgc3VjY2VzcyA9IHsKICAgICAgICAgICAgICAgICAgICAgIDA6ICdzdWNjZXNzVXBsb2FkJywKICAgICAgICAgICAgICAgICAgICAgIDE6ICdTZSBoYSBlbGltaW5hZG8gZXhpdG9zYW1lbnRlJwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIF90aGlzNS5jb21taXQoJ3N1Y2Nlc3NBZHZpc2UnLCBzdWNjZXNzKTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGZpbGVzVXBsb2FkOiBmdW5jdGlvbiBmaWxlc1VwbG9hZChzdGF0ZSwgZGF0YSkgewogICAgICBzdGF0ZS5mb3JtdGlwbyA9IGRhdGFbMl07CgogICAgICBpZiAoc3RhdGUuZm9ybXRpcG8gPT09IDApIHsKICAgICAgICB2YXIgZCA9IG5ldyBEYXRlKCk7CiAgICAgICAgdmFyIG1pbGlTZWMgPSBEYXRlLnBhcnNlKGQpOwogICAgICAgIHZhciBkU3RyaW5nID0gZC50b1N0cmluZygpOwogICAgICAgIHZhciBzcGxpdHRlZERhdGUgPSBkU3RyaW5nLnNwbGl0KCcgJyk7CiAgICAgICAgdmFyIGpvaW5lZERhdGUgPSBbXTsKCiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCA1OyBpKyspIHsKICAgICAgICAgIGpvaW5lZERhdGUucHVzaChzcGxpdHRlZERhdGVbaV0pOwogICAgICAgIH0KCiAgICAgICAgdmFyIGpvaW5lZCA9IGpvaW5lZERhdGUuam9pbignfCcpOwogICAgICAgIHN0YXRlLmNyZWF0ZUNvbnRlbnQuZm9ybVVwbG9hZC50aXBvID0gdHJ1ZTsKICAgICAgICBzdGF0ZS5jcmVhdGVDb250ZW50LmZvcm1VcGxvYWQuZmVjaGEgPSBqb2luZWQ7CiAgICAgICAgc3RhdGUuY3JlYXRlQ29udGVudC5mb3JtVXBsb2FkLmltYWdlcyA9IGRhdGFbMF07CiAgICAgICAgc3RhdGUuY3JlYXRlQ29udGVudC5mb3JtVXBsb2FkLmlkID0gbWlsaVNlYzsKICAgICAgICB0aGlzLmNvbW1pdCgnaGFuZGxlVXBsb2FkJywgZGF0YVsxXSk7CiAgICAgIH0gZWxzZSBpZiAoc3RhdGUuZm9ybXRpcG8gPT09IDEpIHsKICAgICAgICBzdGF0ZS5lZGl0Q29udGVudC5mb3JtVXBsb2FkLnRpcG8gPSB0cnVlOwogICAgICAgIHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQuZmVjaGEgPSBkYXRhWzBdLmZlY2hhOwogICAgICAgIHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQuaW1hZ2VzID0gZGF0YVswXS5pbWFnZW5lczsKICAgICAgICBzdGF0ZS5lZGl0Q29udGVudC5mb3JtVXBsb2FkLmlkID0gZGF0YVswXS5pZDsKICAgICAgICBzdGF0ZS5lZGl0Q29udGVudC5mb3JtVXBsb2FkLnRpdHVsbyA9IGRhdGFbMF0udGl0dWxvOwogICAgICAgIHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQuaW5mbyA9IGRhdGFbMF0uaW5mbzsKICAgICAgICBzdGF0ZS5lZGl0Q29udGVudC5mb3JtVXBsb2FkLnByZXYgPSBkYXRhWzBdLnByZXY7CiAgICAgICAgc3RhdGUuZWRpdENvbnRlbnQuZm9ybVVwbG9hZC5zZWNjaW9uID0gZGF0YVswXS5zZWNjaW9uOwogICAgICAgIHN0YXRlLmVkaXRDb250ZW50LmZvcm1VcGxvYWQudXBsb2FkSW1hZ2VzID0gZGF0YVszXTsKICAgICAgICBzdGF0ZS5lZGl0Q29udGVudC5mb3JtVXBsb2FkLnVwbG9hZERhdGFCYXNlID0gZGF0YVs0XTsKICAgICAgICB0aGlzLmNvbW1pdCgnaGFuZGxlVXBsb2FkJywgZGF0YVsxXSk7CiAgICAgIH0gZWxzZSBpZiAoc3RhdGUuZm9ybXRpcG8gPT09IDIpIHsKICAgICAgICBzdGF0ZS5kZWxldGVDb250ZW50LmZvcm1VcGxvYWQuaWQgPSBkYXRhWzBdOwogICAgICAgIHN0YXRlLmRlbGV0ZUNvbnRlbnQuZm9ybVVwbG9hZC50aXBvID0gdHJ1ZTsKICAgICAgICBzdGF0ZS5kZWxldGluZ1ZhbCA9IHRydWU7CiAgICAgICAgc3RhdGUuZGVsZXRpbmdJbmRleCA9IGRhdGFbM107CiAgICAgICAgdGhpcy5jb21taXQoJ2hhbmRsZVVwbG9hZCcsIGRhdGFbMV0pOwogICAgICB9CiAgICB9LAogICAgY3JlYXJEQjogZnVuY3Rpb24gY3JlYXJEQihzdGF0ZSwgZGF0YSkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIHN0YXRlLmNyZWFyREJWYWxzID0gdHJ1ZTsKCiAgICAgIGlmIChkYXRhLnRhcmdldCA9PT0gJ0p1bnRhcycpIHsKICAgICAgICBpZiAoT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5sZW5ndGggIT09IDApIHsKICAgICAgICAgIGZvciAodmFyIF9pMyA9IDA7IF9pMyA8IE9iamVjdC52YWx1ZXMoZGF0YS5qdW50YS5pbnRlZ3JhbnRlcykubGVuZ3RoOyBfaTMrKykgewogICAgICAgICAgICBzdGF0ZS5kYkltZ1tfaTNdID0gW107CiAgICAgICAgICAgIHN0YXRlLmRiSW1nW19pM10gPSBPYmplY3QudmFsdWVzKGRhdGEuanVudGEuaW50ZWdyYW50ZXMpW19pM10uaW1hZ2U7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB2YXIgc3RvcmFnZVJlZiA9IFtdOwogICAgICAgIHZhciBwZXJjZW50YWdlID0gW107CiAgICAgICAgdmFyIG9yZGVyID0gW107CiAgICAgICAgdmFyIHRhc2sgPSB7fTsKICAgICAgICB2YXIgaSA9IDA7CiAgICAgICAgdmFyIGogPSAwOwogICAgICAgIHZhciBuID0gMDsKICAgICAgICB2YXIgZGJSZWYgPSBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZigiIi5jb25jYXQoZGF0YS50YXJnZXQpKTsKICAgICAgICB2YXIgcHVzaGRiUmVmID0gZGJSZWYucHVzaCgpOwogICAgICAgIHZhciBkYXRhUmVmID0gewogICAgICAgICAganVudF9pZDogcHVzaGRiUmVmLmtleQogICAgICAgIH07CiAgICAgICAgT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICBzdG9yYWdlUmVmID0gZmlyZWJhc2Uuc3RvcmFnZSgpLnJlZigiLyIuY29uY2F0KGRhdGEudGFyZ2V0LCAiLyIpLmNvbmNhdChkYXRhUmVmLmp1bnRfaWQsICIvIikuY29uY2F0KGRhdGEuanVudGEuaW50ZWdyYW50ZXNbIiIuY29uY2F0KGVsZW1lbnQuaWQpXS5jYXJnby5zcGxpdCgnICcpLmpvaW4oJ18nKSkpOwogICAgICAgICAgdGFza1siIi5jb25jYXQoZWxlbWVudC5pZCldID0gc3RvcmFnZVJlZi5wdXQoZWxlbWVudCk7CiAgICAgICAgfSk7CgogICAgICAgIGlmIChPYmplY3QudmFsdWVzKHRhc2spLmxlbmd0aCAhPT0gMCkgewogICAgICAgICAgT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICAgIHRhc2tbIiIuY29uY2F0KGVsZW1lbnQuaWQpXS5vbignc3RhdGVfY2hhbmdlZCcsIGZ1bmN0aW9uIChzbmFwc2hvdCkgewogICAgICAgICAgICAgIHBlcmNlbnRhZ2Vbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF0gPSBzbmFwc2hvdC5ieXRlc1RyYW5zZmVycmVkIC8gc25hcHNob3QudG90YWxCeXRlcyAqIDEwMDsKICAgICAgICAgICAgICBzdGF0ZS5kYkltZ1tzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkXS51cGxvYWRQZXJjZW50YWdlID0gcGVyY2VudGFnZVtzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkXTsKCiAgICAgICAgICAgICAgaWYgKHN0YXRlLmRiSW1nW3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdLnVwbG9hZFBlcmNlbnRhZ2UgPT09IDEwMCAmJiBvcmRlci5sZW5ndGggPCBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgb3JkZXIucHVzaChzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLm1lc3NhZ2UpOwogICAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgZGF0YVJlZi5qdW50X3BlcmlvZG8gPSAiIi5jb25jYXQoZGF0YS5qdW50YS5pbmljaW8sICItIikuY29uY2F0KGRhdGEuanVudGEuZmluKTsKICAgICAgICAgICAgICBkYXRhUmVmLmp1bnRfYWN0aXZhID0gZGF0YS5qdW50YS5qdW50YV9hY3R1YWw7CiAgICAgICAgICAgICAgZGF0YVJlZi5qdW50X2ludGVncmFudGVzID0gW107CgogICAgICAgICAgICAgIGZvciAodmFyIF9pNCA9IDA7IF9pNCA8IE9iamVjdC52YWx1ZXMoZGF0YS5qdW50YS5pbnRlZ3JhbnRlcykubGVuZ3RoOyBfaTQrKykgewogICAgICAgICAgICAgICAgZGF0YVJlZi5qdW50X2ludGVncmFudGVzW19pNF0gPSBbXTsKICAgICAgICAgICAgICAgIGRhdGFSZWYuanVudF9pbnRlZ3JhbnRlc1tfaTRdLmp1aW5fY2FyZ28gPSBPYmplY3QudmFsdWVzKGRhdGEuanVudGEuaW50ZWdyYW50ZXMpW19pNF0uY2FyZ287CiAgICAgICAgICAgICAgICBkYXRhUmVmLmp1bnRfaW50ZWdyYW50ZXNbX2k0XS5qdWluX25vbWJyZSA9IE9iamVjdC52YWx1ZXMoZGF0YS5qdW50YS5pbnRlZ3JhbnRlcylbX2k0XS5ub21icmU7CiAgICAgICAgICAgICAgICBkYXRhUmVmLmp1bnRfaW50ZWdyYW50ZXNbX2k0XS5qdWluX2FwZWxsaWRvID0gT2JqZWN0LnZhbHVlcyhkYXRhLmp1bnRhLmludGVncmFudGVzKVtfaTRdLmFwZWxsaWRvOwogICAgICAgICAgICAgICAgZGF0YVJlZi5qdW50X2ludGVncmFudGVzW19pNF0uanVpbl9jb3JyZW8gPSBPYmplY3QudmFsdWVzKGRhdGEuanVudGEuaW50ZWdyYW50ZXMpW19pNF0uY29ycmVvOwogICAgICAgICAgICAgICAgZGF0YVJlZi5qdW50X2ludGVncmFudGVzW19pNF0uanVpbl9mb3RvID0gW107CiAgICAgICAgICAgICAgICBkYXRhUmVmLmp1bnRfaW50ZWdyYW50ZXNbX2k0XS5qdWluX2FjdGl2byA9IE9iamVjdC52YWx1ZXMoZGF0YS5qdW50YS5pbnRlZ3JhbnRlcylbX2k0XS5hY3Rpdm87CiAgICAgICAgICAgICAgICBkYXRhUmVmLmp1bnRfaW50ZWdyYW50ZXNbX2k0XS5qdWluX2NyZWFyID0gT2JqZWN0LnZhbHVlcyhkYXRhLmp1bnRhLmludGVncmFudGVzKVtfaTRdLmNyZWFyOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgdmFyIHN0b3JhZ2VSZWYgPSBmaXJlYmFzZS5zdG9yYWdlKCkucmVmKCIvIi5jb25jYXQoZGF0YS50YXJnZXQsICIvIikuY29uY2F0KGRhdGFSZWYuanVudF9pZCwgIi8iKS5jb25jYXQoZGF0YS5qdW50YS5pbnRlZ3JhbnRlc1siIi5jb25jYXQob3JkZXJbal0pXS5jYXJnby5zcGxpdCgnICcpLmpvaW4oJ18nKSkpOwogICAgICAgICAgICAgIHN0b3JhZ2VSZWYuZ2V0RG93bmxvYWRVUkwoKS50aGVuKGZ1bmN0aW9uICh1cmwpIHsKICAgICAgICAgICAgICAgIHZhciB2YWwgPSBvcmRlcltuXTsKICAgICAgICAgICAgICAgIHN0YXRlLmRiSW1nW3ZhbF0udXJsID0gdXJsOwogICAgICAgICAgICAgICAgc3RhdGUuZGJJbWdbdmFsXS5ub21icmUgPSAiIi5jb25jYXQoZGF0YS5qdW50YS5pbnRlZ3JhbnRlc1siIi5jb25jYXQob3JkZXJbbl0pXS5jYXJnby5zcGxpdCgnICcpLmpvaW4oJ18nKSk7CiAgICAgICAgICAgICAgICBuKys7CgogICAgICAgICAgICAgICAgaWYgKG4gPj0gb3JkZXIubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgIGkgPSAwOwogICAgICAgICAgICAgICAgICBPYmplY3QudmFsdWVzKGRhdGFSZWYuanVudF9pbnRlZ3JhbnRlcykuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5kYkltZ1tpXS5ub21icmUgIT09IHVuZGVmaW5lZCAmJiBzdGF0ZS5kYkltZ1tpXS51cmwgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5qdWluX2ZvdG8ubm9tYnJlID0gc3RhdGUuZGJJbWdbaV0ubm9tYnJlOwogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5qdWluX2ZvdG8udXJsID0gc3RhdGUuZGJJbWdbaV0udXJsOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50Lmp1aW5fZm90byA9ICIiOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaSsrOwoKICAgICAgICAgICAgICAgICAgICBpZiAobiA+PSBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgcHVzaGRiUmVmLnNldChkYXRhUmVmKTsKICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLmNyZWFyREJWYWxzID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgc3VjY2VzcyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgMDogJ3N1Y2Nlc3NVcGxvYWQnLAogICAgICAgICAgICAgICAgICAgICAgICAxOiAnU2UgaGEgY3JlYWRvIGV4aXRvc2FtZW50ZScKICAgICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgICAgX3RoaXM2LmNvbW1pdCgnc3VjY2Vzc0FkdmlzZScsIHN1Y2Nlc3MpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgaisrOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBkYXRhUmVmLmp1bnRfcGVyaW9kbyA9ICIiLmNvbmNhdChkYXRhLmp1bnRhLmluaWNpbywgIi0iKS5jb25jYXQoZGF0YS5qdW50YS5maW4pOwogICAgICAgICAgZGF0YVJlZi5qdW50X2FjdGl2YSA9IGRhdGEuanVudGEuanVudGFfYWN0dWFsOwogICAgICAgICAgZGF0YVJlZi5qdW50X2ludGVncmFudGVzID0gW107CgogICAgICAgICAgZm9yICh2YXIgX2k1ID0gMDsgX2k1IDwgT2JqZWN0LnZhbHVlcyhkYXRhLmp1bnRhLmludGVncmFudGVzKS5sZW5ndGg7IF9pNSsrKSB7CiAgICAgICAgICAgIGRhdGFSZWYuanVudF9pbnRlZ3JhbnRlc1tfaTVdID0gW107CiAgICAgICAgICAgIGRhdGFSZWYuanVudF9pbnRlZ3JhbnRlc1tfaTVdLmp1aW5fY2FyZ28gPSBPYmplY3QudmFsdWVzKGRhdGEuanVudGEuaW50ZWdyYW50ZXMpW19pNV0uY2FyZ287CiAgICAgICAgICAgIGRhdGFSZWYuanVudF9pbnRlZ3JhbnRlc1tfaTVdLmp1aW5fbm9tYnJlID0gT2JqZWN0LnZhbHVlcyhkYXRhLmp1bnRhLmludGVncmFudGVzKVtfaTVdLm5vbWJyZTsKICAgICAgICAgICAgZGF0YVJlZi5qdW50X2ludGVncmFudGVzW19pNV0uanVpbl9hcGVsbGlkbyA9IE9iamVjdC52YWx1ZXMoZGF0YS5qdW50YS5pbnRlZ3JhbnRlcylbX2k1XS5hcGVsbGlkbzsKICAgICAgICAgICAgZGF0YVJlZi5qdW50X2ludGVncmFudGVzW19pNV0uanVpbl9jb3JyZW8gPSBPYmplY3QudmFsdWVzKGRhdGEuanVudGEuaW50ZWdyYW50ZXMpW19pNV0uY29ycmVvOwogICAgICAgICAgICBkYXRhUmVmLmp1bnRfaW50ZWdyYW50ZXNbX2k1XS5qdWluX2ZvdG8gPSBPYmplY3QudmFsdWVzKGRhdGEuanVudGEuaW50ZWdyYW50ZXMpW19pNV0uaW1hZ2U7CiAgICAgICAgICAgIGRhdGFSZWYuanVudF9pbnRlZ3JhbnRlc1tfaTVdLmp1aW5fYWN0aXZvID0gT2JqZWN0LnZhbHVlcyhkYXRhLmp1bnRhLmludGVncmFudGVzKVtfaTVdLmFjdGl2bzsKICAgICAgICAgICAgZGF0YVJlZi5qdW50X2ludGVncmFudGVzW19pNV0uanVpbl9jcmVhciA9IE9iamVjdC52YWx1ZXMoZGF0YS5qdW50YS5pbnRlZ3JhbnRlcylbX2k1XS5jcmVhcjsKICAgICAgICAgIH0KCiAgICAgICAgICBwdXNoZGJSZWYuc2V0KGRhdGFSZWYpOwogICAgICAgICAgc3RhdGUuY3JlYXJEQlZhbHMgPSBmYWxzZTsKICAgICAgICAgIHZhciBzdWNjZXNzID0gewogICAgICAgICAgICAwOiAnc3VjY2Vzc1VwbG9hZCcsCiAgICAgICAgICAgIDE6ICdTZSBoYSBjcmVhZG8gZXhpdG9zYW1lbnRlJwogICAgICAgICAgfTsKICAgICAgICAgIHRoaXMuY29tbWl0KCdzdWNjZXNzQWR2aXNlJywgc3VjY2Vzcyk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKGRhdGEudGFyZ2V0ID09PSAnU2VydmljaW9zJykgewogICAgICAgIGlmIChPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmxlbmd0aCAhPT0gMCkgewogICAgICAgICAgc3RhdGUuZGJJbWcgPSBbXTsKICAgICAgICAgIHN0YXRlLmRiSW1nWzBdID0gZGF0YS5zZXJ2aWNpby5pbWFnZTsKICAgICAgICB9CgogICAgICAgIHZhciBfc3RvcmFnZVJlZjIgPSBbXTsKICAgICAgICB2YXIgX3BlcmNlbnRhZ2UgPSBbXTsKICAgICAgICB2YXIgX29yZGVyID0gW107CiAgICAgICAgdmFyIF90YXNrID0ge307CiAgICAgICAgdmFyIF9uID0gMDsKCiAgICAgICAgdmFyIF9kYlJlZiA9IGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKCIiLmNvbmNhdChkYXRhLnRhcmdldCkpOwoKICAgICAgICB2YXIgX3B1c2hkYlJlZiA9IF9kYlJlZi5wdXNoKCk7CgogICAgICAgIHZhciBfZGF0YVJlZiA9IHsKICAgICAgICAgIHNlcnZfaWQ6IF9wdXNoZGJSZWYua2V5CiAgICAgICAgfTsKICAgICAgICBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgIF9zdG9yYWdlUmVmMiA9IGZpcmViYXNlLnN0b3JhZ2UoKS5yZWYoIi8iLmNvbmNhdChkYXRhLnRhcmdldCwgIi8iKS5jb25jYXQoX2RhdGFSZWYuc2Vydl9pZCwgIi8iKS5jb25jYXQoZGF0YS5zZXJ2aWNpby5ub21icmUuc3BsaXQoJyAnKS5qb2luKCdfJykpKTsKICAgICAgICAgIF90YXNrWyIiLmNvbmNhdChlbGVtZW50LmlkKV0gPSBfc3RvcmFnZVJlZjIucHV0KGVsZW1lbnQpOwogICAgICAgIH0pOwoKICAgICAgICBpZiAoT2JqZWN0LnZhbHVlcyhfdGFzaykubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgICBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgICAgX3Rhc2tbIiIuY29uY2F0KGVsZW1lbnQuaWQpXS5vbignc3RhdGVfY2hhbmdlZCcsIGZ1bmN0aW9uIChzbmFwc2hvdCkgewogICAgICAgICAgICAgIF9wZXJjZW50YWdlW3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdID0gc25hcHNob3QuYnl0ZXNUcmFuc2ZlcnJlZCAvIHNuYXBzaG90LnRvdGFsQnl0ZXMgKiAxMDA7CiAgICAgICAgICAgICAgc3RhdGUuZGJJbWdbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF0udXBsb2FkUGVyY2VudGFnZSA9IF9wZXJjZW50YWdlW3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdOwoKICAgICAgICAgICAgICBpZiAoc3RhdGUuZGJJbWdbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF0udXBsb2FkUGVyY2VudGFnZSA9PT0gMTAwICYmIF9vcmRlci5sZW5ndGggPCBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgX29yZGVyLnB1c2goc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5tZXNzYWdlKTsKICAgICAgICAgICAgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIF9kYXRhUmVmID0gewogICAgICAgICAgICAgICAgc2Vydl9hY3Rpdm86IGRhdGEuc2VydmljaW8uYWN0aXZvLAogICAgICAgICAgICAgICAgc2Vydl9jaWVycmU6IGRhdGEuc2VydmljaW8uZmluLAogICAgICAgICAgICAgICAgc2Vydl9jb250YWN0bzogZGF0YS5zZXJ2aWNpby5jb250YWN0bywKICAgICAgICAgICAgICAgIHNlcnZfZGVzY3JpcGNpb246IGRhdGEuc2VydmljaW8uZGVzY3JpcGNpb24sCiAgICAgICAgICAgICAgICBzZXJ2X2lkOiBfcHVzaGRiUmVmLmtleSwKICAgICAgICAgICAgICAgIHNlcnZfaW5pY2lvOiBkYXRhLnNlcnZpY2lvLmluaWNpbywKICAgICAgICAgICAgICAgIHNlcnZfbm9tYnJlOiBkYXRhLnNlcnZpY2lvLm5vbWJyZSwKICAgICAgICAgICAgICAgIHNlcnZfZm90bzogW10KICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIHZhciBzdG9yYWdlUmVmID0gZmlyZWJhc2Uuc3RvcmFnZSgpLnJlZigiLyIuY29uY2F0KGRhdGEudGFyZ2V0LCAiLyIpLmNvbmNhdChfZGF0YVJlZi5zZXJ2X2lkLCAiLyIpLmNvbmNhdChkYXRhLnNlcnZpY2lvLm5vbWJyZS5zcGxpdCgnICcpLmpvaW4oJ18nKSkpOwogICAgICAgICAgICAgIHN0b3JhZ2VSZWYuZ2V0RG93bmxvYWRVUkwoKS50aGVuKGZ1bmN0aW9uICh1cmwpIHsKICAgICAgICAgICAgICAgIHZhciB2YWwgPSBfb3JkZXJbX25dOwogICAgICAgICAgICAgICAgc3RhdGUuZGJJbWdbdmFsXS51cmwgPSB1cmw7CiAgICAgICAgICAgICAgICBzdGF0ZS5kYkltZ1t2YWxdLm5vbWJyZSA9ICIiLmNvbmNhdChkYXRhLnNlcnZpY2lvLm5vbWJyZS5zcGxpdCgnICcpLmpvaW4oJ18nKSk7CiAgICAgICAgICAgICAgICBfbisrOwoKICAgICAgICAgICAgICAgIGlmIChfbiA+PSBfb3JkZXIubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgIF9kYXRhUmVmLnNlcnZfZm90by5ub21icmUgPSBzdGF0ZS5kYkltZ1swXS5ub21icmU7CiAgICAgICAgICAgICAgICAgIF9kYXRhUmVmLnNlcnZfZm90by51cmwgPSBzdGF0ZS5kYkltZ1swXS51cmw7CgogICAgICAgICAgICAgICAgICBpZiAoX24gPj0gT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICBfcHVzaGRiUmVmLnNldChfZGF0YVJlZik7CgogICAgICAgICAgICAgICAgICAgIHN0YXRlLmNyZWFyREJWYWxzID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgdmFyIF9zdWNjZXNzID0gewogICAgICAgICAgICAgICAgICAgICAgMDogJ3N1Y2Nlc3NVcGxvYWQnLAogICAgICAgICAgICAgICAgICAgICAgMTogJ1NlIGhhIGNyZWFkbyBleGl0b3NhbWVudGUnCiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgX3RoaXM2LmNvbW1pdCgnc3VjY2Vzc0FkdmlzZScsIF9zdWNjZXNzKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfZGF0YVJlZiA9IHsKICAgICAgICAgICAgc2Vydl9hY3Rpdm86IGRhdGEuc2VydmljaW8uYWN0aXZvLAogICAgICAgICAgICBzZXJ2X2NpZXJyZTogZGF0YS5zZXJ2aWNpby5maW4sCiAgICAgICAgICAgIHNlcnZfY29udGFjdG86IGRhdGEuc2VydmljaW8uY29udGFjdG8sCiAgICAgICAgICAgIHNlcnZfZGVzY3JpcGNpb246IGRhdGEuc2VydmljaW8uZGVzY3JpcGNpb24sCiAgICAgICAgICAgIHNlcnZfaWQ6IF9wdXNoZGJSZWYua2V5LAogICAgICAgICAgICBzZXJ2X2luaWNpbzogZGF0YS5zZXJ2aWNpby5pbmljaW8sCiAgICAgICAgICAgIHNlcnZfbm9tYnJlOiBkYXRhLnNlcnZpY2lvLm5vbWJyZSwKICAgICAgICAgICAgc2Vydl9mb3RvOiBkYXRhLnNlcnZpY2lvLmltYWdlCiAgICAgICAgICB9OwogICAgICAgICAgX24rKzsKCiAgICAgICAgICBpZiAoX24gPj0gT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5sZW5ndGgpIHsKICAgICAgICAgICAgX3B1c2hkYlJlZi5zZXQoX2RhdGFSZWYpOwoKICAgICAgICAgICAgc3RhdGUuY3JlYXJEQlZhbHMgPSBmYWxzZTsKICAgICAgICAgICAgdmFyIF9zdWNjZXNzMiA9IHsKICAgICAgICAgICAgICAwOiAnc3VjY2Vzc1VwbG9hZCcsCiAgICAgICAgICAgICAgMTogJ1NlIGhhIGNyZWFkbyBleGl0b3NhbWVudGUnCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHRoaXMuY29tbWl0KCdzdWNjZXNzQWR2aXNlJywgX3N1Y2Nlc3MyKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoZGF0YS50YXJnZXQgPT09ICdHZXJlbmNpYScpIHsKICAgICAgICBpZiAoT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5sZW5ndGggIT09IDApIHsKICAgICAgICAgIHN0YXRlLmRiSW1nID0gW107CiAgICAgICAgICBzdGF0ZS5kYkltZ1swXSA9IGRhdGEuaW50ZWdyYW50ZS5pbWFnZTsKICAgICAgICB9CgogICAgICAgIHZhciBfc3RvcmFnZVJlZjMgPSBbXTsKICAgICAgICB2YXIgX3BlcmNlbnRhZ2UyID0gW107CiAgICAgICAgdmFyIF9vcmRlcjIgPSBbXTsKICAgICAgICB2YXIgX3Rhc2syID0ge307CiAgICAgICAgdmFyIF9uMiA9IDA7CgogICAgICAgIHZhciBfZGJSZWYyID0gZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoIiIuY29uY2F0KGRhdGEudGFyZ2V0KSk7CgogICAgICAgIHZhciBfcHVzaGRiUmVmMiA9IF9kYlJlZjIucHVzaCgpOwoKICAgICAgICB2YXIgX2RhdGFSZWYyID0gewogICAgICAgICAgZ3JfaWQ6IF9wdXNoZGJSZWYyLmtleQogICAgICAgIH07CiAgICAgICAgT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICBfc3RvcmFnZVJlZjMgPSBmaXJlYmFzZS5zdG9yYWdlKCkucmVmKCIvIi5jb25jYXQoZGF0YS50YXJnZXQsICIvIikuY29uY2F0KF9kYXRhUmVmMi5ncl9pZCwgIi8iKS5jb25jYXQoZGF0YS5pbnRlZ3JhbnRlLmNhcmdvLnNwbGl0KCcgJykuam9pbignXycpKSk7CiAgICAgICAgICBfdGFzazJbIiIuY29uY2F0KGVsZW1lbnQuaWQpXSA9IF9zdG9yYWdlUmVmMy5wdXQoZWxlbWVudCk7CiAgICAgICAgfSk7CgogICAgICAgIGlmIChPYmplY3QudmFsdWVzKF90YXNrMikubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgICBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgICAgX3Rhc2syWyIiLmNvbmNhdChlbGVtZW50LmlkKV0ub24oJ3N0YXRlX2NoYW5nZWQnLCBmdW5jdGlvbiAoc25hcHNob3QpIHsKICAgICAgICAgICAgICBfcGVyY2VudGFnZTJbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF0gPSBzbmFwc2hvdC5ieXRlc1RyYW5zZmVycmVkIC8gc25hcHNob3QudG90YWxCeXRlcyAqIDEwMDsKICAgICAgICAgICAgICBzdGF0ZS5kYkltZ1tzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkXS51cGxvYWRQZXJjZW50YWdlID0gX3BlcmNlbnRhZ2UyW3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdOwoKICAgICAgICAgICAgICBpZiAoc3RhdGUuZGJJbWdbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF0udXBsb2FkUGVyY2VudGFnZSA9PT0gMTAwICYmIF9vcmRlcjIubGVuZ3RoIDwgT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIF9vcmRlcjIucHVzaChzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLm1lc3NhZ2UpOwogICAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgX2RhdGFSZWYyID0gewogICAgICAgICAgICAgICAgZ3JfY29ycmVvOiBkYXRhLmludGVncmFudGUuY29ycmVvLAogICAgICAgICAgICAgICAgZ3Jfbm9tYnJlOiBkYXRhLmludGVncmFudGUubm9tYnJlLAogICAgICAgICAgICAgICAgZ3JfY2FyZ286IGRhdGEuaW50ZWdyYW50ZS5jYXJnbywKICAgICAgICAgICAgICAgIGdyX2lkOiBfcHVzaGRiUmVmMi5rZXksCiAgICAgICAgICAgICAgICBncl9mb3RvOiBbXQogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgdmFyIHN0b3JhZ2VSZWYgPSBmaXJlYmFzZS5zdG9yYWdlKCkucmVmKCIvIi5jb25jYXQoZGF0YS50YXJnZXQsICIvIikuY29uY2F0KF9kYXRhUmVmMi5ncl9pZCwgIi8iKS5jb25jYXQoZGF0YS5pbnRlZ3JhbnRlLmNhcmdvLnNwbGl0KCcgJykuam9pbignXycpKSk7CiAgICAgICAgICAgICAgc3RvcmFnZVJlZi5nZXREb3dubG9hZFVSTCgpLnRoZW4oZnVuY3Rpb24gKHVybCkgewogICAgICAgICAgICAgICAgdmFyIHZhbCA9IF9vcmRlcjJbX24yXTsKICAgICAgICAgICAgICAgIHN0YXRlLmRiSW1nW3ZhbF0udXJsID0gdXJsOwogICAgICAgICAgICAgICAgc3RhdGUuZGJJbWdbdmFsXS5ub21icmUgPSAiIi5jb25jYXQoZGF0YS5pbnRlZ3JhbnRlLmNhcmdvLnNwbGl0KCcgJykuam9pbignXycpKTsKICAgICAgICAgICAgICAgIF9uMisrOwoKICAgICAgICAgICAgICAgIGlmIChfbjIgPj0gX29yZGVyMi5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgX2RhdGFSZWYyLmdyX2ZvdG8ubm9tYnJlID0gc3RhdGUuZGJJbWdbMF0ubm9tYnJlOwogICAgICAgICAgICAgICAgICBfZGF0YVJlZjIuZ3JfZm90by51cmwgPSBzdGF0ZS5kYkltZ1swXS51cmw7CgogICAgICAgICAgICAgICAgICBpZiAoX24yID49IE9iamVjdC52YWx1ZXMoZGF0YS5hcmNoaXZvcykubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgX3B1c2hkYlJlZjIuc2V0KF9kYXRhUmVmMik7CgogICAgICAgICAgICAgICAgICAgIHN0YXRlLmNyZWFyREJWYWxzID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgdmFyIF9zdWNjZXNzMyA9IHsKICAgICAgICAgICAgICAgICAgICAgIDA6ICdzdWNjZXNzVXBsb2FkJywKICAgICAgICAgICAgICAgICAgICAgIDE6ICdTZSBoYSBjcmVhZG8gZXhpdG9zYW1lbnRlJwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIF90aGlzNi5jb21taXQoJ3N1Y2Nlc3NBZHZpc2UnLCBfc3VjY2VzczMpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF9kYXRhUmVmMiA9IHsKICAgICAgICAgICAgZ3JfY29ycmVvOiBkYXRhLmludGVncmFudGUuY29ycmVvLAogICAgICAgICAgICBncl9ub21icmU6IGRhdGEuaW50ZWdyYW50ZS5ub21icmUsCiAgICAgICAgICAgIGdyX2NhcmdvOiBkYXRhLmludGVncmFudGUuY2FyZ28sCiAgICAgICAgICAgIGdyX2lkOiBfcHVzaGRiUmVmMi5rZXksCiAgICAgICAgICAgIGdyX2ZvdG86IGRhdGEuaW50ZWdyYW50ZS5pbWFnZQogICAgICAgICAgfTsKICAgICAgICAgIF9uMisrOwoKICAgICAgICAgIGlmIChfbjIgPj0gT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5sZW5ndGgpIHsKICAgICAgICAgICAgX3B1c2hkYlJlZjIuc2V0KF9kYXRhUmVmMik7CgogICAgICAgICAgICBzdGF0ZS5jcmVhckRCVmFscyA9IGZhbHNlOwogICAgICAgICAgICB2YXIgX3N1Y2Nlc3M0ID0gewogICAgICAgICAgICAgIDA6ICdzdWNjZXNzVXBsb2FkJywKICAgICAgICAgICAgICAxOiAnU2UgaGEgY3JlYWRvIGV4aXRvc2FtZW50ZScKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdGhpcy5jb21taXQoJ3N1Y2Nlc3NBZHZpc2UnLCBfc3VjY2VzczQpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChkYXRhLnRhcmdldCA9PT0gJ1Byb2Zlc29yZXMnKSB7CiAgICAgICAgc3RhdGUuZGJJbWcgPSBbXTsKCiAgICAgICAgaWYgKGRhdGEuYXJjaGl2b3NbJ2FyY2hpdm8wJ10gIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgc3RhdGUuZGJJbWdbMF0gPSBkYXRhLnByb2Zlc29yLmFyY2hpdm9zLmltYWdlOwogICAgICAgIH0KCiAgICAgICAgaWYgKGRhdGEuYXJjaGl2b3NbJ2FyY2hpdm8xJ10gIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgc3RhdGUuZGJJbWdbMV0gPSBkYXRhLnByb2Zlc29yLmFyY2hpdm9zLmN2OwogICAgICAgIH0KCiAgICAgICAgdmFyIF9zdG9yYWdlUmVmNCA9IFtdOwogICAgICAgIHZhciBfcGVyY2VudGFnZTMgPSBbXTsKICAgICAgICB2YXIgX29yZGVyMyA9IFtdOwogICAgICAgIHZhciBfdGFzazMgPSB7fTsKICAgICAgICB2YXIgX2k2ID0gMDsKICAgICAgICB2YXIgX24zID0gMDsKICAgICAgICB2YXIgX2ogPSAwOwoKICAgICAgICB2YXIgX2RiUmVmMyA9IGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKCIiLmNvbmNhdChkYXRhLnRhcmdldCkpOwoKICAgICAgICB2YXIgX3B1c2hkYlJlZjMgPSBfZGJSZWYzLnB1c2goKTsKCiAgICAgICAgdmFyIF9kYXRhUmVmMyA9IHsKICAgICAgICAgIHByb2ZfaWQ6IF9wdXNoZGJSZWYzLmtleQogICAgICAgIH07CiAgICAgICAgT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICBfc3RvcmFnZVJlZjQgPSBmaXJlYmFzZS5zdG9yYWdlKCkucmVmKCIvIi5jb25jYXQoZGF0YS50YXJnZXQsICIvIikuY29uY2F0KF9kYXRhUmVmMy5wcm9mX2lkLCAiLyIpLmNvbmNhdChPYmplY3QudmFsdWVzKGRhdGEucHJvZmVzb3IuYXJjaGl2b3MpW19pNl0ubm9tYnJlKSk7CiAgICAgICAgICBfdGFzazNbIiIuY29uY2F0KGVsZW1lbnQuaWQpXSA9IF9zdG9yYWdlUmVmNC5wdXQoZWxlbWVudCk7CiAgICAgICAgICBfaTYrKzsKICAgICAgICB9KTsKCiAgICAgICAgaWYgKE9iamVjdC52YWx1ZXMoX3Rhc2szKS5sZW5ndGggIT09IDApIHsKICAgICAgICAgIE9iamVjdC52YWx1ZXMoZGF0YS5hcmNoaXZvcykuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgICBfdGFzazNbIiIuY29uY2F0KGVsZW1lbnQuaWQpXS5vbignc3RhdGVfY2hhbmdlZCcsIGZ1bmN0aW9uIChzbmFwc2hvdCkgewogICAgICAgICAgICAgIF9wZXJjZW50YWdlM1tzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkXSA9IHNuYXBzaG90LmJ5dGVzVHJhbnNmZXJyZWQgLyBzbmFwc2hvdC50b3RhbEJ5dGVzICogMTAwOwogICAgICAgICAgICAgIHN0YXRlLmRiSW1nW3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdLnVwbG9hZFBlcmNlbnRhZ2UgPSBfcGVyY2VudGFnZTNbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF07CgogICAgICAgICAgICAgIGlmIChzdGF0ZS5kYkltZ1tzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkXS51cGxvYWRQZXJjZW50YWdlID09PSAxMDAgJiYgX29yZGVyMy5sZW5ndGggPCBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgX29yZGVyMy5wdXNoKHNuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWQpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IubWVzc2FnZSk7CiAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICBfZGF0YVJlZjMgPSB7CiAgICAgICAgICAgICAgICBjb21pX2lkOiBkYXRhLnByb2Zlc29yLmNvaWQsCiAgICAgICAgICAgICAgICBwcm9mX2N2OiBbXSwKICAgICAgICAgICAgICAgIHByb2ZfY2k6IGRhdGEucHJvZmVzb3IuY2ksCiAgICAgICAgICAgICAgICBwcm9mX2NvcnJlbzogZGF0YS5wcm9mZXNvci5jb3JyZW8sCiAgICAgICAgICAgICAgICBwcm9mX2ZlY2hhZGVuYWNpbWllbnRvOiBkYXRhLnByb2Zlc29yLm5hY2ltaWVudG8sCiAgICAgICAgICAgICAgICBwcm9mX2ZvdG86IFtdLAogICAgICAgICAgICAgICAgcHJvZl9pZDogX3B1c2hkYlJlZjMua2V5LAogICAgICAgICAgICAgICAgcHJvZl9ub21icmU6IGRhdGEucHJvZmVzb3Iubm9tYnJlLAogICAgICAgICAgICAgICAgcHJvZl90ZWxlZm9ub3M6IGRhdGEucHJvZmVzb3IudGVsZWZvbm9zCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICB2YXIgc3RvcmFnZVJlZiA9IGZpcmViYXNlLnN0b3JhZ2UoKS5yZWYoIi8iLmNvbmNhdChkYXRhLnRhcmdldCwgIi8iKS5jb25jYXQoX2RhdGFSZWYzLnByb2ZfaWQsICIvIikuY29uY2F0KE9iamVjdC52YWx1ZXMoZGF0YS5wcm9mZXNvci5hcmNoaXZvcylbX29yZGVyM1tfal1dLm5vbWJyZSkpOwogICAgICAgICAgICAgIHN0b3JhZ2VSZWYuZ2V0RG93bmxvYWRVUkwoKS50aGVuKGZ1bmN0aW9uICh1cmwpIHsKICAgICAgICAgICAgICAgIHZhciB2YWwgPSBfb3JkZXIzW19uM107CgogICAgICAgICAgICAgICAgaWYgKHZhbCA9PT0gMCkgewogICAgICAgICAgICAgICAgICBzdGF0ZS5kYkltZ1t2YWxdLnVybCA9IHVybDsKICAgICAgICAgICAgICAgICAgc3RhdGUuZGJJbWdbdmFsXS5ub21icmUgPSAiIi5jb25jYXQoZGF0YS5wcm9mZXNvci5pZCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBzdGF0ZS5kYkltZ1t2YWxdLnVybCA9IHVybDsKICAgICAgICAgICAgICAgICAgc3RhdGUuZGJJbWdbdmFsXS5ub21icmUgPSAiY192XyIuY29uY2F0KGRhdGEucHJvZmVzb3IuaWQpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9uMysrOwoKICAgICAgICAgICAgICAgIGlmIChfbjMgPj0gT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgX2RhdGFSZWYzLnByb2ZfZm90by5ub21icmUgPSBzdGF0ZS5kYkltZ1swXS5ub21icmU7CiAgICAgICAgICAgICAgICAgIF9kYXRhUmVmMy5wcm9mX2ZvdG8udXJsID0gc3RhdGUuZGJJbWdbMF0udXJsOwogICAgICAgICAgICAgICAgICBfZGF0YVJlZjMucHJvZl9jdi5ub21icmUgPSBzdGF0ZS5kYkltZ1sxXS5ub21icmU7CiAgICAgICAgICAgICAgICAgIF9kYXRhUmVmMy5wcm9mX2N2LnVybCA9IHN0YXRlLmRiSW1nWzFdLnVybDsKCiAgICAgICAgICAgICAgICAgIGlmIChfbjMgPj0gT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICBfcHVzaGRiUmVmMy5zZXQoX2RhdGFSZWYzKTsKCiAgICAgICAgICAgICAgICAgICAgc3RhdGUuY3JlYXJEQlZhbHMgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB2YXIgX3N1Y2Nlc3M1ID0gewogICAgICAgICAgICAgICAgICAgICAgMDogJ3N1Y2Nlc3NVcGxvYWQnLAogICAgICAgICAgICAgICAgICAgICAgMTogJ1NlIGhhIGNyZWFkbyBleGl0b3NhbWVudGUnCiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgX3RoaXM2LmNvbW1pdCgnc3VjY2Vzc0FkdmlzZScsIF9zdWNjZXNzNSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBfaisrOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfZGF0YVJlZjMgPSB7CiAgICAgICAgICAgIGNvbWlfaWQ6IGRhdGEucHJvZmVzb3IuY29pZCwKICAgICAgICAgICAgcHJvZl9jdjogW10sCiAgICAgICAgICAgIHByb2ZfY2k6IGRhdGEucHJvZmVzb3IuY2ksCiAgICAgICAgICAgIHByb2ZfY29ycmVvOiBkYXRhLnByb2Zlc29yLmNvcnJlbywKICAgICAgICAgICAgcHJvZl9mZWNoYWRlbmFjaW1pZW50bzogZGF0YS5wcm9mZXNvci5uYWNpbWllbnRvLAogICAgICAgICAgICBwcm9mX2ZvdG86IFtdLAogICAgICAgICAgICBwcm9mX2lkOiBfcHVzaGRiUmVmMy5rZXksCiAgICAgICAgICAgIHByb2Zfbm9tYnJlOiBkYXRhLnByb2Zlc29yLm5vbWJyZSwKICAgICAgICAgICAgcHJvZl90ZWxlZm9ub3M6IGRhdGEucHJvZmVzb3IudGVsZWZvbm9zCiAgICAgICAgICB9OwogICAgICAgICAgX24zKys7CgogICAgICAgICAgaWYgKF9uMyA+PSBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmxlbmd0aCkgewogICAgICAgICAgICBfcHVzaGRiUmVmMy5zZXQoX2RhdGFSZWYzKTsKCiAgICAgICAgICAgIHN0YXRlLmNyZWFyREJWYWxzID0gZmFsc2U7CiAgICAgICAgICAgIHZhciBfc3VjY2VzczYgPSB7CiAgICAgICAgICAgICAgMDogJ3N1Y2Nlc3NVcGxvYWQnLAogICAgICAgICAgICAgIDE6ICdTZSBoYSBjcmVhZG8gZXhpdG9zYW1lbnRlJwogICAgICAgICAgICB9OwogICAgICAgICAgICB0aGlzLmNvbW1pdCgnc3VjY2Vzc0FkdmlzZScsIF9zdWNjZXNzNik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKGRhdGEudGFyZ2V0ID09PSAnQ29taXRlcycpIHsKICAgICAgICBzdGF0ZS5kYkltZyA9IFtdOwoKICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IE9iamVjdC52YWx1ZXMoZGF0YS5jb21pdGUuYXJjaGl2b3MpLmxlbmd0aDsgaysrKSB7CiAgICAgICAgICBpZiAoT2JqZWN0LnZhbHVlcyhkYXRhLmNvbWl0ZS5hcmNoaXZvcylba10uaWQgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICBzdGF0ZS5kYkltZ1tPYmplY3QudmFsdWVzKGRhdGEuY29taXRlLmFyY2hpdm9zKVtrXS5pZF0gPSBPYmplY3QudmFsdWVzKGRhdGEuY29taXRlLmFyY2hpdm9zKVtrXTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHN0YXRlLmRiSW1nW2tdID0gJyc7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB2YXIgX3N0b3JhZ2VSZWY1ID0gW107CiAgICAgICAgdmFyIF9wZXJjZW50YWdlNCA9IFtdOwogICAgICAgIHZhciBfb3JkZXI0ID0gW107CiAgICAgICAgdmFyIF90YXNrNCA9IHt9OwogICAgICAgIHZhciBfaTcgPSAwOwogICAgICAgIHZhciBfbjQgPSAwOwogICAgICAgIHZhciBfajIgPSAwOwoKICAgICAgICB2YXIgX2RiUmVmNCA9IGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKCIiLmNvbmNhdChkYXRhLnRhcmdldCkpOwoKICAgICAgICB2YXIgX3B1c2hkYlJlZjQgPSBfZGJSZWY0LnB1c2goKTsKCiAgICAgICAgdmFyIF9kYXRhUmVmNCA9IHsKICAgICAgICAgIGNvbWlfaWQ6IF9wdXNoZGJSZWY0LmtleQogICAgICAgIH07CiAgICAgICAgT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICBfc3RvcmFnZVJlZjUgPSBmaXJlYmFzZS5zdG9yYWdlKCkucmVmKCIvIi5jb25jYXQoZGF0YS50YXJnZXQsICIvIikuY29uY2F0KF9kYXRhUmVmNC5jb21pX2lkLCAiLyIpLmNvbmNhdChPYmplY3QudmFsdWVzKGRhdGEuY29taXRlLmFyY2hpdm9zKVtlbGVtZW50LmlkXS5ub21icmUpKTsKICAgICAgICAgIF90YXNrNFsiIi5jb25jYXQoZWxlbWVudC5pZCldID0gX3N0b3JhZ2VSZWY1LnB1dChlbGVtZW50KTsKICAgICAgICAgIF9pNysrOwogICAgICAgIH0pOwoKICAgICAgICBpZiAoT2JqZWN0LnZhbHVlcyhfdGFzazQpLmxlbmd0aCAhPT0gMCkgewogICAgICAgICAgT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICAgIF90YXNrNFsiIi5jb25jYXQoZWxlbWVudC5pZCldLm9uKCdzdGF0ZV9jaGFuZ2VkJywgZnVuY3Rpb24gKHNuYXBzaG90KSB7CiAgICAgICAgICAgICAgX3BlcmNlbnRhZ2U0W3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdID0gc25hcHNob3QuYnl0ZXNUcmFuc2ZlcnJlZCAvIHNuYXBzaG90LnRvdGFsQnl0ZXMgKiAxMDA7CiAgICAgICAgICAgICAgc3RhdGUuZGJJbWdbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF0udXBsb2FkUGVyY2VudGFnZSA9IF9wZXJjZW50YWdlNFtzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkXTsKCiAgICAgICAgICAgICAgaWYgKHN0YXRlLmRiSW1nW3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdLnVwbG9hZFBlcmNlbnRhZ2UgPT09IDEwMCAmJiBfb3JkZXI0Lmxlbmd0aCA8IE9iamVjdC52YWx1ZXMoZGF0YS5hcmNoaXZvcykubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICBfb3JkZXI0LnB1c2goc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5tZXNzYWdlKTsKICAgICAgICAgICAgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIF9kYXRhUmVmNCA9IHsKICAgICAgICAgICAgICAgIGNvbWlfaWQ6IF9wdXNoZGJSZWY0LmtleSwKICAgICAgICAgICAgICAgIGNvbWlfYWN0aXZvOiBkYXRhLmNvbWl0ZS5hY3Rpdm8sCiAgICAgICAgICAgICAgICBjb21pX2NvbWlQYWdlOiBkYXRhLmNvbWl0ZS5jb21pcGFnZSwKICAgICAgICAgICAgICAgIGNvbWlfY29ycmVvOiBkYXRhLmNvbWl0ZS5jb3JyZW8sCiAgICAgICAgICAgICAgICBjb21pX2Nvc3RvczogZGF0YS5jb21pdGUuY29zdG9zLAogICAgICAgICAgICAgICAgY29taV9kZXNjcmlwY2lvbjogZGF0YS5jb21pdGUuZGVzY3JpcGNpb24sCiAgICAgICAgICAgICAgICBjb21pX2ZlY2hhdmlnZW5jaWE6IGRhdGEuY29taXRlLmZlY2hhdiwKICAgICAgICAgICAgICAgIGNvbWlfZm90bzogW10sCiAgICAgICAgICAgICAgICBjb21pX2ludDogZGF0YS5jb21pdGUuaW50aHBhZ2UsCiAgICAgICAgICAgICAgICBjb21pX2ludGVncmFudGVzOiBkYXRhLmNvbWl0ZS5pbnRlZ3JhbnRlcywKICAgICAgICAgICAgICAgIGNvbWlfbm9tYnJlOiBkYXRhLmNvbWl0ZS5ub21icmUsCiAgICAgICAgICAgICAgICBjb21pX25vcm1hdGl2YTogW10sCiAgICAgICAgICAgICAgICBjb21pX3JlZ2xhbWVudG86IFtdCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICB2YXIgc3RvcmFnZVJlZiA9IGZpcmViYXNlLnN0b3JhZ2UoKS5yZWYoIi8iLmNvbmNhdChkYXRhLnRhcmdldCwgIi8iKS5jb25jYXQoX2RhdGFSZWY0LmNvbWlfaWQsICIvIikuY29uY2F0KE9iamVjdC52YWx1ZXMoZGF0YS5jb21pdGUuYXJjaGl2b3MpWyIiLmNvbmNhdChfb3JkZXI0W19qMl0pXS5ub21icmUpKTsKICAgICAgICAgICAgICBzdG9yYWdlUmVmLmdldERvd25sb2FkVVJMKCkudGhlbihmdW5jdGlvbiAodXJsKSB7CiAgICAgICAgICAgICAgICB2YXIgdmFsID0gX29yZGVyNFtfbjRdOwoKICAgICAgICAgICAgICAgIGZvciAodmFyIG0gPSAwOyBtIDwgT2JqZWN0LnZhbHVlcyhkYXRhLmNvbWl0ZS5hcmNoaXZvcykubGVuZ3RoOyBtKyspIHsKICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC52YWx1ZXMoZGF0YS5jb21pdGUuYXJjaGl2b3MpW21dLmlkICE9PSB1bmRlZmluZWQgJiYgdmFsID09PSBPYmplY3QudmFsdWVzKGRhdGEuY29taXRlLmFyY2hpdm9zKVttXS5pZCkgewogICAgICAgICAgICAgICAgICAgIHN0YXRlLmRiSW1nW3ZhbF0udXJsID0gdXJsOwogICAgICAgICAgICAgICAgICAgIHN0YXRlLmRiSW1nW3ZhbF0ubm9tYnJlID0gT2JqZWN0LnZhbHVlcyhkYXRhLmNvbWl0ZS5hcmNoaXZvcylbbV0ubm9tYnJlOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX240Kys7CgogICAgICAgICAgICAgICAgaWYgKF9uNCA+PSBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuZGJJbWdbMF0ubm9tYnJlICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgICBfZGF0YVJlZjQuY29taV9mb3RvID0gewogICAgICAgICAgICAgICAgICAgICAgbm9tYnJlOiBzdGF0ZS5kYkltZ1swXS5ub21icmUsCiAgICAgICAgICAgICAgICAgICAgICB1cmw6IHN0YXRlLmRiSW1nWzBdLnVybAogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgX2RhdGFSZWY0LmNvbWlfZm90byA9ICcnOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuZGJJbWdbMV0ubm9tYnJlICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgICBfZGF0YVJlZjQuY29taV9yZWdsYW1lbnRvID0gewogICAgICAgICAgICAgICAgICAgICAgbm9tYnJlOiBzdGF0ZS5kYkltZ1sxXS5ub21icmUsCiAgICAgICAgICAgICAgICAgICAgICB1cmw6IHN0YXRlLmRiSW1nWzFdLnVybAogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgX2RhdGFSZWY0LmNvbWlfcmVnbGFtZW50byA9ICcnOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuZGJJbWdbMl0ubm9tYnJlICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgICBfZGF0YVJlZjQuY29taV9ub3JtYXRpdmEgPSB7CiAgICAgICAgICAgICAgICAgICAgICBub21icmU6IHN0YXRlLmRiSW1nWzJdLm5vbWJyZSwKICAgICAgICAgICAgICAgICAgICAgIHVybDogc3RhdGUuZGJJbWdbMl0udXJsCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBfZGF0YVJlZjQuY29taV9ub3JtYXRpdmEgPSAnJzsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgaWYgKF9uNCA+PSBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIF9wdXNoZGJSZWY0LnNldChfZGF0YVJlZjQpOwoKICAgICAgICAgICAgICAgICAgICBzdGF0ZS5jcmVhckRCVmFscyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIHZhciBfc3VjY2VzczcgPSB7CiAgICAgICAgICAgICAgICAgICAgICAwOiAnc3VjY2Vzc1VwbG9hZCcsCiAgICAgICAgICAgICAgICAgICAgICAxOiAnU2UgaGEgY3JlYWRvIGV4aXRvc2FtZW50ZScKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICBfdGhpczYuY29tbWl0KCdzdWNjZXNzQWR2aXNlJywgX3N1Y2Nlc3M3KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIF9qMisrOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfZGF0YVJlZjQgPSB7CiAgICAgICAgICAgIGNvbWlfaWQ6IF9wdXNoZGJSZWY0LmtleSwKICAgICAgICAgICAgY29taV9hY3Rpdm86IGRhdGEuY29taXRlLmFjdGl2bywKICAgICAgICAgICAgY29taV9jb21pUGFnZTogZGF0YS5jb21pdGUuY29taXBhZ2UsCiAgICAgICAgICAgIGNvbWlfY29ycmVvOiBkYXRhLmNvbWl0ZS5jb3JyZW8sCiAgICAgICAgICAgIGNvbWlfY29zdG9zOiBkYXRhLmNvbWl0ZS5jb3N0b3MsCiAgICAgICAgICAgIGNvbWlfZGVzY3JpcGNpb246IGRhdGEuY29taXRlLmRlc2NyaXBjaW9uLAogICAgICAgICAgICBjb21pX2ZlY2hhdmlnZW5jaWE6IGRhdGEuY29taXRlLmZlY2hhdiwKICAgICAgICAgICAgY29taV9mb3RvOiBkYXRhLmNvbWl0ZS5hcmNoaXZvcy5pbWFnZW4sCiAgICAgICAgICAgIGNvbWlfaW50OiBkYXRhLmNvbWl0ZS5pbnRocGFnZSwKICAgICAgICAgICAgY29taV9pbnRlZ3JhbnRlczogZGF0YS5jb21pdGUuaW50ZWdyYW50ZXMsCiAgICAgICAgICAgIGNvbWlfbm9tYnJlOiBkYXRhLmNvbWl0ZS5ub21icmUsCiAgICAgICAgICAgIGNvbWlfbm9ybWF0aXZhOiBkYXRhLmNvbWl0ZS5hcmNoaXZvcy5ub3JtYXRpdmEsCiAgICAgICAgICAgIGNvbWlfcmVnbGFtZW50bzogZGF0YS5jb21pdGUuYXJjaGl2b3MucmVnbGFtZW50bwogICAgICAgICAgfTsKICAgICAgICAgIF9uNCsrOwoKICAgICAgICAgIGlmIChfbjQgPj0gT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5sZW5ndGgpIHsKICAgICAgICAgICAgX3B1c2hkYlJlZjQuc2V0KF9kYXRhUmVmNCk7CgogICAgICAgICAgICBzdGF0ZS5jcmVhckRCVmFscyA9IGZhbHNlOwogICAgICAgICAgICB2YXIgX3N1Y2Nlc3M4ID0gewogICAgICAgICAgICAgIDA6ICdzdWNjZXNzVXBsb2FkJywKICAgICAgICAgICAgICAxOiAnU2UgaGEgY3JlYWRvIGV4aXRvc2FtZW50ZScKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdGhpcy5jb21taXQoJ3N1Y2Nlc3NBZHZpc2UnLCBfc3VjY2VzczgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChkYXRhLnRhcmdldCA9PT0gJ0FudW5jaWFudGVzJykgewogICAgICAgIHN0YXRlLmRiSW1nID0gW107CgogICAgICAgIGZvciAodmFyIF9rID0gMDsgX2sgPCBPYmplY3QudmFsdWVzKGRhdGEuYW51bmNpYW50ZS5hcmNoaXZvcykubGVuZ3RoOyBfaysrKSB7CiAgICAgICAgICBpZiAoT2JqZWN0LnZhbHVlcyhkYXRhLmFudW5jaWFudGUuYXJjaGl2b3MpW19rXS5pZCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIHN0YXRlLmRiSW1nW09iamVjdC52YWx1ZXMoZGF0YS5hbnVuY2lhbnRlLmFyY2hpdm9zKVtfa10uaWRdID0gT2JqZWN0LnZhbHVlcyhkYXRhLmFudW5jaWFudGUuYXJjaGl2b3MpW19rXTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHN0YXRlLmRiSW1nW19rXSA9ICcnOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgdmFyIF9zdG9yYWdlUmVmNiA9IFtdOwogICAgICAgIHZhciBfcGVyY2VudGFnZTUgPSBbXTsKICAgICAgICB2YXIgX29yZGVyNSA9IFtdOwogICAgICAgIHZhciBfdGFzazUgPSB7fTsKICAgICAgICB2YXIgX2k4ID0gMDsKICAgICAgICB2YXIgX241ID0gMDsKICAgICAgICB2YXIgX2ozID0gMDsKCiAgICAgICAgdmFyIF9kYlJlZjUgPSBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZigiIi5jb25jYXQoZGF0YS50YXJnZXQpKTsKCiAgICAgICAgdmFyIF9wdXNoZGJSZWY1ID0gX2RiUmVmNS5wdXNoKCk7CgogICAgICAgIHZhciBfZGF0YVJlZjUgPSB7CiAgICAgICAgICBhbnVuX2lkOiBfcHVzaGRiUmVmNS5rZXkKICAgICAgICB9OwogICAgICAgIE9iamVjdC52YWx1ZXMoZGF0YS5hcmNoaXZvcykuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgX3N0b3JhZ2VSZWY2ID0gZmlyZWJhc2Uuc3RvcmFnZSgpLnJlZigiLyIuY29uY2F0KGRhdGEudGFyZ2V0LCAiLyIpLmNvbmNhdChfZGF0YVJlZjUuYW51bl9pZCwgIi8iKS5jb25jYXQoT2JqZWN0LnZhbHVlcyhkYXRhLmFudW5jaWFudGUuYXJjaGl2b3MpW2VsZW1lbnQuaWRdLm5vbWJyZSkpOwogICAgICAgICAgX3Rhc2s1WyIiLmNvbmNhdChlbGVtZW50LmlkKV0gPSBfc3RvcmFnZVJlZjYucHV0KGVsZW1lbnQpOwogICAgICAgICAgX2k4Kys7CiAgICAgICAgfSk7CgogICAgICAgIGlmIChPYmplY3QudmFsdWVzKF90YXNrNSkubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgICBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgICAgX3Rhc2s1WyIiLmNvbmNhdChlbGVtZW50LmlkKV0ub24oJ3N0YXRlX2NoYW5nZWQnLCBmdW5jdGlvbiAoc25hcHNob3QpIHsKICAgICAgICAgICAgICBfcGVyY2VudGFnZTVbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF0gPSBzbmFwc2hvdC5ieXRlc1RyYW5zZmVycmVkIC8gc25hcHNob3QudG90YWxCeXRlcyAqIDEwMDsKICAgICAgICAgICAgICBzdGF0ZS5kYkltZ1tzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkXS51cGxvYWRQZXJjZW50YWdlID0gX3BlcmNlbnRhZ2U1W3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdOwoKICAgICAgICAgICAgICBpZiAoc3RhdGUuZGJJbWdbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF0udXBsb2FkUGVyY2VudGFnZSA9PT0gMTAwICYmIF9vcmRlcjUubGVuZ3RoIDwgT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIF9vcmRlcjUucHVzaChzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLm1lc3NhZ2UpOwogICAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgX2RhdGFSZWY1ID0gewogICAgICAgICAgICAgICAgYW51bl9pZDogX3B1c2hkYlJlZjUua2V5LAogICAgICAgICAgICAgICAgYW51bl91cmw6IGRhdGEuYW51bmNpYW50ZS5hbnVudXJsLAogICAgICAgICAgICAgICAgYW51bl9hY3Rpdm86IGRhdGEuYW51bmNpYW50ZS5hY3Rpdm8sCiAgICAgICAgICAgICAgICBhbnVuX25vbWJyZTogZGF0YS5hbnVuY2lhbnRlLm5vbWJyZSwKICAgICAgICAgICAgICAgIGFudW5fbm9tYnJlY29udGFjdG86IGRhdGEuYW51bmNpYW50ZS5ub21icmVjb24sCiAgICAgICAgICAgICAgICBhbnVuX2NvcnJlbzogZGF0YS5hbnVuY2lhbnRlLmNvcnJlbywKICAgICAgICAgICAgICAgIGFudW5fZXNzb2NpbzogewogICAgICAgICAgICAgICAgICBhbnVuX2Vzc29jaW9fc29jaW86IGRhdGEuYW51bmNpYW50ZS5lc3NvY2lvLnNvY2lvLAogICAgICAgICAgICAgICAgICBhbnVuX2Vzc29jaW9fYWNjaW9uOiBkYXRhLmFudW5jaWFudGUuZXNzb2Npby5hY2Npb24KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBhbnVuX2ZlY2hhdmlnZW5jaWE6IGRhdGEuYW51bmNpYW50ZS5mZWNoYXYsCiAgICAgICAgICAgICAgICBhbnVuX2ZvdG86IFtdLAogICAgICAgICAgICAgICAgYW51bl90ZWxlZm9ub3M6IGRhdGEuYW51bmNpYW50ZS50ZWxlZm9ub3MKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIHZhciBzdG9yYWdlUmVmID0gZmlyZWJhc2Uuc3RvcmFnZSgpLnJlZigiLyIuY29uY2F0KGRhdGEudGFyZ2V0LCAiLyIpLmNvbmNhdChfZGF0YVJlZjUuYW51bl9pZCwgIi8iKS5jb25jYXQoT2JqZWN0LnZhbHVlcyhkYXRhLmFudW5jaWFudGUuYXJjaGl2b3MpWyIiLmNvbmNhdChfb3JkZXI1W19qM10pXS5ub21icmUpKTsKICAgICAgICAgICAgICBzdG9yYWdlUmVmLmdldERvd25sb2FkVVJMKCkudGhlbihmdW5jdGlvbiAodXJsKSB7CiAgICAgICAgICAgICAgICB2YXIgdmFsID0gX29yZGVyNVtfbjVdOwoKICAgICAgICAgICAgICAgIGZvciAodmFyIG0gPSAwOyBtIDwgT2JqZWN0LnZhbHVlcyhkYXRhLmFudW5jaWFudGUuYXJjaGl2b3MpLmxlbmd0aDsgbSsrKSB7CiAgICAgICAgICAgICAgICAgIGlmIChPYmplY3QudmFsdWVzKGRhdGEuYW51bmNpYW50ZS5hcmNoaXZvcylbbV0uaWQgIT09IHVuZGVmaW5lZCAmJiB2YWwgPT09IE9iamVjdC52YWx1ZXMoZGF0YS5hbnVuY2lhbnRlLmFyY2hpdm9zKVttXS5pZCkgewogICAgICAgICAgICAgICAgICAgIHN0YXRlLmRiSW1nW3ZhbF0udXJsID0gdXJsOwogICAgICAgICAgICAgICAgICAgIHN0YXRlLmRiSW1nW3ZhbF0ubm9tYnJlID0gT2JqZWN0LnZhbHVlcyhkYXRhLmFudW5jaWFudGUuYXJjaGl2b3MpW21dLm5vbWJyZTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9uNSsrOwoKICAgICAgICAgICAgICAgIGlmIChfbjUgPj0gT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLmRiSW1nWzBdLm5vbWJyZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgICAgX2RhdGFSZWY1LmFudW5fZm90byA9IHsKICAgICAgICAgICAgICAgICAgICAgIG5vbWJyZTogc3RhdGUuZGJJbWdbMF0ubm9tYnJlLAogICAgICAgICAgICAgICAgICAgICAgdXJsOiBzdGF0ZS5kYkltZ1swXS51cmwKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIF9kYXRhUmVmNS5hbnVuX2ZvdG8gPSAnJzsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgaWYgKF9uNSA+PSBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIF9wdXNoZGJSZWY1LnNldChfZGF0YVJlZjUpOwoKICAgICAgICAgICAgICAgICAgICBzdGF0ZS5jcmVhckRCVmFscyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIHZhciBfc3VjY2VzczkgPSB7CiAgICAgICAgICAgICAgICAgICAgICAwOiAnc3VjY2Vzc1VwbG9hZCcsCiAgICAgICAgICAgICAgICAgICAgICAxOiAnU2UgaGEgY3JlYWRvIGV4aXRvc2FtZW50ZScKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICBfdGhpczYuY29tbWl0KCdzdWNjZXNzQWR2aXNlJywgX3N1Y2Nlc3M5KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIF9qMysrOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfZGF0YVJlZjUgPSB7CiAgICAgICAgICAgIGFudW5faWQ6IF9wdXNoZGJSZWY1LmtleSwKICAgICAgICAgICAgYW51bl91cmw6IGRhdGEuYW51bmNpYW50ZS5hbnVudXJsLAogICAgICAgICAgICBhbnVuX2FjdGl2bzogZGF0YS5hbnVuY2lhbnRlLmFjdGl2bywKICAgICAgICAgICAgYW51bl9ub21icmU6IGRhdGEuYW51bmNpYW50ZS5ub21icmUsCiAgICAgICAgICAgIGFudW5fbm9tYnJlY29udGFjdG86IGRhdGEuYW51bmNpYW50ZS5ub21icmVjb24sCiAgICAgICAgICAgIGFudW5fY29ycmVvOiBkYXRhLmFudW5jaWFudGUuY29ycmVvLAogICAgICAgICAgICBhbnVuX2Vzc29jaW86IHsKICAgICAgICAgICAgICBhbnVuX2Vzc29jaW9fc29jaW86IGRhdGEuYW51bmNpYW50ZS5lc3NvY2lvLnNvY2lvLAogICAgICAgICAgICAgIGFudW5fZXNzb2Npb19hY2Npb246IGRhdGEuYW51bmNpYW50ZS5lc3NvY2lvLmFjY2lvbgogICAgICAgICAgICB9LAogICAgICAgICAgICBhbnVuX2ZlY2hhdmlnZW5jaWE6IGRhdGEuYW51bmNpYW50ZS5mZWNoYXYsCiAgICAgICAgICAgIGFudW5fZm90bzogZGF0YS5hbnVuY2lhbnRlLmFyY2hpdm9zLmltYWdlbiwKICAgICAgICAgICAgYW51bl90ZWxlZm9ub3M6IGRhdGEuYW51bmNpYW50ZS50ZWxlZm9ub3MKICAgICAgICAgIH07CiAgICAgICAgICBfbjUrKzsKCiAgICAgICAgICBpZiAoX241ID49IE9iamVjdC52YWx1ZXMoZGF0YS5hcmNoaXZvcykubGVuZ3RoKSB7CiAgICAgICAgICAgIF9wdXNoZGJSZWY1LnNldChfZGF0YVJlZjUpOwoKICAgICAgICAgICAgc3RhdGUuY3JlYXJEQlZhbHMgPSBmYWxzZTsKICAgICAgICAgICAgdmFyIF9zdWNjZXNzMTAgPSB7CiAgICAgICAgICAgICAgMDogJ3N1Y2Nlc3NVcGxvYWQnLAogICAgICAgICAgICAgIDE6ICdTZSBoYSBjcmVhZG8gZXhpdG9zYW1lbnRlJwogICAgICAgICAgICB9OwogICAgICAgICAgICB0aGlzLmNvbW1pdCgnc3VjY2Vzc0FkdmlzZScsIF9zdWNjZXNzMTApOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChkYXRhLnRhcmdldCA9PT0gJ0Jhbm5lcnMnKSB7CiAgICAgICAgc3RhdGUuZGJJbWcgPSBbXTsKCiAgICAgICAgZm9yICh2YXIgX2syID0gMDsgX2syIDwgT2JqZWN0LnZhbHVlcyhkYXRhLmJhbm5lci5hcmNoaXZvcykubGVuZ3RoOyBfazIrKykgewogICAgICAgICAgaWYgKE9iamVjdC52YWx1ZXMoZGF0YS5iYW5uZXIuYXJjaGl2b3MpW19rMl0uaWQgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICBzdGF0ZS5kYkltZ1tPYmplY3QudmFsdWVzKGRhdGEuYmFubmVyLmFyY2hpdm9zKVtfazJdLmlkXSA9IE9iamVjdC52YWx1ZXMoZGF0YS5iYW5uZXIuYXJjaGl2b3MpW19rMl07CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBzdGF0ZS5kYkltZ1tfazJdID0gJyc7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB2YXIgX3N0b3JhZ2VSZWY3ID0gW107CiAgICAgICAgdmFyIF9wZXJjZW50YWdlNiA9IFtdOwogICAgICAgIHZhciBfb3JkZXI2ID0gW107CiAgICAgICAgdmFyIF90YXNrNiA9IHt9OwogICAgICAgIHZhciBfaTkgPSAwOwogICAgICAgIHZhciBfbjYgPSAwOwogICAgICAgIHZhciBfajQgPSAwOwoKICAgICAgICB2YXIgX2RiUmVmNiA9IGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKCIiLmNvbmNhdChkYXRhLnRhcmdldCkpOwoKICAgICAgICB2YXIgX3B1c2hkYlJlZjYgPSBfZGJSZWY2LnB1c2goKTsKCiAgICAgICAgdmFyIF9kYXRhUmVmNiA9IHsKICAgICAgICAgIGJhbm5faWQ6IF9wdXNoZGJSZWY2LmtleQogICAgICAgIH07CiAgICAgICAgT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICBfc3RvcmFnZVJlZjcgPSBmaXJlYmFzZS5zdG9yYWdlKCkucmVmKCIvIi5jb25jYXQoZGF0YS50YXJnZXQsICIvIikuY29uY2F0KF9kYXRhUmVmNi5iYW5uX2lkLCAiLyIpLmNvbmNhdChkYXRhLmJhbm5lci5hcmNoaXZvc1siIi5jb25jYXQoZGF0YS5uYW1lX2FyY2hpdm9zKS5jb25jYXQoZWxlbWVudC5pZCldLm5vbWJyZSkpOwogICAgICAgICAgX3Rhc2s2WyIiLmNvbmNhdChlbGVtZW50LmlkKV0gPSBfc3RvcmFnZVJlZjcucHV0KGVsZW1lbnQpOwogICAgICAgICAgX2k5Kys7CiAgICAgICAgfSk7CgogICAgICAgIGlmIChPYmplY3QudmFsdWVzKF90YXNrNikubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgICBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgICAgX3Rhc2s2WyIiLmNvbmNhdChlbGVtZW50LmlkKV0ub24oJ3N0YXRlX2NoYW5nZWQnLCBmdW5jdGlvbiAoc25hcHNob3QpIHsKICAgICAgICAgICAgICBfcGVyY2VudGFnZTZbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF0gPSBzbmFwc2hvdC5ieXRlc1RyYW5zZmVycmVkIC8gc25hcHNob3QudG90YWxCeXRlcyAqIDEwMDsKICAgICAgICAgICAgICBzdGF0ZS5kYkltZ1tzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkXS51cGxvYWRQZXJjZW50YWdlID0gX3BlcmNlbnRhZ2U2W3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdOwoKICAgICAgICAgICAgICBpZiAoc3RhdGUuZGJJbWdbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF0udXBsb2FkUGVyY2VudGFnZSA9PT0gMTAwICYmIF9vcmRlcjYubGVuZ3RoIDwgT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIF9vcmRlcjYucHVzaChzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLm1lc3NhZ2UpOwogICAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgX2RhdGFSZWY2ID0gewogICAgICAgICAgICAgICAgYmFubl9pZDogX3B1c2hkYlJlZjYua2V5LAogICAgICAgICAgICAgICAgYmFubl9hY3Rpdm86IGRhdGEuYmFubmVyLmFjdGl2bywKICAgICAgICAgICAgICAgIGJhbm5fYmFubmVyaWQ6IGRhdGEuYmFubmVyLmJhbm5lcmlkLAogICAgICAgICAgICAgICAgYmFubl9mZWNoYWVkaWNpb246IGRhdGEuYmFubmVyLmZlY2hhZWQsCiAgICAgICAgICAgICAgICBiYW5uX3NlY2Npb246IGRhdGEuYmFubmVyLnNlY2Npb24sCiAgICAgICAgICAgICAgICBiYW5uX3NsaWRlczogW10KICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIHZhciBzdG9yYWdlUmVmID0gZmlyZWJhc2Uuc3RvcmFnZSgpLnJlZigiLyIuY29uY2F0KGRhdGEudGFyZ2V0LCAiLyIpLmNvbmNhdChfZGF0YVJlZjYuYmFubl9pZCwgIi8iKS5jb25jYXQoZGF0YS5iYW5uZXIuYXJjaGl2b3NbIiIuY29uY2F0KGRhdGEubmFtZV9hcmNoaXZvcykuY29uY2F0KF9vcmRlcjZbX2o0XSldLm5vbWJyZSkpOwogICAgICAgICAgICAgIHN0b3JhZ2VSZWYuZ2V0RG93bmxvYWRVUkwoKS50aGVuKGZ1bmN0aW9uICh1cmwpIHsKICAgICAgICAgICAgICAgIHZhciB2YWwgPSBfb3JkZXI2W19uNl07CgogICAgICAgICAgICAgICAgZm9yICh2YXIgbSA9IDA7IG0gPCBPYmplY3QudmFsdWVzKGRhdGEuYmFubmVyLmFyY2hpdm9zKS5sZW5ndGg7IG0rKykgewogICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LnZhbHVlcyhkYXRhLmJhbm5lci5hcmNoaXZvcylbbV0uaWQgIT09IHVuZGVmaW5lZCAmJiB2YWwgPT09IE9iamVjdC52YWx1ZXMoZGF0YS5iYW5uZXIuYXJjaGl2b3MpW21dLmlkKSB7CiAgICAgICAgICAgICAgICAgICAgc3RhdGUuZGJJbWdbdmFsXS51cmwgPSB1cmw7CiAgICAgICAgICAgICAgICAgICAgc3RhdGUuZGJJbWdbdmFsXS5ub21icmUgPSBPYmplY3QudmFsdWVzKGRhdGEuYmFubmVyLmFyY2hpdm9zKVttXS5ub21icmU7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfbjYrKzsKCiAgICAgICAgICAgICAgICBpZiAoX242ID49IE9iamVjdC52YWx1ZXMoZGF0YS5hcmNoaXZvcykubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pMTAgPSAxOyBfaTEwIDw9IE9iamVjdC52YWx1ZXMoc3RhdGUuZGJJbWcpLmxlbmd0aDsgX2kxMCsrKSB7CiAgICAgICAgICAgICAgICAgICAgX2RhdGFSZWY2LmJhbm5fc2xpZGVzWyJzbGlkZXMiLmNvbmNhdChfaTEwKV0gPSB7CiAgICAgICAgICAgICAgICAgICAgICBub21icmU6IHN0YXRlLmRiSW1nW19pMTBdLm5vbWJyZSwKICAgICAgICAgICAgICAgICAgICAgIHVybDogc3RhdGUuZGJJbWdbX2kxMF0udXJsLAogICAgICAgICAgICAgICAgICAgICAgaW5mbzogZGF0YS5iYW5uZXIuYXJjaGl2b3NbInNsaWRlcyIuY29uY2F0KF9pMTApXS5pbmZvCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgaWYgKF9uNiA+PSBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIF9wdXNoZGJSZWY2LnNldChfZGF0YVJlZjYpOwoKICAgICAgICAgICAgICAgICAgICBzdGF0ZS5jcmVhckRCVmFscyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIHZhciBfc3VjY2VzczExID0gewogICAgICAgICAgICAgICAgICAgICAgMDogJ3N1Y2Nlc3NVcGxvYWQnLAogICAgICAgICAgICAgICAgICAgICAgMTogJ1NlIGhhIGNyZWFkbyBleGl0b3NhbWVudGUnCiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgX3RoaXM2LmNvbW1pdCgnc3VjY2Vzc0FkdmlzZScsIF9zdWNjZXNzMTEpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgX2o0Kys7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF9kYXRhUmVmNiA9IHsKICAgICAgICAgICAgYmFubl9pZDogX3B1c2hkYlJlZjYua2V5LAogICAgICAgICAgICBiYW5uX2FjdGl2bzogZGF0YS5iYW5uZXIuYWN0aXZvLAogICAgICAgICAgICBiYW5uX2Jhbm5lcmlkOiBkYXRhLmJhbm5lci5iYW5uZXJpZCwKICAgICAgICAgICAgYmFubl9mZWNoYWVkaWNpb246IGRhdGEuYmFubmVyLmZlY2hhZWQsCiAgICAgICAgICAgIGJhbm5fc2VjY2lvbjogZGF0YS5iYW5uZXIuc2VjY2lvbgogICAgICAgICAgfTsKICAgICAgICAgIF9uNisrOwoKICAgICAgICAgIGlmIChfbjYgPj0gT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5sZW5ndGgpIHsKICAgICAgICAgICAgX3B1c2hkYlJlZjYuc2V0KF9kYXRhUmVmNik7CgogICAgICAgICAgICBzdGF0ZS5jcmVhckRCVmFscyA9IGZhbHNlOwogICAgICAgICAgICB2YXIgX3N1Y2Nlc3MxMiA9IHsKICAgICAgICAgICAgICAwOiAnc3VjY2Vzc1VwbG9hZCcsCiAgICAgICAgICAgICAgMTogJ1NlIGhhIGNyZWFkbyBleGl0b3NhbWVudGUnCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHRoaXMuY29tbWl0KCdzdWNjZXNzQWR2aXNlJywgX3N1Y2Nlc3MxMik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKGRhdGEudGFyZ2V0ID09PSAnTm90aWNpYXMnKSB7CiAgICAgICAgc3RhdGUuZGJJbWcgPSBbXTsKCiAgICAgICAgZm9yICh2YXIgX2szID0gMDsgX2szIDwgT2JqZWN0LnZhbHVlcyhkYXRhLm5vdGljaWEuYXJjaGl2b3MpLmxlbmd0aDsgX2szKyspIHsKICAgICAgICAgIGlmIChPYmplY3QudmFsdWVzKGRhdGEubm90aWNpYS5hcmNoaXZvcylbX2szXS5pZCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIHN0YXRlLmRiSW1nW09iamVjdC52YWx1ZXMoZGF0YS5ub3RpY2lhLmFyY2hpdm9zKVtfazNdLmlkXSA9IE9iamVjdC52YWx1ZXMoZGF0YS5ub3RpY2lhLmFyY2hpdm9zKVtfazNdOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc3RhdGUuZGJJbWdbX2szXSA9ICcnOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgdmFyIF9zdG9yYWdlUmVmOCA9IFtdOwogICAgICAgIHZhciBfcGVyY2VudGFnZTcgPSBbXTsKICAgICAgICB2YXIgX29yZGVyNyA9IFtdOwogICAgICAgIHZhciBfdGFzazcgPSB7fTsKICAgICAgICB2YXIgX2kxMSA9IDA7CiAgICAgICAgdmFyIF9uNyA9IDA7CiAgICAgICAgdmFyIF9qNSA9IDA7CgogICAgICAgIHZhciBfZGJSZWY3ID0gZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoIiIuY29uY2F0KGRhdGEudGFyZ2V0KSk7CgogICAgICAgIHZhciBfcHVzaGRiUmVmNyA9IF9kYlJlZjcucHVzaCgpOwoKICAgICAgICB2YXIgX2RhdGFSZWY3ID0gewogICAgICAgICAgbm90aV9pZDogX3B1c2hkYlJlZjcua2V5CiAgICAgICAgfTsKICAgICAgICBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgIF9zdG9yYWdlUmVmOCA9IGZpcmViYXNlLnN0b3JhZ2UoKS5yZWYoIi8iLmNvbmNhdChkYXRhLnRhcmdldCwgIi8iKS5jb25jYXQoX2RhdGFSZWY3Lm5vdGlfaWQsICIvIikuY29uY2F0KGRhdGEubm90aWNpYS5hcmNoaXZvc1siIi5jb25jYXQoZGF0YS5uYW1lX2FyY2hpdm9zKS5jb25jYXQoZWxlbWVudC5pZCldLm5vbWJyZSkpOwogICAgICAgICAgX3Rhc2s3WyIiLmNvbmNhdChlbGVtZW50LmlkKV0gPSBfc3RvcmFnZVJlZjgucHV0KGVsZW1lbnQpOwogICAgICAgICAgX2kxMSsrOwogICAgICAgIH0pOwoKICAgICAgICBpZiAoT2JqZWN0LnZhbHVlcyhfdGFzazcpLmxlbmd0aCAhPT0gMCkgewogICAgICAgICAgT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICAgIF90YXNrN1siIi5jb25jYXQoZWxlbWVudC5pZCldLm9uKCdzdGF0ZV9jaGFuZ2VkJywgZnVuY3Rpb24gKHNuYXBzaG90KSB7CiAgICAgICAgICAgICAgX3BlcmNlbnRhZ2U3W3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdID0gc25hcHNob3QuYnl0ZXNUcmFuc2ZlcnJlZCAvIHNuYXBzaG90LnRvdGFsQnl0ZXMgKiAxMDA7CiAgICAgICAgICAgICAgc3RhdGUuZGJJbWdbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF0udXBsb2FkUGVyY2VudGFnZSA9IF9wZXJjZW50YWdlN1tzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkXTsKCiAgICAgICAgICAgICAgaWYgKHN0YXRlLmRiSW1nW3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdLnVwbG9hZFBlcmNlbnRhZ2UgPT09IDEwMCAmJiBfb3JkZXI3Lmxlbmd0aCA8IE9iamVjdC52YWx1ZXMoZGF0YS5hcmNoaXZvcykubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICBfb3JkZXI3LnB1c2goc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5tZXNzYWdlKTsKICAgICAgICAgICAgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIF9kYXRhUmVmNyA9IHsKICAgICAgICAgICAgICAgIG5vdGlfaWQ6IF9wdXNoZGJSZWY3LmtleSwKICAgICAgICAgICAgICAgIG5vdGlfdGl0dWxvOiBkYXRhLm5vdGljaWEudGl0dWxvLAogICAgICAgICAgICAgICAgbm90aV9pbmZvOiBkYXRhLm5vdGljaWEuaW5mbywKICAgICAgICAgICAgICAgIG5vdGlfZmVjaGE6IGRhdGEubm90aWNpYS5mZWNoYWVkLAogICAgICAgICAgICAgICAgbm90aV9wcmV2OiBkYXRhLm5vdGljaWEuaW5mb2NvcnQsCiAgICAgICAgICAgICAgICBub3RpX3B1YmxpY2FyOiBkYXRhLm5vdGljaWEuYWN0aXZvLAogICAgICAgICAgICAgICAgbm90aV9zZWNjaW9uOiBkYXRhLm5vdGljaWEuc2VjY2lvbiwKICAgICAgICAgICAgICAgIG5vdGlfZm90b3M6IFtdCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICB2YXIgc3RvcmFnZVJlZiA9IGZpcmViYXNlLnN0b3JhZ2UoKS5yZWYoIi8iLmNvbmNhdChkYXRhLnRhcmdldCwgIi8iKS5jb25jYXQoX2RhdGFSZWY3Lm5vdGlfaWQsICIvIikuY29uY2F0KGRhdGEubm90aWNpYS5hcmNoaXZvc1siIi5jb25jYXQoZGF0YS5uYW1lX2FyY2hpdm9zKS5jb25jYXQoZWxlbWVudC5pZCldLm5vbWJyZSkpOwogICAgICAgICAgICAgIHN0b3JhZ2VSZWYuZ2V0RG93bmxvYWRVUkwoKS50aGVuKGZ1bmN0aW9uICh1cmwpIHsKICAgICAgICAgICAgICAgIHZhciB2YWwgPSBfb3JkZXI3W19uN107CgogICAgICAgICAgICAgICAgZm9yICh2YXIgbSA9IDA7IG0gPCBPYmplY3QudmFsdWVzKGRhdGEubm90aWNpYS5hcmNoaXZvcykubGVuZ3RoOyBtKyspIHsKICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC52YWx1ZXMoZGF0YS5ub3RpY2lhLmFyY2hpdm9zKVttXS5pZCAhPT0gdW5kZWZpbmVkICYmIHZhbCA9PT0gT2JqZWN0LnZhbHVlcyhkYXRhLm5vdGljaWEuYXJjaGl2b3MpW21dLmlkKSB7CiAgICAgICAgICAgICAgICAgICAgc3RhdGUuZGJJbWdbdmFsXS51cmwgPSB1cmw7CiAgICAgICAgICAgICAgICAgICAgc3RhdGUuZGJJbWdbdmFsXS5ub21icmUgPSBPYmplY3QudmFsdWVzKGRhdGEubm90aWNpYS5hcmNoaXZvcylbbV0ubm9tYnJlOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX243Kys7CgogICAgICAgICAgICAgICAgaWYgKF9uNyA+PSBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICBmb3IgKHZhciBfaTEyID0gMDsgX2kxMiA8IE9iamVjdC52YWx1ZXMoc3RhdGUuZGJJbWcpLmxlbmd0aDsgX2kxMisrKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLmRiSW1nW19pMTJdLm5vbWJyZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgICAgICBfZGF0YVJlZjcubm90aV9mb3Rvc1siaW1hZ2VuIi5jb25jYXQoX2kxMildID0gewogICAgICAgICAgICAgICAgICAgICAgICBub21icmU6IHN0YXRlLmRiSW1nW19pMTJdLm5vbWJyZSwKICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBzdGF0ZS5kYkltZ1tfaTEyXS51cmwKICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgIF9kYXRhUmVmNy5ub3RpX2ZvdG9zWyJpbWFnZW4iLmNvbmNhdChfaTEyKV0gPSAnJzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIGlmIChfbjcgPj0gT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICBfcHVzaGRiUmVmNy5zZXQoX2RhdGFSZWY3KTsKCiAgICAgICAgICAgICAgICAgICAgc3RhdGUuY3JlYXJEQlZhbHMgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB2YXIgX3N1Y2Nlc3MxMyA9IHsKICAgICAgICAgICAgICAgICAgICAgIDA6ICdzdWNjZXNzVXBsb2FkJywKICAgICAgICAgICAgICAgICAgICAgIDE6ICdTZSBoYSBjcmVhZG8gZXhpdG9zYW1lbnRlJwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIF90aGlzNi5jb21taXQoJ3N1Y2Nlc3NBZHZpc2UnLCBfc3VjY2VzczEzKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIF9qNSsrOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfZGF0YVJlZjcgPSB7CiAgICAgICAgICAgIG5vdGlfaWQ6IF9wdXNoZGJSZWY3LmtleSwKICAgICAgICAgICAgbm90aV90aXR1bG86IGRhdGEubm90aWNpYS50aXR1bG8sCiAgICAgICAgICAgIG5vdGlfaW5mbzogZGF0YS5ub3RpY2lhLmluZm8sCiAgICAgICAgICAgIG5vdGlfZmVjaGE6IGRhdGEubm90aWNpYS5mZWNoYWVkLAogICAgICAgICAgICBub3RpX3ByZXY6IGRhdGEubm90aWNpYS5pbmZvY29ydCwKICAgICAgICAgICAgbm90aV9wdWJsaWNhcjogZGF0YS5ub3RpY2lhLmFjdGl2bywKICAgICAgICAgICAgbm90aV9zZWNjaW9uOiBkYXRhLm5vdGljaWEuc2VjY2lvbiwKICAgICAgICAgICAgbm90aV9mb3RvczogZGF0YS5ub3RpY2lhLmFyY2hpdm9zCiAgICAgICAgICB9OwogICAgICAgICAgX243Kys7CgogICAgICAgICAgaWYgKF9uNyA+PSBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmxlbmd0aCkgewogICAgICAgICAgICBfcHVzaGRiUmVmNy5zZXQoX2RhdGFSZWY3KTsKCiAgICAgICAgICAgIHN0YXRlLmNyZWFyREJWYWxzID0gZmFsc2U7CiAgICAgICAgICAgIHZhciBfc3VjY2VzczE0ID0gewogICAgICAgICAgICAgIDA6ICdzdWNjZXNzVXBsb2FkJywKICAgICAgICAgICAgICAxOiAnU2UgaGEgY3JlYWRvIGV4aXRvc2FtZW50ZScKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdGhpcy5jb21taXQoJ3N1Y2Nlc3NBZHZpc2UnLCBfc3VjY2VzczE0KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICB1cGRhdGVEQjogZnVuY3Rpb24gdXBkYXRlREIoc3RhdGUsIGRhdGEpIHsKICAgICAgdmFyIF90aGlzNyA9IHRoaXM7CgogICAgICBzdGF0ZS5jcmVhckRCVmFscyA9IHRydWU7CgogICAgICBpZiAoZGF0YS50YXJnZXQgPT09ICdKdW50YXMnKSB7CiAgICAgICAgaWYgKE9iamVjdC52YWx1ZXMoZGF0YS5hcmNoaXZvcykubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgICBmb3IgKHZhciBfaTEzID0gMDsgX2kxMyA8IE9iamVjdC52YWx1ZXMoZGF0YS5qdW50YS5pbnRlZ3JhbnRlcykubGVuZ3RoOyBfaTEzKyspIHsKICAgICAgICAgICAgc3RhdGUuZGJJbWdbX2kxM10gPSBbXTsKICAgICAgICAgICAgc3RhdGUuZGJJbWdbX2kxM10gPSBPYmplY3QudmFsdWVzKGRhdGEuanVudGEuaW50ZWdyYW50ZXMpW19pMTNdLmltYWdlOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgdmFyIHN0b3JhZ2VSZWYgPSBbXTsKICAgICAgICB2YXIgcGVyY2VudGFnZSA9IFtdOwogICAgICAgIHZhciBvcmRlciA9IFtdOwogICAgICAgIHZhciB0YXNrID0ge307CiAgICAgICAgdmFyIGkgPSAwOwogICAgICAgIHZhciBqID0gMDsKICAgICAgICB2YXIgbiA9IDA7CiAgICAgICAgT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICBzdG9yYWdlUmVmID0gZmlyZWJhc2Uuc3RvcmFnZSgpLnJlZigiLyIuY29uY2F0KGRhdGEudGFyZ2V0LCAiLyIpLmNvbmNhdChkYXRhLmp1bnRhLmlkLCAiLyIpLmNvbmNhdChkYXRhLmp1bnRhLmludGVncmFudGVzWyIiLmNvbmNhdChlbGVtZW50LmlkKV0uY2FyZ28uc3BsaXQoJyAnKS5qb2luKCdfJykpKTsKICAgICAgICAgIHRhc2tbIiIuY29uY2F0KGVsZW1lbnQuaWQpXSA9IHN0b3JhZ2VSZWYucHV0KGVsZW1lbnQpOwogICAgICAgIH0pOwoKICAgICAgICBpZiAoT2JqZWN0LnZhbHVlcyh0YXNrKS5sZW5ndGggIT09IDApIHsKICAgICAgICAgIE9iamVjdC52YWx1ZXMoZGF0YS5hcmNoaXZvcykuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgICB0YXNrWyIiLmNvbmNhdChlbGVtZW50LmlkKV0ub24oJ3N0YXRlX2NoYW5nZWQnLCBmdW5jdGlvbiAoc25hcHNob3QpIHsKICAgICAgICAgICAgICBwZXJjZW50YWdlW3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdID0gc25hcHNob3QuYnl0ZXNUcmFuc2ZlcnJlZCAvIHNuYXBzaG90LnRvdGFsQnl0ZXMgKiAxMDA7CiAgICAgICAgICAgICAgc3RhdGUuZGJJbWdbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF0udXBsb2FkUGVyY2VudGFnZSA9IHBlcmNlbnRhZ2Vbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF07CgogICAgICAgICAgICAgIGlmIChzdGF0ZS5kYkltZ1tzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkXS51cGxvYWRQZXJjZW50YWdlID09PSAxMDAgJiYgb3JkZXIubGVuZ3RoIDwgT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIG9yZGVyLnB1c2goc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5tZXNzYWdlKTsKICAgICAgICAgICAgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHZhciBkYXRhUmVmID0gW107CiAgICAgICAgICAgICAgZGF0YVJlZi5qdW50X3BlcmlvZG8gPSAiIi5jb25jYXQoZGF0YS5qdW50YS5pbmljaW8sICItIikuY29uY2F0KGRhdGEuanVudGEuZmluKTsKICAgICAgICAgICAgICBkYXRhUmVmLmp1bnRfaWQgPSBkYXRhLmp1bnRhLmlkOwogICAgICAgICAgICAgIGRhdGFSZWYuanVudF9hY3RpdmEgPSBkYXRhLmp1bnRhLmp1bnRhX2FjdHVhbDsKICAgICAgICAgICAgICBkYXRhUmVmLmp1bnRfaW50ZWdyYW50ZXMgPSBbXTsKCiAgICAgICAgICAgICAgZm9yICh2YXIgX2kxNCA9IDA7IF9pMTQgPCBPYmplY3QudmFsdWVzKGRhdGEuanVudGEuaW50ZWdyYW50ZXMpLmxlbmd0aDsgX2kxNCsrKSB7CiAgICAgICAgICAgICAgICBkYXRhUmVmLmp1bnRfaW50ZWdyYW50ZXNbX2kxNF0gPSBbXTsKICAgICAgICAgICAgICAgIGRhdGFSZWYuanVudF9pbnRlZ3JhbnRlc1tfaTE0XS5qdWluX2NhcmdvID0gT2JqZWN0LnZhbHVlcyhkYXRhLmp1bnRhLmludGVncmFudGVzKVtfaTE0XS5jYXJnbzsKICAgICAgICAgICAgICAgIGRhdGFSZWYuanVudF9pbnRlZ3JhbnRlc1tfaTE0XS5qdWluX25vbWJyZSA9IE9iamVjdC52YWx1ZXMoZGF0YS5qdW50YS5pbnRlZ3JhbnRlcylbX2kxNF0ubm9tYnJlOwogICAgICAgICAgICAgICAgZGF0YVJlZi5qdW50X2ludGVncmFudGVzW19pMTRdLmp1aW5fYXBlbGxpZG8gPSBPYmplY3QudmFsdWVzKGRhdGEuanVudGEuaW50ZWdyYW50ZXMpW19pMTRdLmFwZWxsaWRvOwogICAgICAgICAgICAgICAgZGF0YVJlZi5qdW50X2ludGVncmFudGVzW19pMTRdLmp1aW5fY29ycmVvID0gT2JqZWN0LnZhbHVlcyhkYXRhLmp1bnRhLmludGVncmFudGVzKVtfaTE0XS5jb3JyZW87CiAgICAgICAgICAgICAgICBkYXRhUmVmLmp1bnRfaW50ZWdyYW50ZXNbX2kxNF0uanVpbl9mb3RvID0gW107CiAgICAgICAgICAgICAgICBkYXRhUmVmLmp1bnRfaW50ZWdyYW50ZXNbX2kxNF0uanVpbl9hY3Rpdm8gPSBPYmplY3QudmFsdWVzKGRhdGEuanVudGEuaW50ZWdyYW50ZXMpW19pMTRdLmFjdGl2bzsKICAgICAgICAgICAgICAgIGRhdGFSZWYuanVudF9pbnRlZ3JhbnRlc1tfaTE0XS5qdWluX2NyZWFyID0gT2JqZWN0LnZhbHVlcyhkYXRhLmp1bnRhLmludGVncmFudGVzKVtfaTE0XS5jcmVhcjsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHZhciBzdG9yYWdlUmVmID0gZmlyZWJhc2Uuc3RvcmFnZSgpLnJlZigiLyIuY29uY2F0KGRhdGEudGFyZ2V0LCAiLyIpLmNvbmNhdChkYXRhLmp1bnRhLmluaWNpbywgIi8iKS5jb25jYXQoZGF0YS5qdW50YS5pbnRlZ3JhbnRlc1siIi5jb25jYXQob3JkZXJbal0pXS5jYXJnby5zcGxpdCgnICcpLmpvaW4oJ18nKSkpOwogICAgICAgICAgICAgIHN0b3JhZ2VSZWYuZ2V0RG93bmxvYWRVUkwoKS50aGVuKGZ1bmN0aW9uICh1cmwpIHsKICAgICAgICAgICAgICAgIHZhciB2YWwgPSBvcmRlcltuXTsKICAgICAgICAgICAgICAgIHN0YXRlLmRiSW1nW3ZhbF0udXJsID0gdXJsOwogICAgICAgICAgICAgICAgc3RhdGUuZGJJbWdbdmFsXS5ub21icmUgPSAiIi5jb25jYXQoZGF0YS5qdW50YS5pbnRlZ3JhbnRlc1siIi5jb25jYXQob3JkZXJbbl0pXS5jYXJnby5zcGxpdCgnICcpLmpvaW4oJ18nKSk7CiAgICAgICAgICAgICAgICBuKys7CgogICAgICAgICAgICAgICAgaWYgKG4gPj0gb3JkZXIubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgIGkgPSAwOwogICAgICAgICAgICAgICAgICBPYmplY3QudmFsdWVzKGRhdGFSZWYuanVudF9pbnRlZ3JhbnRlcykuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5kYkltZ1tpXS5ub21icmUgIT09IHVuZGVmaW5lZCAmJiBzdGF0ZS5kYkltZ1tpXS51cmwgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5qdWluX2ZvdG8ubm9tYnJlID0gc3RhdGUuZGJJbWdbaV0ubm9tYnJlOwogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5qdWluX2ZvdG8udXJsID0gc3RhdGUuZGJJbWdbaV0udXJsOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50Lmp1aW5fZm90byA9ICIiOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaSsrOwoKICAgICAgICAgICAgICAgICAgICBpZiAobiA+PSBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgdmFyIGRiUmVmID0gZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoIiIuY29uY2F0KGRhdGEudGFyZ2V0KSk7CiAgICAgICAgICAgICAgICAgICAgICBkYlJlZi5jaGlsZCgiIi5jb25jYXQoZGF0YS5qdW50YS5pZCkpLnNldChkYXRhUmVmKTsKICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLmNyZWFyREJWYWxzID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgc3VjY2VzcyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgMDogJ3N1Y2Nlc3NVcGxvYWQnLAogICAgICAgICAgICAgICAgICAgICAgICAxOiAnU2UgaGEgY3JlYWRvIGV4aXRvc2FtZW50ZScKICAgICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgICAgX3RoaXM3LmNvbW1pdCgnc3VjY2Vzc0FkdmlzZScsIHN1Y2Nlc3MpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgaisrOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YXIgZGF0YVJlZiA9IFtdOwogICAgICAgICAgZGF0YVJlZi5qdW50X3BlcmlvZG8gPSAiIi5jb25jYXQoZGF0YS5qdW50YS5pbmljaW8sICItIikuY29uY2F0KGRhdGEuanVudGEuZmluKTsKICAgICAgICAgIGRhdGFSZWYuanVudF9pZCA9IGRhdGEuanVudGEuaWQ7CiAgICAgICAgICBkYXRhUmVmLmp1bnRfYWN0aXZhID0gZGF0YS5qdW50YS5qdW50YV9hY3R1YWw7CiAgICAgICAgICBkYXRhUmVmLmp1bnRfaW50ZWdyYW50ZXMgPSBbXTsKCiAgICAgICAgICBmb3IgKHZhciBfaTE1ID0gMDsgX2kxNSA8IE9iamVjdC52YWx1ZXMoZGF0YS5qdW50YS5pbnRlZ3JhbnRlcykubGVuZ3RoOyBfaTE1KyspIHsKICAgICAgICAgICAgZGF0YVJlZi5qdW50X2ludGVncmFudGVzW19pMTVdID0gW107CiAgICAgICAgICAgIGRhdGFSZWYuanVudF9pbnRlZ3JhbnRlc1tfaTE1XS5qdWluX2NhcmdvID0gT2JqZWN0LnZhbHVlcyhkYXRhLmp1bnRhLmludGVncmFudGVzKVtfaTE1XS5jYXJnbzsKICAgICAgICAgICAgZGF0YVJlZi5qdW50X2ludGVncmFudGVzW19pMTVdLmp1aW5fbm9tYnJlID0gT2JqZWN0LnZhbHVlcyhkYXRhLmp1bnRhLmludGVncmFudGVzKVtfaTE1XS5ub21icmU7CiAgICAgICAgICAgIGRhdGFSZWYuanVudF9pbnRlZ3JhbnRlc1tfaTE1XS5qdWluX2FwZWxsaWRvID0gT2JqZWN0LnZhbHVlcyhkYXRhLmp1bnRhLmludGVncmFudGVzKVtfaTE1XS5hcGVsbGlkbzsKICAgICAgICAgICAgZGF0YVJlZi5qdW50X2ludGVncmFudGVzW19pMTVdLmp1aW5fY29ycmVvID0gT2JqZWN0LnZhbHVlcyhkYXRhLmp1bnRhLmludGVncmFudGVzKVtfaTE1XS5jb3JyZW87CiAgICAgICAgICAgIGRhdGFSZWYuanVudF9pbnRlZ3JhbnRlc1tfaTE1XS5qdWluX2ZvdG8gPSBPYmplY3QudmFsdWVzKGRhdGEuanVudGEuaW50ZWdyYW50ZXMpW19pMTVdLmltYWdlOwogICAgICAgICAgICBkYXRhUmVmLmp1bnRfaW50ZWdyYW50ZXNbX2kxNV0uanVpbl9hY3Rpdm8gPSBPYmplY3QudmFsdWVzKGRhdGEuanVudGEuaW50ZWdyYW50ZXMpW19pMTVdLmFjdGl2bzsKICAgICAgICAgICAgZGF0YVJlZi5qdW50X2ludGVncmFudGVzW19pMTVdLmp1aW5fY3JlYXIgPSBPYmplY3QudmFsdWVzKGRhdGEuanVudGEuaW50ZWdyYW50ZXMpW19pMTVdLmNyZWFyOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBkYlJlZiA9IGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKCIiLmNvbmNhdChkYXRhLnRhcmdldCkpOwogICAgICAgICAgZGJSZWYuY2hpbGQoIiIuY29uY2F0KGRhdGEuanVudGEuaWQpKS5zZXQoZGF0YVJlZik7CiAgICAgICAgICBzdGF0ZS5jcmVhckRCVmFscyA9IGZhbHNlOwogICAgICAgICAgdmFyIHN1Y2Nlc3MgPSB7CiAgICAgICAgICAgIDA6ICdzdWNjZXNzVXBsb2FkJywKICAgICAgICAgICAgMTogJ1NlIGhhIGNyZWFkbyBleGl0b3NhbWVudGUnCiAgICAgICAgICB9OwogICAgICAgICAgdGhpcy5jb21taXQoJ3N1Y2Nlc3NBZHZpc2UnLCBzdWNjZXNzKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoZGF0YS50YXJnZXQgPT09ICdTZXJ2aWNpb3MnKSB7CiAgICAgICAgaWYgKE9iamVjdC52YWx1ZXMoZGF0YS5hcmNoaXZvcykubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgICBzdGF0ZS5kYkltZyA9IFtdOwogICAgICAgICAgc3RhdGUuZGJJbWdbMF0gPSBkYXRhLnNlcnZpY2lvLmltYWdlOwogICAgICAgIH0KCiAgICAgICAgdmFyIF9zdG9yYWdlUmVmOSA9IFtdOwogICAgICAgIHZhciBfcGVyY2VudGFnZTggPSBbXTsKICAgICAgICB2YXIgX29yZGVyOCA9IFtdOwogICAgICAgIHZhciBfdGFzazggPSB7fTsKICAgICAgICB2YXIgX244ID0gMDsKICAgICAgICBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgIF9zdG9yYWdlUmVmOSA9IGZpcmViYXNlLnN0b3JhZ2UoKS5yZWYoIi8iLmNvbmNhdChkYXRhLnRhcmdldCwgIi8iKS5jb25jYXQoZGF0YS5zZXJ2aWNpby5pZCwgIi8iKS5jb25jYXQoZGF0YS5zZXJ2aWNpby5ub21icmUuc3BsaXQoJyAnKS5qb2luKCdfJykpKTsKICAgICAgICAgIF90YXNrOFsiIi5jb25jYXQoZWxlbWVudC5pZCldID0gX3N0b3JhZ2VSZWY5LnB1dChlbGVtZW50KTsKICAgICAgICB9KTsKCiAgICAgICAgaWYgKE9iamVjdC52YWx1ZXMoX3Rhc2s4KS5sZW5ndGggIT09IDApIHsKICAgICAgICAgIE9iamVjdC52YWx1ZXMoZGF0YS5hcmNoaXZvcykuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgICBfdGFzazhbIiIuY29uY2F0KGVsZW1lbnQuaWQpXS5vbignc3RhdGVfY2hhbmdlZCcsIGZ1bmN0aW9uIChzbmFwc2hvdCkgewogICAgICAgICAgICAgIF9wZXJjZW50YWdlOFtzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkXSA9IHNuYXBzaG90LmJ5dGVzVHJhbnNmZXJyZWQgLyBzbmFwc2hvdC50b3RhbEJ5dGVzICogMTAwOwogICAgICAgICAgICAgIHN0YXRlLmRiSW1nW3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdLnVwbG9hZFBlcmNlbnRhZ2UgPSBfcGVyY2VudGFnZThbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF07CgogICAgICAgICAgICAgIGlmIChzdGF0ZS5kYkltZ1tzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkXS51cGxvYWRQZXJjZW50YWdlID09PSAxMDAgJiYgX29yZGVyOC5sZW5ndGggPCBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgX29yZGVyOC5wdXNoKHNuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWQpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IubWVzc2FnZSk7CiAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICB2YXIgZGF0YVJlZiA9IHsKICAgICAgICAgICAgICAgIHNlcnZfYWN0aXZvOiBkYXRhLnNlcnZpY2lvLmFjdGl2bywKICAgICAgICAgICAgICAgIHNlcnZfY2llcnJlOiBkYXRhLnNlcnZpY2lvLmZpbiwKICAgICAgICAgICAgICAgIHNlcnZfY29udGFjdG86IGRhdGEuc2VydmljaW8uY29udGFjdG8sCiAgICAgICAgICAgICAgICBzZXJ2X2Rlc2NyaXBjaW9uOiBkYXRhLnNlcnZpY2lvLmRlc2NyaXBjaW9uLAogICAgICAgICAgICAgICAgc2Vydl9pZDogZGF0YS5zZXJ2aWNpby5pZCwKICAgICAgICAgICAgICAgIHNlcnZfaW5pY2lvOiBkYXRhLnNlcnZpY2lvLmluaWNpbywKICAgICAgICAgICAgICAgIHNlcnZfbm9tYnJlOiBkYXRhLnNlcnZpY2lvLm5vbWJyZSwKICAgICAgICAgICAgICAgIHNlcnZfZm90bzogW10KICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIHZhciBzdG9yYWdlUmVmID0gZmlyZWJhc2Uuc3RvcmFnZSgpLnJlZigiLyIuY29uY2F0KGRhdGEudGFyZ2V0LCAiLyIpLmNvbmNhdChkYXRhLnNlcnZpY2lvLmlkLCAiLyIpLmNvbmNhdChkYXRhLnNlcnZpY2lvLm5vbWJyZS5zcGxpdCgnICcpLmpvaW4oJ18nKSkpOwogICAgICAgICAgICAgIHN0b3JhZ2VSZWYuZ2V0RG93bmxvYWRVUkwoKS50aGVuKGZ1bmN0aW9uICh1cmwpIHsKICAgICAgICAgICAgICAgIHZhciB2YWwgPSBfb3JkZXI4W19uOF07CiAgICAgICAgICAgICAgICBzdGF0ZS5kYkltZ1t2YWxdLnVybCA9IHVybDsKICAgICAgICAgICAgICAgIHN0YXRlLmRiSW1nW3ZhbF0ubm9tYnJlID0gIiIuY29uY2F0KGRhdGEuc2VydmljaW8ubm9tYnJlLnNwbGl0KCcgJykuam9pbignXycpKTsKICAgICAgICAgICAgICAgIF9uOCsrOwoKICAgICAgICAgICAgICAgIGlmIChfbjggPj0gX29yZGVyOC5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgZGF0YVJlZi5zZXJ2X2ZvdG8ubm9tYnJlID0gc3RhdGUuZGJJbWdbMF0ubm9tYnJlOwogICAgICAgICAgICAgICAgICBkYXRhUmVmLnNlcnZfZm90by51cmwgPSBzdGF0ZS5kYkltZ1swXS51cmw7CgogICAgICAgICAgICAgICAgICBpZiAoX244ID49IE9iamVjdC52YWx1ZXMoZGF0YS5hcmNoaXZvcykubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIF9kYlJlZjggPSBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZigiIi5jb25jYXQoZGF0YS50YXJnZXQpKTsKCiAgICAgICAgICAgICAgICAgICAgX2RiUmVmOC5jaGlsZCgiIi5jb25jYXQoZGF0YS5zZXJ2aWNpby5pZCkpLnNldChkYXRhUmVmKTsKCiAgICAgICAgICAgICAgICAgICAgc3RhdGUuY3JlYXJEQlZhbHMgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB2YXIgX3N1Y2Nlc3MxNSA9IHsKICAgICAgICAgICAgICAgICAgICAgIDA6ICdzdWNjZXNzVXBsb2FkJywKICAgICAgICAgICAgICAgICAgICAgIDE6ICdTZSBoYSBjcmVhZG8gZXhpdG9zYW1lbnRlJwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIF90aGlzNy5jb21taXQoJ3N1Y2Nlc3NBZHZpc2UnLCBfc3VjY2VzczE1KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YXIgX2RhdGFSZWY4ID0gewogICAgICAgICAgICBzZXJ2X2FjdGl2bzogZGF0YS5zZXJ2aWNpby5hY3Rpdm8sCiAgICAgICAgICAgIHNlcnZfY2llcnJlOiBkYXRhLnNlcnZpY2lvLmZpbiwKICAgICAgICAgICAgc2Vydl9jb250YWN0bzogZGF0YS5zZXJ2aWNpby5jb250YWN0bywKICAgICAgICAgICAgc2Vydl9kZXNjcmlwY2lvbjogZGF0YS5zZXJ2aWNpby5kZXNjcmlwY2lvbiwKICAgICAgICAgICAgc2Vydl9pZDogZGF0YS5zZXJ2aWNpby5pZCwKICAgICAgICAgICAgc2Vydl9pbmljaW86IGRhdGEuc2VydmljaW8uaW5pY2lvLAogICAgICAgICAgICBzZXJ2X25vbWJyZTogZGF0YS5zZXJ2aWNpby5ub21icmUsCiAgICAgICAgICAgIHNlcnZfZm90bzogZGF0YS5zZXJ2aWNpby5pbWFnZQogICAgICAgICAgfTsKICAgICAgICAgIF9uOCsrOwoKICAgICAgICAgIGlmIChfbjggPj0gT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5sZW5ndGgpIHsKICAgICAgICAgICAgdmFyIF9kYlJlZjkgPSBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZigiIi5jb25jYXQoZGF0YS50YXJnZXQpKTsKCiAgICAgICAgICAgIF9kYlJlZjkuY2hpbGQoIiIuY29uY2F0KGRhdGEuc2VydmljaW8uaWQpKS5zZXQoX2RhdGFSZWY4KTsKCiAgICAgICAgICAgIHN0YXRlLmNyZWFyREJWYWxzID0gZmFsc2U7CiAgICAgICAgICAgIHZhciBfc3VjY2VzczE2ID0gewogICAgICAgICAgICAgIDA6ICdzdWNjZXNzVXBsb2FkJywKICAgICAgICAgICAgICAxOiAnU2UgaGEgY3JlYWRvIGV4aXRvc2FtZW50ZScKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdGhpcy5jb21taXQoJ3N1Y2Nlc3NBZHZpc2UnLCBfc3VjY2VzczE2KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoZGF0YS50YXJnZXQgPT09ICdHZXJlbmNpYScpIHsKICAgICAgICBpZiAoT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5sZW5ndGggIT09IDApIHsKICAgICAgICAgIHN0YXRlLmRiSW1nID0gW107CiAgICAgICAgICBzdGF0ZS5kYkltZ1swXSA9IGRhdGEuaW50ZWdyYW50ZS5pbWFnZTsKICAgICAgICB9CgogICAgICAgIHZhciBfc3RvcmFnZVJlZjEwID0gW107CiAgICAgICAgdmFyIF9wZXJjZW50YWdlOSA9IFtdOwogICAgICAgIHZhciBfb3JkZXI5ID0gW107CiAgICAgICAgdmFyIF90YXNrOSA9IHt9OwogICAgICAgIHZhciBfbjkgPSAwOwogICAgICAgIE9iamVjdC52YWx1ZXMoZGF0YS5hcmNoaXZvcykuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgX3N0b3JhZ2VSZWYxMCA9IGZpcmViYXNlLnN0b3JhZ2UoKS5yZWYoIi8iLmNvbmNhdChkYXRhLnRhcmdldCwgIi8iKS5jb25jYXQoZGF0YS5pbnRlZ3JhbnRlLmlkLCAiLyIpLmNvbmNhdChkYXRhLmludGVncmFudGUuY2FyZ28uc3BsaXQoJyAnKS5qb2luKCdfJykpKTsKICAgICAgICAgIF90YXNrOVsiIi5jb25jYXQoZWxlbWVudC5pZCldID0gX3N0b3JhZ2VSZWYxMC5wdXQoZWxlbWVudCk7CiAgICAgICAgfSk7CgogICAgICAgIGlmIChPYmplY3QudmFsdWVzKF90YXNrOSkubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgICBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgICAgX3Rhc2s5WyIiLmNvbmNhdChlbGVtZW50LmlkKV0ub24oJ3N0YXRlX2NoYW5nZWQnLCBmdW5jdGlvbiAoc25hcHNob3QpIHsKICAgICAgICAgICAgICBfcGVyY2VudGFnZTlbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF0gPSBzbmFwc2hvdC5ieXRlc1RyYW5zZmVycmVkIC8gc25hcHNob3QudG90YWxCeXRlcyAqIDEwMDsKICAgICAgICAgICAgICBzdGF0ZS5kYkltZ1tzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkXS51cGxvYWRQZXJjZW50YWdlID0gX3BlcmNlbnRhZ2U5W3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdOwoKICAgICAgICAgICAgICBpZiAoc3RhdGUuZGJJbWdbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF0udXBsb2FkUGVyY2VudGFnZSA9PT0gMTAwICYmIF9vcmRlcjkubGVuZ3RoIDwgT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIF9vcmRlcjkucHVzaChzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLm1lc3NhZ2UpOwogICAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgdmFyIGRhdGFSZWYgPSB7CiAgICAgICAgICAgICAgICBncl9jb3JyZW86IGRhdGEuaW50ZWdyYW50ZS5jb3JyZW8sCiAgICAgICAgICAgICAgICBncl9ub21icmU6IGRhdGEuaW50ZWdyYW50ZS5ub21icmUsCiAgICAgICAgICAgICAgICBncl9jYXJnbzogZGF0YS5pbnRlZ3JhbnRlLmNhcmdvLAogICAgICAgICAgICAgICAgZ3JfaWQ6IGRhdGEuaW50ZWdyYW50ZS5pZCwKICAgICAgICAgICAgICAgIGdyX2ZvdG86IFtdCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICB2YXIgc3RvcmFnZVJlZiA9IGZpcmViYXNlLnN0b3JhZ2UoKS5yZWYoIi9pbWFnZW5lcy8iLmNvbmNhdChkYXRhLnRhcmdldCwgIi8iKS5jb25jYXQoZGF0YS5pbnRlZ3JhbnRlLmlkLCAiLyIpLmNvbmNhdChkYXRhLmludGVncmFudGUuY2FyZ28uc3BsaXQoJyAnKS5qb2luKCdfJykpKTsKICAgICAgICAgICAgICBzdG9yYWdlUmVmLmdldERvd25sb2FkVVJMKCkudGhlbihmdW5jdGlvbiAodXJsKSB7CiAgICAgICAgICAgICAgICB2YXIgdmFsID0gX29yZGVyOVtfbjldOwogICAgICAgICAgICAgICAgc3RhdGUuZGJJbWdbdmFsXS51cmwgPSB1cmw7CiAgICAgICAgICAgICAgICBzdGF0ZS5kYkltZ1t2YWxdLm5vbWJyZSA9ICIiLmNvbmNhdChkYXRhLmludGVncmFudGUuY2FyZ28uc3BsaXQoJyAnKS5qb2luKCdfJykpOwogICAgICAgICAgICAgICAgX245Kys7CgogICAgICAgICAgICAgICAgaWYgKF9uOSA+PSBfb3JkZXI5Lmxlbmd0aCkgewogICAgICAgICAgICAgICAgICBkYXRhUmVmLmdyX2ZvdG8ubm9tYnJlID0gc3RhdGUuZGJJbWdbMF0ubm9tYnJlOwogICAgICAgICAgICAgICAgICBkYXRhUmVmLmdyX2ZvdG8udXJsID0gc3RhdGUuZGJJbWdbMF0udXJsOwoKICAgICAgICAgICAgICAgICAgaWYgKF9uOSA+PSBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIHZhciBfZGJSZWYxMCA9IGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKCIiLmNvbmNhdChkYXRhLnRhcmdldCkpOwoKICAgICAgICAgICAgICAgICAgICBfZGJSZWYxMC5jaGlsZCgiIi5jb25jYXQoZGF0YS5pbnRlZ3JhbnRlLmlkKSkuc2V0KGRhdGFSZWYpOwoKICAgICAgICAgICAgICAgICAgICBzdGF0ZS5jcmVhckRCVmFscyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIHZhciBfc3VjY2VzczE3ID0gewogICAgICAgICAgICAgICAgICAgICAgMDogJ3N1Y2Nlc3NVcGxvYWQnLAogICAgICAgICAgICAgICAgICAgICAgMTogJ1NlIGhhIGNyZWFkbyBleGl0b3NhbWVudGUnCiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgX3RoaXM3LmNvbW1pdCgnc3VjY2Vzc0FkdmlzZScsIF9zdWNjZXNzMTcpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciBfZGF0YVJlZjkgPSB7CiAgICAgICAgICAgIGdyX2NvcnJlbzogZGF0YS5pbnRlZ3JhbnRlLmNvcnJlbywKICAgICAgICAgICAgZ3Jfbm9tYnJlOiBkYXRhLmludGVncmFudGUubm9tYnJlLAogICAgICAgICAgICBncl9jYXJnbzogZGF0YS5pbnRlZ3JhbnRlLmNhcmdvLAogICAgICAgICAgICBncl9pZDogZGF0YS5pbnRlZ3JhbnRlLmlkLAogICAgICAgICAgICBncl9mb3RvOiBkYXRhLmludGVncmFudGUuaW1hZ2UKICAgICAgICAgIH07CiAgICAgICAgICBfbjkrKzsKCiAgICAgICAgICBpZiAoX245ID49IE9iamVjdC52YWx1ZXMoZGF0YS5hcmNoaXZvcykubGVuZ3RoKSB7CiAgICAgICAgICAgIHZhciBfZGJSZWYxMSA9IGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKCIiLmNvbmNhdChkYXRhLnRhcmdldCkpOwoKICAgICAgICAgICAgX2RiUmVmMTEuY2hpbGQoIiIuY29uY2F0KGRhdGEuaW50ZWdyYW50ZS5pZCkpLnNldChfZGF0YVJlZjkpOwoKICAgICAgICAgICAgc3RhdGUuY3JlYXJEQlZhbHMgPSBmYWxzZTsKICAgICAgICAgICAgdmFyIF9zdWNjZXNzMTggPSB7CiAgICAgICAgICAgICAgMDogJ3N1Y2Nlc3NVcGxvYWQnLAogICAgICAgICAgICAgIDE6ICdTZSBoYSBjcmVhZG8gZXhpdG9zYW1lbnRlJwogICAgICAgICAgICB9OwogICAgICAgICAgICB0aGlzLmNvbW1pdCgnc3VjY2Vzc0FkdmlzZScsIF9zdWNjZXNzMTgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChkYXRhLnRhcmdldCA9PT0gJ1Byb2Zlc29yZXMnKSB7CiAgICAgICAgc3RhdGUuZGJJbWcgPSBbXTsKCiAgICAgICAgaWYgKGRhdGEuYXJjaGl2b3NbJ2FyY2hpdm8wJ10gIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgc3RhdGUuZGJJbWdbMF0gPSBkYXRhLnByb2Zlc29yLmFyY2hpdm9zLmltYWdlOwogICAgICAgIH0KCiAgICAgICAgaWYgKGRhdGEuYXJjaGl2b3NbJ2FyY2hpdm8xJ10gIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgc3RhdGUuZGJJbWdbMV0gPSBkYXRhLnByb2Zlc29yLmFyY2hpdm9zLmN2OwogICAgICAgIH0KCiAgICAgICAgdmFyIF9zdG9yYWdlUmVmMTEgPSBbXTsKICAgICAgICB2YXIgX3BlcmNlbnRhZ2UxMCA9IFtdOwogICAgICAgIHZhciBfb3JkZXIxMCA9IFtdOwogICAgICAgIHZhciBfdGFzazEwID0ge307CiAgICAgICAgdmFyIF9pMTYgPSAwOwogICAgICAgIHZhciBfbjEwID0gMDsKICAgICAgICB2YXIgX2o2ID0gMDsKICAgICAgICBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgIF9zdG9yYWdlUmVmMTEgPSBmaXJlYmFzZS5zdG9yYWdlKCkucmVmKCIvIi5jb25jYXQoZGF0YS50YXJnZXQsICIvIikuY29uY2F0KGRhdGEucHJvZmVzb3IuaWQsICIvIikuY29uY2F0KE9iamVjdC52YWx1ZXMoZGF0YS5wcm9mZXNvci5hcmNoaXZvcylbX2kxNl0ubm9tYnJlKSk7CiAgICAgICAgICBfdGFzazEwWyIiLmNvbmNhdChlbGVtZW50LmlkKV0gPSBfc3RvcmFnZVJlZjExLnB1dChlbGVtZW50KTsKICAgICAgICAgIF9pMTYrKzsKICAgICAgICB9KTsKCiAgICAgICAgaWYgKE9iamVjdC52YWx1ZXMoX3Rhc2sxMCkubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgICBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgICAgX3Rhc2sxMFsiIi5jb25jYXQoZWxlbWVudC5pZCldLm9uKCdzdGF0ZV9jaGFuZ2VkJywgZnVuY3Rpb24gKHNuYXBzaG90KSB7CiAgICAgICAgICAgICAgX3BlcmNlbnRhZ2UxMFtzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkXSA9IHNuYXBzaG90LmJ5dGVzVHJhbnNmZXJyZWQgLyBzbmFwc2hvdC50b3RhbEJ5dGVzICogMTAwOwogICAgICAgICAgICAgIHN0YXRlLmRiSW1nW3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdLnVwbG9hZFBlcmNlbnRhZ2UgPSBfcGVyY2VudGFnZTEwW3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdOwoKICAgICAgICAgICAgICBpZiAoc3RhdGUuZGJJbWdbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF0udXBsb2FkUGVyY2VudGFnZSA9PT0gMTAwICYmIF9vcmRlcjEwLmxlbmd0aCA8IE9iamVjdC52YWx1ZXMoZGF0YS5hcmNoaXZvcykubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICBfb3JkZXIxMC5wdXNoKHNuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWQpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IubWVzc2FnZSk7CiAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICB2YXIgZGF0YVJlZiA9IHsKICAgICAgICAgICAgICAgIGNvbWlfaWQ6IGRhdGEucHJvZmVzb3IuY29pZCwKICAgICAgICAgICAgICAgIHByb2ZfY3Y6IFtdLAogICAgICAgICAgICAgICAgcHJvZl9jaTogZGF0YS5wcm9mZXNvci5jaSwKICAgICAgICAgICAgICAgIHByb2ZfY29ycmVvOiBkYXRhLnByb2Zlc29yLmNvcnJlbywKICAgICAgICAgICAgICAgIHByb2ZfZmVjaGFkZW5hY2ltaWVudG86IGRhdGEucHJvZmVzb3IubmFjaW1pZW50bywKICAgICAgICAgICAgICAgIHByb2ZfZm90bzogW10sCiAgICAgICAgICAgICAgICBwcm9mX2lkOiBkYXRhLnByb2Zlc29yLmlkLAogICAgICAgICAgICAgICAgcHJvZl9ub21icmU6IGRhdGEucHJvZmVzb3Iubm9tYnJlLAogICAgICAgICAgICAgICAgcHJvZl90ZWxlZm9ub3M6IGRhdGEucHJvZmVzb3IudGVsZWZvbm9zCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICB2YXIgc3RvcmFnZVJlZiA9IGZpcmViYXNlLnN0b3JhZ2UoKS5yZWYoIi8iLmNvbmNhdChkYXRhLnRhcmdldCwgIi8iKS5jb25jYXQoZGF0YS5wcm9mZXNvci5pZCwgIi8iKS5jb25jYXQoT2JqZWN0LnZhbHVlcyhkYXRhLnByb2Zlc29yLmFyY2hpdm9zKVtfb3JkZXIxMFtfajZdXS5ub21icmUpKTsKICAgICAgICAgICAgICBzdG9yYWdlUmVmLmdldERvd25sb2FkVVJMKCkudGhlbihmdW5jdGlvbiAodXJsKSB7CiAgICAgICAgICAgICAgICB2YXIgdmFsID0gX29yZGVyMTBbX24xMF07CgogICAgICAgICAgICAgICAgaWYgKHZhbCA9PT0gMCkgewogICAgICAgICAgICAgICAgICBzdGF0ZS5kYkltZ1t2YWxdLnVybCA9IHVybDsKICAgICAgICAgICAgICAgICAgc3RhdGUuZGJJbWdbdmFsXS5ub21icmUgPSAiIi5jb25jYXQoZGF0YS5wcm9mZXNvci5pZCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBzdGF0ZS5kYkltZ1t2YWxdLnVybCA9IHVybDsKICAgICAgICAgICAgICAgICAgc3RhdGUuZGJJbWdbdmFsXS5ub21icmUgPSAiY192XyIuY29uY2F0KGRhdGEucHJvZmVzb3IuaWQpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9uMTArKzsKCiAgICAgICAgICAgICAgICBpZiAoX24xMCA+PSBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICBkYXRhUmVmLnByb2ZfZm90by5ub21icmUgPSBzdGF0ZS5kYkltZ1swXS5ub21icmU7CiAgICAgICAgICAgICAgICAgIGRhdGFSZWYucHJvZl9mb3RvLnVybCA9IHN0YXRlLmRiSW1nWzBdLnVybDsKICAgICAgICAgICAgICAgICAgZGF0YVJlZi5wcm9mX2N2Lm5vbWJyZSA9IHN0YXRlLmRiSW1nWzFdLm5vbWJyZTsKICAgICAgICAgICAgICAgICAgZGF0YVJlZi5wcm9mX2N2LnVybCA9IHN0YXRlLmRiSW1nWzFdLnVybDsKCiAgICAgICAgICAgICAgICAgIGlmIChfbjEwID49IE9iamVjdC52YWx1ZXMoZGF0YS5hcmNoaXZvcykubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIF9kYlJlZjEyID0gZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoIiIuY29uY2F0KGRhdGEudGFyZ2V0KSk7CgogICAgICAgICAgICAgICAgICAgIF9kYlJlZjEyLmNoaWxkKCIiLmNvbmNhdChkYXRhLnByb2Zlc29yLmlkKSkuc2V0KGRhdGFSZWYpOwoKICAgICAgICAgICAgICAgICAgICBzdGF0ZS5jcmVhckRCVmFscyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIHZhciBfc3VjY2VzczE5ID0gewogICAgICAgICAgICAgICAgICAgICAgMDogJ3N1Y2Nlc3NVcGxvYWQnLAogICAgICAgICAgICAgICAgICAgICAgMTogJ1NlIGhhIGNyZWFkbyBleGl0b3NhbWVudGUnCiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgX3RoaXM3LmNvbW1pdCgnc3VjY2Vzc0FkdmlzZScsIF9zdWNjZXNzMTkpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgX2o2Kys7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciBfZGF0YVJlZjEwID0gewogICAgICAgICAgICBjb21pX2lkOiBkYXRhLnByb2Zlc29yLmNvaWQsCiAgICAgICAgICAgIHByb2ZfY3Y6IFtdLAogICAgICAgICAgICBwcm9mX2NpOiBkYXRhLnByb2Zlc29yLmNpLAogICAgICAgICAgICBwcm9mX2NvcnJlbzogZGF0YS5wcm9mZXNvci5jb3JyZW8sCiAgICAgICAgICAgIHByb2ZfZmVjaGFkZW5hY2ltaWVudG86IGRhdGEucHJvZmVzb3IubmFjaW1pZW50bywKICAgICAgICAgICAgcHJvZl9mb3RvOiBbXSwKICAgICAgICAgICAgcHJvZl9pZDogZGF0YS5wcm9mZXNvci5pZCwKICAgICAgICAgICAgcHJvZl9ub21icmU6IGRhdGEucHJvZmVzb3Iubm9tYnJlLAogICAgICAgICAgICBwcm9mX3RlbGVmb25vczogZGF0YS5wcm9mZXNvci50ZWxlZm9ub3MKICAgICAgICAgIH07CiAgICAgICAgICBfbjEwKys7CgogICAgICAgICAgaWYgKF9uMTAgPj0gT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5sZW5ndGgpIHsKICAgICAgICAgICAgdmFyIF9kYlJlZjEzID0gZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoIiIuY29uY2F0KGRhdGEudGFyZ2V0KSk7CgogICAgICAgICAgICBfZGJSZWYxMy5jaGlsZCgiIi5jb25jYXQoZGF0YS5wcm9mZXNvci5pZCkpLnNldChfZGF0YVJlZjEwKTsKCiAgICAgICAgICAgIHN0YXRlLmNyZWFyREJWYWxzID0gZmFsc2U7CiAgICAgICAgICAgIHZhciBfc3VjY2VzczIwID0gewogICAgICAgICAgICAgIDA6ICdzdWNjZXNzVXBsb2FkJywKICAgICAgICAgICAgICAxOiAnU2UgaGEgY3JlYWRvIGV4aXRvc2FtZW50ZScKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdGhpcy5jb21taXQoJ3N1Y2Nlc3NBZHZpc2UnLCBfc3VjY2VzczIwKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoZGF0YS50YXJnZXQgPT09ICdDb21pdGVzJykgewogICAgICAgIHN0YXRlLmRiSW1nID0gW107CgogICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgT2JqZWN0LnZhbHVlcyhkYXRhLmNvbWl0ZS5hcmNoaXZvcykubGVuZ3RoOyBrKyspIHsKICAgICAgICAgIGlmIChPYmplY3QudmFsdWVzKGRhdGEuY29taXRlLmFyY2hpdm9zKVtrXS5pZCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIHN0YXRlLmRiSW1nW09iamVjdC52YWx1ZXMoZGF0YS5jb21pdGUuYXJjaGl2b3MpW2tdLmlkXSA9IE9iamVjdC52YWx1ZXMoZGF0YS5jb21pdGUuYXJjaGl2b3MpW2tdOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc3RhdGUuZGJJbWdba10gPSAnJzsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHZhciBfc3RvcmFnZVJlZjEyID0gW107CiAgICAgICAgdmFyIF9wZXJjZW50YWdlMTEgPSBbXTsKICAgICAgICB2YXIgX29yZGVyMTEgPSBbXTsKICAgICAgICB2YXIgX3Rhc2sxMSA9IHt9OwogICAgICAgIHZhciBfaTE3ID0gMDsKICAgICAgICB2YXIgX24xMSA9IDA7CiAgICAgICAgdmFyIF9qNyA9IDA7CiAgICAgICAgT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICBfc3RvcmFnZVJlZjEyID0gZmlyZWJhc2Uuc3RvcmFnZSgpLnJlZigiLyIuY29uY2F0KGRhdGEudGFyZ2V0LCAiLyIpLmNvbmNhdChkYXRhLmNvbWl0ZS5pZCwgIi8iKS5jb25jYXQoT2JqZWN0LnZhbHVlcyhkYXRhLmNvbWl0ZS5hcmNoaXZvcylbZWxlbWVudC5pZF0ubm9tYnJlKSk7CiAgICAgICAgICBfdGFzazExWyIiLmNvbmNhdChlbGVtZW50LmlkKV0gPSBfc3RvcmFnZVJlZjEyLnB1dChlbGVtZW50KTsKICAgICAgICAgIF9pMTcrKzsKICAgICAgICB9KTsKCiAgICAgICAgaWYgKE9iamVjdC52YWx1ZXMoX3Rhc2sxMSkubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgICBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgICAgX3Rhc2sxMVsiIi5jb25jYXQoZWxlbWVudC5pZCldLm9uKCdzdGF0ZV9jaGFuZ2VkJywgZnVuY3Rpb24gKHNuYXBzaG90KSB7CiAgICAgICAgICAgICAgX3BlcmNlbnRhZ2UxMVtzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkXSA9IHNuYXBzaG90LmJ5dGVzVHJhbnNmZXJyZWQgLyBzbmFwc2hvdC50b3RhbEJ5dGVzICogMTAwOwogICAgICAgICAgICAgIHN0YXRlLmRiSW1nW3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdLnVwbG9hZFBlcmNlbnRhZ2UgPSBfcGVyY2VudGFnZTExW3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdOwoKICAgICAgICAgICAgICBpZiAoc3RhdGUuZGJJbWdbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF0udXBsb2FkUGVyY2VudGFnZSA9PT0gMTAwICYmIF9vcmRlcjExLmxlbmd0aCA8IE9iamVjdC52YWx1ZXMoZGF0YS5hcmNoaXZvcykubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICBfb3JkZXIxMS5wdXNoKHNuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWQpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IubWVzc2FnZSk7CiAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICB2YXIgZGF0YVJlZiA9IHsKICAgICAgICAgICAgICAgIGNvbWlfaWQ6IGRhdGEuY29taXRlLmlkLAogICAgICAgICAgICAgICAgY29taV9hY3Rpdm86IGRhdGEuY29taXRlLmFjdGl2bywKICAgICAgICAgICAgICAgIGNvbWlfY29taVBhZ2U6IGRhdGEuY29taXRlLmNvbWlwYWdlLAogICAgICAgICAgICAgICAgY29taV9jb3JyZW86IGRhdGEuY29taXRlLmNvcnJlbywKICAgICAgICAgICAgICAgIGNvbWlfY29zdG9zOiBkYXRhLmNvbWl0ZS5jb3N0b3MsCiAgICAgICAgICAgICAgICBjb21pX2Rlc2NyaXBjaW9uOiBkYXRhLmNvbWl0ZS5kZXNjcmlwY2lvbiwKICAgICAgICAgICAgICAgIGNvbWlfZmVjaGF2aWdlbmNpYTogZGF0YS5jb21pdGUuZmVjaGF2LAogICAgICAgICAgICAgICAgY29taV9mb3RvOiBbXSwKICAgICAgICAgICAgICAgIGNvbWlfaW50OiBkYXRhLmNvbWl0ZS5pbnRocGFnZSwKICAgICAgICAgICAgICAgIGNvbWlfaW50ZWdyYW50ZXM6IGRhdGEuY29taXRlLmludGVncmFudGVzLAogICAgICAgICAgICAgICAgY29taV9ub21icmU6IGRhdGEuY29taXRlLm5vbWJyZSwKICAgICAgICAgICAgICAgIGNvbWlfbm9ybWF0aXZhOiBbXSwKICAgICAgICAgICAgICAgIGNvbWlfcmVnbGFtZW50bzogW10KICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIHZhciBzdG9yYWdlUmVmID0gZmlyZWJhc2Uuc3RvcmFnZSgpLnJlZigiLyIuY29uY2F0KGRhdGEudGFyZ2V0LCAiLyIpLmNvbmNhdChkYXRhLmNvbWl0ZS5pZCwgIi8iKS5jb25jYXQoT2JqZWN0LnZhbHVlcyhkYXRhLmNvbWl0ZS5hcmNoaXZvcylbIiIuY29uY2F0KF9vcmRlcjExW19qN10pXS5ub21icmUpKTsKICAgICAgICAgICAgICBfOwogICAgICAgICAgICAgIHN0b3JhZ2VSZWYuZ2V0RG93bmxvYWRVUkwoKS50aGVuKGZ1bmN0aW9uICh1cmwpIHsKICAgICAgICAgICAgICAgIHZhciB2YWwgPSBfb3JkZXIxMVtfbjExXTsKCiAgICAgICAgICAgICAgICBmb3IgKHZhciBtID0gMDsgbSA8IE9iamVjdC52YWx1ZXMoZGF0YS5jb21pdGUuYXJjaGl2b3MpLmxlbmd0aDsgbSsrKSB7CiAgICAgICAgICAgICAgICAgIGlmIChPYmplY3QudmFsdWVzKGRhdGEuY29taXRlLmFyY2hpdm9zKVttXS5pZCAhPT0gdW5kZWZpbmVkICYmIHZhbCA9PT0gT2JqZWN0LnZhbHVlcyhkYXRhLmNvbWl0ZS5hcmNoaXZvcylbbV0uaWQpIHsKICAgICAgICAgICAgICAgICAgICBzdGF0ZS5kYkltZ1t2YWxdLnVybCA9IHVybDsKICAgICAgICAgICAgICAgICAgICBzdGF0ZS5kYkltZ1t2YWxdLm5vbWJyZSA9IE9iamVjdC52YWx1ZXMoZGF0YS5jb21pdGUuYXJjaGl2b3MpW21dLm5vbWJyZTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9uMTErKzsKCiAgICAgICAgICAgICAgICBpZiAoX24xMSA+PSBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuZGJJbWdbMF0ubm9tYnJlICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgICBkYXRhUmVmLmNvbWlfZm90byA9IHsKICAgICAgICAgICAgICAgICAgICAgIG5vbWJyZTogc3RhdGUuZGJJbWdbMF0ubm9tYnJlLAogICAgICAgICAgICAgICAgICAgICAgdXJsOiBzdGF0ZS5kYkltZ1swXS51cmwKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGRhdGFSZWYuY29taV9mb3RvID0gJyc7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5kYkltZ1sxXS5ub21icmUgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgIGRhdGFSZWYuY29taV9yZWdsYW1lbnRvID0gewogICAgICAgICAgICAgICAgICAgICAgbm9tYnJlOiBzdGF0ZS5kYkltZ1sxXS5ub21icmUsCiAgICAgICAgICAgICAgICAgICAgICB1cmw6IHN0YXRlLmRiSW1nWzFdLnVybAogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZGF0YVJlZi5jb21pX3JlZ2xhbWVudG8gPSAnJzsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLmRiSW1nWzJdLm5vbWJyZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgICAgZGF0YVJlZi5jb21pX25vcm1hdGl2YSA9IHsKICAgICAgICAgICAgICAgICAgICAgIG5vbWJyZTogc3RhdGUuZGJJbWdbMl0ubm9tYnJlLAogICAgICAgICAgICAgICAgICAgICAgdXJsOiBzdGF0ZS5kYkltZ1syXS51cmwKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGRhdGFSZWYuY29taV9ub3JtYXRpdmEgPSAnJzsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgaWYgKF9uMTEgPj0gT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgX2RiUmVmMTQgPSBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZigiIi5jb25jYXQoZGF0YS50YXJnZXQsICIvIikuY29uY2F0KGRhdGEuY29taXRlLmlkKSk7CgogICAgICAgICAgICAgICAgICAgIF9kYlJlZjE0LnNldChkYXRhUmVmKTsKCiAgICAgICAgICAgICAgICAgICAgc3RhdGUuY3JlYXJEQlZhbHMgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB2YXIgX3N1Y2Nlc3MyMSA9IHsKICAgICAgICAgICAgICAgICAgICAgIDA6ICdzdWNjZXNzVXBsb2FkJywKICAgICAgICAgICAgICAgICAgICAgIDE6ICdTZSBoYSBjcmVhZG8gZXhpdG9zYW1lbnRlJwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIF90aGlzNy5jb21taXQoJ3N1Y2Nlc3NBZHZpc2UnLCBfc3VjY2VzczIxKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIF9qNysrOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YXIgX2RhdGFSZWYxMSA9IHsKICAgICAgICAgICAgY29taV9pZDogZGF0YS5jb21pdGUuaWQsCiAgICAgICAgICAgIGNvbWlfYWN0aXZvOiBkYXRhLmNvbWl0ZS5hY3Rpdm8sCiAgICAgICAgICAgIGNvbWlfY29taVBhZ2U6IGRhdGEuY29taXRlLmNvbWlwYWdlLAogICAgICAgICAgICBjb21pX2NvcnJlbzogZGF0YS5jb21pdGUuY29ycmVvLAogICAgICAgICAgICBjb21pX2Nvc3RvczogZGF0YS5jb21pdGUuY29zdG9zLAogICAgICAgICAgICBjb21pX2Rlc2NyaXBjaW9uOiBkYXRhLmNvbWl0ZS5kZXNjcmlwY2lvbiwKICAgICAgICAgICAgY29taV9mZWNoYXZpZ2VuY2lhOiBkYXRhLmNvbWl0ZS5mZWNoYXYsCiAgICAgICAgICAgIGNvbWlfZm90bzogZGF0YS5jb21pdGUuYXJjaGl2b3MuaW1hZ2VuLAogICAgICAgICAgICBjb21pX2ludDogZGF0YS5jb21pdGUuaW50aHBhZ2UsCiAgICAgICAgICAgIGNvbWlfaW50ZWdyYW50ZXM6IGRhdGEuY29taXRlLmludGVncmFudGVzLAogICAgICAgICAgICBjb21pX25vbWJyZTogZGF0YS5jb21pdGUubm9tYnJlLAogICAgICAgICAgICBjb21pX25vcm1hdGl2YTogZGF0YS5jb21pdGUuYXJjaGl2b3Mubm9ybWF0aXZhLAogICAgICAgICAgICBjb21pX3JlZ2xhbWVudG86IGRhdGEuY29taXRlLmFyY2hpdm9zLnJlZ2xhbWVudG8KICAgICAgICAgIH07CiAgICAgICAgICBfbjExKys7CgogICAgICAgICAgaWYgKF9uMTEgPj0gT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5sZW5ndGgpIHsKICAgICAgICAgICAgdmFyIF9kYlJlZjE1ID0gZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoIiIuY29uY2F0KGRhdGEudGFyZ2V0LCAiLyIpLmNvbmNhdChkYXRhLmNvbWl0ZS5pZCkpOwoKICAgICAgICAgICAgX2RiUmVmMTUuc2V0KF9kYXRhUmVmMTEpOwoKICAgICAgICAgICAgc3RhdGUuY3JlYXJEQlZhbHMgPSBmYWxzZTsKICAgICAgICAgICAgdmFyIF9zdWNjZXNzMjIgPSB7CiAgICAgICAgICAgICAgMDogJ3N1Y2Nlc3NVcGxvYWQnLAogICAgICAgICAgICAgIDE6ICdTZSBoYSBjcmVhZG8gZXhpdG9zYW1lbnRlJwogICAgICAgICAgICB9OwogICAgICAgICAgICB0aGlzLmNvbW1pdCgnc3VjY2Vzc0FkdmlzZScsIF9zdWNjZXNzMjIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChkYXRhLnRhcmdldCA9PT0gJ0FudW5jaWFudGVzJykgewogICAgICAgIHN0YXRlLmRiSW1nID0gW107CgogICAgICAgIGZvciAodmFyIF9rNCA9IDA7IF9rNCA8IE9iamVjdC52YWx1ZXMoZGF0YS5hbnVuY2lhbnRlLmFyY2hpdm9zKS5sZW5ndGg7IF9rNCsrKSB7CiAgICAgICAgICBpZiAoT2JqZWN0LnZhbHVlcyhkYXRhLmFudW5jaWFudGUuYXJjaGl2b3MpW19rNF0uaWQgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICBzdGF0ZS5kYkltZ1tPYmplY3QudmFsdWVzKGRhdGEuYW51bmNpYW50ZS5hcmNoaXZvcylbX2s0XS5pZF0gPSBPYmplY3QudmFsdWVzKGRhdGEuYW51bmNpYW50ZS5hcmNoaXZvcylbX2s0XTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHN0YXRlLmRiSW1nW19rNF0gPSAnJzsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHZhciBfc3RvcmFnZVJlZjEzID0gW107CiAgICAgICAgdmFyIF9wZXJjZW50YWdlMTIgPSBbXTsKICAgICAgICB2YXIgX29yZGVyMTIgPSBbXTsKICAgICAgICB2YXIgX3Rhc2sxMiA9IHt9OwogICAgICAgIHZhciBfaTE4ID0gMDsKICAgICAgICB2YXIgX24xMiA9IDA7CiAgICAgICAgdmFyIF9qOCA9IDA7CiAgICAgICAgT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICBfc3RvcmFnZVJlZjEzID0gZmlyZWJhc2Uuc3RvcmFnZSgpLnJlZigiLyIuY29uY2F0KGRhdGEudGFyZ2V0LCAiLyIpLmNvbmNhdChkYXRhLmFudW5jaWFudGUuaWQsICIvIikuY29uY2F0KE9iamVjdC52YWx1ZXMoZGF0YS5hbnVuY2lhbnRlLmFyY2hpdm9zKVtlbGVtZW50LmlkXS5ub21icmUpKTsKICAgICAgICAgIF90YXNrMTJbIiIuY29uY2F0KGVsZW1lbnQuaWQpXSA9IF9zdG9yYWdlUmVmMTMucHV0KGVsZW1lbnQpOwogICAgICAgICAgX2kxOCsrOwogICAgICAgIH0pOwoKICAgICAgICBpZiAoT2JqZWN0LnZhbHVlcyhfdGFzazEyKS5sZW5ndGggIT09IDApIHsKICAgICAgICAgIE9iamVjdC52YWx1ZXMoZGF0YS5hcmNoaXZvcykuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgICBfdGFzazEyWyIiLmNvbmNhdChlbGVtZW50LmlkKV0ub24oJ3N0YXRlX2NoYW5nZWQnLCBmdW5jdGlvbiAoc25hcHNob3QpIHsKICAgICAgICAgICAgICBfcGVyY2VudGFnZTEyW3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdID0gc25hcHNob3QuYnl0ZXNUcmFuc2ZlcnJlZCAvIHNuYXBzaG90LnRvdGFsQnl0ZXMgKiAxMDA7CiAgICAgICAgICAgICAgc3RhdGUuZGJJbWdbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF0udXBsb2FkUGVyY2VudGFnZSA9IF9wZXJjZW50YWdlMTJbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF07CgogICAgICAgICAgICAgIGlmIChzdGF0ZS5kYkltZ1tzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkXS51cGxvYWRQZXJjZW50YWdlID09PSAxMDAgJiYgX29yZGVyMTIubGVuZ3RoIDwgT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIF9vcmRlcjEyLnB1c2goc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5tZXNzYWdlKTsKICAgICAgICAgICAgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHZhciBkYXRhUmVmID0gewogICAgICAgICAgICAgICAgYW51bl9pZDogZGF0YS5hbnVuY2lhbnRlLmlkLAogICAgICAgICAgICAgICAgYW51bl91cmw6IGRhdGEuYW51bmNpYW50ZS5hbnVudXJsLAogICAgICAgICAgICAgICAgYW51bl9hY3Rpdm86IGRhdGEuYW51bmNpYW50ZS5hY3Rpdm8sCiAgICAgICAgICAgICAgICBhbnVuX25vbWJyZTogZGF0YS5hbnVuY2lhbnRlLm5vbWJyZSwKICAgICAgICAgICAgICAgIGFudW5fbm9tYnJlY29udGFjdG86IGRhdGEuYW51bmNpYW50ZS5ub21icmVjb24sCiAgICAgICAgICAgICAgICBhbnVuX2NvcnJlbzogZGF0YS5hbnVuY2lhbnRlLmNvcnJlbywKICAgICAgICAgICAgICAgIGFudW5fZXNzb2NpbzogewogICAgICAgICAgICAgICAgICBhbnVuX2Vzc29jaW9fc29jaW86IGRhdGEuYW51bmNpYW50ZS5lc3NvY2lvLnNvY2lvLAogICAgICAgICAgICAgICAgICBhbnVuX2Vzc29jaW9fYWNjaW9uOiBkYXRhLmFudW5jaWFudGUuZXNzb2Npby5hY2Npb24KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBhbnVuX2ZlY2hhdmlnZW5jaWE6IGRhdGEuYW51bmNpYW50ZS5mZWNoYXYsCiAgICAgICAgICAgICAgICBhbnVuX2ZvdG86IFtdLAogICAgICAgICAgICAgICAgYW51bl90ZWxlZm9ub3M6IGRhdGEuYW51bmNpYW50ZS50ZWxlZm9ub3MKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIHZhciBzdG9yYWdlUmVmID0gZmlyZWJhc2Uuc3RvcmFnZSgpLnJlZigiLyIuY29uY2F0KGRhdGEudGFyZ2V0LCAiLyIpLmNvbmNhdChkYXRhLmFudW5jaWFudGUuaWQsICIvIikuY29uY2F0KE9iamVjdC52YWx1ZXMoZGF0YS5hbnVuY2lhbnRlLmFyY2hpdm9zKVsiIi5jb25jYXQoX29yZGVyMTJbX2o4XSldLm5vbWJyZSkpOwogICAgICAgICAgICAgIF87CiAgICAgICAgICAgICAgc3RvcmFnZVJlZi5nZXREb3dubG9hZFVSTCgpLnRoZW4oZnVuY3Rpb24gKHVybCkgewogICAgICAgICAgICAgICAgdmFyIHZhbCA9IF9vcmRlcjEyW19uMTJdOwoKICAgICAgICAgICAgICAgIGZvciAodmFyIG0gPSAwOyBtIDwgT2JqZWN0LnZhbHVlcyhkYXRhLmFudW5jaWFudGUuYXJjaGl2b3MpLmxlbmd0aDsgbSsrKSB7CiAgICAgICAgICAgICAgICAgIGlmIChPYmplY3QudmFsdWVzKGRhdGEuYW51bmNpYW50ZS5hcmNoaXZvcylbbV0uaWQgIT09IHVuZGVmaW5lZCAmJiB2YWwgPT09IE9iamVjdC52YWx1ZXMoZGF0YS5hbnVuY2lhbnRlLmFyY2hpdm9zKVttXS5pZCkgewogICAgICAgICAgICAgICAgICAgIHN0YXRlLmRiSW1nW3ZhbF0udXJsID0gdXJsOwogICAgICAgICAgICAgICAgICAgIHN0YXRlLmRiSW1nW3ZhbF0ubm9tYnJlID0gT2JqZWN0LnZhbHVlcyhkYXRhLmFudW5jaWFudGUuYXJjaGl2b3MpW21dLm5vbWJyZTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9uMTIrKzsKCiAgICAgICAgICAgICAgICBpZiAoX24xMiA+PSBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuZGJJbWdbMF0ubm9tYnJlICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgICBkYXRhUmVmLmFudW5fZm90byA9IHsKICAgICAgICAgICAgICAgICAgICAgIG5vbWJyZTogc3RhdGUuZGJJbWdbMF0ubm9tYnJlLAogICAgICAgICAgICAgICAgICAgICAgdXJsOiBzdGF0ZS5kYkltZ1swXS51cmwKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGRhdGFSZWYuYW51bl9mb3RvID0gJyc7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIGlmIChfbjEyID49IE9iamVjdC52YWx1ZXMoZGF0YS5hcmNoaXZvcykubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIF9kYlJlZjE2ID0gZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoIiIuY29uY2F0KGRhdGEudGFyZ2V0LCAiLyIpLmNvbmNhdChkYXRhLmFudW5jaWFudGUuaWQpKTsKCiAgICAgICAgICAgICAgICAgICAgX2RiUmVmMTYuc2V0KGRhdGFSZWYpOwoKICAgICAgICAgICAgICAgICAgICBzdGF0ZS5jcmVhckRCVmFscyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIHZhciBfc3VjY2VzczIzID0gewogICAgICAgICAgICAgICAgICAgICAgMDogJ3N1Y2Nlc3NVcGxvYWQnLAogICAgICAgICAgICAgICAgICAgICAgMTogJ1NlIGhhIGNyZWFkbyBleGl0b3NhbWVudGUnCiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgX3RoaXM3LmNvbW1pdCgnc3VjY2Vzc0FkdmlzZScsIF9zdWNjZXNzMjMpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgX2o4Kys7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciBfZGF0YVJlZjEyID0gewogICAgICAgICAgICBhbnVuX2lkOiBkYXRhLmFudW5jaWFudGUuaWQsCiAgICAgICAgICAgIGFudW5fdXJsOiBkYXRhLmFudW5jaWFudGUuYW51bnVybCwKICAgICAgICAgICAgYW51bl9hY3Rpdm86IGRhdGEuYW51bmNpYW50ZS5hY3Rpdm8sCiAgICAgICAgICAgIGFudW5fbm9tYnJlOiBkYXRhLmFudW5jaWFudGUubm9tYnJlLAogICAgICAgICAgICBhbnVuX25vbWJyZWNvbnRhY3RvOiBkYXRhLmFudW5jaWFudGUubm9tYnJlY29uLAogICAgICAgICAgICBhbnVuX2NvcnJlbzogZGF0YS5hbnVuY2lhbnRlLmNvcnJlbywKICAgICAgICAgICAgYW51bl9lc3NvY2lvOiB7CiAgICAgICAgICAgICAgYW51bl9lc3NvY2lvX3NvY2lvOiBkYXRhLmFudW5jaWFudGUuZXNzb2Npby5zb2NpbywKICAgICAgICAgICAgICBhbnVuX2Vzc29jaW9fYWNjaW9uOiBkYXRhLmFudW5jaWFudGUuZXNzb2Npby5hY2Npb24KICAgICAgICAgICAgfSwKICAgICAgICAgICAgYW51bl9mZWNoYXZpZ2VuY2lhOiBkYXRhLmFudW5jaWFudGUuZmVjaGF2LAogICAgICAgICAgICBhbnVuX2ZvdG86IGRhdGEuYW51bmNpYW50ZS5hcmNoaXZvcy5pbWFnZW4sCiAgICAgICAgICAgIGFudW5fdGVsZWZvbm9zOiBkYXRhLmFudW5jaWFudGUudGVsZWZvbm9zCiAgICAgICAgICB9OwogICAgICAgICAgX24xMisrOwoKICAgICAgICAgIGlmIChfbjEyID49IE9iamVjdC52YWx1ZXMoZGF0YS5hcmNoaXZvcykubGVuZ3RoKSB7CiAgICAgICAgICAgIHZhciBfZGJSZWYxNyA9IGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKCIiLmNvbmNhdChkYXRhLnRhcmdldCwgIi8iKS5jb25jYXQoZGF0YS5hbnVuY2lhbnRlLmlkKSk7CgogICAgICAgICAgICBfZGJSZWYxNy5zZXQoX2RhdGFSZWYxMik7CgogICAgICAgICAgICBzdGF0ZS5jcmVhckRCVmFscyA9IGZhbHNlOwogICAgICAgICAgICB2YXIgX3N1Y2Nlc3MyNCA9IHsKICAgICAgICAgICAgICAwOiAnc3VjY2Vzc1VwbG9hZCcsCiAgICAgICAgICAgICAgMTogJ1NlIGhhIGNyZWFkbyBleGl0b3NhbWVudGUnCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHRoaXMuY29tbWl0KCdzdWNjZXNzQWR2aXNlJywgX3N1Y2Nlc3MyNCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKGRhdGEudGFyZ2V0ID09PSAnQmFubmVycycpIHsKICAgICAgICBzdGF0ZS5kYkltZyA9IFtdOwoKICAgICAgICBmb3IgKHZhciBfazUgPSAwOyBfazUgPCBPYmplY3QudmFsdWVzKGRhdGEuYmFubmVyLmFyY2hpdm9zKS5sZW5ndGg7IF9rNSsrKSB7CiAgICAgICAgICBpZiAoT2JqZWN0LnZhbHVlcyhkYXRhLmJhbm5lci5hcmNoaXZvcylbX2s1XS5pZCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIHN0YXRlLmRiSW1nW09iamVjdC52YWx1ZXMoZGF0YS5iYW5uZXIuYXJjaGl2b3MpW19rNV0uaWRdID0gT2JqZWN0LnZhbHVlcyhkYXRhLmJhbm5lci5hcmNoaXZvcylbX2s1XTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHN0YXRlLmRiSW1nW19rNV0gPSAnJzsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHZhciBfc3RvcmFnZVJlZjE0ID0gW107CiAgICAgICAgdmFyIF9wZXJjZW50YWdlMTMgPSBbXTsKICAgICAgICB2YXIgX29yZGVyMTMgPSBbXTsKICAgICAgICB2YXIgX3Rhc2sxMyA9IHt9OwogICAgICAgIHZhciBfaTE5ID0gMDsKICAgICAgICB2YXIgX24xMyA9IDA7CiAgICAgICAgdmFyIF9qOSA9IDA7CiAgICAgICAgT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICBfc3RvcmFnZVJlZjE0ID0gZmlyZWJhc2Uuc3RvcmFnZSgpLnJlZigiLyIuY29uY2F0KGRhdGEudGFyZ2V0LCAiLyIpLmNvbmNhdChkYXRhLmJhbm5lci5pZCwgIi8iKS5jb25jYXQoZGF0YS5iYW5uZXIuYXJjaGl2b3NbIiIuY29uY2F0KGRhdGEubmFtZV9hcmNoaXZvcykuY29uY2F0KGVsZW1lbnQuaWQpXS5ub21icmUpKTsKICAgICAgICAgIF90YXNrMTNbIiIuY29uY2F0KGVsZW1lbnQuaWQpXSA9IF9zdG9yYWdlUmVmMTQucHV0KGVsZW1lbnQpOwogICAgICAgICAgX2kxOSsrOwogICAgICAgIH0pOwoKICAgICAgICBpZiAoT2JqZWN0LnZhbHVlcyhfdGFzazEzKS5sZW5ndGggIT09IDApIHsKICAgICAgICAgIE9iamVjdC52YWx1ZXMoZGF0YS5hcmNoaXZvcykuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgICBfdGFzazEzWyIiLmNvbmNhdChlbGVtZW50LmlkKV0ub24oJ3N0YXRlX2NoYW5nZWQnLCBmdW5jdGlvbiAoc25hcHNob3QpIHsKICAgICAgICAgICAgICBfcGVyY2VudGFnZTEzW3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdID0gc25hcHNob3QuYnl0ZXNUcmFuc2ZlcnJlZCAvIHNuYXBzaG90LnRvdGFsQnl0ZXMgKiAxMDA7CiAgICAgICAgICAgICAgc3RhdGUuZGJJbWdbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF0udXBsb2FkUGVyY2VudGFnZSA9IF9wZXJjZW50YWdlMTNbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF07CgogICAgICAgICAgICAgIGlmIChzdGF0ZS5kYkltZ1tzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkXS51cGxvYWRQZXJjZW50YWdlID09PSAxMDAgJiYgX29yZGVyMTMubGVuZ3RoIDwgT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIF9vcmRlcjEzLnB1c2goc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5tZXNzYWdlKTsKICAgICAgICAgICAgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHZhciBkYXRhUmVmID0gewogICAgICAgICAgICAgICAgYmFubl9pZDogZGF0YS5iYW5uZXIuaWQsCiAgICAgICAgICAgICAgICBiYW5uX2FjdGl2bzogZGF0YS5iYW5uZXIuYWN0aXZvLAogICAgICAgICAgICAgICAgYmFubl9iYW5uZXJpZDogZGF0YS5iYW5uZXIuYmFubmVyaWQsCiAgICAgICAgICAgICAgICBiYW5uX2ZlY2hhZWRpY2lvbjogZGF0YS5iYW5uZXIuZmVjaGFlZCwKICAgICAgICAgICAgICAgIGJhbm5fc2VjY2lvbjogZGF0YS5iYW5uZXIuc2VjY2lvbiwKICAgICAgICAgICAgICAgIGJhbm5fc2xpZGVzOiBbXQogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgdmFyIHN0b3JhZ2VSZWYgPSBmaXJlYmFzZS5zdG9yYWdlKCkucmVmKCIvIi5jb25jYXQoZGF0YS50YXJnZXQsICIvIikuY29uY2F0KGRhdGEuYmFubmVyLmlkLCAiLyIpLmNvbmNhdChkYXRhLmJhbm5lci5hcmNoaXZvc1siIi5jb25jYXQoZGF0YS5uYW1lX2FyY2hpdm9zKS5jb25jYXQoZWxlbWVudC5pZCldLm5vbWJyZSkpOwogICAgICAgICAgICAgIHN0b3JhZ2VSZWYuZ2V0RG93bmxvYWRVUkwoKS50aGVuKGZ1bmN0aW9uICh1cmwpIHsKICAgICAgICAgICAgICAgIHZhciB2YWwgPSBfb3JkZXIxM1tfbjEzXTsKCiAgICAgICAgICAgICAgICBmb3IgKHZhciBtID0gMDsgbSA8IE9iamVjdC52YWx1ZXMoZGF0YS5iYW5uZXIuYXJjaGl2b3MpLmxlbmd0aDsgbSsrKSB7CiAgICAgICAgICAgICAgICAgIGlmIChPYmplY3QudmFsdWVzKGRhdGEuYmFubmVyLmFyY2hpdm9zKVttXS5pZCAhPT0gdW5kZWZpbmVkICYmIHZhbCA9PT0gT2JqZWN0LnZhbHVlcyhkYXRhLmJhbm5lci5hcmNoaXZvcylbbV0uaWQpIHsKICAgICAgICAgICAgICAgICAgICBzdGF0ZS5kYkltZ1t2YWxdLnVybCA9IHVybDsKICAgICAgICAgICAgICAgICAgICBzdGF0ZS5kYkltZ1t2YWxdLm5vbWJyZSA9IE9iamVjdC52YWx1ZXMoZGF0YS5iYW5uZXIuYXJjaGl2b3MpW21dLm5vbWJyZTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9uMTMrKzsKCiAgICAgICAgICAgICAgICBpZiAoX24xMyA+PSBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICBmb3IgKHZhciBfaTIwID0gMTsgX2kyMCA8PSBPYmplY3QudmFsdWVzKGRhdGEuYmFubmVyLmFyY2hpdm9zKS5sZW5ndGg7IF9pMjArKykgewogICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmJhbm5lci5hcmNoaXZvc1sic2xpZGVzIi5jb25jYXQoX2kyMCldLmlkICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgICAgIGRhdGFSZWYuYmFubl9zbGlkZXNbInNsaWRlcyIuY29uY2F0KF9pMjApXSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgbm9tYnJlOiBzdGF0ZS5kYkltZ1tfaTIwXS5ub21icmUsCiAgICAgICAgICAgICAgICAgICAgICAgIHVybDogc3RhdGUuZGJJbWdbX2kyMF0udXJsLAogICAgICAgICAgICAgICAgICAgICAgICBpbmZvOiBkYXRhLmJhbm5lci5hcmNoaXZvc1sic2xpZGVzIi5jb25jYXQoX2kyMCldLmluZm8KICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgIGRhdGFSZWYuYmFubl9zbGlkZXNbInNsaWRlcyIuY29uY2F0KF9pMjApXSA9IGRhdGEuYmFubmVyLmFyY2hpdm9zWyJzbGlkZXMiLmNvbmNhdChfaTIwKV07CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBpZiAoX24xMyA+PSBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIHZhciBfZGJSZWYxOCA9IGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKCIiLmNvbmNhdChkYXRhLnRhcmdldCwgIi8iKS5jb25jYXQoZGF0YS5iYW5uZXIuaWQpKTsKCiAgICAgICAgICAgICAgICAgICAgX2RiUmVmMTguc2V0KGRhdGFSZWYpOwoKICAgICAgICAgICAgICAgICAgICBzdGF0ZS5jcmVhckRCVmFscyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIHZhciBfc3VjY2VzczI1ID0gewogICAgICAgICAgICAgICAgICAgICAgMDogJ3N1Y2Nlc3NVcGxvYWQnLAogICAgICAgICAgICAgICAgICAgICAgMTogJ1NlIGhhIGNyZWFkbyBleGl0b3NhbWVudGUnCiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgX3RoaXM3LmNvbW1pdCgnc3VjY2Vzc0FkdmlzZScsIF9zdWNjZXNzMjUpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgX2o5Kys7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciBfZGF0YVJlZjEzID0gewogICAgICAgICAgICBiYW5uX2lkOiBkYXRhLmJhbm5lci5pZCwKICAgICAgICAgICAgYmFubl9hY3Rpdm86IGRhdGEuYmFubmVyLmFjdGl2bywKICAgICAgICAgICAgYmFubl9iYW5uZXJpZDogZGF0YS5iYW5uZXIuYmFubmVyaWQsCiAgICAgICAgICAgIGJhbm5fZmVjaGFlZGljaW9uOiBkYXRhLmJhbm5lci5mZWNoYWVkLAogICAgICAgICAgICBiYW5uX3NlY2Npb246IGRhdGEuYmFubmVyLnNlY2Npb24sCiAgICAgICAgICAgIGJhbm5fc2xpZGVzOiBkYXRhLmJhbm5lci5hcmNoaXZvcwogICAgICAgICAgfTsKICAgICAgICAgIF9uMTMrKzsKCiAgICAgICAgICBpZiAoX24xMyA+PSBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmxlbmd0aCkgewogICAgICAgICAgICB2YXIgX2RiUmVmMTkgPSBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZigiIi5jb25jYXQoZGF0YS50YXJnZXQsICIvIikuY29uY2F0KGRhdGEuYmFubmVyLmlkKSk7CgogICAgICAgICAgICBfZGJSZWYxOS5zZXQoX2RhdGFSZWYxMyk7CgogICAgICAgICAgICBzdGF0ZS5jcmVhckRCVmFscyA9IGZhbHNlOwogICAgICAgICAgICB2YXIgX3N1Y2Nlc3MyNiA9IHsKICAgICAgICAgICAgICAwOiAnc3VjY2Vzc1VwbG9hZCcsCiAgICAgICAgICAgICAgMTogJ1NlIGhhIGNyZWFkbyBleGl0b3NhbWVudGUnCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHRoaXMuY29tbWl0KCdzdWNjZXNzQWR2aXNlJywgX3N1Y2Nlc3MyNik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKGRhdGEudGFyZ2V0ID09PSAnTm90aWNpYXMnKSB7CiAgICAgICAgc3RhdGUuZGJJbWcgPSBbXTsKCiAgICAgICAgZm9yICh2YXIgX2s2ID0gMDsgX2s2IDwgT2JqZWN0LnZhbHVlcyhkYXRhLm5vdGljaWEuYXJjaGl2b3MpLmxlbmd0aDsgX2s2KyspIHsKICAgICAgICAgIGlmIChPYmplY3QudmFsdWVzKGRhdGEubm90aWNpYS5hcmNoaXZvcylbX2s2XS5pZCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIHN0YXRlLmRiSW1nW09iamVjdC52YWx1ZXMoZGF0YS5ub3RpY2lhLmFyY2hpdm9zKVtfazZdLmlkXSA9IE9iamVjdC52YWx1ZXMoZGF0YS5ub3RpY2lhLmFyY2hpdm9zKVtfazZdOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc3RhdGUuZGJJbWdbX2s2XSA9ICcnOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgdmFyIF9zdG9yYWdlUmVmMTUgPSBbXTsKICAgICAgICB2YXIgX3BlcmNlbnRhZ2UxNCA9IFtdOwogICAgICAgIHZhciBfb3JkZXIxNCA9IFtdOwogICAgICAgIHZhciBfdGFzazE0ID0ge307CiAgICAgICAgdmFyIF9pMjEgPSAwOwogICAgICAgIHZhciBfbjE0ID0gMDsKICAgICAgICB2YXIgX2oxMCA9IDA7CiAgICAgICAgT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICBfc3RvcmFnZVJlZjE1ID0gZmlyZWJhc2Uuc3RvcmFnZSgpLnJlZigiLyIuY29uY2F0KGRhdGEudGFyZ2V0LCAiLyIpLmNvbmNhdChkYXRhLm5vdGljaWEuaWQsICIvIikuY29uY2F0KGRhdGEubm90aWNpYS5hcmNoaXZvc1siIi5jb25jYXQoZGF0YS5uYW1lX2FyY2hpdm9zKS5jb25jYXQoZWxlbWVudC5pZCldLm5vbWJyZSkpOwogICAgICAgICAgX3Rhc2sxNFsiIi5jb25jYXQoZWxlbWVudC5pZCldID0gX3N0b3JhZ2VSZWYxNS5wdXQoZWxlbWVudCk7CiAgICAgICAgICBfaTIxKys7CiAgICAgICAgfSk7CgogICAgICAgIGlmIChPYmplY3QudmFsdWVzKF90YXNrMTQpLmxlbmd0aCAhPT0gMCkgewogICAgICAgICAgT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICAgIF90YXNrMTRbIiIuY29uY2F0KGVsZW1lbnQuaWQpXS5vbignc3RhdGVfY2hhbmdlZCcsIGZ1bmN0aW9uIChzbmFwc2hvdCkgewogICAgICAgICAgICAgIF9wZXJjZW50YWdlMTRbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF0gPSBzbmFwc2hvdC5ieXRlc1RyYW5zZmVycmVkIC8gc25hcHNob3QudG90YWxCeXRlcyAqIDEwMDsKICAgICAgICAgICAgICBzdGF0ZS5kYkltZ1tzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkXS51cGxvYWRQZXJjZW50YWdlID0gX3BlcmNlbnRhZ2UxNFtzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkXTsKCiAgICAgICAgICAgICAgaWYgKHN0YXRlLmRiSW1nW3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdLnVwbG9hZFBlcmNlbnRhZ2UgPT09IDEwMCAmJiBfb3JkZXIxNC5sZW5ndGggPCBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgX29yZGVyMTQucHVzaChzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLm1lc3NhZ2UpOwogICAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgdmFyIGRhdGFSZWYgPSB7CiAgICAgICAgICAgICAgICBub3RpX2lkOiBkYXRhLm5vdGljaWEuaWQsCiAgICAgICAgICAgICAgICBub3RpX3RpdHVsbzogZGF0YS5ub3RpY2lhLnRpdHVsbywKICAgICAgICAgICAgICAgIG5vdGlfaW5mbzogZGF0YS5ub3RpY2lhLmluZm8sCiAgICAgICAgICAgICAgICBub3RpX2ZlY2hhOiBkYXRhLm5vdGljaWEuZmVjaGFlZCwKICAgICAgICAgICAgICAgIG5vdGlfcHJldjogZGF0YS5ub3RpY2lhLmluZm9jb3J0LAogICAgICAgICAgICAgICAgbm90aV9wdWJsaWNhcjogZGF0YS5ub3RpY2lhLmFjdGl2bywKICAgICAgICAgICAgICAgIG5vdGlfc2VjY2lvbjogZGF0YS5ub3RpY2lhLnNlY2Npb24sCiAgICAgICAgICAgICAgICBub3RpX2ZvdG9zOiBbXQogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgdmFyIHN0b3JhZ2VSZWYgPSBmaXJlYmFzZS5zdG9yYWdlKCkucmVmKCIvIi5jb25jYXQoZGF0YS50YXJnZXQsICIvIikuY29uY2F0KGRhdGEubm90aWNpYS5pZCwgIi8iKS5jb25jYXQoZGF0YS5ub3RpY2lhLmFyY2hpdm9zWyIiLmNvbmNhdChkYXRhLm5hbWVfYXJjaGl2b3MpLmNvbmNhdChlbGVtZW50LmlkKV0ubm9tYnJlKSk7CiAgICAgICAgICAgICAgc3RvcmFnZVJlZi5nZXREb3dubG9hZFVSTCgpLnRoZW4oZnVuY3Rpb24gKHVybCkgewogICAgICAgICAgICAgICAgdmFyIHZhbCA9IF9vcmRlcjE0W19uMTRdOwoKICAgICAgICAgICAgICAgIGZvciAodmFyIG0gPSAwOyBtIDwgT2JqZWN0LnZhbHVlcyhkYXRhLm5vdGljaWEuYXJjaGl2b3MpLmxlbmd0aDsgbSsrKSB7CiAgICAgICAgICAgICAgICAgIGlmIChPYmplY3QudmFsdWVzKGRhdGEubm90aWNpYS5hcmNoaXZvcylbbV0uaWQgIT09IHVuZGVmaW5lZCAmJiB2YWwgPT09IE9iamVjdC52YWx1ZXMoZGF0YS5ub3RpY2lhLmFyY2hpdm9zKVttXS5pZCkgewogICAgICAgICAgICAgICAgICAgIHN0YXRlLmRiSW1nW3ZhbF0udXJsID0gdXJsOwogICAgICAgICAgICAgICAgICAgIHN0YXRlLmRiSW1nW3ZhbF0ubm9tYnJlID0gT2JqZWN0LnZhbHVlcyhkYXRhLm5vdGljaWEuYXJjaGl2b3MpW21dLm5vbWJyZTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9uMTQrKzsKCiAgICAgICAgICAgICAgICBpZiAoX24xNCA+PSBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICBmb3IgKHZhciBfaTIyID0gMDsgX2kyMiA8IE9iamVjdC52YWx1ZXMoc3RhdGUuZGJJbWcpLmxlbmd0aDsgX2kyMisrKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLmRiSW1nW19pMjJdLm5vbWJyZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgICAgICBkYXRhUmVmLm5vdGlfZm90b3NbImltYWdlbiIuY29uY2F0KF9pMjIpXSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgbm9tYnJlOiBzdGF0ZS5kYkltZ1tfaTIyXS5ub21icmUsCiAgICAgICAgICAgICAgICAgICAgICAgIHVybDogc3RhdGUuZGJJbWdbX2kyMl0udXJsCiAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICBkYXRhUmVmLm5vdGlfZm90b3NbImltYWdlbiIuY29uY2F0KF9pMjIpXSA9ICcnOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgaWYgKF9uMTQgPj0gT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgX2RiUmVmMjAgPSBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZigiIi5jb25jYXQoZGF0YS50YXJnZXQsICIvIikuY29uY2F0KGRhdGEubm90aWNpYS5pZCkpOwoKICAgICAgICAgICAgICAgICAgICBfZGJSZWYyMC5zZXQoZGF0YVJlZik7CgogICAgICAgICAgICAgICAgICAgIHN0YXRlLmNyZWFyREJWYWxzID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgdmFyIF9zdWNjZXNzMjcgPSB7CiAgICAgICAgICAgICAgICAgICAgICAwOiAnc3VjY2Vzc1VwbG9hZCcsCiAgICAgICAgICAgICAgICAgICAgICAxOiAnU2UgaGEgY3JlYWRvIGV4aXRvc2FtZW50ZScKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICBfdGhpczcuY29tbWl0KCdzdWNjZXNzQWR2aXNlJywgX3N1Y2Nlc3MyNyk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBfajEwKys7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciBfZGF0YVJlZjE0ID0gewogICAgICAgICAgICBub3RpX2lkOiBkYXRhLm5vdGljaWEuaWQsCiAgICAgICAgICAgIG5vdGlfdGl0dWxvOiBkYXRhLm5vdGljaWEudGl0dWxvLAogICAgICAgICAgICBub3RpX2luZm86IGRhdGEubm90aWNpYS5pbmZvLAogICAgICAgICAgICBub3RpX2ZlY2hhOiBkYXRhLm5vdGljaWEuZmVjaGFlZCwKICAgICAgICAgICAgbm90aV9wcmV2OiBkYXRhLm5vdGljaWEuaW5mb2NvcnQsCiAgICAgICAgICAgIG5vdGlfcHVibGljYXI6IGRhdGEubm90aWNpYS5hY3Rpdm8sCiAgICAgICAgICAgIG5vdGlfc2VjY2lvbjogZGF0YS5ub3RpY2lhLnNlY2Npb24sCiAgICAgICAgICAgIG5vdGlfZm90b3M6IGRhdGEubm90aWNpYS5hcmNoaXZvcwogICAgICAgICAgfTsKICAgICAgICAgIF9uMTQrKzsKCiAgICAgICAgICBpZiAoX24xNCA+PSBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmxlbmd0aCkgewogICAgICAgICAgICB2YXIgX2RiUmVmMjEgPSBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZigiIi5jb25jYXQoZGF0YS50YXJnZXQsICIvIikuY29uY2F0KGRhdGEubm90aWNpYS5pZCkpOwoKICAgICAgICAgICAgX2RiUmVmMjEuc2V0KF9kYXRhUmVmMTQpOwoKICAgICAgICAgICAgc3RhdGUuY3JlYXJEQlZhbHMgPSBmYWxzZTsKICAgICAgICAgICAgdmFyIF9zdWNjZXNzMjggPSB7CiAgICAgICAgICAgICAgMDogJ3N1Y2Nlc3NVcGxvYWQnLAogICAgICAgICAgICAgIDE6ICdTZSBoYSBjcmVhZG8gZXhpdG9zYW1lbnRlJwogICAgICAgICAgICB9OwogICAgICAgICAgICB0aGlzLmNvbW1pdCgnc3VjY2Vzc0FkdmlzZScsIF9zdWNjZXNzMjgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChkYXRhLnRhcmdldCA9PT0gJ01pc2NlbGxhbmVvdXMnKSB7CiAgICAgICAgc3RhdGUuZGJJbWcgPSBbXTsKCiAgICAgICAgaWYgKGRhdGEubWlzY2VsbGFuZW91cy5sb2dvLmlkICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHN0YXRlLmRiSW1nW2RhdGEubWlzY2VsbGFuZW91cy5sb2dvLmlkXSA9IGRhdGEubWlzY2VsbGFuZW91cy5sb2dvOwogICAgICAgIH0KCiAgICAgICAgdmFyIF9zdG9yYWdlUmVmMTYgPSBbXTsKICAgICAgICB2YXIgX3BlcmNlbnRhZ2UxNSA9IFtdOwogICAgICAgIHZhciBfb3JkZXIxNSA9IFtdOwogICAgICAgIHZhciBfdGFzazE1ID0ge307CiAgICAgICAgdmFyIF9pMjMgPSAwOwogICAgICAgIHZhciBfbjE1ID0gMDsKICAgICAgICB2YXIgX2oxMSA9IDA7CiAgICAgICAgT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICBfc3RvcmFnZVJlZjE2ID0gZmlyZWJhc2Uuc3RvcmFnZSgpLnJlZigiLyIuY29uY2F0KGRhdGEudGFyZ2V0LCAiLyIpLmNvbmNhdChkYXRhLm1pc2NlbGxhbmVvdXMuaWQsICIvIikuY29uY2F0KGRhdGEubWlzY2VsbGFuZW91cy5sb2dvLm5vbWJyZSkpOwogICAgICAgICAgX3Rhc2sxNVsiIi5jb25jYXQoZWxlbWVudC5pZCldID0gX3N0b3JhZ2VSZWYxNi5wdXQoZWxlbWVudCk7CiAgICAgICAgICBfaTIzKys7CiAgICAgICAgfSk7CgogICAgICAgIGlmIChPYmplY3QudmFsdWVzKF90YXNrMTUpLmxlbmd0aCAhPT0gMCkgewogICAgICAgICAgT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICAgIF90YXNrMTVbIiIuY29uY2F0KGVsZW1lbnQuaWQpXS5vbignc3RhdGVfY2hhbmdlZCcsIGZ1bmN0aW9uIChzbmFwc2hvdCkgewogICAgICAgICAgICAgIF9wZXJjZW50YWdlMTVbc25hcHNob3QudGFzay5ibG9iXy5kYXRhXy5pZF0gPSBzbmFwc2hvdC5ieXRlc1RyYW5zZmVycmVkIC8gc25hcHNob3QudG90YWxCeXRlcyAqIDEwMDsKICAgICAgICAgICAgICBzdGF0ZS5kYkltZ1tzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkXS51cGxvYWRQZXJjZW50YWdlID0gX3BlcmNlbnRhZ2UxNVtzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkXTsKCiAgICAgICAgICAgICAgaWYgKHN0YXRlLmRiSW1nW3NuYXBzaG90LnRhc2suYmxvYl8uZGF0YV8uaWRdLnVwbG9hZFBlcmNlbnRhZ2UgPT09IDEwMCAmJiBfb3JkZXIxNS5sZW5ndGggPCBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgX29yZGVyMTUucHVzaChzbmFwc2hvdC50YXNrLmJsb2JfLmRhdGFfLmlkKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLm1lc3NhZ2UpOwogICAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgdmFyIGRhdGFSZWYgPSB7CiAgICAgICAgICAgICAgICBtaXNjX2lkOiBkYXRhLm1pc2NlbGxhbmVvdXMuaWQsCiAgICAgICAgICAgICAgICBtaXNjX3RlbGVmb25vczogZGF0YS5taXNjZWxsYW5lb3VzLnRlbGVmb25vcywKICAgICAgICAgICAgICAgIG1pc2NfY29ycmVvczogZGF0YS5taXNjZWxsYW5lb3VzLmNvcnJlb3MsCiAgICAgICAgICAgICAgICBtaXNjX2RpcmVjY2lvbjogZGF0YS5taXNjZWxsYW5lb3VzLmRpcmVjY2lvbiwKICAgICAgICAgICAgICAgIG1pc2NfcmVkZXM6IGRhdGEubWlzY2VsbGFuZW91cy5yZWRlcywKICAgICAgICAgICAgICAgIG1pc2NfbG9nbzogW10KICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIHZhciBzdG9yYWdlUmVmID0gZmlyZWJhc2Uuc3RvcmFnZSgpLnJlZigiLyIuY29uY2F0KGRhdGEudGFyZ2V0LCAiLyIpLmNvbmNhdChkYXRhLm1pc2NlbGxhbmVvdXMuaWQsICIvIikuY29uY2F0KGRhdGEubWlzY2VsbGFuZW91cy5sb2dvLm5vbWJyZSkpOwogICAgICAgICAgICAgIHN0b3JhZ2VSZWYuZ2V0RG93bmxvYWRVUkwoKS50aGVuKGZ1bmN0aW9uICh1cmwpIHsKICAgICAgICAgICAgICAgIHZhciB2YWwgPSBfb3JkZXIxNVtfbjE1XTsKCiAgICAgICAgICAgICAgICBpZiAoZGF0YS5taXNjZWxsYW5lb3VzLmxvZ28uaWQgIT09IHVuZGVmaW5lZCAmJiB2YWwgPT09IGRhdGEubWlzY2VsbGFuZW91cy5sb2dvLmlkKSB7CiAgICAgICAgICAgICAgICAgIHN0YXRlLmRiSW1nW3ZhbF0udXJsID0gdXJsOwogICAgICAgICAgICAgICAgICBzdGF0ZS5kYkltZ1t2YWxdLm5vbWJyZSA9IGRhdGEubWlzY2VsbGFuZW91cy5sb2dvLm5vbWJyZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfbjE1Kys7CgogICAgICAgICAgICAgICAgaWYgKF9uMTUgPj0gT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLmRiSW1nW2RhdGEubWlzY2VsbGFuZW91cy5sb2dvLmlkXS5ub21icmUgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgIGRhdGFSZWYubWlzY19sb2dvID0gewogICAgICAgICAgICAgICAgICAgICAgbm9tYnJlOiBzdGF0ZS5kYkltZ1tkYXRhLm1pc2NlbGxhbmVvdXMubG9nby5pZF0ubm9tYnJlLAogICAgICAgICAgICAgICAgICAgICAgdXJsOiBzdGF0ZS5kYkltZ1tkYXRhLm1pc2NlbGxhbmVvdXMubG9nby5pZF0udXJsCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBkYXRhUmVmLm1pc2NfbG9nbyA9ICcnOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBpZiAoX24xNSA+PSBPYmplY3QudmFsdWVzKGRhdGEuYXJjaGl2b3MpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIHZhciBfZGJSZWYyMiA9IGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKCIiLmNvbmNhdChkYXRhLnRhcmdldCwgIi8iKS5jb25jYXQoZGF0YS5taXNjZWxsYW5lb3VzLmlkKSk7CgogICAgICAgICAgICAgICAgICAgIF9kYlJlZjIyLnNldChkYXRhUmVmKTsKCiAgICAgICAgICAgICAgICAgICAgc3RhdGUuY3JlYXJEQlZhbHMgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB2YXIgX3N1Y2Nlc3MyOSA9IHsKICAgICAgICAgICAgICAgICAgICAgIDA6ICdzdWNjZXNzVXBsb2FkJywKICAgICAgICAgICAgICAgICAgICAgIDE6ICdTZSBoYSBjcmVhZG8gZXhpdG9zYW1lbnRlJwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIF90aGlzNy5jb21taXQoJ3N1Y2Nlc3NBZHZpc2UnLCBfc3VjY2VzczI5KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIF9qMTErKzsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFyIF9kYXRhUmVmMTUgPSB7CiAgICAgICAgICAgIG1pc2NfaWQ6IGRhdGEubWlzY2VsbGFuZW91cy5pZCwKICAgICAgICAgICAgbWlzY190ZWxlZm9ub3M6IGRhdGEubWlzY2VsbGFuZW91cy50ZWxlZm9ub3MsCiAgICAgICAgICAgIG1pc2NfY29ycmVvczogZGF0YS5taXNjZWxsYW5lb3VzLmNvcnJlb3MsCiAgICAgICAgICAgIG1pc2NfZGlyZWNjaW9uOiBkYXRhLm1pc2NlbGxhbmVvdXMuZGlyZWNjaW9uLAogICAgICAgICAgICBtaXNjX3JlZGVzOiBkYXRhLm1pc2NlbGxhbmVvdXMucmVkZXMsCiAgICAgICAgICAgIG1pc2NfbG9nbzogZGF0YS5taXNjZWxsYW5lb3VzLmxvZ28KICAgICAgICAgIH07CiAgICAgICAgICBfbjE1Kys7CgogICAgICAgICAgaWYgKF9uMTUgPj0gT2JqZWN0LnZhbHVlcyhkYXRhLmFyY2hpdm9zKS5sZW5ndGgpIHsKICAgICAgICAgICAgdmFyIF9kYlJlZjIzID0gZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoIiIuY29uY2F0KGRhdGEudGFyZ2V0LCAiLyIpLmNvbmNhdChkYXRhLm1pc2NlbGxhbmVvdXMuaWQpKTsKCiAgICAgICAgICAgIF9kYlJlZjIzLnNldChfZGF0YVJlZjE1KTsKCiAgICAgICAgICAgIHN0YXRlLmNyZWFyREJWYWxzID0gZmFsc2U7CiAgICAgICAgICAgIHZhciBfc3VjY2VzczMwID0gewogICAgICAgICAgICAgIDA6ICdzdWNjZXNzVXBsb2FkJywKICAgICAgICAgICAgICAxOiAnU2UgaGEgY3JlYWRvIGV4aXRvc2FtZW50ZScKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdGhpcy5jb21taXQoJ3N1Y2Nlc3NBZHZpc2UnLCBfc3VjY2VzczMwKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICByZXNldERCVmFsdWVzOiBmdW5jdGlvbiByZXNldERCVmFsdWVzKHN0YXRlLCB2YWx1ZSkgewogICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHN0YXRlLnN1Y2Nlc3NVcGxvYWQgPSBudWxsOwogICAgICAgIHN0YXRlLmRlbGV0aW5nVmFsID0gbnVsbDsKICAgICAgICBzdGF0ZS5kYkltZyA9IFtdOwogICAgICB9IGVsc2UgaWYgKHN0YXRlLmRiSW1nWyIiLmNvbmNhdCh2YWx1ZSldICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBzdGF0ZS5kYkltZ1siIi5jb25jYXQodmFsdWUpXSA9IFtdOwogICAgICB9CiAgICB9LAogICAgZmFsc2VDYXJnYXJEQjogZnVuY3Rpb24gZmFsc2VDYXJnYXJEQihzdGF0ZSkgewogICAgICBzdGF0ZS5jYXJnYXJEQiA9IGZhbHNlOwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgZ2V0RGF0YTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2dldERhdGEgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoX3JlZiwgdmFsKSB7CiAgICAgICAgdmFyIGNvbW1pdCwgdHJ5QWdhaW4sIF9kYXRhLCBkYldlYiwgdmFsdWU7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgICAgICAgICAgICAgdHJ5QWdhaW4gPSB0cnVlOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBpZiAoIXRyeUFnYWluKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDM7CiAgICAgICAgICAgICAgICB0cnlBZ2FpbiA9IGZhbHNlOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICByZXR1cm4gZmV0Y2goImh0dHBzOi8vd2ViLWRhdGFiYXNlLTY2ODQyLmZpcmViYXNlaW8uY29tLy5qc29uIik7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIF9kYXRhID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMDsKICAgICAgICAgICAgICAgIHJldHVybiBfZGF0YS5qc29uKCk7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBkYldlYiA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICB2YWx1ZSA9IHsKICAgICAgICAgICAgICAgICAgMDogZGJXZWIsCiAgICAgICAgICAgICAgICAgIDE6IHZhbAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGNvbW1pdCgnZGF0YVdlYicsIHZhbHVlKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxODsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE1OwogICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgzKTsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICB0cnlBZ2FpbiA9IHRydWU7CiAgICAgICAgICAgICAgICB9LCAxMDAwMCk7CgogICAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1szLCAxNV1dKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gZ2V0RGF0YShfeCwgX3gyKSB7CiAgICAgICAgcmV0dXJuIF9nZXREYXRhLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBnZXREYXRhOwogICAgfSgpCiAgfSwKICBtb2R1bGVzOiB7fSwKICBnZXR0ZXJzOiB7CiAgICB1c2VyVXBkYXRlOiBmdW5jdGlvbiB1c2VyVXBkYXRlKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS51c2VyOwogICAgfQogIH0KfSk7"},{"version":3,"sources":["C:/WebProjects/Web-csp/web-csp/src/store/index.js"],"names":["Vue","Vuex","firebase","auth","data","use","Store","state","secTitle","successUpload","cargarDB","crearDBVals","errorUpload","deletingVal","loadEdit","deletingIndex","actUser","dbWeb","dpResponsive","headerView","formtipo","user","activo","apellido","autori","cargo","correo","correoVeri","fotoUrl","id","nombre","telefono","accion","refUser","createContent","formUpload","titulo","info","prev","fecha","seccion","images","tipo","editContent","uploadImages","uploadDataBase","users","userRefer","createUser","create","pass","deleteContent","dbImg","dbFiles","mutations","dataWeb","baseDatos","undefined","changeSecTitle","value","setUser","dbUserVal","valuesRef","user_activo","user_apellido","user_autori","user_cargo","user_correo","user_correoVeri","user_fotoUrl","user_id","user_nombre","user_telefono","user_accion","dbRef","database","ref","child","set","then","commit","Object","values","config","apiKey","authDomain","databaseURL","secondaryApp","initializeApp","createUserWithEmailAndPassword","email","emailVerified","displayName","uid","signOut","delete","success","valuesDb","Usuarios","catch","err","message","updateUser","currentUser","updateProfile","phoneNumber","isUserDiff","i","length","deleteItem","index","storage","idDb","remove","storageRef","idSt","listAll","prom","items","forEach","element","name","console","log","deletedEl","resetContentValues","val","successAdvise","handleUpload","files","percentage","order","task","j","m","n","put","on","snapshot","blob_","data_","bytesTransferred","totalBytes","uploadPercentage","push","error","dataRef","noti_titulo","noti_info","noti_fecha","noti_id","noti_prev","noti_publicar","noti_seccion","noti_imagenes","getDownloadURL","url","filesUpload","d","Date","miliSec","parse","dString","toString","splittedDate","split","joinedDate","joined","join","imagenes","crearDB","target","archivos","junta","integrantes","image","pushdbRef","junt_id","key","junt_periodo","inicio","fin","junt_activa","junta_actual","junt_integrantes","juin_cargo","juin_nombre","juin_apellido","juin_correo","juin_foto","juin_activo","juin_crear","crear","servicio","serv_id","serv_activo","serv_cierre","serv_contacto","contacto","serv_descripcion","descripcion","serv_inicio","serv_nombre","serv_foto","integrante","gr_id","gr_correo","gr_nombre","gr_cargo","gr_foto","profesor","cv","prof_id","comi_id","coid","prof_cv","prof_ci","ci","prof_correo","prof_fechadenacimiento","nacimiento","prof_foto","prof_nombre","prof_telefonos","telefonos","k","comite","comi_activo","comi_comiPage","comipage","comi_correo","comi_costos","costos","comi_descripcion","comi_fechavigencia","fechav","comi_foto","comi_int","inthpage","comi_integrantes","comi_nombre","comi_normativa","comi_reglamento","imagen","normativa","reglamento","anunciante","anun_id","anun_url","anunurl","anun_activo","anun_nombre","anun_nombrecontacto","nombrecon","anun_correo","anun_essocio","anun_essocio_socio","essocio","socio","anun_essocio_accion","anun_fechavigencia","anun_foto","anun_telefonos","banner","bann_id","name_archivos","bann_activo","bann_bannerid","bannerid","bann_fechaedicion","fechaed","bann_seccion","bann_slides","noticia","infocort","noti_fotos","updateDB","_","miscellaneous","logo","misc_id","misc_telefonos","misc_correos","correos","misc_direccion","direccion","misc_redes","redes","misc_logo","resetDBValues","falseCargarDB","actions","getData","tryAgain","fetch","json","setTimeout","modules","getters","userUpdate"],"mappings":"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","sourcesContent":["import Vue from 'vue'\r\nimport Vuex from 'vuex'\r\nimport firebase, { auth } from 'firebase'\r\nimport { data } from 'jquery'\r\n\r\nVue.use(Vuex)\r\n\r\nexport default new Vuex.Store({\r\n  state: {\r\n    secTitle: 'Dashboard',\r\n    successUpload: null,\r\n    cargarDB: false,\r\n    crearDBVals: false,\r\n    errorUpload: null,\r\n    deletingVal: null,\r\n    loadEdit: false,\r\n    deletingIndex: '',\r\n    actUser: null,\r\n    dbWeb:[],\r\n    dpResponsive: false,\r\n    headerView: 0,\r\n    formtipo: 0,\r\n    user: {\r\n      activo: '',\r\n      apellido: '',\r\n      autori: '',\r\n      cargo: '',\r\n      correo: '',\r\n      correoVeri: '',\r\n      fotoUrl: '',\r\n      id: '',\r\n      nombre: '',\r\n      telefono: '',\r\n      accion: '',\r\n    },\r\n    refUser: {},\r\n    createContent:{\r\n      formUpload: {\r\n        titulo: '',\r\n        info: '',\r\n        prev: '',\r\n        fecha: '',\r\n        id: '',\r\n        seccion: 'Seleccione una opción',\r\n        images: [],\r\n        tipo: false,\r\n      },\r\n    },\r\n    editContent:{\r\n      formUpload: {\r\n        titulo: '',\r\n        info: '',\r\n        prev: '',\r\n        fecha: '',\r\n        id: '',\r\n        seccion: '',\r\n        images: [],\r\n        tipo: false,\r\n        uploadImages: false,\r\n        uploadDataBase: false,\r\n      },\r\n    },\r\n    users:{\r\n      userRefer: false,\r\n      createUser:{\r\n        formUpload: {\r\n          activo: '',\r\n          apellido: '',\r\n          cargo: '',\r\n          correo: '',\r\n          correoVeri: '',\r\n          fotoUrl: '',\r\n          id: '',\r\n          nombre: '',\r\n          telefono: '',\r\n          create: false,\r\n          pass: '',\r\n        },\r\n      },\r\n    },\r\n    deleteContent:{\r\n      formUpload: {\r\n        id: '',\r\n        tipo: false,\r\n      },\r\n    },\r\n    dbImg: [],\r\n    dbFiles: [],\r\n  },\r\n  mutations: {\r\n    dataWeb(state, baseDatos){\r\n      state.dbWeb = baseDatos[0]\r\n      if(baseDatos[1] !== undefined){\r\n        baseDatos[1] = true;\r\n      }\r\n    },\r\n    changeSecTitle(state, value){\r\n      state.secTitle = value\r\n    },\r\n    setUser(state, user){\r\n      state.users.userRefer = false;\r\n      \r\n      state.user = {\r\n        activo: user.activo,\r\n        apellido: user.apellido,\r\n        autori: user.autori,\r\n        cargo: user.cargo,\r\n        correo: user.correo,\r\n        correoVeri: user.correoVeri,\r\n        fotoUrl: user.fotoUrl,\r\n        id: user.id,\r\n        nombre: user.nombre,\r\n        telefono: user.telefono,\r\n        accion: user.accion,\r\n      }\r\n\r\n      state.refUser = {\r\n        activo: user.activo,\r\n        apellido: user.apellido,\r\n        autori: user.autori,\r\n        cargo: user.cargo,\r\n        correo: user.correo,\r\n        correoVeri: user.correoVeri,\r\n        fotoUrl: user.fotoUrl,\r\n        id: user.id,\r\n        nombre: user.nombre,\r\n        telefono: user.telefono,\r\n        accion: user.accion,\r\n      }\r\n    },\r\n    dbUserVal(state, value){\r\n      const valuesRef = {\r\n        user_activo: true,\r\n        user_apellido: value.apellido,\r\n        user_autori: value.autori,\r\n        user_cargo: value.cargo,\r\n        user_correo: value.correo,\r\n        user_correoVeri: value.correoVeri,\r\n        user_fotoUrl: `${value.fotoUrl}`,\r\n        user_id: value.id,\r\n        user_nombre: value.nombre,\r\n        user_telefono: `${value.telefono}`,\r\n        user_accion: `${value.accion}`,\r\n      }\r\n      const dbRef = firebase.database().ref('Usuarios');\r\n      dbRef.child(valuesRef.user_id).set(valuesRef).then(()=>{\r\n        this.commit('setUser', Object.values(valuesRef));\r\n      })\r\n    },\r\n    createUser(state, value){\r\n      state.users.userRefer = true;\r\n      const config = {\r\n        apiKey: \"AIzaSyCpsNVtsACCeS-amNprGUh0vGOE-SD9y5Q\",\r\n        authDomain: \"web-database-66842.firebaseapp.com\",\r\n        databaseURL: \"https://web-database-66842.firebaseio.com\",\r\n      }\r\n      const secondaryApp = firebase.initializeApp(config, \"Secondary\");\r\n      \r\n      secondaryApp.auth().createUserWithEmailAndPassword(state.users.createUser.formUpload.correo, state.users.createUser.formUpload.pass).then(user => {\r\n          const valuesRef = {\r\n            correo: user.user.email,\r\n            correoVeri: user.user.emailVerified,\r\n            nombre: user.user.displayName,\r\n            apellido: '',\r\n            autori: '',\r\n            fotoUrl: '',\r\n            telefono: '',\r\n            cargo: '',\r\n            id: user.user.uid,\r\n            activo: '',\r\n            accion: '',\r\n          }\r\n          secondaryApp.auth().signOut();\r\n          secondaryApp.delete()\r\n          const success = {\r\n            0: 'successUpload',\r\n            1: 'Se ha creado exitosamente'\r\n          };\r\n          this.commit('successAdvise', success);\r\n          const valuesDb = {\r\n            user_correo: user.user.email,\r\n            user_correoVeri: user.user.emailVerified,\r\n            user_nombre: user.user.displayName,\r\n            user_apellido: '',\r\n            user_autori: '',\r\n            user_fotoUrl: '',\r\n            user_telefono: '',\r\n            user_cargo: '',\r\n            user_id: user.user.uid,\r\n            user_activo: '',\r\n            user_accion: '',\r\n          }\r\n          this.commit('dbUserVal', valuesRef);\r\n          state.dbWeb.Usuarios[`${valuesDb.id}`] = valuesDb;\r\n        }).catch(err => {\r\n          state.users.userRefer = false;\r\n          secondaryApp.delete();\r\n          if(err.message === 'The email address is already in use by another account.'){\r\n            const success = {\r\n              0: 'errorUpload',\r\n              1: 'El correo ya está en uso'\r\n            };\r\n            this.commit('successAdvise', success);\r\n          }\r\n        })\r\n    },\r\n    updateUser(state, value){\r\n      if(value.tipo === '1'){\r\n        const valuesRef = {\r\n          user_id: value.id,\r\n          user_correo: value.correo,\r\n          user_correoVeri: value.correoVeri,\r\n          user_accion: value.accion,\r\n          user_telefono: value.telefono,\r\n          user_nombre: value.nombre,\r\n          user_apellido: value.apellido,\r\n          user_activo: value.activo,\r\n          user_fotoUrl: value.fotoUrl,\r\n          user_autori: value.autori,\r\n          user_cargo: value.cargo,\r\n        }\r\n\r\n        const dbRef = firebase.database().ref('Usuarios');\r\n        dbRef.child(valuesRef.user_id).set(valuesRef).then(()=>{\r\n          // Aqui debo poner para quitar el cargador\r\n          this.commit('setUser', value);\r\n          state.actUser = null;\r\n          const success = {\r\n            0: 'successUpload',\r\n            1: 'Se ha actualizado exitosamente'\r\n          };\r\n          this.commit('successAdvise', success);\r\n        })\r\n      }else{\r\n        const user = firebase.auth().currentUser;\r\n        if(user){\r\n          // Aqui debo poner el activador para el cargador\r\n          \r\n          user.updateProfile({\r\n            displayName: value.nombre,\r\n            email: value.correo,\r\n            phoneNumber: value.telefono,\r\n          }).then(() =>{\r\n            const valuesRef = {\r\n              user_correo: value.correo,\r\n              user_correoVeri: value.correoVeri,\r\n              user_nombre: value.nombre,\r\n              user_apellido: value.apellido,\r\n              user_autori: value.autori,\r\n              user_fotoUrl: value.fotoUrl,\r\n              user_telefono: value.telefono,\r\n              user_cargo: value.cargo,\r\n              user_id: value.id,\r\n              user_activo: value.activo,\r\n              user_accion: value.accion,\r\n            }\r\n            const dbRef = firebase.database().ref('Usuarios');\r\n            dbRef.child(value.id).set(valuesRef).then(()=>{\r\n              // Aqui debo poner para quitar el cargador\r\n              this.commit('setUser', value);\r\n              state.actUser = null;\r\n              const success = {\r\n                0: 'successUpload',\r\n                1: 'Se ha actualizado exitosamente'\r\n              };\r\n              this.commit('successAdvise', success);\r\n            })\r\n          })\r\n        }\r\n      }\r\n    },\r\n    isUserDiff(state, value){\r\n      if(value.tipo === '0'){\r\n        for(let i = 0; i < Object.values(state.user).length; i++){\r\n          if(Object.values(state.user)[i] !== Object.values(state.refUser)[i]){\r\n            state.actUser = true;\r\n            return this.commit('updateUser', state.user);\r\n          }\r\n        }\r\n      }else{\r\n        state.actUser = true;\r\n        this.commit('updateUser', value);\r\n      }\r\n    },\r\n    deleteItem(state, value){\r\n      state.deletingVal = true;\r\n      state.deletingIndex = value.index;\r\n\r\n      if(value.storage === false){\r\n        firebase.database().ref(`${value.ref}/${value.idDb}`).remove().then(()=>{\r\n          state.deletingVal = false;\r\n          state.deletingIndex = '';\r\n          const success = {\r\n            0: 'successUpload',\r\n            1: 'Se ha eliminado exitosamente'\r\n          }\r\n          this.commit('successAdvise', success)\r\n          }\r\n        )\r\n      }else if(value.storage === true){\r\n        try{\r\n          let storageRef = firebase.storage().ref(`/${value.ref}/${value.idSt}`)\r\n          storageRef.listAll().then(prom => {\r\n            if(prom.items.length !== 0){\r\n              prom.items.forEach(element => {\r\n                storageRef.child(element.name).delete().then( err => {\r\n                  if(err !== undefined){\r\n                    console.log(err)\r\n                  }else{\r\n                    firebase.database().ref(`${value.ref}/${value.idDb}`).remove().then(()=>{\r\n                      state.deletingVal = false;\r\n                      state.deletingIndex = '';\r\n                      const success = {\r\n                        0: 'successUpload',\r\n                        1: 'Se ha eliminado exitosamente'\r\n                      }\r\n                      this.commit('successAdvise', success)\r\n                      }\r\n                    )\r\n                  }\r\n                })\r\n              });\r\n            }else{\r\n              firebase.database().ref(`${value.ref}/${value.idDb}`).remove().then(()=>{\r\n                state.deletingVal = false;\r\n                state.deletingIndex = '';\r\n                const success = {\r\n                  0: 'successUpload',\r\n                  1: 'Se ha eliminado exitosamente'\r\n                }\r\n                this.commit('successAdvise', success)\r\n                }\r\n              )\r\n            }\r\n          })\r\n        }catch(err){console.log(err)}\r\n      }\r\n\r\n    },\r\n    deletedEl(state, value){\r\n      if(value[0] === 0){\r\n        state.deletingVal = value[1];\r\n      }\r\n      if(value[0] === 1){\r\n        state.deletingIndex = value[1];\r\n      }\r\n    },\r\n    resetContentValues(state, val){\r\n      if(val === 0){\r\n        state.createContent.formUpload.titulo = '';\r\n        state.createContent.formUpload.info = '';\r\n        state.createContent.formUpload.prev = '';\r\n        state.createContent.formUpload.images = [];\r\n        state.createContent.formUpload.fecha = '';\r\n        state.createContent.formUpload.id = '';\r\n        state.createContent.formUpload.seccion = 'Seleccione una opción';\r\n      }else if(val === 1){\r\n        state.editContent.formUpload.titulo = '';\r\n        state.editContent.formUpload.info = '';\r\n        state.editContent.formUpload.prev = '';\r\n        state.editContent.formUpload.images = [];\r\n        state.editContent.formUpload.fecha = '';\r\n        state.editContent.formUpload.id = '';\r\n        state.editContent.formUpload.seccion = 'Todas las secciones';\r\n      }else if(val === 3){\r\n        state.users = {\r\n          userRefer: false,\r\n          createUser:{\r\n            formUpload: {\r\n              activo: '',\r\n              apellido: '',\r\n              cargo: '',\r\n              correo: '',\r\n              correoVeri: '',\r\n              fotoUrl: '',\r\n              id: '',\r\n              nombre: '',\r\n              telefono: '',\r\n              create: false,\r\n              pass: '',\r\n            },\r\n          },\r\n        };\r\n      }\r\n    },\r\n    successAdvise(state, data){\r\n      state[`${data[0]}`] = data[1];\r\n    },\r\n    handleUpload(state, files){\r\n\r\n      let storageRef = [];\r\n      let percentage = [];\r\n      let order = [];\r\n      let task = {};\r\n      let i = 0;\r\n      let j = 0;\r\n      let m = 0;\r\n      let n = 0;\r\n\r\n      if(state.createContent.formUpload.tipo === true){\r\n        files.forEach(element => {\r\n          storageRef= firebase.storage().ref(`/imagenes/noticias/${state.createContent.formUpload.id}/foto${element.id}`);\r\n          task[i] = storageRef.put(element);\r\n          i++;\r\n        })\r\n  \r\n        for(let i = 0; i < files.length; i++){\r\n          task[i].on('state_changed', snapshot => {\r\n            percentage[snapshot.task.blob_.data_.id] = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n            state.createContent.formUpload.images[snapshot.task.blob_.data_.id].uploadPercentage = percentage[snapshot.task.blob_.data_.id];\r\n            m ++;\r\n            if(state.createContent.formUpload.images[snapshot.task.blob_.data_.id].uploadPercentage === 100 && order.length < files.length){\r\n              order.push(snapshot.task.blob_.data_.id)\r\n            }\r\n          }, error => {\r\n            console.log(error.message);\r\n          }, () =>{\r\n            let dataRef = {\r\n              noti_titulo: state.createContent.formUpload.titulo,\r\n              noti_info: state.createContent.formUpload.info,\r\n              noti_fecha: state.createContent.formUpload.fecha,\r\n              noti_id: state.createContent.formUpload.id,\r\n              noti_prev: state.createContent.formUpload.prev,\r\n              noti_publicar: true,\r\n              noti_seccion: state.createContent.formUpload.seccion,\r\n              noti_imagenes: [],\r\n            }\r\n            let storageRef = firebase.storage().ref(`/imagenes/noticias/${state.createContent.formUpload.id}/foto${order[j]}`);\r\n            storageRef.getDownloadURL().then(url => {\r\n              let val = order[n];\r\n              state.createContent.formUpload.images[val].url = url;\r\n              state.createContent.formUpload.images[val].name = `foto${val}`;\r\n              n ++;\r\n              if(n >= state.createContent.formUpload.images.length){\r\n                n = 0;\r\n                state.createContent.formUpload.images.forEach(element => {\r\n                  dataRef.noti_imagenes.push({});\r\n                  dataRef.noti_imagenes[n].nombre = state.createContent.formUpload.images[n].name;\r\n                  dataRef.noti_imagenes[n].url = state.createContent.formUpload.images[n].url;\r\n                  n ++;\r\n                  if(n >= state.createContent.formUpload.images.length){\r\n                    const dbRef = firebase.database().ref('Noticias');\r\n                    dbRef.child(state.createContent.formUpload.id).set(dataRef);\r\n                    state.createContent.formUpload.tipo = false;\r\n                    const success = {\r\n                      0: 'successUpload',\r\n                      1: 'Se ha creado exitosamente'\r\n                    }\r\n                    this.commit('successAdvise', success)\r\n                  }\r\n                })\r\n              }\r\n            })\r\n            j ++;\r\n          })\r\n        }\r\n      }else if(state.editContent.formUpload.tipo === true){\r\n\r\n        if(state.editContent.formUpload.uploadImages === true){\r\n          files.forEach(element => {\r\n            storageRef= firebase.storage().ref(`/imagenes/noticias/${state.editContent.formUpload.id}/foto${element.id}`);\r\n            task[i] = storageRef.put(element);\r\n            i++;\r\n          })\r\n\r\n          for(let i = 0; i < files.length; i++){\r\n            task[i].on('state_changed', snapshot => {\r\n              percentage[snapshot.task.blob_.data_.id] = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n              state.editContent.formUpload.images[snapshot.task.blob_.data_.id].uploadPercentage = percentage[snapshot.task.blob_.data_.id];;\r\n              m ++;\r\n              if(state.editContent.formUpload.images[snapshot.task.blob_.data_.id].uploadPercentage === 100 && order.length < files.length){\r\n                order.push(snapshot.task.blob_.data_.id)\r\n              }\r\n            }, error => {\r\n              console.log(error.message);\r\n            }, () =>{\r\n              let dataRef = {\r\n                noti_titulo: state.editContent.formUpload.titulo,\r\n                noti_info: state.editContent.formUpload.info,\r\n                noti_fecha: state.editContent.formUpload.fecha,\r\n                noti_id: state.editContent.formUpload.id,\r\n                noti_prev: state.editContent.formUpload.prev,\r\n                noti_publicar: true,\r\n                noti_seccion: state.editContent.formUpload.seccion,\r\n                noti_imagenes: [],\r\n              }\r\n              let storageRef = firebase.storage().ref(`/imagenes/noticias/${state.editContent.formUpload.id}/foto${order[j]}`);\r\n              storageRef.getDownloadURL().then(url => {\r\n                let val = order[n];\r\n                state.editContent.formUpload.images[val].url = url;\r\n                state.editContent.formUpload.images[val].name = `foto${val}`;\r\n                n ++;\r\n                if(n >= state.editContent.formUpload.images.length){\r\n                  n = 0;\r\n                  state.editContent.formUpload.images.forEach(element => {\r\n                    dataRef.noti_imagenes.push({});\r\n                    dataRef.noti_imagenes[n].nombre = state.editContent.formUpload.images[n].name;\r\n                    dataRef.noti_imagenes[n].url = state.editContent.formUpload.images[n].url;\r\n                    n ++;\r\n                    if(n >= state.editContent.formUpload.images.length){\r\n                      const dbRef = firebase.database().ref('Noticias');\r\n                      dbRef.child(state.editContent.formUpload.id).set(dataRef);\r\n                      state.editContent.formUpload.tipo = false;\r\n                      const success = {\r\n                        0: 'successUpload',\r\n                        1: 'Se ha actualizado exitosamente'\r\n                      }\r\n                      this.commit('successAdvise', success)\r\n                    }\r\n                  })\r\n                }\r\n              })\r\n              j ++;\r\n            })\r\n          }\r\n        }else{\r\n          let dataRef = {\r\n            noti_titulo: state.editContent.formUpload.titulo,\r\n            noti_info: state.editContent.formUpload.info,\r\n            noti_fecha: state.editContent.formUpload.fecha,\r\n            noti_id: state.editContent.formUpload.id,\r\n            noti_prev: state.editContent.formUpload.prev,\r\n            noti_publicar: true,\r\n            noti_seccion: state.editContent.formUpload.seccion,\r\n            noti_imagenes: state.editContent.formUpload.images,\r\n          }\r\n          const dbRef = firebase.database().ref('Noticias');\r\n          dbRef.child(state.editContent.formUpload.id).set(dataRef);\r\n          state.editContent.formUpload.tipo = false;\r\n          const success = {\r\n            0: 'successUpload',\r\n            1: 'Se ha actualizado exitosamente'\r\n          }\r\n          this.commit('successAdvise', success)\r\n        }\r\n      }else if(state.deleteContent.formUpload.tipo === true){\r\n        try{\r\n          let storageRef = firebase.storage().ref(`/imagenes/noticias/${state.deleteContent.formUpload.id}`)\r\n          storageRef.listAll().then(prom => {\r\n            prom.items.forEach(element => {\r\n              storageRef.child(element.name).delete().then( err => {\r\n                if(err !== undefined){\r\n                  console.log(err)\r\n                }else{\r\n                  firebase.database().ref(`Noticias/${state.deleteContent.formUpload.id}`).remove().then(()=>{\r\n                      state.deletingVal = false;\r\n                      state.deleteContent.formUpload.tipo = false;\r\n                      const success = {\r\n                        0: 'successUpload',\r\n                        1: 'Se ha eliminado exitosamente'\r\n                      }\r\n                      this.commit('successAdvise', success)\r\n                    }\r\n                  )\r\n                }\r\n              })\r\n            });\r\n          })\r\n        }catch(err){console.log(err)}\r\n      }\r\n    },\r\n    filesUpload(state, data){\r\n\r\n      state.formtipo = data[2]\r\n\r\n      if(state.formtipo === 0){\r\n        let d = new Date();\r\n        const miliSec = Date.parse(d);\r\n        let dString = d.toString();\r\n        const splittedDate = dString.split(' ');\r\n        const joinedDate = [];\r\n        for(let i = 1; i < 5; i++){\r\n          joinedDate.push(splittedDate[i]);\r\n        }\r\n        const joined = joinedDate.join('|');\r\n        \r\n        state.createContent.formUpload.tipo = true\r\n        state.createContent.formUpload.fecha = joined;\r\n        state.createContent.formUpload.images = data[0];\r\n        state.createContent.formUpload.id = miliSec;\r\n  \r\n        this.commit('handleUpload', data[1])\r\n      }else if(state.formtipo === 1){\r\n        state.editContent.formUpload.tipo = true;\r\n        state.editContent.formUpload.fecha = data[0].fecha;\r\n        state.editContent.formUpload.images = data[0].imagenes;\r\n        state.editContent.formUpload.id = data[0].id;\r\n        state.editContent.formUpload.titulo = data[0].titulo;\r\n        state.editContent.formUpload.info = data[0].info;\r\n        state.editContent.formUpload.prev = data[0].prev;\r\n        state.editContent.formUpload.seccion = data[0].seccion;\r\n        state.editContent.formUpload.uploadImages = data[3];\r\n        state.editContent.formUpload.uploadDataBase = data[4];\r\n  \r\n        this.commit('handleUpload', data[1])\r\n      }else if(state.formtipo === 2){\r\n        state.deleteContent.formUpload.id = data[0];\r\n        state.deleteContent.formUpload.tipo = true;\r\n        state.deletingVal = true;\r\n        state.deletingIndex = data[3];\r\n\r\n        this.commit('handleUpload', data[1])\r\n      }\r\n      \r\n    },\r\n    crearDB(state, data){\r\n      state.crearDBVals = true;\r\n      if(data.target === 'Juntas'){\r\n        \r\n        if(Object.values(data.archivos).length !== 0){\r\n          for(let i = 0; i < Object.values(data.junta.integrantes).length; i++){\r\n            state.dbImg[i] = [];\r\n            state.dbImg[i] = Object.values(data.junta.integrantes)[i].image;\r\n          }\r\n        }\r\n\r\n        let storageRef = [];\r\n        let percentage = [];\r\n        let order = [];\r\n        let task = {};\r\n        let i = 0;\r\n        let j = 0;\r\n        let n = 0;\r\n\r\n        const dbRef = firebase.database().ref(`${data.target}`);\r\n        const pushdbRef = dbRef.push();\r\n\r\n        let dataRef = {\r\n          junt_id: pushdbRef.key,\r\n        }\r\n\r\n\r\n        Object.values(data.archivos).forEach(element => {\r\n          storageRef= firebase.storage().ref(`/${data.target}/${dataRef.junt_id}/${data.junta.integrantes[`${element.id}`].cargo.split(' ').join('_')}`);\r\n          task[`${element.id}`] = storageRef.put(element);\r\n        })\r\n        \r\n        if(Object.values(task).length !== 0){\r\n          Object.values(data.archivos).forEach(element => {\r\n            task[`${element.id}`].on('state_changed', snapshot => {\r\n              percentage[snapshot.task.blob_.data_.id] = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n              state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage = percentage[snapshot.task.blob_.data_.id];\r\n              if(state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage === 100 && order.length < Object.values(data.archivos).length){\r\n                order.push(snapshot.task.blob_.data_.id)\r\n              }\r\n            }, error => {\r\n              console.log(error.message);\r\n            }, () =>{\r\n  \r\n              dataRef.junt_periodo = `${data.junta.inicio}-${data.junta.fin}`;\r\n              dataRef.junt_activa = data.junta.junta_actual;\r\n              dataRef.junt_integrantes = [];\r\n  \r\n              for(let i = 0; i < Object.values(data.junta.integrantes).length; i++){\r\n                dataRef.junt_integrantes[i] = [];\r\n                dataRef.junt_integrantes[i].juin_cargo = Object.values(data.junta.integrantes)[i].cargo\r\n                dataRef.junt_integrantes[i].juin_nombre = Object.values(data.junta.integrantes)[i].nombre\r\n                dataRef.junt_integrantes[i].juin_apellido = Object.values(data.junta.integrantes)[i].apellido\r\n                dataRef.junt_integrantes[i].juin_correo = Object.values(data.junta.integrantes)[i].correo\r\n                dataRef.junt_integrantes[i].juin_foto = []\r\n                dataRef.junt_integrantes[i].juin_activo = Object.values(data.junta.integrantes)[i].activo\r\n                dataRef.junt_integrantes[i].juin_crear = Object.values(data.junta.integrantes)[i].crear\r\n              }\r\n  \r\n              let storageRef= firebase.storage().ref(`/${data.target}/${dataRef.junt_id}/${data.junta.integrantes[`${order[j]}`].cargo.split(' ').join('_')}`);\r\n              \r\n              storageRef.getDownloadURL().then(url => {\r\n                let val = order[n];\r\n                state.dbImg[val].url = url;\r\n                state.dbImg[val].nombre = `${data.junta.integrantes[`${order[n]}`].cargo.split(' ').join('_')}`;\r\n                n ++;\r\n                if(n >= order.length){\r\n                  i = 0;\r\n                  Object.values(dataRef.junt_integrantes).forEach(element => {\r\n                    if(state.dbImg[i].nombre !== undefined && state.dbImg[i].url !== undefined){\r\n                      element.juin_foto.nombre = state.dbImg[i].nombre;\r\n                      element.juin_foto.url = state.dbImg[i].url;\r\n                    }else{\r\n                      element.juin_foto = \"\";\r\n                    }\r\n                    i ++;\r\n                    if(n >= Object.values(data.archivos).length){\r\n                      pushdbRef.set(dataRef);\r\n                      state.crearDBVals = false;\r\n                      const success = {\r\n                        0: 'successUpload',\r\n                        1: 'Se ha creado exitosamente'\r\n                      }\r\n                      this.commit('successAdvise', success)\r\n                    }\r\n                  })\r\n                }\r\n              })\r\n              j ++;\r\n            })\r\n          })\r\n        }else{\r\n\r\n          dataRef.junt_periodo = `${data.junta.inicio}-${data.junta.fin}`;\r\n          dataRef.junt_activa = data.junta.junta_actual;\r\n          dataRef.junt_integrantes = [];\r\n\r\n          for(let i = 0; i < Object.values(data.junta.integrantes).length; i++){\r\n            dataRef.junt_integrantes[i] = [];\r\n            dataRef.junt_integrantes[i].juin_cargo = Object.values(data.junta.integrantes)[i].cargo\r\n            dataRef.junt_integrantes[i].juin_nombre = Object.values(data.junta.integrantes)[i].nombre\r\n            dataRef.junt_integrantes[i].juin_apellido = Object.values(data.junta.integrantes)[i].apellido\r\n            dataRef.junt_integrantes[i].juin_correo = Object.values(data.junta.integrantes)[i].correo\r\n            dataRef.junt_integrantes[i].juin_foto = Object.values(data.junta.integrantes)[i].image\r\n            dataRef.junt_integrantes[i].juin_activo = Object.values(data.junta.integrantes)[i].activo\r\n            dataRef.junt_integrantes[i].juin_crear = Object.values(data.junta.integrantes)[i].crear\r\n          }\r\n\r\n          pushdbRef.set(dataRef);\r\n          state.crearDBVals = false;\r\n          const success = {\r\n            0: 'successUpload',\r\n            1: 'Se ha creado exitosamente'\r\n          }\r\n          this.commit('successAdvise', success)\r\n        }\r\n      }else if(data.target === 'Servicios'){\r\n\r\n        if(Object.values(data.archivos).length !== 0){\r\n          state.dbImg = [];\r\n          state.dbImg[0] = data.servicio.image;\r\n        }\r\n\r\n        let storageRef = [];\r\n        let percentage = [];\r\n        let order = [];\r\n        let task = {};\r\n        let n = 0;\r\n\r\n        const dbRef = firebase.database().ref(`${data.target}`);\r\n        const pushdbRef = dbRef.push();\r\n\r\n        let dataRef = {\r\n          serv_id: pushdbRef.key,\r\n        }\r\n\r\n\r\n        Object.values(data.archivos).forEach(element => {\r\n          storageRef= firebase.storage().ref(`/${data.target}/${dataRef.serv_id}/${data.servicio.nombre.split(' ').join('_')}`);\r\n          task[`${element.id}`] = storageRef.put(element);\r\n        })\r\n        \r\n        if(Object.values(task).length !== 0){\r\n          Object.values(data.archivos).forEach(element => {\r\n            task[`${element.id}`].on('state_changed', snapshot => {\r\n              percentage[snapshot.task.blob_.data_.id] = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n              state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage = percentage[snapshot.task.blob_.data_.id];\r\n              if(state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage === 100 && order.length < Object.values(data.archivos).length){\r\n                order.push(snapshot.task.blob_.data_.id)\r\n              }\r\n            }, error => {\r\n              console.log(error.message);\r\n            }, () =>{\r\n\r\n              dataRef = {\r\n                serv_activo: data.servicio.activo,\r\n                serv_cierre: data.servicio.fin,\r\n                serv_contacto: data.servicio.contacto,\r\n                serv_descripcion: data.servicio.descripcion,\r\n                serv_id: pushdbRef.key,\r\n                serv_inicio: data.servicio.inicio,\r\n                serv_nombre: data.servicio.nombre,\r\n                serv_foto: [],\r\n              }\r\n\r\n              let storageRef= firebase.storage().ref(`/${data.target}/${dataRef.serv_id}/${data.servicio.nombre.split(' ').join('_')}`);\r\n              \r\n              storageRef.getDownloadURL().then(url => {\r\n                let val = order[n];\r\n                state.dbImg[val].url = url;\r\n                state.dbImg[val].nombre = `${data.servicio.nombre.split(' ').join('_')}`;\r\n                n ++;\r\n                if(n >= order.length){\r\n                  dataRef.serv_foto.nombre = state.dbImg[0].nombre;\r\n                  dataRef.serv_foto.url = state.dbImg[0].url;\r\n                  if(n >= Object.values(data.archivos).length){\r\n                    pushdbRef.set(dataRef);\r\n                    state.crearDBVals = false;\r\n                    const success = {\r\n                      0: 'successUpload',\r\n                      1: 'Se ha creado exitosamente'\r\n                    }\r\n                    this.commit('successAdvise', success)\r\n                  }\r\n                }\r\n              })\r\n            })\r\n          })\r\n        }else{\r\n          dataRef = {\r\n            serv_activo: data.servicio.activo,\r\n            serv_cierre: data.servicio.fin,\r\n            serv_contacto: data.servicio.contacto,\r\n            serv_descripcion: data.servicio.descripcion,\r\n            serv_id: pushdbRef.key,\r\n            serv_inicio: data.servicio.inicio,\r\n            serv_nombre: data.servicio.nombre,\r\n            serv_foto: data.servicio.image,\r\n          }\r\n\r\n          n++;\r\n          if(n >= Object.values(data.archivos).length){\r\n            pushdbRef.set(dataRef);\r\n            state.crearDBVals = false;\r\n            const success = {\r\n              0: 'successUpload',\r\n              1: 'Se ha creado exitosamente'\r\n            }\r\n            this.commit('successAdvise', success)\r\n          }\r\n        }\r\n      }else if(data.target === 'Gerencia'){\r\n\r\n        if(Object.values(data.archivos).length !== 0){\r\n          state.dbImg = [];\r\n          state.dbImg[0] = data.integrante.image;\r\n        }\r\n\r\n        let storageRef = [];\r\n        let percentage = [];\r\n        let order = [];\r\n        let task = {};\r\n        let n = 0;\r\n\r\n        const dbRef = firebase.database().ref(`${data.target}`);\r\n        const pushdbRef = dbRef.push();\r\n\r\n        let dataRef = {\r\n          gr_id: pushdbRef.key,\r\n        }\r\n\r\n        Object.values(data.archivos).forEach(element => {\r\n          storageRef= firebase.storage().ref(`/${data.target}/${dataRef.gr_id}/${data.integrante.cargo.split(' ').join('_')}`);\r\n          task[`${element.id}`] = storageRef.put(element);\r\n        })\r\n        \r\n        if(Object.values(task).length !== 0){\r\n          Object.values(data.archivos).forEach(element => {\r\n            task[`${element.id}`].on('state_changed', snapshot => {\r\n              percentage[snapshot.task.blob_.data_.id] = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n              state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage = percentage[snapshot.task.blob_.data_.id];\r\n              if(state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage === 100 && order.length < Object.values(data.archivos).length){\r\n                order.push(snapshot.task.blob_.data_.id)\r\n              }\r\n            }, error => {\r\n              console.log(error.message);\r\n            }, () =>{\r\n\r\n              dataRef = {\r\n                gr_correo: data.integrante.correo,\r\n                gr_nombre: data.integrante.nombre,\r\n                gr_cargo: data.integrante.cargo,\r\n                gr_id: pushdbRef.key,\r\n                gr_foto: [],\r\n              }\r\n\r\n              let storageRef= firebase.storage().ref(`/${data.target}/${dataRef.gr_id}/${data.integrante.cargo.split(' ').join('_')}`);\r\n              \r\n              storageRef.getDownloadURL().then(url => {\r\n                let val = order[n];\r\n                state.dbImg[val].url = url;\r\n                state.dbImg[val].nombre = `${data.integrante.cargo.split(' ').join('_')}`;\r\n                n ++;\r\n                if(n >= order.length){\r\n                  dataRef.gr_foto.nombre = state.dbImg[0].nombre;\r\n                  dataRef.gr_foto.url = state.dbImg[0].url;\r\n                  if(n >= Object.values(data.archivos).length){\r\n                    pushdbRef.set(dataRef);\r\n                    state.crearDBVals = false;\r\n                    const success = {\r\n                      0: 'successUpload',\r\n                      1: 'Se ha creado exitosamente'\r\n                    }\r\n                    this.commit('successAdvise', success)\r\n                  }\r\n                }\r\n              })\r\n            })\r\n          })\r\n        }else{\r\n          dataRef = {\r\n            gr_correo: data.integrante.correo,\r\n            gr_nombre: data.integrante.nombre,\r\n            gr_cargo: data.integrante.cargo,\r\n            gr_id: pushdbRef.key,\r\n            gr_foto: data.integrante.image,\r\n          }\r\n\r\n          n++;\r\n          if(n >= Object.values(data.archivos).length){\r\n            pushdbRef.set(dataRef);\r\n            state.crearDBVals = false;\r\n            const success = {\r\n              0: 'successUpload',\r\n              1: 'Se ha creado exitosamente'\r\n            }\r\n            this.commit('successAdvise', success)\r\n          }\r\n        }\r\n      }else if(data.target === 'Profesores'){\r\n        \r\n        state.dbImg = [];\r\n\r\n        if(data.archivos['archivo0'] !== undefined){\r\n          state.dbImg[0] = data.profesor.archivos.image;\r\n        }\r\n\r\n        if(data.archivos['archivo1'] !== undefined){\r\n          state.dbImg[1] = data.profesor.archivos.cv;\r\n        }\r\n\r\n        let storageRef = [];\r\n        let percentage = [];\r\n        let order = [];\r\n        let task = {};\r\n        let i = 0;\r\n        let n = 0;\r\n        let j = 0;\r\n\r\n        const dbRef = firebase.database().ref(`${data.target}`);\r\n        const pushdbRef = dbRef.push();\r\n\r\n        let dataRef = {\r\n          prof_id: pushdbRef.key,\r\n        }\r\n\r\n        Object.values(data.archivos).forEach(element => {\r\n          storageRef= firebase.storage().ref(`/${data.target}/${dataRef.prof_id}/${Object.values(data.profesor.archivos)[i].nombre}`);\r\n          task[`${element.id}`] = storageRef.put(element);\r\n          i++;\r\n        })\r\n        \r\n        if(Object.values(task).length !== 0){\r\n          Object.values(data.archivos).forEach(element => {\r\n            task[`${element.id}`].on('state_changed', snapshot => {\r\n              percentage[snapshot.task.blob_.data_.id] = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n              state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage = percentage[snapshot.task.blob_.data_.id];\r\n              if(state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage === 100 && order.length < Object.values(data.archivos).length){\r\n                order.push(snapshot.task.blob_.data_.id)\r\n              }\r\n            }, error => {\r\n              console.log(error.message);\r\n            }, () =>{\r\n\r\n              dataRef = {\r\n                comi_id: data.profesor.coid,\r\n                prof_cv: [],\r\n                prof_ci: data.profesor.ci,\r\n                prof_correo: data.profesor.correo,\r\n                prof_fechadenacimiento: data.profesor.nacimiento,\r\n                prof_foto: [],\r\n                prof_id: pushdbRef.key,\r\n                prof_nombre: data.profesor.nombre,\r\n                prof_telefonos:data.profesor.telefonos,\r\n              }\r\n              \r\n              let storageRef= firebase.storage().ref(`/${data.target}/${dataRef.prof_id}/${Object.values(data.profesor.archivos)[order[j]].nombre}`);\r\n              \r\n              storageRef.getDownloadURL().then(url => {\r\n                let val = order[n];\r\n                if(val === 0){\r\n                  state.dbImg[val].url = url;\r\n                  state.dbImg[val].nombre = `${data.profesor.id}`;\r\n                }else{\r\n                  state.dbImg[val].url = url;\r\n                  state.dbImg[val].nombre = `c_v_${data.profesor.id}`;\r\n                }\r\n                n ++;\r\n                if(n >= Object.values(data.archivos).length){\r\n                  dataRef.prof_foto.nombre = state.dbImg[0].nombre;\r\n                  dataRef.prof_foto.url = state.dbImg[0].url;\r\n                  dataRef.prof_cv.nombre = state.dbImg[1].nombre;\r\n                  dataRef.prof_cv.url = state.dbImg[1].url;\r\n\r\n                  if(n >= Object.values(data.archivos).length){\r\n                    pushdbRef.set(dataRef);\r\n                    state.crearDBVals = false;\r\n                    const success = {\r\n                      0: 'successUpload',\r\n                      1: 'Se ha creado exitosamente'\r\n                    }\r\n                    this.commit('successAdvise', success)\r\n                  }\r\n                }\r\n              })\r\n              j++;\r\n            })\r\n          })\r\n        }else{\r\n\r\n          dataRef = {\r\n            comi_id: data.profesor.coid,\r\n            prof_cv: [],\r\n            prof_ci: data.profesor.ci,\r\n            prof_correo: data.profesor.correo,\r\n            prof_fechadenacimiento: data.profesor.nacimiento,\r\n            prof_foto: [],\r\n            prof_id: pushdbRef.key,\r\n            prof_nombre: data.profesor.nombre,\r\n            prof_telefonos:data.profesor.telefonos,\r\n          }\r\n\r\n          n++;\r\n          if(n >= Object.values(data.archivos).length){\r\n            pushdbRef.set(dataRef);\r\n            state.crearDBVals = false;\r\n            const success = {\r\n              0: 'successUpload',\r\n              1: 'Se ha creado exitosamente'\r\n            }\r\n            this.commit('successAdvise', success)\r\n          }\r\n        }\r\n      }else if(data.target === 'Comites'){\r\n        \r\n        state.dbImg = [];\r\n\r\n        for(let k = 0; k < Object.values(data.comite.archivos).length; k++){\r\n          if(Object.values(data.comite.archivos)[k].id !== undefined){\r\n            state.dbImg[Object.values(data.comite.archivos)[k].id] = Object.values(data.comite.archivos)[k];\r\n          }else{\r\n            state.dbImg[k] = '';\r\n          }\r\n        }\r\n        \r\n        let storageRef = [];\r\n        let percentage = [];\r\n        let order = [];\r\n        let task = {};\r\n        let i = 0;\r\n        let n = 0;\r\n        let j = 0;\r\n\r\n        const dbRef = firebase.database().ref(`${data.target}`);\r\n        const pushdbRef = dbRef.push();\r\n\r\n        let dataRef = {\r\n          comi_id: pushdbRef.key,\r\n        }\r\n\r\n        Object.values(data.archivos).forEach(element => {\r\n          storageRef= firebase.storage().ref(`/${data.target}/${dataRef.comi_id}/${Object.values(data.comite.archivos)[element.id].nombre}`);\r\n          task[`${element.id}`] = storageRef.put(element);\r\n          i++;\r\n        })\r\n        \r\n        if(Object.values(task).length !== 0){\r\n          Object.values(data.archivos).forEach(element => {\r\n            task[`${element.id}`].on('state_changed', snapshot => {\r\n              percentage[snapshot.task.blob_.data_.id] = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n              state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage = percentage[snapshot.task.blob_.data_.id];\r\n              if(state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage === 100 && order.length < Object.values(data.archivos).length){\r\n                order.push(snapshot.task.blob_.data_.id)\r\n              }\r\n            }, error => {\r\n              console.log(error.message);\r\n            }, () =>{\r\n\r\n              dataRef = {\r\n                comi_id: pushdbRef.key,\r\n                comi_activo: data.comite.activo,\r\n                comi_comiPage: data.comite.comipage,\r\n                comi_correo: data.comite.correo,\r\n                comi_costos: data.comite.costos,\r\n                comi_descripcion: data.comite.descripcion,\r\n                comi_fechavigencia: data.comite.fechav,\r\n                comi_foto: [],\r\n                comi_int: data.comite.inthpage,\r\n                comi_integrantes: data.comite.integrantes,\r\n                comi_nombre: data.comite.nombre,\r\n                comi_normativa: [],\r\n                comi_reglamento: [],\r\n              }\r\n              \r\n              let storageRef= firebase.storage().ref(`/${data.target}/${dataRef.comi_id}/${Object.values(data.comite.archivos)[`${order[j]}`].nombre}`);\r\n              \r\n              storageRef.getDownloadURL().then(url => {\r\n                let val = order[n];\r\n                for(let m = 0; m < Object.values(data.comite.archivos).length; m++){\r\n                  if(Object.values(data.comite.archivos)[m].id !== undefined && val === Object.values(data.comite.archivos)[m].id){\r\n                    state.dbImg[val].url = url;\r\n                    state.dbImg[val].nombre = Object.values(data.comite.archivos)[m].nombre\r\n                  }\r\n                }\r\n                n ++;\r\n                if(n >= Object.values(data.archivos).length){\r\n                  if(state.dbImg[0].nombre !== undefined){\r\n                    dataRef.comi_foto = {\r\n                      nombre: state.dbImg[0].nombre,\r\n                      url: state.dbImg[0].url,\r\n                    } \r\n                  }else{\r\n                    dataRef.comi_foto = '';\r\n                  }\r\n\r\n                  if(state.dbImg[1].nombre !== undefined){\r\n                    dataRef.comi_reglamento = {\r\n                      nombre: state.dbImg[1].nombre,\r\n                      url: state.dbImg[1].url,\r\n                    }\r\n                  }else{\r\n                    dataRef.comi_reglamento = '';\r\n                  }\r\n\r\n                  if(state.dbImg[2].nombre !== undefined){\r\n                    dataRef.comi_normativa = {\r\n                      nombre: state.dbImg[2].nombre,\r\n                      url: state.dbImg[2].url,\r\n                    }\r\n                  }else{\r\n                    dataRef.comi_normativa = '';\r\n                  }\r\n\r\n                  if(n >= Object.values(data.archivos).length){\r\n                    pushdbRef.set(dataRef);\r\n                    state.crearDBVals = false;\r\n                    const success = {\r\n                      0: 'successUpload',\r\n                      1: 'Se ha creado exitosamente'\r\n                    }\r\n                    this.commit('successAdvise', success)\r\n                  }\r\n                }\r\n              })\r\n              j++;\r\n            })\r\n          })\r\n        }else{\r\n\r\n          dataRef = {\r\n            comi_id: pushdbRef.key,\r\n            comi_activo: data.comite.activo,\r\n            comi_comiPage: data.comite.comipage,\r\n            comi_correo: data.comite.correo,\r\n            comi_costos: data.comite.costos,\r\n            comi_descripcion: data.comite.descripcion,\r\n            comi_fechavigencia: data.comite.fechav,\r\n            comi_foto: data.comite.archivos.imagen,\r\n            comi_int: data.comite.inthpage,\r\n            comi_integrantes: data.comite.integrantes,\r\n            comi_nombre: data.comite.nombre,\r\n            comi_normativa: data.comite.archivos.normativa,\r\n            comi_reglamento: data.comite.archivos.reglamento,\r\n          }\r\n\r\n          n++;\r\n          if(n >= Object.values(data.archivos).length){\r\n            pushdbRef.set(dataRef);\r\n            state.crearDBVals = false;\r\n            const success = {\r\n              0: 'successUpload',\r\n              1: 'Se ha creado exitosamente'\r\n            }\r\n            this.commit('successAdvise', success)\r\n          }\r\n        }\r\n      }else if(data.target === 'Anunciantes'){\r\n        \r\n        state.dbImg = [];\r\n\r\n        for(let k = 0; k < Object.values(data.anunciante.archivos).length; k++){\r\n          if(Object.values(data.anunciante.archivos)[k].id !== undefined){\r\n            state.dbImg[Object.values(data.anunciante.archivos)[k].id] = Object.values(data.anunciante.archivos)[k];\r\n          }else{\r\n            state.dbImg[k] = '';\r\n          }\r\n        }\r\n        \r\n        let storageRef = [];\r\n        let percentage = [];\r\n        let order = [];\r\n        let task = {};\r\n        let i = 0;\r\n        let n = 0;\r\n        let j = 0;\r\n\r\n        const dbRef = firebase.database().ref(`${data.target}`);\r\n        const pushdbRef = dbRef.push();\r\n\r\n        let dataRef = {\r\n          anun_id: pushdbRef.key,\r\n        }\r\n\r\n        Object.values(data.archivos).forEach(element => {\r\n          storageRef= firebase.storage().ref(`/${data.target}/${dataRef.anun_id}/${Object.values(data.anunciante.archivos)[element.id].nombre}`);\r\n          task[`${element.id}`] = storageRef.put(element);\r\n          i++;\r\n        })\r\n        \r\n        if(Object.values(task).length !== 0){\r\n          Object.values(data.archivos).forEach(element => {\r\n            task[`${element.id}`].on('state_changed', snapshot => {\r\n              percentage[snapshot.task.blob_.data_.id] = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n              state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage = percentage[snapshot.task.blob_.data_.id];\r\n              if(state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage === 100 && order.length < Object.values(data.archivos).length){\r\n                order.push(snapshot.task.blob_.data_.id)\r\n              }\r\n            }, error => {\r\n              console.log(error.message);\r\n            }, () =>{\r\n\r\n              dataRef = {\r\n                anun_id: pushdbRef.key,\r\n                anun_url: data.anunciante.anunurl,\r\n                anun_activo: data.anunciante.activo,\r\n                anun_nombre: data.anunciante.nombre,\r\n                anun_nombrecontacto: data.anunciante.nombrecon,\r\n                anun_correo: data.anunciante.correo,\r\n                anun_essocio: {\r\n                  anun_essocio_socio: data.anunciante.essocio.socio,\r\n                  anun_essocio_accion: data.anunciante.essocio.accion,\r\n                },\r\n                anun_fechavigencia: data.anunciante.fechav,\r\n                anun_foto: [],\r\n                anun_telefonos: data.anunciante.telefonos,\r\n              }\r\n              \r\n              let storageRef= firebase.storage().ref(`/${data.target}/${dataRef.anun_id}/${Object.values(data.anunciante.archivos)[`${order[j]}`].nombre}`);\r\n              \r\n              storageRef.getDownloadURL().then(url => {\r\n                let val = order[n];\r\n                for(let m = 0; m < Object.values(data.anunciante.archivos).length; m++){\r\n                  if(Object.values(data.anunciante.archivos)[m].id !== undefined && val === Object.values(data.anunciante.archivos)[m].id){\r\n                    state.dbImg[val].url = url;\r\n                    state.dbImg[val].nombre = Object.values(data.anunciante.archivos)[m].nombre\r\n                  }\r\n                }\r\n                n ++;\r\n                if(n >= Object.values(data.archivos).length){\r\n                  if(state.dbImg[0].nombre !== undefined){\r\n                    dataRef.anun_foto = {\r\n                      nombre: state.dbImg[0].nombre,\r\n                      url: state.dbImg[0].url,\r\n                    } \r\n                  }else{\r\n                    dataRef.anun_foto = '';\r\n                  }\r\n\r\n                  if(n >= Object.values(data.archivos).length){\r\n                    pushdbRef.set(dataRef);\r\n                    state.crearDBVals = false;\r\n                    const success = {\r\n                      0: 'successUpload',\r\n                      1: 'Se ha creado exitosamente'\r\n                    }\r\n                    this.commit('successAdvise', success)\r\n                  }\r\n                }\r\n              })\r\n              j++;\r\n            })\r\n          })\r\n        }else{\r\n\r\n          dataRef = {\r\n            anun_id: pushdbRef.key,\r\n            anun_url: data.anunciante.anunurl,\r\n            anun_activo: data.anunciante.activo,\r\n            anun_nombre: data.anunciante.nombre,\r\n            anun_nombrecontacto: data.anunciante.nombrecon,\r\n            anun_correo: data.anunciante.correo,\r\n            anun_essocio: {\r\n              anun_essocio_socio: data.anunciante.essocio.socio,\r\n              anun_essocio_accion: data.anunciante.essocio.accion,\r\n            },\r\n            anun_fechavigencia: data.anunciante.fechav,\r\n            anun_foto: data.anunciante.archivos.imagen,\r\n            anun_telefonos: data.anunciante.telefonos,\r\n          }\r\n\r\n          n++;\r\n          if(n >= Object.values(data.archivos).length){\r\n            pushdbRef.set(dataRef);\r\n            state.crearDBVals = false;\r\n            const success = {\r\n              0: 'successUpload',\r\n              1: 'Se ha creado exitosamente'\r\n            }\r\n            this.commit('successAdvise', success)\r\n          }\r\n        }\r\n      }else if(data.target === 'Banners'){\r\n        \r\n        state.dbImg = [];\r\n\r\n        for(let k = 0; k < Object.values(data.banner.archivos).length; k++){\r\n          if(Object.values(data.banner.archivos)[k].id !== undefined){\r\n            state.dbImg[Object.values(data.banner.archivos)[k].id] = Object.values(data.banner.archivos)[k];\r\n          }else{\r\n            state.dbImg[k] = '';\r\n          }\r\n        }\r\n        \r\n        let storageRef = [];\r\n        let percentage = [];\r\n        let order = [];\r\n        let task = {};\r\n        let i = 0;\r\n        let n = 0;\r\n        let j = 0;\r\n\r\n        const dbRef = firebase.database().ref(`${data.target}`);\r\n        const pushdbRef = dbRef.push();\r\n\r\n        let dataRef = {\r\n          bann_id: pushdbRef.key,\r\n        }\r\n\r\n        Object.values(data.archivos).forEach(element => {\r\n          storageRef= firebase.storage().ref(`/${data.target}/${dataRef.bann_id}/${data.banner.archivos[`${data.name_archivos}${element.id}`].nombre}`);\r\n          task[`${element.id}`] = storageRef.put(element);\r\n          i++;\r\n        })\r\n        \r\n        if(Object.values(task).length !== 0){\r\n          Object.values(data.archivos).forEach(element => {\r\n            task[`${element.id}`].on('state_changed', snapshot => {\r\n              percentage[snapshot.task.blob_.data_.id] = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n              state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage = percentage[snapshot.task.blob_.data_.id];\r\n              if(state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage === 100 && order.length < Object.values(data.archivos).length){\r\n                order.push(snapshot.task.blob_.data_.id)\r\n              }\r\n            }, error => {\r\n              console.log(error.message);\r\n            }, () =>{\r\n\r\n              dataRef = {\r\n                bann_id: pushdbRef.key,\r\n                bann_activo: data.banner.activo,\r\n                bann_bannerid: data.banner.bannerid,\r\n                bann_fechaedicion: data.banner.fechaed,\r\n                bann_seccion: data.banner.seccion,\r\n                bann_slides: [],\r\n              }\r\n              \r\n              let storageRef= firebase.storage().ref(`/${data.target}/${dataRef.bann_id}/${data.banner.archivos[`${data.name_archivos}${order[j]}`].nombre}`);\r\n              \r\n              storageRef.getDownloadURL().then(url => {\r\n                let val = order[n];\r\n                for(let m = 0; m < Object.values(data.banner.archivos).length; m++){\r\n                  if(Object.values(data.banner.archivos)[m].id !== undefined && val === Object.values(data.banner.archivos)[m].id){\r\n                    state.dbImg[val].url = url;\r\n                    state.dbImg[val].nombre = Object.values(data.banner.archivos)[m].nombre\r\n                  }\r\n                }\r\n                n ++;\r\n                if(n >= Object.values(data.archivos).length){\r\n\r\n                  for(let i = 1; i <= Object.values(state.dbImg).length; i++){\r\n                    dataRef.bann_slides[`slides${i}`] = {\r\n                      nombre: state.dbImg[i].nombre,\r\n                      url: state.dbImg[i].url,\r\n                      info: data.banner.archivos[`slides${i}`].info,\r\n                    }\r\n                  }\r\n\r\n                  if(n >= Object.values(data.archivos).length){\r\n                    pushdbRef.set(dataRef);\r\n                    state.crearDBVals = false;\r\n                    const success = {\r\n                      0: 'successUpload',\r\n                      1: 'Se ha creado exitosamente'\r\n                    }\r\n                    this.commit('successAdvise', success)\r\n                  }\r\n                }\r\n              })\r\n              j++;\r\n            })\r\n          })\r\n        }else{\r\n\r\n          dataRef = {\r\n            bann_id: pushdbRef.key,\r\n            bann_activo: data.banner.activo,\r\n            bann_bannerid: data.banner.bannerid,\r\n            bann_fechaedicion: data.banner.fechaed,\r\n            bann_seccion: data.banner.seccion,\r\n          }\r\n\r\n          n++;\r\n          if(n >= Object.values(data.archivos).length){\r\n            pushdbRef.set(dataRef);\r\n            state.crearDBVals = false;\r\n            const success = {\r\n              0: 'successUpload',\r\n              1: 'Se ha creado exitosamente'\r\n            }\r\n            this.commit('successAdvise', success)\r\n          }\r\n        }\r\n      }else if(data.target === 'Noticias'){\r\n        \r\n        state.dbImg = [];\r\n\r\n        for(let k = 0; k < Object.values(data.noticia.archivos).length; k++){\r\n          if(Object.values(data.noticia.archivos)[k].id !== undefined){\r\n            state.dbImg[Object.values(data.noticia.archivos)[k].id] = Object.values(data.noticia.archivos)[k];\r\n          }else{\r\n            state.dbImg[k] = '';\r\n          }\r\n        }\r\n        \r\n        let storageRef = [];\r\n        let percentage = [];\r\n        let order = [];\r\n        let task = {};\r\n        let i = 0;\r\n        let n = 0;\r\n        let j = 0;\r\n\r\n        const dbRef = firebase.database().ref(`${data.target}`);\r\n        const pushdbRef = dbRef.push();\r\n\r\n        let dataRef = {\r\n          noti_id: pushdbRef.key,\r\n        }\r\n\r\n        Object.values(data.archivos).forEach(element => {\r\n          storageRef= firebase.storage().ref(`/${data.target}/${dataRef.noti_id}/${data.noticia.archivos[`${data.name_archivos}${element.id}`].nombre}`);\r\n          task[`${element.id}`] = storageRef.put(element);\r\n          i++;\r\n        })\r\n        \r\n        if(Object.values(task).length !== 0){\r\n          Object.values(data.archivos).forEach(element => {\r\n            task[`${element.id}`].on('state_changed', snapshot => {\r\n              percentage[snapshot.task.blob_.data_.id] = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n              state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage = percentage[snapshot.task.blob_.data_.id];\r\n              if(state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage === 100 && order.length < Object.values(data.archivos).length){\r\n                order.push(snapshot.task.blob_.data_.id)\r\n              }\r\n            }, error => {\r\n              console.log(error.message);\r\n            }, () =>{\r\n\r\n              dataRef = {\r\n                noti_id: pushdbRef.key,\r\n                noti_titulo: data.noticia.titulo,\r\n                noti_info: data.noticia.info,\r\n                noti_fecha: data.noticia.fechaed,\r\n                noti_prev: data.noticia.infocort,\r\n                noti_publicar: data.noticia.activo,\r\n                noti_seccion: data.noticia.seccion,\r\n                noti_fotos: [],\r\n              }\r\n              \r\n              let storageRef= firebase.storage().ref(`/${data.target}/${dataRef.noti_id}/${data.noticia.archivos[`${data.name_archivos}${element.id}`].nombre}`);\r\n              \r\n              storageRef.getDownloadURL().then(url => {\r\n                let val = order[n];\r\n                for(let m = 0; m < Object.values(data.noticia.archivos).length; m++){\r\n                  if(Object.values(data.noticia.archivos)[m].id !== undefined && val === Object.values(data.noticia.archivos)[m].id){\r\n                    state.dbImg[val].url = url;\r\n                    state.dbImg[val].nombre = Object.values(data.noticia.archivos)[m].nombre\r\n                  }\r\n                }\r\n                n ++;\r\n                if(n >= Object.values(data.archivos).length){\r\n\r\n                  for(let i = 0; i < Object.values(state.dbImg).length; i++){\r\n                    if(state.dbImg[i].nombre !== undefined){\r\n                      dataRef.noti_fotos[`imagen${i}`] = {\r\n                        nombre: state.dbImg[i].nombre,\r\n                        url: state.dbImg[i].url,\r\n                      }\r\n                    }else{\r\n                      dataRef.noti_fotos[`imagen${i}`] = '';\r\n                    }\r\n                  }\r\n\r\n                  if(n >= Object.values(data.archivos).length){\r\n                    pushdbRef.set(dataRef);\r\n                    state.crearDBVals = false;\r\n                    const success = {\r\n                      0: 'successUpload',\r\n                      1: 'Se ha creado exitosamente'\r\n                    }\r\n                    this.commit('successAdvise', success)\r\n                  }\r\n                }\r\n              })\r\n              j++;\r\n            })\r\n          })\r\n        }else{\r\n\r\n          dataRef = {\r\n            noti_id: pushdbRef.key,\r\n            noti_titulo: data.noticia.titulo,\r\n            noti_info: data.noticia.info,\r\n            noti_fecha: data.noticia.fechaed,\r\n            noti_prev: data.noticia.infocort,\r\n            noti_publicar: data.noticia.activo,\r\n            noti_seccion: data.noticia.seccion,\r\n            noti_fotos: data.noticia.archivos,\r\n          }\r\n\r\n          n++;\r\n          if(n >= Object.values(data.archivos).length){\r\n            pushdbRef.set(dataRef);\r\n            state.crearDBVals = false;\r\n            const success = {\r\n              0: 'successUpload',\r\n              1: 'Se ha creado exitosamente'\r\n            }\r\n            this.commit('successAdvise', success)\r\n          }\r\n        }\r\n      }\r\n    },\r\n    updateDB(state, data){\r\n      state.crearDBVals = true;\r\n      if(data.target === 'Juntas'){\r\n        \r\n        if(Object.values(data.archivos).length !== 0){\r\n          for(let i = 0; i < Object.values(data.junta.integrantes).length; i++){\r\n            state.dbImg[i] = [];\r\n            state.dbImg[i] = Object.values(data.junta.integrantes)[i].image;\r\n          }\r\n        }\r\n\r\n        let storageRef = [];\r\n        let percentage = [];\r\n        let order = [];\r\n        let task = {};\r\n        let i = 0;\r\n        let j = 0;\r\n        let n = 0;\r\n\r\n        Object.values(data.archivos).forEach(element => {\r\n          storageRef= firebase.storage().ref(`/${data.target}/${data.junta.id}/${data.junta.integrantes[`${element.id}`].cargo.split(' ').join('_')}`);\r\n          task[`${element.id}`] = storageRef.put(element);\r\n        })\r\n        \r\n        if(Object.values(task).length !== 0){\r\n          Object.values(data.archivos).forEach(element => {\r\n            task[`${element.id}`].on('state_changed', snapshot => {\r\n              percentage[snapshot.task.blob_.data_.id] = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n              state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage = percentage[snapshot.task.blob_.data_.id];\r\n              if(state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage === 100 && order.length < Object.values(data.archivos).length){\r\n                order.push(snapshot.task.blob_.data_.id)\r\n              }\r\n            }, error => {\r\n              console.log(error.message);\r\n            }, () =>{\r\n  \r\n              let dataRef = [];\r\n              dataRef.junt_periodo = `${data.junta.inicio}-${data.junta.fin}`;\r\n              dataRef.junt_id = data.junta.id;\r\n              dataRef.junt_activa = data.junta.junta_actual;\r\n              dataRef.junt_integrantes = [];\r\n  \r\n              for(let i = 0; i < Object.values(data.junta.integrantes).length; i++){\r\n                dataRef.junt_integrantes[i] = [];\r\n                dataRef.junt_integrantes[i].juin_cargo = Object.values(data.junta.integrantes)[i].cargo\r\n                dataRef.junt_integrantes[i].juin_nombre = Object.values(data.junta.integrantes)[i].nombre\r\n                dataRef.junt_integrantes[i].juin_apellido = Object.values(data.junta.integrantes)[i].apellido\r\n                dataRef.junt_integrantes[i].juin_correo = Object.values(data.junta.integrantes)[i].correo\r\n                dataRef.junt_integrantes[i].juin_foto = []\r\n                dataRef.junt_integrantes[i].juin_activo = Object.values(data.junta.integrantes)[i].activo\r\n                dataRef.junt_integrantes[i].juin_crear = Object.values(data.junta.integrantes)[i].crear\r\n              }\r\n  \r\n              let storageRef= firebase.storage().ref(`/${data.target}/${data.junta.inicio}/${data.junta.integrantes[`${order[j]}`].cargo.split(' ').join('_')}`);\r\n              \r\n              storageRef.getDownloadURL().then(url => {\r\n                let val = order[n];\r\n                state.dbImg[val].url = url;\r\n                state.dbImg[val].nombre = `${data.junta.integrantes[`${order[n]}`].cargo.split(' ').join('_')}`;\r\n                n ++;\r\n                if(n >= order.length){\r\n                  i = 0;\r\n                  Object.values(dataRef.junt_integrantes).forEach(element => {\r\n                    if(state.dbImg[i].nombre !== undefined && state.dbImg[i].url !== undefined){\r\n                      element.juin_foto.nombre = state.dbImg[i].nombre;\r\n                      element.juin_foto.url = state.dbImg[i].url;\r\n                    }else{\r\n                      element.juin_foto = \"\";\r\n                    }\r\n                    i ++;\r\n                    if(n >= Object.values(data.archivos).length){\r\n                      const dbRef = firebase.database().ref(`${data.target}`);\r\n                      dbRef.child(`${data.junta.id}`).set(dataRef);\r\n                      state.crearDBVals = false;\r\n                      const success = {\r\n                        0: 'successUpload',\r\n                        1: 'Se ha creado exitosamente'\r\n                      }\r\n                      this.commit('successAdvise', success)\r\n                    }\r\n                  })\r\n                }\r\n              })\r\n              j ++;\r\n            })\r\n          })\r\n        }else{\r\n          let dataRef = [];\r\n          dataRef.junt_periodo = `${data.junta.inicio}-${data.junta.fin}`;\r\n          dataRef.junt_id = data.junta.id;\r\n          dataRef.junt_activa = data.junta.junta_actual;\r\n          dataRef.junt_integrantes = [];\r\n\r\n          for(let i = 0; i < Object.values(data.junta.integrantes).length; i++){\r\n            dataRef.junt_integrantes[i] = [];\r\n            dataRef.junt_integrantes[i].juin_cargo = Object.values(data.junta.integrantes)[i].cargo\r\n            dataRef.junt_integrantes[i].juin_nombre = Object.values(data.junta.integrantes)[i].nombre\r\n            dataRef.junt_integrantes[i].juin_apellido = Object.values(data.junta.integrantes)[i].apellido\r\n            dataRef.junt_integrantes[i].juin_correo = Object.values(data.junta.integrantes)[i].correo\r\n            dataRef.junt_integrantes[i].juin_foto = Object.values(data.junta.integrantes)[i].image\r\n            dataRef.junt_integrantes[i].juin_activo = Object.values(data.junta.integrantes)[i].activo\r\n            dataRef.junt_integrantes[i].juin_crear = Object.values(data.junta.integrantes)[i].crear\r\n          }\r\n\r\n          const dbRef = firebase.database().ref(`${data.target}`);\r\n          dbRef.child(`${data.junta.id}`).set(dataRef);\r\n          state.crearDBVals = false;\r\n          const success = {\r\n            0: 'successUpload',\r\n            1: 'Se ha creado exitosamente'\r\n          }\r\n          this.commit('successAdvise', success)\r\n        }\r\n      }else if(data.target === 'Servicios'){\r\n\r\n        if(Object.values(data.archivos).length !== 0){\r\n          state.dbImg = [];\r\n          state.dbImg[0] = data.servicio.image;\r\n        }\r\n\r\n        let storageRef = [];\r\n        let percentage = [];\r\n        let order = [];\r\n        let task = {};\r\n        let n = 0;\r\n\r\n        Object.values(data.archivos).forEach(element => {\r\n          storageRef= firebase.storage().ref(`/${data.target}/${data.servicio.id}/${data.servicio.nombre.split(' ').join('_')}`);\r\n          task[`${element.id}`] = storageRef.put(element);\r\n        })\r\n        \r\n        if(Object.values(task).length !== 0){\r\n          Object.values(data.archivos).forEach(element => {\r\n            task[`${element.id}`].on('state_changed', snapshot => {\r\n              percentage[snapshot.task.blob_.data_.id] = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n              state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage = percentage[snapshot.task.blob_.data_.id];\r\n              if(state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage === 100 && order.length < Object.values(data.archivos).length){\r\n                order.push(snapshot.task.blob_.data_.id)\r\n              }\r\n            }, error => {\r\n              console.log(error.message);\r\n            }, () =>{\r\n\r\n              let dataRef = {\r\n                serv_activo: data.servicio.activo,\r\n                serv_cierre: data.servicio.fin,\r\n                serv_contacto: data.servicio.contacto,\r\n                serv_descripcion: data.servicio.descripcion,\r\n                serv_id: data.servicio.id,\r\n                serv_inicio: data.servicio.inicio,\r\n                serv_nombre: data.servicio.nombre,\r\n                serv_foto: [],\r\n              }\r\n\r\n              let storageRef= firebase.storage().ref(`/${data.target}/${data.servicio.id}/${data.servicio.nombre.split(' ').join('_')}`);\r\n              \r\n              storageRef.getDownloadURL().then(url => {\r\n                let val = order[n];\r\n                state.dbImg[val].url = url;\r\n                state.dbImg[val].nombre = `${data.servicio.nombre.split(' ').join('_')}`;\r\n                n ++;\r\n                if(n >= order.length){\r\n                  dataRef.serv_foto.nombre = state.dbImg[0].nombre;\r\n                  dataRef.serv_foto.url = state.dbImg[0].url;\r\n                  if(n >= Object.values(data.archivos).length){\r\n                    const dbRef = firebase.database().ref(`${data.target}`);\r\n                    dbRef.child(`${data.servicio.id}`).set(dataRef);\r\n                    state.crearDBVals = false;\r\n                    const success = {\r\n                      0: 'successUpload',\r\n                      1: 'Se ha creado exitosamente'\r\n                    }\r\n                    this.commit('successAdvise', success)\r\n                  }\r\n                }\r\n              })\r\n            })\r\n          })\r\n        }else{\r\n          let dataRef = {\r\n            serv_activo: data.servicio.activo,\r\n            serv_cierre: data.servicio.fin,\r\n            serv_contacto: data.servicio.contacto,\r\n            serv_descripcion: data.servicio.descripcion,\r\n            serv_id: data.servicio.id,\r\n            serv_inicio: data.servicio.inicio,\r\n            serv_nombre: data.servicio.nombre,\r\n            serv_foto: data.servicio.image,\r\n          }\r\n\r\n          n++;\r\n          if(n >= Object.values(data.archivos).length){\r\n            const dbRef = firebase.database().ref(`${data.target}`);\r\n            dbRef.child(`${data.servicio.id}`).set(dataRef);\r\n            state.crearDBVals = false;\r\n            const success = {\r\n              0: 'successUpload',\r\n              1: 'Se ha creado exitosamente'\r\n            }\r\n            this.commit('successAdvise', success)\r\n          }\r\n        }\r\n      }else if(data.target === 'Gerencia'){\r\n\r\n        if(Object.values(data.archivos).length !== 0){\r\n          state.dbImg = [];\r\n          state.dbImg[0] = data.integrante.image;\r\n        }\r\n\r\n        let storageRef = [];\r\n        let percentage = [];\r\n        let order = [];\r\n        let task = {};\r\n        let n = 0;\r\n\r\n        Object.values(data.archivos).forEach(element => {\r\n          storageRef= firebase.storage().ref(`/${data.target}/${data.integrante.id}/${data.integrante.cargo.split(' ').join('_')}`);\r\n          task[`${element.id}`] = storageRef.put(element);\r\n        })\r\n        \r\n        if(Object.values(task).length !== 0){\r\n          Object.values(data.archivos).forEach(element => {\r\n            task[`${element.id}`].on('state_changed', snapshot => {\r\n              percentage[snapshot.task.blob_.data_.id] = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n              state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage = percentage[snapshot.task.blob_.data_.id];\r\n              if(state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage === 100 && order.length < Object.values(data.archivos).length){\r\n                order.push(snapshot.task.blob_.data_.id)\r\n              }\r\n            }, error => {\r\n              console.log(error.message);\r\n            }, () =>{\r\n\r\n              let dataRef = {\r\n                gr_correo: data.integrante.correo,\r\n                gr_nombre: data.integrante.nombre,\r\n                gr_cargo: data.integrante.cargo,\r\n                gr_id: data.integrante.id,\r\n                gr_foto: [],\r\n              }\r\n\r\n              let storageRef= firebase.storage().ref(`/imagenes/${data.target}/${data.integrante.id}/${data.integrante.cargo.split(' ').join('_')}`);\r\n              \r\n              storageRef.getDownloadURL().then(url => {\r\n                let val = order[n];\r\n                state.dbImg[val].url = url;\r\n                state.dbImg[val].nombre = `${data.integrante.cargo.split(' ').join('_')}`;\r\n                n ++;\r\n                if(n >= order.length){\r\n                  dataRef.gr_foto.nombre = state.dbImg[0].nombre;\r\n                  dataRef.gr_foto.url = state.dbImg[0].url;\r\n                  if(n >= Object.values(data.archivos).length){\r\n                    const dbRef = firebase.database().ref(`${data.target}`);\r\n                    dbRef.child(`${data.integrante.id}`).set(dataRef);\r\n                    state.crearDBVals = false;\r\n                    const success = {\r\n                      0: 'successUpload',\r\n                      1: 'Se ha creado exitosamente'\r\n                    }\r\n                    this.commit('successAdvise', success)\r\n                  }\r\n                }\r\n              })\r\n            })\r\n          })\r\n        }else{\r\n          let dataRef = {\r\n            gr_correo: data.integrante.correo,\r\n            gr_nombre: data.integrante.nombre,\r\n            gr_cargo: data.integrante.cargo,\r\n            gr_id: data.integrante.id,\r\n            gr_foto: data.integrante.image,\r\n          }\r\n\r\n          n++;\r\n          if(n >= Object.values(data.archivos).length){\r\n            const dbRef = firebase.database().ref(`${data.target}`);\r\n            dbRef.child(`${data.integrante.id}`).set(dataRef);\r\n            state.crearDBVals = false;\r\n            const success = {\r\n              0: 'successUpload',\r\n              1: 'Se ha creado exitosamente'\r\n            }\r\n            this.commit('successAdvise', success)\r\n          }\r\n        }\r\n      }else if(data.target === 'Profesores'){\r\n        \r\n        state.dbImg = [];\r\n\r\n        if(data.archivos['archivo0'] !== undefined){\r\n          state.dbImg[0] = data.profesor.archivos.image;\r\n        }\r\n\r\n        if(data.archivos['archivo1'] !== undefined){\r\n          state.dbImg[1] = data.profesor.archivos.cv;\r\n        }\r\n\r\n        let storageRef = [];\r\n        let percentage = [];\r\n        let order = [];\r\n        let task = {};\r\n        let i = 0;\r\n        let n = 0;\r\n        let j = 0;\r\n\r\n        Object.values(data.archivos).forEach(element => {\r\n          storageRef= firebase.storage().ref(`/${data.target}/${data.profesor.id}/${Object.values(data.profesor.archivos)[i].nombre}`);\r\n          task[`${element.id}`] = storageRef.put(element);\r\n          i++;\r\n        })\r\n        \r\n        if(Object.values(task).length !== 0){\r\n          Object.values(data.archivos).forEach(element => {\r\n            task[`${element.id}`].on('state_changed', snapshot => {\r\n              percentage[snapshot.task.blob_.data_.id] = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n              state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage = percentage[snapshot.task.blob_.data_.id];\r\n              if(state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage === 100 && order.length < Object.values(data.archivos).length){\r\n                order.push(snapshot.task.blob_.data_.id)\r\n              }\r\n            }, error => {\r\n              console.log(error.message);\r\n            }, () =>{\r\n\r\n              let dataRef = {\r\n                comi_id: data.profesor.coid,\r\n                prof_cv: [],\r\n                prof_ci: data.profesor.ci,\r\n                prof_correo: data.profesor.correo,\r\n                prof_fechadenacimiento: data.profesor.nacimiento,\r\n                prof_foto: [],\r\n                prof_id: data.profesor.id,\r\n                prof_nombre: data.profesor.nombre,\r\n                prof_telefonos:data.profesor.telefonos,\r\n              }\r\n              \r\n              let storageRef= firebase.storage().ref(`/${data.target}/${data.profesor.id}/${Object.values(data.profesor.archivos)[order[j]].nombre}`);\r\n              \r\n              storageRef.getDownloadURL().then(url => {\r\n                let val = order[n];\r\n                if(val === 0){\r\n                  state.dbImg[val].url = url;\r\n                  state.dbImg[val].nombre = `${data.profesor.id}`;\r\n                }else{\r\n                  state.dbImg[val].url = url;\r\n                  state.dbImg[val].nombre = `c_v_${data.profesor.id}`;\r\n                }\r\n                n ++;\r\n                if(n >= Object.values(data.archivos).length){\r\n                  dataRef.prof_foto.nombre = state.dbImg[0].nombre;\r\n                  dataRef.prof_foto.url = state.dbImg[0].url;\r\n                  dataRef.prof_cv.nombre = state.dbImg[1].nombre;\r\n                  dataRef.prof_cv.url = state.dbImg[1].url;\r\n\r\n                  if(n >= Object.values(data.archivos).length){\r\n                    const dbRef = firebase.database().ref(`${data.target}`);\r\n                    dbRef.child(`${data.profesor.id}`).set(dataRef);\r\n                    state.crearDBVals = false;\r\n                    const success = {\r\n                      0: 'successUpload',\r\n                      1: 'Se ha creado exitosamente'\r\n                    }\r\n                    this.commit('successAdvise', success)\r\n                  }\r\n                }\r\n              })\r\n              j++;\r\n            })\r\n          })\r\n        }else{\r\n\r\n          let dataRef = {\r\n            comi_id: data.profesor.coid,\r\n            prof_cv: [],\r\n            prof_ci: data.profesor.ci,\r\n            prof_correo: data.profesor.correo,\r\n            prof_fechadenacimiento: data.profesor.nacimiento,\r\n            prof_foto: [],\r\n            prof_id: data.profesor.id,\r\n            prof_nombre: data.profesor.nombre,\r\n            prof_telefonos:data.profesor.telefonos,\r\n          }\r\n\r\n          n++;\r\n          if(n >= Object.values(data.archivos).length){\r\n            const dbRef = firebase.database().ref(`${data.target}`);\r\n            dbRef.child(`${data.profesor.id}`).set(dataRef);\r\n            state.crearDBVals = false;\r\n            const success = {\r\n              0: 'successUpload',\r\n              1: 'Se ha creado exitosamente'\r\n            }\r\n            this.commit('successAdvise', success)\r\n          }\r\n        }\r\n      }else if(data.target === 'Comites'){\r\n        \r\n        state.dbImg = [];\r\n\r\n        for(let k = 0; k < Object.values(data.comite.archivos).length; k++){\r\n          if(Object.values(data.comite.archivos)[k].id !== undefined){\r\n            state.dbImg[Object.values(data.comite.archivos)[k].id] = Object.values(data.comite.archivos)[k];\r\n          }else{\r\n            state.dbImg[k] = '';\r\n          }\r\n        }\r\n        \r\n        let storageRef = [];\r\n        let percentage = [];\r\n        let order = [];\r\n        let task = {};\r\n        let i = 0;\r\n        let n = 0;\r\n        let j = 0;\r\n\r\n        Object.values(data.archivos).forEach(element => {\r\n          storageRef= firebase.storage().ref(`/${data.target}/${data.comite.id}/${Object.values(data.comite.archivos)[element.id].nombre}`);\r\n          task[`${element.id}`] = storageRef.put(element);\r\n          i++;\r\n        })\r\n        \r\n        if(Object.values(task).length !== 0){\r\n          Object.values(data.archivos).forEach(element => {\r\n            task[`${element.id}`].on('state_changed', snapshot => {\r\n              percentage[snapshot.task.blob_.data_.id] = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n              state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage = percentage[snapshot.task.blob_.data_.id];\r\n              if(state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage === 100 && order.length < Object.values(data.archivos).length){\r\n                order.push(snapshot.task.blob_.data_.id)\r\n              }\r\n            }, error => {\r\n              console.log(error.message);\r\n            }, () =>{\r\n\r\n              let dataRef = {\r\n                comi_id: data.comite.id,\r\n                comi_activo: data.comite.activo,\r\n                comi_comiPage: data.comite.comipage,\r\n                comi_correo: data.comite.correo,\r\n                comi_costos: data.comite.costos,\r\n                comi_descripcion: data.comite.descripcion,\r\n                comi_fechavigencia: data.comite.fechav,\r\n                comi_foto: [],\r\n                comi_int: data.comite.inthpage,\r\n                comi_integrantes: data.comite.integrantes,\r\n                comi_nombre: data.comite.nombre,\r\n                comi_normativa: [],\r\n                comi_reglamento: [],\r\n              }\r\n              \r\n              let storageRef= firebase.storage().ref(`/${data.target}/${data.comite.id}/${Object.values(data.comite.archivos)[`${order[j]}`].nombre}`);\r\n              _\r\n              storageRef.getDownloadURL().then(url => {\r\n                let val = order[n];\r\n                for(let m = 0; m < Object.values(data.comite.archivos).length; m++){\r\n                  if(Object.values(data.comite.archivos)[m].id !== undefined && val === Object.values(data.comite.archivos)[m].id){\r\n                    state.dbImg[val].url = url;\r\n                    state.dbImg[val].nombre = Object.values(data.comite.archivos)[m].nombre\r\n                  }\r\n                }\r\n                n ++;\r\n                if(n >= Object.values(data.archivos).length){\r\n                  if(state.dbImg[0].nombre !== undefined){\r\n                    dataRef.comi_foto = {\r\n                      nombre: state.dbImg[0].nombre,\r\n                      url: state.dbImg[0].url,\r\n                    } \r\n                  }else{\r\n                    dataRef.comi_foto = '';\r\n                  }\r\n\r\n                  if(state.dbImg[1].nombre !== undefined){\r\n                    dataRef.comi_reglamento = {\r\n                      nombre: state.dbImg[1].nombre,\r\n                      url: state.dbImg[1].url,\r\n                    }\r\n                  }else{\r\n                    dataRef.comi_reglamento = '';\r\n                  }\r\n\r\n                  if(state.dbImg[2].nombre !== undefined){\r\n                    dataRef.comi_normativa = {\r\n                      nombre: state.dbImg[2].nombre,\r\n                      url: state.dbImg[2].url,\r\n                    }\r\n                  }else{\r\n                    dataRef.comi_normativa = '';\r\n                  }\r\n\r\n                  if(n >= Object.values(data.archivos).length){\r\n                    const dbRef = firebase.database().ref(`${data.target}/${data.comite.id}`);\r\n                    dbRef.set(dataRef);\r\n                    state.crearDBVals = false;\r\n                    const success = {\r\n                      0: 'successUpload',\r\n                      1: 'Se ha creado exitosamente'\r\n                    }\r\n                    this.commit('successAdvise', success)\r\n                  }\r\n                }\r\n              })\r\n              j++;\r\n            })\r\n          })\r\n        }else{\r\n\r\n          let dataRef = {\r\n            comi_id: data.comite.id,\r\n            comi_activo: data.comite.activo,\r\n            comi_comiPage: data.comite.comipage,\r\n            comi_correo: data.comite.correo,\r\n            comi_costos: data.comite.costos,\r\n            comi_descripcion: data.comite.descripcion,\r\n            comi_fechavigencia: data.comite.fechav,\r\n            comi_foto: data.comite.archivos.imagen,\r\n            comi_int: data.comite.inthpage,\r\n            comi_integrantes: data.comite.integrantes,\r\n            comi_nombre: data.comite.nombre,\r\n            comi_normativa: data.comite.archivos.normativa,\r\n            comi_reglamento: data.comite.archivos.reglamento,\r\n          }\r\n\r\n          n++;\r\n          if(n >= Object.values(data.archivos).length){\r\n            const dbRef = firebase.database().ref(`${data.target}/${data.comite.id}`);\r\n            dbRef.set(dataRef);\r\n            state.crearDBVals = false;\r\n            const success = {\r\n              0: 'successUpload',\r\n              1: 'Se ha creado exitosamente'\r\n            }\r\n            this.commit('successAdvise', success)\r\n          }\r\n        }\r\n      }else if(data.target === 'Anunciantes'){\r\n        \r\n        state.dbImg = [];\r\n\r\n        for(let k = 0; k < Object.values(data.anunciante.archivos).length; k++){\r\n          if(Object.values(data.anunciante.archivos)[k].id !== undefined){\r\n            state.dbImg[Object.values(data.anunciante.archivos)[k].id] = Object.values(data.anunciante.archivos)[k];\r\n          }else{\r\n            state.dbImg[k] = '';\r\n          }\r\n        }\r\n        \r\n        let storageRef = [];\r\n        let percentage = [];\r\n        let order = [];\r\n        let task = {};\r\n        let i = 0;\r\n        let n = 0;\r\n        let j = 0;\r\n\r\n        Object.values(data.archivos).forEach(element => {\r\n          storageRef= firebase.storage().ref(`/${data.target}/${data.anunciante.id}/${Object.values(data.anunciante.archivos)[element.id].nombre}`);\r\n          task[`${element.id}`] = storageRef.put(element);\r\n          i++;\r\n        })\r\n        \r\n        if(Object.values(task).length !== 0){\r\n          Object.values(data.archivos).forEach(element => {\r\n            task[`${element.id}`].on('state_changed', snapshot => {\r\n              percentage[snapshot.task.blob_.data_.id] = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n              state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage = percentage[snapshot.task.blob_.data_.id];\r\n              if(state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage === 100 && order.length < Object.values(data.archivos).length){\r\n                order.push(snapshot.task.blob_.data_.id)\r\n              }\r\n            }, error => {\r\n              console.log(error.message);\r\n            }, () =>{\r\n\r\n              let dataRef = {\r\n                anun_id: data.anunciante.id,\r\n                anun_url: data.anunciante.anunurl,\r\n                anun_activo: data.anunciante.activo,\r\n                anun_nombre: data.anunciante.nombre,\r\n                anun_nombrecontacto: data.anunciante.nombrecon,\r\n                anun_correo: data.anunciante.correo,\r\n                anun_essocio: {\r\n                  anun_essocio_socio: data.anunciante.essocio.socio,\r\n                  anun_essocio_accion: data.anunciante.essocio.accion,\r\n                },\r\n                anun_fechavigencia: data.anunciante.fechav,\r\n                anun_foto: [],\r\n                anun_telefonos: data.anunciante.telefonos,\r\n              }\r\n              \r\n              let storageRef= firebase.storage().ref(`/${data.target}/${data.anunciante.id}/${Object.values(data.anunciante.archivos)[`${order[j]}`].nombre}`);\r\n              _\r\n              storageRef.getDownloadURL().then(url => {\r\n                let val = order[n];\r\n                for(let m = 0; m < Object.values(data.anunciante.archivos).length; m++){\r\n                  if(Object.values(data.anunciante.archivos)[m].id !== undefined && val === Object.values(data.anunciante.archivos)[m].id){\r\n                    state.dbImg[val].url = url;\r\n                    state.dbImg[val].nombre = Object.values(data.anunciante.archivos)[m].nombre\r\n                  }\r\n                }\r\n                n ++;\r\n                if(n >= Object.values(data.archivos).length){\r\n                  if(state.dbImg[0].nombre !== undefined){\r\n                    dataRef.anun_foto = {\r\n                      nombre: state.dbImg[0].nombre,\r\n                      url: state.dbImg[0].url,\r\n                    } \r\n                  }else{\r\n                    dataRef.anun_foto = '';\r\n                  }\r\n\r\n                  if(n >= Object.values(data.archivos).length){\r\n                    const dbRef = firebase.database().ref(`${data.target}/${data.anunciante.id}`);\r\n                    dbRef.set(dataRef);\r\n                    state.crearDBVals = false;\r\n                    const success = {\r\n                      0: 'successUpload',\r\n                      1: 'Se ha creado exitosamente'\r\n                    }\r\n                    this.commit('successAdvise', success)\r\n                  }\r\n                }\r\n              })\r\n              j++;\r\n            })\r\n          })\r\n        }else{\r\n\r\n          let dataRef = {\r\n            anun_id: data.anunciante.id,\r\n            anun_url: data.anunciante.anunurl,\r\n            anun_activo: data.anunciante.activo,\r\n            anun_nombre: data.anunciante.nombre,\r\n            anun_nombrecontacto: data.anunciante.nombrecon,\r\n            anun_correo: data.anunciante.correo,\r\n            anun_essocio: {\r\n              anun_essocio_socio: data.anunciante.essocio.socio,\r\n              anun_essocio_accion: data.anunciante.essocio.accion,\r\n            },\r\n            anun_fechavigencia: data.anunciante.fechav,\r\n            anun_foto: data.anunciante.archivos.imagen,\r\n            anun_telefonos: data.anunciante.telefonos,\r\n          }\r\n\r\n          n++;\r\n          if(n >= Object.values(data.archivos).length){\r\n            const dbRef = firebase.database().ref(`${data.target}/${data.anunciante.id}`);\r\n            dbRef.set(dataRef);\r\n            state.crearDBVals = false;\r\n            const success = {\r\n              0: 'successUpload',\r\n              1: 'Se ha creado exitosamente'\r\n            }\r\n            this.commit('successAdvise', success)\r\n          }\r\n        }\r\n      }else if(data.target === 'Banners'){\r\n        \r\n        state.dbImg = [];\r\n\r\n        for(let k = 0; k < Object.values(data.banner.archivos).length; k++){\r\n          if(Object.values(data.banner.archivos)[k].id !== undefined){\r\n            state.dbImg[Object.values(data.banner.archivos)[k].id] = Object.values(data.banner.archivos)[k];\r\n          }else{\r\n            state.dbImg[k] = '';\r\n          }\r\n        }\r\n        \r\n        let storageRef = [];\r\n        let percentage = [];\r\n        let order = [];\r\n        let task = {};\r\n        let i = 0;\r\n        let n = 0;\r\n        let j = 0;\r\n\r\n        Object.values(data.archivos).forEach(element => {\r\n          storageRef= firebase.storage().ref(`/${data.target}/${data.banner.id}/${data.banner.archivos[`${data.name_archivos}${element.id}`].nombre}`);\r\n          task[`${element.id}`] = storageRef.put(element);\r\n          i++;\r\n        })\r\n        \r\n        if(Object.values(task).length !== 0){\r\n          Object.values(data.archivos).forEach(element => {\r\n            task[`${element.id}`].on('state_changed', snapshot => {\r\n              percentage[snapshot.task.blob_.data_.id] = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n              state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage = percentage[snapshot.task.blob_.data_.id];\r\n              if(state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage === 100 && order.length < Object.values(data.archivos).length){\r\n                order.push(snapshot.task.blob_.data_.id)\r\n              }\r\n            }, error => {\r\n              console.log(error.message);\r\n            }, () =>{\r\n\r\n              let dataRef = {\r\n                bann_id: data.banner.id,\r\n                bann_activo: data.banner.activo,\r\n                bann_bannerid: data.banner.bannerid,\r\n                bann_fechaedicion: data.banner.fechaed,\r\n                bann_seccion: data.banner.seccion,\r\n                bann_slides: [],\r\n              }\r\n              \r\n              let storageRef= firebase.storage().ref(`/${data.target}/${data.banner.id}/${data.banner.archivos[`${data.name_archivos}${element.id}`].nombre}`);\r\n\r\n              storageRef.getDownloadURL().then(url => {\r\n                let val = order[n];\r\n                for(let m = 0; m < Object.values(data.banner.archivos).length; m++){\r\n                  if(Object.values(data.banner.archivos)[m].id !== undefined && val === Object.values(data.banner.archivos)[m].id){\r\n                    state.dbImg[val].url = url;\r\n                    state.dbImg[val].nombre = Object.values(data.banner.archivos)[m].nombre\r\n                  }\r\n                }\r\n                n ++;\r\n                if(n >= Object.values(data.archivos).length){\r\n\r\n                  for(let i = 1; i <= Object.values(data.banner.archivos).length; i++){\r\n                    if(data.banner.archivos[`slides${i}`].id !== undefined){\r\n                      dataRef.bann_slides[`slides${i}`] = {\r\n                        nombre: state.dbImg[i].nombre,\r\n                        url: state.dbImg[i].url,\r\n                        info: data.banner.archivos[`slides${i}`].info,\r\n                      } \r\n                    }else{\r\n                      dataRef.bann_slides[`slides${i}`] = data.banner.archivos[`slides${i}`];\r\n                    }\r\n                  }\r\n\r\n                  if(n >= Object.values(data.archivos).length){\r\n                    const dbRef = firebase.database().ref(`${data.target}/${data.banner.id}`);\r\n                    dbRef.set(dataRef);\r\n                    state.crearDBVals = false;\r\n                    const success = {\r\n                      0: 'successUpload',\r\n                      1: 'Se ha creado exitosamente'\r\n                    }\r\n                    this.commit('successAdvise', success)\r\n                  }\r\n                }\r\n              })\r\n              j++;\r\n            })\r\n          })\r\n        }else{\r\n\r\n          let dataRef = {\r\n            bann_id: data.banner.id,\r\n            bann_activo: data.banner.activo,\r\n            bann_bannerid: data.banner.bannerid,\r\n            bann_fechaedicion: data.banner.fechaed,\r\n            bann_seccion: data.banner.seccion,\r\n            bann_slides: data.banner.archivos,\r\n          }\r\n\r\n          n++;\r\n          if(n >= Object.values(data.archivos).length){\r\n            const dbRef = firebase.database().ref(`${data.target}/${data.banner.id}`);\r\n            dbRef.set(dataRef);\r\n            state.crearDBVals = false;\r\n            const success = {\r\n              0: 'successUpload',\r\n              1: 'Se ha creado exitosamente'\r\n            }\r\n            this.commit('successAdvise', success)\r\n          }\r\n        }\r\n      }else if(data.target === 'Noticias'){\r\n        \r\n        state.dbImg = [];\r\n\r\n        for(let k = 0; k < Object.values(data.noticia.archivos).length; k++){\r\n          if(Object.values(data.noticia.archivos)[k].id !== undefined){\r\n            state.dbImg[Object.values(data.noticia.archivos)[k].id] = Object.values(data.noticia.archivos)[k];\r\n          }else{\r\n            state.dbImg[k] = '';\r\n          }\r\n        }\r\n        \r\n        let storageRef = [];\r\n        let percentage = [];\r\n        let order = [];\r\n        let task = {};\r\n        let i = 0;\r\n        let n = 0;\r\n        let j = 0;\r\n\r\n        Object.values(data.archivos).forEach(element => {\r\n          storageRef= firebase.storage().ref(`/${data.target}/${data.noticia.id}/${data.noticia.archivos[`${data.name_archivos}${element.id}`].nombre}`);\r\n          task[`${element.id}`] = storageRef.put(element);\r\n          i++;\r\n        })\r\n        \r\n        if(Object.values(task).length !== 0){\r\n          Object.values(data.archivos).forEach(element => {\r\n            task[`${element.id}`].on('state_changed', snapshot => {\r\n              percentage[snapshot.task.blob_.data_.id] = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n              state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage = percentage[snapshot.task.blob_.data_.id];\r\n              if(state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage === 100 && order.length < Object.values(data.archivos).length){\r\n                order.push(snapshot.task.blob_.data_.id)\r\n              }\r\n            }, error => {\r\n              console.log(error.message);\r\n            }, () =>{\r\n\r\n              let dataRef = {\r\n                noti_id: data.noticia.id,\r\n                noti_titulo: data.noticia.titulo,\r\n                noti_info: data.noticia.info,\r\n                noti_fecha: data.noticia.fechaed,\r\n                noti_prev: data.noticia.infocort,\r\n                noti_publicar: data.noticia.activo,\r\n                noti_seccion: data.noticia.seccion,\r\n                noti_fotos: [],\r\n              }\r\n              \r\n              let storageRef= firebase.storage().ref(`/${data.target}/${data.noticia.id}/${data.noticia.archivos[`${data.name_archivos}${element.id}`].nombre}`);\r\n\r\n              storageRef.getDownloadURL().then(url => {\r\n                let val = order[n];\r\n                for(let m = 0; m < Object.values(data.noticia.archivos).length; m++){\r\n                  if(Object.values(data.noticia.archivos)[m].id !== undefined && val === Object.values(data.noticia.archivos)[m].id){\r\n                    state.dbImg[val].url = url;\r\n                    state.dbImg[val].nombre = Object.values(data.noticia.archivos)[m].nombre\r\n                  }\r\n                }\r\n                n ++;\r\n                if(n >= Object.values(data.archivos).length){\r\n\r\n                  for(let i = 0; i < Object.values(state.dbImg).length; i++){\r\n                    if(state.dbImg[i].nombre !== undefined){\r\n                      dataRef.noti_fotos[`imagen${i}`] = {\r\n                        nombre: state.dbImg[i].nombre,\r\n                        url: state.dbImg[i].url,\r\n                      }\r\n                    }else{\r\n                      dataRef.noti_fotos[`imagen${i}`] = '';\r\n                    }\r\n                  }\r\n\r\n                  if(n >= Object.values(data.archivos).length){\r\n                    const dbRef = firebase.database().ref(`${data.target}/${data.noticia.id}`);\r\n                    dbRef.set(dataRef);\r\n                    state.crearDBVals = false;\r\n                    const success = {\r\n                      0: 'successUpload',\r\n                      1: 'Se ha creado exitosamente'\r\n                    }\r\n                    this.commit('successAdvise', success)\r\n                  }\r\n                }\r\n              })\r\n              j++;\r\n            })\r\n          })\r\n        }else{\r\n\r\n          let dataRef = {\r\n            noti_id: data.noticia.id,\r\n            noti_titulo: data.noticia.titulo,\r\n            noti_info: data.noticia.info,\r\n            noti_fecha: data.noticia.fechaed,\r\n            noti_prev: data.noticia.infocort,\r\n            noti_publicar: data.noticia.activo,\r\n            noti_seccion: data.noticia.seccion,\r\n            noti_fotos: data.noticia.archivos,\r\n          }\r\n\r\n          n++;\r\n          if(n >= Object.values(data.archivos).length){\r\n            const dbRef = firebase.database().ref(`${data.target}/${data.noticia.id}`);\r\n            dbRef.set(dataRef);\r\n            state.crearDBVals = false;\r\n            const success = {\r\n              0: 'successUpload',\r\n              1: 'Se ha creado exitosamente'\r\n            }\r\n            this.commit('successAdvise', success)\r\n          }\r\n        }\r\n      }else if(data.target === 'Miscellaneous'){\r\n        \r\n        state.dbImg = [];\r\n\r\n        if(data.miscellaneous.logo.id !== undefined){\r\n          state.dbImg[data.miscellaneous.logo.id] = data.miscellaneous.logo;\r\n        }\r\n        \r\n        let storageRef = [];\r\n        let percentage = [];\r\n        let order = [];\r\n        let task = {};\r\n        let i = 0;\r\n        let n = 0;\r\n        let j = 0;\r\n\r\n        Object.values(data.archivos).forEach(element => {\r\n          storageRef= firebase.storage().ref(`/${data.target}/${data.miscellaneous.id}/${data.miscellaneous.logo.nombre}`);\r\n          task[`${element.id}`] = storageRef.put(element);\r\n          i++;\r\n        })\r\n        \r\n        if(Object.values(task).length !== 0){\r\n          Object.values(data.archivos).forEach(element => {\r\n            task[`${element.id}`].on('state_changed', snapshot => {\r\n              percentage[snapshot.task.blob_.data_.id] = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n              state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage = percentage[snapshot.task.blob_.data_.id];\r\n              if(state.dbImg[snapshot.task.blob_.data_.id].uploadPercentage === 100 && order.length < Object.values(data.archivos).length){\r\n                order.push(snapshot.task.blob_.data_.id)\r\n              }\r\n            }, error => {\r\n              console.log(error.message);\r\n            }, () =>{\r\n\r\n              let dataRef = {\r\n                misc_id: data.miscellaneous.id,\r\n                misc_telefonos: data.miscellaneous.telefonos,\r\n                misc_correos: data.miscellaneous.correos,\r\n                misc_direccion: data.miscellaneous.direccion,\r\n                misc_redes: data.miscellaneous.redes,\r\n                misc_logo: [],\r\n              }\r\n              \r\n              let storageRef= firebase.storage().ref(`/${data.target}/${data.miscellaneous.id}/${data.miscellaneous.logo.nombre}`);\r\n\r\n              storageRef.getDownloadURL().then(url => {\r\n                let val = order[n];\r\n                if(data.miscellaneous.logo.id !== undefined && val === data.miscellaneous.logo.id){\r\n                  state.dbImg[val].url = url;\r\n                  state.dbImg[val].nombre = data.miscellaneous.logo.nombre\r\n                }\r\n                n ++;\r\n                if(n >= Object.values(data.archivos).length){\r\n\r\n                  if(state.dbImg[data.miscellaneous.logo.id].nombre !== undefined){\r\n                    dataRef.misc_logo = {\r\n                      nombre: state.dbImg[data.miscellaneous.logo.id].nombre,\r\n                      url: state.dbImg[data.miscellaneous.logo.id].url,\r\n                    }\r\n                  }else{\r\n                    dataRef.misc_logo = '';\r\n                  }\r\n\r\n                  if(n >= Object.values(data.archivos).length){\r\n                    const dbRef = firebase.database().ref(`${data.target}/${data.miscellaneous.id}`);\r\n                    dbRef.set(dataRef);\r\n                    state.crearDBVals = false;\r\n                    const success = {\r\n                      0: 'successUpload',\r\n                      1: 'Se ha creado exitosamente'\r\n                    }\r\n                    this.commit('successAdvise', success)\r\n                  }\r\n                }\r\n              })\r\n              j++;\r\n            })\r\n          })\r\n        }else{\r\n\r\n          let dataRef = {\r\n            misc_id: data.miscellaneous.id,\r\n              misc_telefonos: data.miscellaneous.telefonos,\r\n              misc_correos: data.miscellaneous.correos,\r\n              misc_direccion: data.miscellaneous.direccion,\r\n              misc_redes: data.miscellaneous.redes,\r\n              misc_logo: data.miscellaneous.logo,\r\n          }\r\n\r\n          n++;\r\n          if(n >= Object.values(data.archivos).length){\r\n            const dbRef = firebase.database().ref(`${data.target}/${data.miscellaneous.id}`);\r\n            dbRef.set(dataRef);\r\n            state.crearDBVals = false;\r\n            const success = {\r\n              0: 'successUpload',\r\n              1: 'Se ha creado exitosamente'\r\n            }\r\n            this.commit('successAdvise', success)\r\n          }\r\n        }\r\n      }\r\n    },\r\n    resetDBValues(state, value){\r\n      if(value === undefined){\r\n        state.successUpload = null;\r\n        state.deletingVal = null;\r\n        state.dbImg = [];\r\n      }else if(state.dbImg[`${value}`] !== undefined){\r\n        state.dbImg[`${value}`] = [];\r\n      }\r\n    },\r\n    falseCargarDB(state){\r\n      state.cargarDB = false;\r\n    },\r\n  },\r\n  actions: {\r\n    getData: async function({commit}, val){\r\n      let tryAgain = true;\r\n      while(tryAgain){\r\n        try{\r\n          tryAgain = false;\r\n          const data = await fetch(\"https://web-database-66842.firebaseio.com/.json\");\r\n          const dbWeb = await data.json();\r\n          const value = {\r\n            0: dbWeb,\r\n            1: val,\r\n          }\r\n          commit('dataWeb', value)\r\n        }catch(err){\r\n          setTimeout(() => {\r\n            tryAgain = true;\r\n          }, 10000);\r\n        }\r\n      }\r\n    },\r\n  },\r\n  modules: {\r\n  },\r\n  getters: {\r\n    userUpdate: state => {\r\n      return state.user;\r\n    },\r\n  }\r\n})\r\n"]}]}